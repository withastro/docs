---
layout: ~/layouts/TutorialLayout.astro
title: Build a Feature - responsive navigation menu
setup: |
  import Badge from '~/components/Badge.astro';
  import Checklist from '~/components/Checklist.astro';
  import Goals from '~/components/tutorial/Goals.astro';
  import MultipleChoice from '~/components/tutorial/MultipleChoice.astro';
  import Option from '~/components/tutorial/Option.astro';
---
Since your site will be viewed on different devices, let's create a page navigation that can respond to multiple screen sizes!

<Goals>
  - created a responsive Header for your site
  - written a `<script>` to allow your site visitors to open and close the navigation menu
  - refactored your JavaScript to a `.js` file
</Goals>


## Header Component

1. Create a new Header component. Import and use your existing `Navigation.astro` component inside a `<nav>` element which is inside a `<header>` element.

    <details>
    <summary>Show me the code!</summary>

    Create a file named `Header.astro` in `src/components/`
     ```astro title="src/components/Header.astro"
    ---
    import Navigation from '../components/Navigation.astro';
    ---
    <header>
      <nav>
        <Navigation />
      </nav>
    <header>
    ```

    </details>



## Hamburger Component

Create a `<Hamburger />` component to open and close your mobile menu.

1. Create a file named `Hamburger.astro` in `src/components/`
  

2. Copy the following code into your component. This will represent your 3-line "hamburger" menu to open and close your navigation links on mobile. (You will add the new CSS styles to `global.css` later.)

    ```astro title="src/components/Hamburger.astro"
    --- 
    ---
    <div class="hamburger">
      <span class="line"></span>
      <span class="line"></span>
      <span class="line"></span>
    </div>
    ```

    3. Place this new `<Hamburger />` component just before your `<Navigation />` component in `Header.astro`. 

    <details>
    <summary>Show me the code!</summary>

    ```astro title="src/components/Header.astro" ins={2,7}
    ---
    import Hamburger from '../components/Hamburger.astro';
    import Navigation from '../components/Navigation.astro';
    ---
    <header>
      <nav>
        <Hamburger />
        <Navigation />
      </nav>
    <header>
    ```
    </details>

## Navigation Component

Update `Navigation.astro` with the a CSS class to control your navigation links.

1. Wrap the existing navigation links in a `<div> ` with the class `nav-links`.

    <details>
    <summary>Show me the code!</summary>

    ```astro title="src/components/Navigation.astro" ins={3,7}
    ---
    ---
    <div class="nav-links">
      <a href="/">Home</a>
      <a href="/about">About</a>
      <a href="/blog">Blog</a>
    <div>
    ```
    </details>

## Update layout component 

1. In `BaseLayout.astro`, replace your existing `<Navigation/>` component with your new header.

    <details>
    <summary>Show me the code!</summary>

    ```astro title="src/components/BaseLayout.astro" ins={3,16} del={2,15}
    ---
    import Navigation from '../components/Navigation.astro';
    import Header from '../components/Header.astro';
    import Footer from '../components/Footer.astro';
    import '../styles/global.css';
    const { title } = Astro.props
    ---
    <html lang = "en">
        <head>
            <meta charset="utf-8"/>
            <meta name="viewport" content="width=device-width" />
            <title>Astro</title>
        </head>
        <body>
            <Navigation />
            <Header />
            <h1>{title}</h1>
            <slot />        
            <Footer />
        </body>
    </html>
    ```
    </details>


2. Check your browser preview and verify that your header is displayed on every page. It won't look different yet, but if you inspect your preview using dev tools, you will see that you now have elements like `<header>` and `<nav>` around your navigation links.

## CSS

1. Copy the CSS styles below into `global.css`. These styles:

    - create lines for the hamburger menu
    - style and position the navigation links for mobile
    - include an `expanded` class that can be toggled to display or hide the links on mobile
    - use a `@media` query to define different styles for larger screen sizes

    :::tip[mobile-first design]
    Start by defining what should happen on small screen sizes first! Smaller screen sizes require simpler layouts. Then, adjust your styles to accommodate larger devices. If you design the complicated case first, then you have to work to try to make it simple again.
    :::

    ```css
    // src/styles/global.css
    /* nav styles */
    .nav {
      align-items: center;
      padding-top: 20px;
    }

    .hamburger {
      padding-right: 20px;
      cursor: pointer;
    }

    .hamburger .line {
      display: block;
      width: 40px;
      height: 5px;
      margin-bottom: 10px;
      background-color: #ff9776;
    }

    .nav-links {
      width: 100%;
      top: 5rem;
      left: 48px;
      background-color: #ff9776;
      display: none;
      margin: 0;
    }

    .nav-links a {
      display: block;
      text-align: center;
      padding: 10px 0;
      text-decoration: none;
      font-size: 1.2rem;
      font-weight: bold;
      text-transform: uppercase;
    }

    .nav-links a:hover, a:focus {
      background-color: #ff9776;
    }

    .expanded {
      display: unset;
    }

    @media screen and (min-width: 636px) {
      .nav-links {
        margin-left: 5em;
        display: block;
        position: static;
        width: auto;
        background: none;
      }

      .nav-links a {
        display: inline-block;
        padding: 15px 20px;
      }

      .hamburger {
        display: none;
      }
    }
    ```

Resize your window and look for different styles being applied at different screen widths. Your header is now **responsive** to screen size through the use of `@media` queries.

## Adding Interactivity with JavaScript

Your header is not yet **interactive** because it can't respond to user input, like clicking on the hamburger menu to show or hide the navigation links. 

Adding a `<script>` tag provides client-side JavaScript to "listen" for a user event and then respond accordingly.

1. Add the following `<script>` tag to `BaseLayout.astro`, just before the closing `</body>` tag.

    ```astro title="src/layouts/BaseLayout.astro" ins={1-5}
      <script>
        document.querySelector('.hamburger').addEventListener('click', () => {
          document.querySelector('.nav-links').classList.toggle('expanded');
        });
      </script>
    </body>
    ```

2. Check your browser preview again at various sizes, and verify that you have a working navigation menu that is both responsive to screen size and responds to user input.

### Importing a `.js` file

Instead of writing your JavaScript directly in your component, you move the contents of your `<script>` tag into its own `.js` file in your project.


1. Create `src/scripts/menu.js` (you will have to create a new `/scripts/` folder) and move your JavaScript into it.

    ```js title="src/scripts/menu.js"
    document.querySelector('.hamburger').addEventListener('click', () => {
      document.querySelector('.nav-links').classList.toggle('expanded');
    });
    ```

2. Replace the contents of the `<script>` tag in `BaseLayout.astro` with the following file import:

    ```astro title="src/layouts/BaseLayout.astro" ins={6} del={2-4}
     <script>
      document.querySelector('.hamburger').addEventListener('click', () => {
        document.querySelector('.nav-links').classList.toggle('expanded');
      });

      import "../scripts/menu.js";
      </script>
    </body>
    ```

3. Check your browser preview again and verify that the menu toggle still works. 


:::note[takeaway]
You had previously used some JavaScript to build parts of your site:

- mapping through a list of skills on the About page
- conditionally displaying HTML elements
- returning information from your Markdown files
- creating page routes dynamically

Those commands are all executed at build time to create static HTML for your site, and then the code is "thrown away." 

**The JavaScript in a `<script>` tag is sent to the browser**, and is available to run, based on user interactions like refreshing a page or toggling an input.
:::

## Before you go

### Test your knowledge

Fill in the blanks with the following terms:  **code fences**, **build-time**, **written or imported**, **browser** 

 Astro uses JavaScript first at || **build-time** || to create your site (e.g. to build dynamic routes, to map over arrays of data to display lists, to fetch data and to define variables). Then, Astro can optionally send JavaScript to the || **browser** || (also known as client-side JavaScript) which allows users to interact with your website and change parts of your built site.

In Astro, JavaScript that is only meant to build your site is written between the || **code fences** || or in HTML templating. It is run on a server (e.g. Netlify), and then discarded once your site is published. JavaScript that is meant to control interactive elements on your site is || **written or imported** || between opening and closing `<script>` tags.

### Checklist for moving on

<Checklist key="nav">
- [ ] I can add client-side interactivity on my site by writing JavaScript within a `<script>` tag.
- [ ] I can write JavaScript in a `.js` file elsewhere within my project `src`, and import it into a `<script>` tag.
</Checklist>

### Resources

- [Component-based Design](https://www.droptica.com/blog/component-based-design/) <Badge>external</Badge>

- [Semantic HTML Tags](https://www.dofactory.com/html/semantics) <Badge>external</Badge>

- [Mobile-first Design](https://www.mobileapps.com/blog/mobile-first-design) <Badge>external</Badge>
