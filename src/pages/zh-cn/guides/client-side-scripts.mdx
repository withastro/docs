---
title: å¤„ç†è„šæœ¬å’Œäº‹ä»¶
description: å¦‚ä½•ä½¿ç”¨æµè§ˆå™¨ JavaScript API å°†å®¢æˆ·ç«¯äº¤äº’ç•Œé¢æ·»åŠ åˆ° Astro ç»„ä»¶
layout: ~/layouts/MainLayout.astro
---

ä½ å¯ä»¥[ä¸ä½¿ç”¨ä¸€ä¸ª UI æ¡†æ¶](/zh-CN/core-concepts/framework-components/)ï¼ˆæ¯”å¦‚ Reactï¼ŒSvelteï¼ŒVueï¼‰ï¼Œä½¿ç”¨æ ‡å‡†çš„ HTML `<script>` æ ‡ç­¾ä¸ºä½ çš„ Astro ç»„ä»¶æ·»åŠ äº¤äº’æ€§ã€‚è¿™å…è®¸ä½ å‘é€ JavaScript åˆ°æµè§ˆå™¨ï¼Œå¹¶ä¸”ä¸º Astro ç»„ä»¶æ·»åŠ å„ç§åŠŸèƒ½ã€‚

## åœ¨ Astro ä¸­ä½¿ç”¨ `<script>`

åœ¨ `.astro` æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ª `<script>` æ ‡ç­¾æ¥æ·»åŠ å®¢æˆ·ç«¯ JavaScriptã€‚

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°† `<Hello />` ç»„ä»¶æ·»åŠ åˆ°ä¸€ä¸ªé¡µé¢ä¼šå‘ä½ çš„æµè§ˆå™¨æ§åˆ¶å°è¾“å‡ºä¸€æ¡æ¶ˆæ¯ã€‚

```astro title="src/components/Hello.astro"
<h1>ä½ å¥½ï¼Œä¸–ç•Œï¼</h1>

<script>
  console.log('ä½ å¥½ï¼Œæµè§ˆå™¨æ§åˆ¶å°ï¼');
</script>
```

### è„šæœ¬æ†ç»‘

Astro é»˜è®¤å¤„ç† `<script>` æ ‡ç­¾ã€‚

- ä»»ä½•å€’å…¥ä¼šè¢«æ†ç»‘ï¼Œè¿™å…è®¸ä½ å¯¼å…¥æœ¬åœ°æ–‡ä»¶æˆ–è€… Node æ¨¡å—ã€‚
- å¤„ç†è¿‡çš„è„šæœ¬ä¼šè¢«æ³¨å°„åˆ°ä½ çš„é¡µé¢çš„ `<head>`ï¼ŒåŒæ—¶æ·»åŠ [`type="module"`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules)ã€‚
- å®Œå…¨æ”¯æŒ TypeScriptï¼ŒåŒ…æ‹¬å¯¼å…¥ TypeScript æ–‡ä»¶ã€‚
- å¦‚æœä½ çš„ç»„ä»¶åœ¨ä¸€ä¸ªé¡µé¢ä¸Šè¢«ç”¨åˆ°äº†å¤šæ¬¡ï¼Œè„šæœ¬åªä¼šæœ‰ä¸€ä¸ªã€‚

```astro title="src/components/Example.astro"
<script>
  // ä¼šå¤„ç†ï¼ä¼šæ†ç»‘ï¼æ”¯æŒ TypeScriptï¼
  // ä¹Ÿå¯ä»¥å¯¼å…¥æœ¬åœ°è„šæœ¬å’Œ Node æ¨¡å—ã€‚
</script>
```

å¦‚æœä¸æƒ³è¦æ†ç»‘è„šæœ¬ï¼Œä½ å¯ä»¥ä½¿ç”¨ `is:inline` æŒ‡ä»¤ã€‚

```astro title="src/components/InlineScript.astro" "is:inline"
<script is:inline>
  // å°†ä¼šè¢«ç›´æ¥æ’å…¥ HTMLï¼Œä¸ä¼šæœ‰ä»»ä½•å˜åŒ–ï¼
  // æœ¬åœ°å¯¼å…¥å¹¶ä¸ä¼šè¢«è§£æï¼Œä¹Ÿä¸ä¼šç”Ÿæ•ˆã€‚
  // å¦‚æœç»„ä»¶è¢«å¤šæ¬¡ä½¿ç”¨ï¼Œè„šæœ¬ä¼šå‡ºç°å¤šæ¬¡ã€‚
</script>
```

:::note
æ·»åŠ  `type="module"` æˆ–é™¤ `src` ä¹‹å¤–çš„ä»»ä½•å±æ€§åˆ° `<script>` æ ‡ç­¾å°†ç¦ç”¨ Astro çš„é»˜è®¤æ†ç»‘è¡Œä¸ºï¼Œå°†æ ‡ç­¾è§†ä¸ºå…·æœ‰ `is:inline` æŒ‡ä»¤ã€‚
:::

ğŸ“š è¯·å‚é˜…æˆ‘ä»¬çš„[æŒ‡ä»¤å‚è€ƒ](/zh-CN/reference/directives-reference/#è„šæœ¬å’Œæ ·å¼æŒ‡ä»¤)é¡µé¢ä»¥è·å–æœ‰å…³ `<script>` æ ‡ç­¾ä¸Šå¯ç”¨æŒ‡ä»¤çš„æ›´å¤šä¿¡æ¯ã€‚

### è„šæœ¬åŠ è½½

æ‚¨å¯èƒ½å¸Œæœ›å°†è„šæœ¬ç¼–å†™ä¸ºå•ç‹¬çš„ `.js`/`.ts` æ–‡ä»¶ï¼Œæˆ–è€…éœ€è¦å¼•ç”¨å¦ä¸€å°æœåŠ¡å™¨ä¸Šçš„å¤–éƒ¨è„šæœ¬ã€‚ æ‚¨å¯ä»¥é€šè¿‡åœ¨ `<script>` æ ‡ç­¾çš„ `src` å±æ€§ä¸­å¼•ç”¨å®ƒä»¬æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚

#### å¯¼å…¥æœ¬åœ°è„šæœ¬

**ä½•æ—¶ä½¿ç”¨**ï¼šå¦‚æœæ‚¨çš„è„šæœ¬ä½äº `src/`ã€‚

Astro å°†æŒ‰ç…§å…¶[è„šæœ¬æ†ç»‘è§„åˆ™](#è„šæœ¬æ†ç»‘)ä¸ºæ‚¨æ„å»ºã€ä¼˜åŒ–å¹¶å°†è¿™äº›è„šæœ¬æ·»åŠ åˆ°é¡µé¢ä¸­ã€‚

```astro title="src/components/LocalScripts.astro"
<!-- `src/scripts/local.js` è„šæœ¬çš„ç›¸å¯¹è·¯å¾„ -->
<script src="../scripts/local.js"></script>

<!-- ä¹Ÿé€‚ç”¨äºæœ¬åœ° TypeScript æ–‡ä»¶ -->
<script src="./script-with-types.ts"></script>
```

#### åŠ è½½å¤–éƒ¨è„šæœ¬

**ä½•æ—¶ä½¿ç”¨ï¼š** å¦‚æœæ‚¨çš„ JavaScript æ–‡ä»¶ä½äº `public/` æˆ– CDN ä¸Šã€‚

To load scripts outside of your project's `src/` folder, include the `is:inline` directive. This approach skips the JavaScript processing, bundling, and optimizations that are provided by Astro when you import scripts as described above.
è¦åŠ è½½åœ¨é¡¹ç›®çš„ `src/` æ–‡ä»¶å¤¹ä¹‹å¤–çš„è„šæœ¬ï¼Œè¯·ä½¿ç”¨ `is:inline` æŒ‡ä»¤ã€‚å½“æ‚¨å¦‚ä¸Šæ‰€è¿°å¯¼å…¥è„šæœ¬æ—¶ï¼Œæ­¤æ–¹æ³•ä¼šè·³è¿‡ Astro æä¾›çš„ JavaScript å¤„ç†ã€æ†ç»‘å’Œä¼˜åŒ–ã€‚

```astro title="src/components/ExternalScripts.astro" "is:inline"
<!-- `public/my-script.js` è„šæœ¬çš„ç»å¯¹è·¯å¾„ -->
<script is:inline src="/my-script.js"></script>

<!-- è¿œç¨‹æœåŠ¡å™¨ä¸Šè„šæœ¬çš„å®Œæ•´ URL -->
<script is:inline src="https://my-analytics.com/script.js"></script>
```

## å¸¸è§è„šæœ¬æ¨¡å¼

### å¤„ç† `onclick` å’Œå…¶ä»–äº‹ä»¶

Some UI frameworks use custom syntax for event handling like `onClick={...}` (React/Preact) or `@click="..."` (Vue). Astro follows standard HTML more closely and does not use custom syntax for events.

Instead, you can use [`addEventListener`](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener) in a `<script>` tag to handle user interactions.

ä¸€äº› UI æ¡†æ¶ä½¿ç”¨è‡ªå®šä¹‰è¯­æ³•æ¥å¤„ç†äº‹ä»¶ï¼Œä¾‹å¦‚ `onClick={...}` (React/Preact) æˆ– `@click="..."` (Vue)ã€‚Astro æ›´ä¸¥æ ¼åœ°éµå¾ªæ ‡å‡† HTMLï¼Œå¹¶ä¸”ä¸å¯¹äº‹ä»¶ä½¿ç”¨è‡ªå®šä¹‰è¯­æ³•ã€‚

ç›¸åï¼Œæ‚¨å¯ä»¥åœ¨ `<script>` æ ‡ç­¾ä¸­ä½¿ç”¨ [`addEventListener`](https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener) æ¥å¤„ç†ç”¨æˆ·äº¤äº’ã€‚

```astro title="src/components/AlertButton.astro"
<button class="alert">Click me!</button>

<script>
  // åœ¨é¡µé¢ä¸Šæ‰¾åˆ°æ‰€æœ‰å¸¦æœ‰ `alert` ç±»çš„æŒ‰é’®ã€‚
  const buttons = document.querySelectorAll('button.alert');

  // å¤„ç†æ¯ä¸ªæŒ‰é’®ä¸Šçš„ç‚¹å‡»äº‹ä»¶ã€‚
  buttons.forEach((button) => {
    button.addEventListener('click', () => {
      alert('æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼');
    });
  });
</script>
```

:::note
å¦‚æœæ‚¨åœ¨ä¸€ä¸ªé¡µé¢ä¸Šæœ‰å¤šä¸ª `<AlertButton />` ç»„ä»¶ï¼ŒAstro å°†ä¸ä¼šå¤šæ¬¡è¿è¡Œè¯¥è„šæœ¬ã€‚ è„šæœ¬æ˜¯æ†ç»‘åœ¨ä¸€èµ·çš„ï¼Œæ¯é¡µåªåŒ…å«ä¸€æ¬¡ã€‚ ä½¿ç”¨ querySelectorAll ç¡®ä¿æ­¤è„šæœ¬å°†äº‹ä»¶ä¾¦å¬å™¨é™„åŠ åˆ°é¡µé¢ä¸Šæ‰¾åˆ°çš„å…·æœ‰ alert ç±»çš„æ¯ä¸ªæŒ‰é’®ã€‚
:::

### å…·æœ‰è‡ªå®šä¹‰å…ƒç´ çš„ Web ç»„ä»¶

æ‚¨å¯ä»¥ä½¿ç”¨ Web ç»„ä»¶æ ‡å‡†åˆ›å»ºå…·æœ‰è‡ªå®šä¹‰è¡Œä¸ºçš„ HTML å…ƒç´ ã€‚åœ¨ `.astro` ç»„ä»¶ä¸­å®šä¹‰ [è‡ªå®šä¹‰å…ƒç´ ](https://developer.mozilla.org/zh-CN/docs/Web/Web_Components/Using_custom_elements) å…è®¸æ‚¨æ„å»ºäº¤äº’å¼ç»„ä»¶è€Œæ— éœ€ UI æ¡†æ¶åº“ã€‚

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ–°çš„ `<astro-heart>` HTML å…ƒç´ ï¼Œç”¨äºè·Ÿè¸ªæ‚¨ç‚¹å‡»å–œæ¬¢æŒ‰é’®çš„æ¬¡æ•°å¹¶ä½¿ç”¨æœ€æ–°è®¡æ•°æ›´æ–° `<span>`ã€‚

```astro title="src/components/AstroHeart.astro"
<!-- å°†æŒ‰é’®åŒ…è£…åœ¨æˆ‘ä»¬çš„è‡ªå®šä¹‰å…ƒç´ â€œastro-heartâ€ä¸­ã€‚ -->
<astro-heart>
  <button aria-label="Heart">ğŸ’œ</button> Ã— <span>0</span>
</astro-heart>

<script>
  // ä¸ºæˆ‘ä»¬çš„æ–° HTML è‡ªå®šä¹‰å…ƒç´ å®šä¹‰è¡Œä¸ºã€‚
  class AstroHeart extends HTMLElement {
    constructor() {
			super();
      let count = 0;

      const heartButton = this.querySelector('button');
      const countSpan = this.querySelector('span');

      // æ¯æ¬¡å•å‡»æŒ‰é’®æ—¶ï¼Œæ›´æ–°è®¡æ•°ã€‚
			heartButton.addEventListener('click', () => {
        count++;
        countSpan.textContent = count;
      });
		}
  }

  // å‘Šè¯‰æµè§ˆå™¨å°†æˆ‘ä»¬çš„ AstroHeart ç±»ç”¨äº <astro-heart> å…ƒç´ ã€‚
  customElements.define('astro-heart', AstroHeart);
</script>
```

åœ¨è¿™é‡Œä½¿ç”¨è‡ªå®šä¹‰å…ƒç´ æœ‰ä¸¤ä¸ªä¼˜ç‚¹ï¼š

1. é™¤äº†ä½¿ç”¨ `document.querySelector()` æœç´¢æ•´ä¸ªé¡µé¢ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `this.querySelector()` ï¼Œå®ƒåªåœ¨å½“å‰è‡ªå®šä¹‰å…ƒç´ å®ä¾‹ä¸­æœç´¢ã€‚è¿™ä½¿å¾—ä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªç»„ä»¶å®ä¾‹çš„å­å®ä¾‹å˜å¾—æ›´å®¹æ˜“ã€‚

2. è™½ç„¶ `<script>` åªè¿è¡Œä¸€æ¬¡ï¼Œä½†æµè§ˆå™¨æ¯æ¬¡åœ¨é¡µé¢ä¸Šæ‰¾åˆ° `<astro-heart>` æ—¶éƒ½ä¼šè¿è¡Œæˆ‘ä»¬è‡ªå®šä¹‰å…ƒç´ çš„ `constructor()` æ–¹æ³•ã€‚ è¿™æ„å‘³ç€æ‚¨å¯ä»¥å®‰å…¨åœ°ä¸€æ¬¡ä¸ºä¸€ä¸ªç»„ä»¶ç¼–å†™ä»£ç ï¼Œå³ä½¿æ‚¨æ‰“ç®—åœ¨ä¸€ä¸ªé¡µé¢ä¸Šå¤šæ¬¡ä½¿ç”¨è¯¥ç»„ä»¶ã€‚

ğŸ“š ä½ å¯ä»¥åœ¨[web.dev çš„ã€Šå¯é‡ç”¨ Web ç»„ä»¶æŒ‡å—ã€‹](https://web.dev/custom-elements-v1/)å’Œ[MDN å¯¹è‡ªå®šä¹‰å…ƒç´ çš„ä»‹ç»](https://developer.mozilla.org/zh-CN/docs/Web/Web_Components/Using_custom_elements)ä¸­äº†è§£æ›´å¤šè‡ªå®šä¹‰å…ƒç´ ã€‚

### å°† frontmatter å˜é‡ä¼ é€’ç»™è„šæœ¬

åœ¨ Astro ç»„ä»¶ä¸­ï¼Œ`---` ä¹‹é—´ [frontmatter](/zh-CN/core-concepts/astro-components/#ç»„ä»¶è„šæœ¬) ä¸­çš„ä»£ç åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œè€Œä¸æ˜¯åœ¨æµè§ˆå™¨ä¸­ã€‚è¦å°†å˜é‡ä»æœåŠ¡å™¨å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥å­˜å‚¨æˆ‘ä»¬çš„å˜é‡ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­è¿è¡Œ JavaScript æ—¶è¯»å–å®ƒä»¬ã€‚

ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ [`data-*` å±æ€§](https://developer.mozilla.org/zh-CN/docs/Learn/HTML/Howto/Use_data_attributes) åœ¨ HTML ä¸­å­˜å‚¨å˜é‡å€¼è¾“å‡ºã€‚ ä¸€æ—¦æ‚¨çš„ HTML åŠ è½½åˆ°æµè§ˆå™¨ä¸­ï¼Œè„šæœ¬ï¼ˆåŒ…æ‹¬è‡ªå®šä¹‰å…ƒç´ ï¼‰å°±å¯ä»¥ä½¿ç”¨å…ƒç´ çš„â€œæ•°æ®é›†â€å±æ€§è¯»å–è¿™äº›å±æ€§ã€‚

åœ¨æ­¤ç¤ºä¾‹ç»„ä»¶ä¸­ï¼Œä¸€ä¸ª `message` å±æ€§å­˜å‚¨åœ¨ `data-message` å±æ€§ä¸­ï¼Œå› æ­¤è‡ªå®šä¹‰å…ƒç´ å¯ä»¥è¯»å– `this.dataset.message` å¹¶åœ¨æµè§ˆå™¨ä¸­è·å–è¯¥å±æ€§çš„å€¼ã€‚

```astro title="src/components/AstroGreet.astro" {2} /data-message={.+}/ "this.dataset.message"
---
const { message = 'ä½ å¥½ï¼Œä¸–ç•Œï¼' } = Astro.props;
---

<!-- å°†æ¶ˆæ¯å­˜å‚¨ä¸ºæ•°æ®å±æ€§ã€‚ -->
<astro-greet data-message={message}>
  <button>Say hi!</button>
</astro-greet>

<script>
  class AstroGreet extends HTMLElement {
    constructor() {
			super();

      // ä» dataï¼ˆæ•°æ®ï¼‰å±æ€§ä¸­è¯»å–æ¶ˆæ¯ã€‚
      const message = this.dataset.message;
      const button = this.querySelector('button');
      button.addEventListener('click', () => {
        alert(message);
      });
		}
  }

  customElements.define('astro-greet', AstroGreet);
</script>
```
ç°åœ¨æˆ‘ä»¬å¯ä»¥å¤šæ¬¡ä½¿ç”¨æˆ‘ä»¬çš„ç»„ä»¶ï¼Œå¹¶ä¸”æ¯æ¬¡éƒ½ä¼šæ”¶åˆ°ä¸åŒçš„æ¶ˆæ¯ã€‚

```astro title="src/pages/example.astro"
---
import AstroGreet from '../components/AstroGreet.astro';
---

<!-- ä½¿ç”¨é»˜è®¤æ¶ˆæ¯ï¼šâ€œä½ å¥½ï¼Œä¸–ç•Œï¼â€ -->
<AstroGreet />

<!-- ä½¿ç”¨ä½œä¸º props ä¼ é€’çš„è‡ªå®šä¹‰æ¶ˆæ¯ã€‚ -->
<AstroGreet message="æ„å»ºç»„ä»¶çš„ç¾å¥½ä¸€å¤©ï¼" />
<AstroGreet message="å¾ˆé«˜å…´ä½ åšåˆ°äº†ï¼ğŸ‘‹" />
```

:::tip[ä½ çŸ¥é“å—ï¼Ÿ]
å½“æ‚¨å°† props ä¼ é€’ç»™ä½¿ç”¨ React ç­‰ UI æ¡†æ¶ç¼–å†™çš„ç»„ä»¶æ—¶ï¼Œè¿™å®é™…ä¸Šæ˜¯ Astro åœ¨å¹•åæ‰€åšçš„ï¼å¯¹äºå¸¦æœ‰ `client:*` æŒ‡ä»¤çš„ç»„ä»¶ï¼ŒAstro åˆ›å»ºäº†ä¸€ä¸ªå¸¦æœ‰ `props` å±æ€§çš„ `<astro-island>` è‡ªå®šä¹‰å…ƒç´ ï¼Œè¯¥å±æ€§å°†æ‚¨çš„æœåŠ¡å™¨ç«¯ props å­˜å‚¨åœ¨ HTML è¾“å‡ºä¸­ã€‚
:::
