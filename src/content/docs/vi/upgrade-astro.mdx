---
title: Nâng cấp Astro
description: Học cách nâng cấp Astro
i18nReady: true
banner:
  content: |
    Astro v5 đã có mặt! <a href="/en/guides/upgrade-to/v5/">Tìm hiểu cách nâng cấp trang web của bạn</a>
---
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';
import Version from '~/components/Version.astro';

Hướng dẫn này bao gồm cách cập nhật phiên bản Astro và các dependency liên quan, cách tìm hiểu những thay đổi từ phiên bản này sang phiên bản khác, và cách hiểu hệ thống version của Astro cùng các cập nhật tài liệu tương ứng.

## Những gì đã thay đổi?

Phiên bản mới nhất của Astro là <Version pkgName="astro" />.

Bạn có thể tìm thấy danh sách đầy đủ tất cả các thay đổi trong [changelog của Astro](https://github.com/withastro/astro/blob/main/packages/astro/CHANGELOG.md), và các hướng dẫn quan trọng để nâng cấp lên từng [phiên bản chính](#major-changes) mới trong [hướng dẫn nâng cấp](#upgrade-guides) của chúng tôi.

## Nâng cấp lên phiên bản mới nhất

Cập nhật phiên bản Astro và tất cả integrations chính thức của dự án bạn lên phiên bản mới nhất với một lệnh duy nhất sử dụng package manager:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  # Nâng cấp Astro và official integrations cùng lúc
  npx @astrojs/upgrade
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  # Nâng cấp Astro và official integrations cùng lúc
  pnpm dlx @astrojs/upgrade
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  # Nâng cấp Astro và official integrations cùng lúc
  yarn dlx @astrojs/upgrade
  ```
  </Fragment>
</PackageManagerTabs>

### Nâng cấp thủ công

Để cập nhật Astro và integrations lên phiên bản hiện tại một cách thủ công, sử dụng lệnh phù hợp cho package manager của bạn.

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  # Ví dụ: nâng cấp Astro với React và Partytown integrations
  npm install astro@latest @astrojs/react@latest @astrojs/partytown@latest
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  # Ví dụ: nâng cấp Astro với React và Partytown integrations
  pnpm add astro@latest @astrojs/react@latest @astrojs/partytown@latest
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  # Ví dụ: nâng cấp Astro với React và Partytown integrations
  yarn add astro@latest @astrojs/react@latest @astrojs/partytown@latest
  ```
  </Fragment>
</PackageManagerTabs>

### Cài đặt phiên bản cụ thể

Để cài đặt một [phiên bản cụ thể của Astro](https://www.npmjs.com/package/astro?activeTab=versions) hoặc integrations, sử dụng lệnh phù hợp cho package manager của bạn.

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm install astro@4.5.3 @astrojs/react@3.0.10
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm add astro@4.5.3 @astrojs/react@3.0.10
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn add astro@4.5.3 @astrojs/react@3.0.10
  ```
  </Fragment>
</PackageManagerTabs>

## Cập nhật tài liệu

Tài liệu này được cập nhật cho mỗi [phiên bản minor](#minor-changes) và [phiên bản major](#major-changes). Khi các tính năng mới được thêm vào, hoặc cách sử dụng hiện tại thay đổi, tài liệu sẽ cập nhật để phản ánh **hành vi hiện tại của Astro**. Nếu dự án của bạn chưa được cập nhật, bạn có thể nhận thấy một số hành vi không khớp với tài liệu mới nhất.

Các tính năng mới được thêm vào tài liệu với số phiên bản cụ thể mà chúng được thêm vào. Điều này có nghĩa là nếu bạn chưa cập nhật lên phiên bản mới nhất của Astro, một số tính năng được ghi chép có thể không khả dụng. Luôn kiểm tra số phiên bản `Added in:` và đảm bảo dự án của bạn được cập nhật trước khi cố gắng sử dụng các tính năng mới!

Nếu bạn chưa nâng cấp lên phiên bản major mới nhất của Astro, bạn có thể gặp phải sự khác biệt đáng kể giữa tài liệu Astro và hành vi của dự án. Chúng tôi khuyến khích mạnh mẽ việc nâng cấp lên phiên bản major hiện tại của Astro càng sớm càng tốt. Cả code và tài liệu cho các phiên bản trước đó đều không được hỗ trợ.

### Hướng dẫn nâng cấp

Sau mỗi [phiên bản major](#major-changes), bạn sẽ tìm thấy một **hướng dẫn nâng cấp** với thông tin về các thay đổi quan trọng và hướng dẫn nâng cấp code dự án của bạn.

Các trang tài liệu chính của Astro luôn **chính xác cho phiên bản mới nhất của Astro**. Chúng không mô tả hoặc so sánh với cách hoạt động trong các phiên bản trước, cũng như không làm nổi bật hành vi đã cập nhật hoặc thay đổi.

Xem các hướng dẫn nâng cấp bên dưới để biết giải thích về các thay đổi, so sánh phiên bản mới với phiên bản cũ. Các hướng dẫn nâng cấp bao gồm mọi thứ có thể yêu cầu bạn thay đổi code của mình: breaking changes, deprecations, loại bỏ và thay thế tính năng cũng như hướng dẫn sử dụng được cập nhật. Mỗi thay đổi trong Astro bao gồm phần "Tôi nên làm gì?" để giúp bạn cập nhật code dự án thành công.

- [Nâng cấp lên v5](/en/guides/upgrade-to/v5/)
- [Nâng cấp lên v4](/en/guides/upgrade-to/v4/)
- [Nâng cấp lên v3](/en/guides/upgrade-to/v3/)
- [Nâng cấp lên v2](/en/guides/upgrade-to/v2/)
- [Nâng cấp lên v1](/en/guides/upgrade-to/v1/)

### Tài liệu cũ (không được duy trì)

Tài liệu cho các phiên bản cũ của Astro không được duy trì, nhưng có sẵn dưới dạng snapshot tĩnh. Sử dụng các phiên bản tài liệu này nếu bạn không thể nâng cấp dự án, nhưng vẫn muốn tham khảo hướng dẫn và tài liệu tham khảo:

- [snapshot v4.16.17 không được duy trì](https://v4.docs.astro.build/en/getting-started/)
- [snapshot v3.6.3 không được duy trì](https://docs-git-v3-docs-unmaintained-astrodotbuild.vercel.app/)
- [snapshot v2.10.15 không được duy trì](https://deploy-preview-4405--astro-docs-2.netlify.app/en/getting-started/)

## Semantic versioning

Astro cố gắng tuân thủ càng nhiều càng tốt [semantic versioning](https://semver.org/), là một tập hợp các quy tắc mà các nhà phát triển sử dụng để xác định cách gán số phiên bản cho một bản phát hành. Semantic version tuân theo một mẫu có thể dự đoán để thông báo cho người dùng về loại thay đổi họ có thể mong đợi từ phiên bản này sang phiên bản khác.

Semantic versioning thực thi mẫu `X.Y.Z` cho số phiên bản phần mềm. Các giá trị này đại diện cho các cập nhật **major (X)**, **minor (Y)**, và **patch (Z)**.

### Thay đổi Patch

Thay đổi patch là những thay đổi ít gây gián đoạn nhất. Chúng không thay đổi cách bạn sử dụng Astro, và không cần thay đổi code của bạn khi cập nhật.

Khi Astro phát hành phiên bản "patch", số cuối cùng tăng lên. (ví dụ: `astro@4.3.14` -> `astro@4.3.15`)

Patches có thể được phát hành vì các lý do như:

- Thay đổi nội bộ không thay đổi chức năng của Astro:
  - refactors
  - cải thiện hiệu suất
  - tăng hoặc thay đổi độ bao phủ test
  - căn chỉnh với tài liệu đã nêu và hành vi mong đợi
- Cải thiện logging và thông báo lỗi.
- Phát hành lại sau một bản phát hành thất bại.

Thay đổi patch cũng bao gồm **hầu hết các sửa lỗi**, ngay cả trong trường hợp người dùng đang tận dụng hành vi hiện tại không mong muốn hoặc không mong đợi.

### Thay đổi Minor

Phiên bản minor chủ yếu giới thiệu các tính năng và cải tiến mới mà bạn có thể muốn thử, nhưng không yêu cầu thay đổi code của bạn. Một số tính năng hiện tại cũng có thể bị **deprecated** (được đánh dấu để xóa trong phiên bản tương lai trong khi vẫn tiếp tục hoạt động) trong phiên bản minor, cho bạn cơ hội chuẩn bị cho việc loại bỏ cuối cùng của chúng.

Phiên bản minor bao gồm các thay đổi như:

- **Deprecations** của các tính năng/tùy chọn hiện có với cảnh báo rằng chúng sẽ bị loại bỏ trong phiên bản major sắp tới.
- Giới thiệu các chức năng mới.
- Giới thiệu các tùy chọn mới trong integration hooks.
- Giới thiệu các chức năng mới trong `astro/app`, được sử dụng đặc biệt để tạo adapters mới.

Phiên bản minor cũng có thể bao gồm các thay đổi patch nhỏ hơn cùng lúc.

### Thay đổi Major

Phiên bản major sẽ bao gồm breaking changes cho ít nhất một số code hiện có. Những breaking changes này luôn được ghi chép trong [hướng dẫn "Nâng cấp lên vX"](#upgrade-guides) trong Astro.

Phiên bản major cho phép Astro thực hiện những thay đổi đáng kể không chỉ đối với logic nội bộ, mà còn đối với hành vi và cách sử dụng dự định. Tài liệu sẽ được cập nhật để chỉ phản ánh phiên bản mới nhất, và **các snapshot tĩnh, không được duy trì của tài liệu cũ** có sẵn như một hồ sơ lịch sử cho các dự án cũ hơn chưa được nâng cấp.

Phiên bản major bao gồm các thay đổi như:

- Loại bỏ các chức năng đã deprecated trước đó.
- Thay đổi các chức năng hiện có.
- Thay đổi các tùy chọn hiện có trong integration hooks.
- Thay đổi các tùy chọn và chức năng hiện có trong `astro/app`, được sử dụng đặc biệt để tạo adapters mới.

Phiên bản major cũng có thể bao gồm một số thay đổi và cải tiến không phá vỡ thường được phát hành riêng trong phiên bản minor hoặc patch.

### Ngoại lệ

- **Tính năng thử nghiệm**. Phát hành các phiên bản Astro mà không tuân thủ semantic versioning cho phép các nhà phát triển Astro có sự linh hoạt lớn nhất để khám phá, và thậm chí thay đổi hướng một cách triệt để, trong quá trình phát triển các tính năng thử nghiệm. Do đó, hành vi của các tính năng này có thể bị phá vỡ trong các thay đổi minor và patch.

  Các tính năng này thường đi kèm với một [giai đoạn 3 Request for Consideration (RFC)](https://github.com/withastro/roadmap#stage-3-rfc--development) đang diễn ra, công khai. Người dùng beta được mong đợi theo dõi các cập nhật và để lại phản hồi sớm về cuộc thảo luận để giúp hướng dẫn phát triển các tính năng này.

  Khi các tính năng này thoát khỏi giai đoạn thử nghiệm, chúng sẽ tuân theo hợp đồng semantic versioning bình thường.

- **Cải thiện tài liệu** (ví dụ: tham khảo và thông báo lỗi). Chúng được xây dựng từ nguồn cho repository `docs`. Điều này cho phép Astro nhanh chóng cập nhật các sửa chữa và cải tiến tài liệu trong trường hợp nội dung nguồn tài liệu được lưu trữ trong repository `astro` chính.

### Chính sách hỗ trợ và nâng cấp Node.js

#### Hỗ trợ

- Astro hỗ trợ [phiên bản **_Maintenance_ LTS** mới nhất của Node.js](https://nodejs.org/en/about/previous-releases#release-schedule).
- Astro hỗ trợ [phiên bản **_Active_ LTS** hiện tại của Node.js](https://nodejs.org/en/about/previous-releases#release-schedule)
- Astro có thể hỗ trợ các phiên bản lẻ của Node.js.

#### Nâng cấp

Các quy tắc sau đây xác định khi nào Astro có thể deprecate, loại bỏ, hoặc thêm hỗ trợ cho các phiên bản Node.js:

- Các phiên bản lẻ của Node.js có thể bị deprecated và/hoặc loại bỏ khi phiên bản chẵn tiếp theo của Node.js được phát hành. Thay đổi này có thể xảy ra trong phiên bản **minor** của Astro, sau một khoảng thời gian hỗ trợ mở rộng hợp lý được quyết định bởi nhóm Astro Core.
- Nâng cấp phiên bản **_Maintenance_ LTS** tối thiểu (trong cùng phạm vi major, ví dụ: từ `v18.14.*` lên `v18.20.*`) của Node.js có thể xảy ra trong phiên bản **minor** của Astro.
  - Ngoại lệ bảo mật: Nếu một lỗ hổng bảo mật trong Node.js **ảnh hưởng đến Astro** được tiết lộ và sửa chữa, nhóm Core có thể tăng phiên bản tối thiểu của **_Maintenance_ LTS** trong phiên bản **patch**.
- Nâng cấp phiên bản minor hoặc major của Node.js (**không phải** Maintenance LTS) chỉ xảy ra trong các phiên bản major của Astro.
  - Ngoại lệ bảo mật: Nếu một lỗ hổng bảo mật trong Node.js **ảnh hưởng đến Astro** được tiết lộ và sửa chữa, nhóm Core có thể tăng phiên bản tối thiểu trong phiên bản **minor**.

### Bảo trì mở rộng

Nhóm Core sẽ cung cấp bảo trì mở rộng **chỉ cho các sửa lỗi bảo mật** cho một phiên bản major trước đó. Điều này có nghĩa là nếu phiên bản major hiện tại là `v4.*`, nhóm Core sẽ back port các sửa lỗi bảo mật và phát hành một bản phát hành `v3.*` mới.