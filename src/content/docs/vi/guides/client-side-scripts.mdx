---
title: Scripts vÃ  xá»­ lÃ½ sá»± kiá»‡n
description: >-
  CÃ¡ch thÃªm tÃ­nh tÆ°Æ¡ng tÃ¡c phÃ­a client vÃ o cÃ¡c component Astro báº±ng cÃ¡ch sá»­ dá»¥ng
  cÃ¡c API JavaScript gá»‘c cá»§a trÃ¬nh duyá»‡t.
i18nReady: true
---
import ReadMore from '~/components/ReadMore.astro'

Báº¡n cÃ³ thá»ƒ thÃªm tÃ­nh tÆ°Æ¡ng tÃ¡c vÃ o cÃ¡c component Astro mÃ  khÃ´ng cáº§n [sá»­ dá»¥ng UI framework](/vi/guides/framework-components/) nhÆ° React, Svelte, Vue, v.v. báº±ng cÃ¡ch sá»­ dá»¥ng tháº» `<script>` HTML tiÃªu chuáº©n. Äiá»u nÃ y cho phÃ©p báº¡n gá»­i JavaScript Ä‘á»ƒ cháº¡y trong trÃ¬nh duyá»‡t vÃ  thÃªm chá»©c nÄƒng vÃ o cÃ¡c component Astro cá»§a báº¡n.

## Scripts PhÃ­a Client

Scripts cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thÃªm event listeners, gá»­i dá»¯ liá»‡u analytics, phÃ¡t animations vÃ  má»i thá»© khÃ¡c mÃ  JavaScript cÃ³ thá»ƒ lÃ m trÃªn web.

```astro
<!-- src/components/ConfettiButton.astro -->
<button data-confetti-button>Celebrate!</button>

<script>
  // Import cÃ¡c npm modules.
  import confetti from 'canvas-confetti';

  // TÃ¬m DOM component cá»§a chÃºng ta trÃªn trang.
  const buttons = document.querySelectorAll('[data-confetti-button]');

  // ThÃªm event listeners Ä‘á»ƒ báº¯n confetti khi button Ä‘Æ°á»£c click.
  buttons.forEach((button) => {
    button.addEventListener('click', () => confetti());
  });
</script>
```

Máº·c Ä‘á»‹nh, Astro xá»­ lÃ½ vÃ  bundle cÃ¡c tháº» `<script>`, thÃªm há»— trá»£ Ä‘á»ƒ import npm modules, viáº¿t TypeScript, vÃ  nhiá»u hÆ¡n ná»¯a.

## Sá»­ dá»¥ng `<script>` trong Astro

Trong cÃ¡c file `.astro`, báº¡n cÃ³ thá»ƒ thÃªm JavaScript phÃ­a client báº±ng cÃ¡ch thÃªm má»™t (hoáº·c nhiá»u) tháº» `<script>`.

Trong vÃ­ dá»¥ nÃ y, viá»‡c thÃªm component `<Hello />` vÃ o má»™t trang sáº½ log má»™t thÃ´ng Ä‘iá»‡p ra browser console.

```astro title="src/components/Hello.astro"
<h1>Welcome, world!</h1>

<script>
  console.log('Welcome, browser console!');
</script>
```

### Xá»­ lÃ½ Script

Máº·c Ä‘á»‹nh, cÃ¡c tháº» `<script>` Ä‘Æ°á»£c xá»­ lÃ½ bá»Ÿi Astro.

- Báº¥t ká»³ imports nÃ o sáº½ Ä‘Æ°á»£c bundled, cho phÃ©p báº¡n import cÃ¡c file local hoáº·c Node modules.
- Script Ä‘Ã£ Ä‘Æ°á»£c xá»­ lÃ½ sáº½ Ä‘Æ°á»£c inject táº¡i nÆ¡i nÃ³ Ä‘Æ°á»£c khai bÃ¡o vá»›i [`type="module"`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules).
- TypeScript Ä‘Æ°á»£c há»— trá»£ Ä‘áº§y Ä‘á»§, bao gá»“m cáº£ viá»‡c import cÃ¡c file TypeScript.
- Náº¿u component cá»§a báº¡n Ä‘Æ°á»£c sá»­ dá»¥ng nhiá»u láº§n trÃªn má»™t trang, script chá»‰ Ä‘Æ°á»£c include má»™t láº§n.

```astro title="src/components/Example.astro"
<script>
  // ÄÃ£ Ä‘Æ°á»£c xá»­ lÃ½! ÄÃ£ Ä‘Æ°á»£c bundled! Há»— trá»£ TypeScript!
  // Import local scripts vÃ  Node modules hoáº¡t Ä‘á»™ng tá»‘t.
</script>
```

Thuá»™c tÃ­nh `type="module"` lÃ m cho trÃ¬nh duyá»‡t coi script nhÆ° má»™t JavaScript module. Äiá»u nÃ y cÃ³ má»™t sá»‘ lá»£i Ã­ch vá» hiá»‡u nÄƒng:
- Rendering khÃ´ng bá»‹ cháº·n. TrÃ¬nh duyá»‡t tiáº¿p tá»¥c xá»­ lÃ½ pháº§n cÃ²n láº¡i cá»§a HTML trong khi module script vÃ  cÃ¡c dependencies cá»§a nÃ³ load.
- TrÃ¬nh duyá»‡t Ä‘á»£i HTML Ä‘Æ°á»£c xá»­ lÃ½ trÆ°á»›c khi thá»±c thi module scripts. Báº¡n khÃ´ng cáº§n láº¯ng nghe sá»± kiá»‡n "load".
- CÃ¡c thuá»™c tÃ­nh `async` vÃ  `defer` khÃ´ng cáº§n thiáº¿t. Module scripts luÃ´n Ä‘Æ°á»£c deferred.

:::note
Thuá»™c tÃ­nh `async` cÃ³ giÃ¡ trá»‹ Ä‘á»‘i vá»›i cÃ¡c script thÃ´ng thÆ°á»ng vÃ¬ nÃ³ ngÄƒn chÃºng cháº·n rendering. Tuy nhiÃªn, module scripts Ä‘Ã£ cÃ³ hÃ nh vi nÃ y. ThÃªm `async` vÃ o module script sáº½ khiáº¿n nÃ³ thá»±c thi trÆ°á»›c khi trang Ä‘Æ°á»£c load hoÃ n toÃ n. Äiá»u nÃ y cÃ³ láº½ khÃ´ng pháº£i lÃ  nhá»¯ng gÃ¬ báº¡n muá»‘n.
:::

### Opt out khá»i processing

Äá»ƒ ngÄƒn Astro xá»­ lÃ½ má»™t script, thÃªm directive `is:inline`.

```astro title="src/components/InlineScript.astro" "is:inline"
<script is:inline>
  // Sáº½ Ä‘Æ°á»£c render vÃ o HTML chÃ­nh xÃ¡c nhÆ° Ä‘Ã£ viáº¿t!
  // Local imports khÃ´ng Ä‘Æ°á»£c resolve vÃ  sáº½ khÃ´ng hoáº¡t Ä‘á»™ng.
  // Náº¿u trong má»™t component, láº·p láº¡i má»—i khi component Ä‘Æ°á»£c sá»­ dá»¥ng.
</script>
```

:::note
Astro sáº½ khÃ´ng xá»­ lÃ½ cÃ¡c tháº» script cá»§a báº¡n trong má»™t sá»‘ tÃ¬nh huá»‘ng. Cá»¥ thá»ƒ, viá»‡c thÃªm `type="module"` hoáº·c báº¥t ká»³ thuá»™c tÃ­nh nÃ o khÃ¡c ngoÃ i `src` vÃ o tháº» `<script>` sáº½ khiáº¿n Astro coi tháº» Ä‘Ã³ nhÆ° thá»ƒ nÃ³ cÃ³ directive `is:inline`.
:::

<ReadMore>Xem trang [tham kháº£o directives](/vi/reference/directives-reference/#script--style-directives) cá»§a chÃºng tÃ´i Ä‘á»ƒ biáº¿t thÃªm thÃ´ng tin vá» cÃ¡c directives cÃ³ sáºµn trÃªn tháº» `<script>`.</ReadMore>

### Include JavaScript files trÃªn trang cá»§a báº¡n

Báº¡n cÃ³ thá»ƒ muá»‘n viáº¿t scripts cá»§a mÃ¬nh nhÆ° cÃ¡c file `.js`/`.ts` riÃªng biá»‡t hoáº·c cáº§n tham chiáº¿u Ä‘áº¿n má»™t external script trÃªn server khÃ¡c. Báº¡n cÃ³ thá»ƒ lÃ m Ä‘iá»u nÃ y báº±ng cÃ¡ch tham chiáº¿u chÃºng trong thuá»™c tÃ­nh `src` cá»§a tháº» `<script>`.

#### Import local scripts

**Khi nÃ o sá»­ dá»¥ng:** khi script cá»§a báº¡n náº±m trong `src/`.

Astro sáº½ build, optimize vÃ  add cÃ¡c scripts nÃ y vÃ o trang cho báº¡n, tuÃ¢n theo [quy táº¯c xá»­ lÃ½ script](#script-processing) cá»§a nÃ³.

```astro title="src/components/LocalScripts.astro"
<!-- Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i Ä‘áº¿n script táº¡i `src/scripts/local.js` -->
<script src="../scripts/local.js"></script>

<!-- cÅ©ng hoáº¡t Ä‘á»™ng cho cÃ¡c file TypeScript local -->
<script src="./script-with-types.ts"></script>
```

#### Load external scripts

**Khi nÃ o sá»­ dá»¥ng:** khi file JavaScript cá»§a báº¡n náº±m trong `public/` hoáº·c trÃªn CDN.

Äá»ƒ load scripts bÃªn ngoÃ i thÆ° má»¥c `src/` cá»§a project, include directive `is:inline`. CÃ¡ch tiáº¿p cáº­n nÃ y bá» qua JavaScript processing, bundling vÃ  optimizations Ä‘Æ°á»£c cung cáº¥p bá»Ÿi Astro khi báº¡n import scripts nhÆ° mÃ´ táº£ á»Ÿ trÃªn.

```astro title="src/components/ExternalScripts.astro" "is:inline"
<!-- Ä‘Æ°á»ng dáº«n tuyá»‡t Ä‘á»‘i Ä‘áº¿n script táº¡i `public/my-script.js` -->
<script is:inline src="/my-script.js"></script>

<!-- URL Ä‘áº§y Ä‘á»§ Ä‘áº¿n script trÃªn remote server -->
<script is:inline src="https://my-analytics.com/script.js"></script>
```

## CÃ¡c pattern script phá»• biáº¿n

### Xá»­ lÃ½ `onclick` vÃ  cÃ¡c events khÃ¡c

Má»™t sá»‘ UI frameworks sá»­ dá»¥ng syntax tÃ¹y chá»‰nh Ä‘á»ƒ xá»­ lÃ½ events nhÆ° `onClick={...}` (React/Preact) hoáº·c `@click="..."` (Vue). Astro tuÃ¢n theo HTML tiÃªu chuáº©n cháº·t cháº½ hÆ¡n vÃ  khÃ´ng sá»­ dá»¥ng syntax tÃ¹y chá»‰nh cho events.

Thay vÃ o Ä‘Ã³, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng [`addEventListener`](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener) trong tháº» `<script>` Ä‘á»ƒ xá»­ lÃ½ user interactions.

```astro title="src/components/AlertButton.astro"
<button class="alert">Click me!</button>

<script>
  // TÃ¬m táº¥t cáº£ buttons cÃ³ class `alert` trÃªn trang.
  const buttons = document.querySelectorAll('button.alert');

  // Xá»­ lÃ½ clicks trÃªn má»—i button.
  buttons.forEach((button) => {
    button.addEventListener('click', () => {
      alert('Button was clicked!');
    });
  });
</script>
```

:::note
Náº¿u báº¡n cÃ³ nhiá»u component `<AlertButton />` trÃªn má»™t trang, Astro sáº½ khÃ´ng cháº¡y script nhiá»u láº§n. Scripts Ä‘Æ°á»£c bundled vÃ  chá»‰ included má»™t láº§n má»—i trang. Sá»­ dá»¥ng `querySelectorAll` Ä‘áº£m báº£o ráº±ng script nÃ y attach event listener vÃ o má»i button cÃ³ class `alert` Ä‘Æ°á»£c tÃ¬m tháº¥y trÃªn trang.
:::

### Web components vá»›i custom elements

Báº¡n cÃ³ thá»ƒ táº¡o cÃ¡c HTML elements riÃªng vá»›i hÃ nh vi tÃ¹y chá»‰nh báº±ng cÃ¡ch sá»­ dá»¥ng Web Components standard. Äá»‹nh nghÄ©a má»™t [custom element](https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements) trong component `.astro` cho phÃ©p báº¡n build cÃ¡c interactive components mÃ  khÃ´ng cáº§n UI framework library.

Trong vÃ­ dá»¥ nÃ y, chÃºng ta Ä‘á»‹nh nghÄ©a má»™t HTML element `<astro-heart>` má»›i Ä‘á»ƒ theo dÃµi sá»‘ láº§n báº¡n click nÃºt trÃ¡i tim vÃ  cáº­p nháº­t `<span>` vá»›i sá»‘ Ä‘áº¿m má»›i nháº¥t.

```astro title="src/components/AstroHeart.astro"
<!-- Wrap cÃ¡c component elements trong custom element "astro-heart" cá»§a chÃºng ta. -->
<astro-heart>
  <button aria-label="Heart">ğŸ’œ</button> Ã— <span>0</span>
</astro-heart>

<script>
  // Äá»‹nh nghÄ©a hÃ nh vi cho loáº¡i HTML element má»›i cá»§a chÃºng ta.
  class AstroHeart extends HTMLElement {
    connectedCallback() {
      let count = 0;

      const heartButton = this.querySelector('button');
      const countSpan = this.querySelector('span');

      // Má»—i khi button Ä‘Æ°á»£c clicked, cáº­p nháº­t count.
			heartButton.addEventListener('click', () => {
        count++;
        countSpan.textContent = count.toString();
      });
		}
  }

  // NÃ³i vá»›i trÃ¬nh duyá»‡t sá»­ dá»¥ng class AstroHeart cá»§a chÃºng ta cho cÃ¡c elements <astro-heart>.
  customElements.define('astro-heart', AstroHeart);
</script>
```

CÃ³ hai lá»£i Ã­ch khi sá»­ dá»¥ng custom element á»Ÿ Ä‘Ã¢y:

1. Thay vÃ¬ tÃ¬m kiáº¿m toÃ n bá»™ trang báº±ng `document.querySelector()`, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng `this.querySelector()`, chá»‰ tÃ¬m kiáº¿m trong custom element instance hiá»‡n táº¡i. Äiá»u nÃ y giÃºp lÃ m viá»‡c vá»›i chá»‰ cÃ¡c children cá»§a má»™t component instance táº¡i má»™t thá»i Ä‘iá»ƒm dá»… dÃ ng hÆ¡n.

2. Máº·c dÃ¹ `<script>` chá»‰ cháº¡y má»™t láº§n, trÃ¬nh duyá»‡t sáº½ cháº¡y method `connectedCallback()` cá»§a custom element má»—i khi nÃ³ tÃ¬m tháº¥y `<astro-heart>` trÃªn trang. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  báº¡n cÃ³ thá»ƒ an toÃ n viáº¿t code cho má»™t component táº¡i má»™t thá»i Ä‘iá»ƒm, ngay cáº£ khi báº¡n dá»± Ä‘á»‹nh sá»­ dá»¥ng component nÃ y nhiá»u láº§n trÃªn má»™t trang.

<ReadMore>Báº¡n cÃ³ thá»ƒ tÃ¬m hiá»ƒu thÃªm vá» custom elements trong [hÆ°á»›ng dáº«n Reusable Web Components cá»§a web.dev](https://web.dev/custom-elements-v1/) vÃ  [giá»›i thiá»‡u vá» custom elements cá»§a MDN](https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements).</ReadMore>

### Truyá»n frontmatter variables vÃ o scripts

Trong cÃ¡c component Astro, code trong [frontmatter](/vi/basics/astro-components/#the-component-script) giá»¯a cÃ¡c `---` fences cháº¡y trÃªn server vÃ  khÃ´ng cÃ³ sáºµn trong trÃ¬nh duyá»‡t. Äá»ƒ gá»­i variables tá»« server Ä‘áº¿n client, chÃºng ta cáº§n má»™t cÃ¡ch Ä‘á»ƒ lÆ°u trá»¯ cÃ¡c variables vÃ  sau Ä‘Ã³ Ä‘á»c chÃºng khi JavaScript cháº¡y trong trÃ¬nh duyá»‡t.

Má»™t cÃ¡ch Ä‘á»ƒ lÃ m Ä‘iá»u nÃ y lÃ  sá»­ dá»¥ng [`data-*` attributes](https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes) Ä‘á»ƒ lÆ°u trá»¯ giÃ¡ trá»‹ cá»§a variables trong HTML output cá»§a báº¡n. Scripts, bao gá»“m custom elements, sau Ä‘Ã³ cÃ³ thá»ƒ Ä‘á»c cÃ¡c attributes nÃ y báº±ng thuá»™c tÃ­nh `dataset` cá»§a element má»™t khi HTML cá»§a báº¡n load trong trÃ¬nh duyá»‡t.

Trong component vÃ­ dá»¥ nÃ y, má»™t prop `message` Ä‘Æ°á»£c lÆ°u trá»¯ trong thuá»™c tÃ­nh `data-message`, vÃ¬ váº­y custom element cÃ³ thá»ƒ Ä‘á»c `this.dataset.message` vÃ  láº¥y giÃ¡ trá»‹ cá»§a prop trong trÃ¬nh duyá»‡t.

```astro title="src/components/AstroGreet.astro" {2} /data-message={.+}/ "this.dataset.message"
---
const { message = 'Welcome, world!' } = Astro.props;
---

<!-- LÆ°u trá»¯ message prop nhÆ° má»™t data attribute. -->
<astro-greet data-message={message}>
  <button>Say hi!</button>
</astro-greet>

<script>
  class AstroGreet extends HTMLElement {
    connectedCallback() {
      // Äá»c message tá»« data attribute.
      const message = this.dataset.message;
      const button = this.querySelector('button');
      button.addEventListener('click', () => {
        alert(message);
      });
		}
  }

  customElements.define('astro-greet', AstroGreet);
</script>
```

BÃ¢y giá» chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng component nhiá»u láº§n vÃ  Ä‘Æ°á»£c chÃ o báº±ng má»™t thÃ´ng Ä‘iá»‡p khÃ¡c nhau cho má»—i láº§n.

```astro title="src/pages/example.astro"
---
import AstroGreet from '../components/AstroGreet.astro';
---

<!-- Sá»­ dá»¥ng thÃ´ng Ä‘iá»‡p máº·c Ä‘á»‹nh: "Welcome, world!" -->
<AstroGreet />

<!-- Sá»­ dá»¥ng thÃ´ng Ä‘iá»‡p tÃ¹y chá»‰nh Ä‘Æ°á»£c truyá»n nhÆ° props. -->
<AstroGreet message="Lovely day to build components!" />
<AstroGreet message="Glad you made it! ğŸ‘‹" />
```

:::tip[Báº¡n cÃ³ biáº¿t khÃ´ng?]
ÄÃ¢y thá»±c sá»± lÃ  nhá»¯ng gÃ¬ Astro lÃ m phÃ­a sau khi báº¡n truyá»n props vÃ o má»™t component Ä‘Æ°á»£c viáº¿t báº±ng UI framework nhÆ° React! Äá»‘i vá»›i cÃ¡c components cÃ³ directive `client:*`, Astro táº¡o má»™t custom element `<astro-island>` vá»›i thuá»™c tÃ­nh `props` lÆ°u trá»¯ server-side props cá»§a báº¡n trong HTML output.
:::

### Káº¿t há»£p scripts vÃ  UI Frameworks

CÃ¡c elements Ä‘Æ°á»£c render bá»Ÿi UI framework cÃ³ thá»ƒ chÆ°a cÃ³ sáºµn khi tháº» `<script>` thá»±c thi. Náº¿u script cá»§a báº¡n cÅ©ng cáº§n xá»­ lÃ½ [UI framework components](/vi/guides/framework-components/), viá»‡c sá»­ dá»¥ng custom element Ä‘Æ°á»£c khuyáº¿n nghá»‹.