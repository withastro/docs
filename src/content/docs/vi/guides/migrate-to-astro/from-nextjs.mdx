---
title: Chuy·ªÉn ƒë·ªïi t·ª´ Next.js
description: H∆∞·ªõng d·∫´n chuy·ªÉn ƒë·ªïi d·ª± √°n Next.js hi·ªán c√≥ sang Astro
sidebar:
  label: Next.js
type: migration
stub: false
framework: Next.js
i18nReady: true
---
import { Steps, LinkCard, CardGrid } from '@astrojs/starlight/components';
import AstroJSXTabs from '~/components/tabs/AstroJSXTabs.astro';
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';

D∆∞·ªõi ƒë√¢y l√† m·ªôt s·ªë kh√°i ni·ªám quan tr·ªçng v√† chi·∫øn l∆∞·ª£c chuy·ªÉn ƒë·ªïi gi√∫p b·∫°n b·∫Øt ƒë·∫ßu. S·ª≠ d·ª•ng ph·∫ßn c√≤n l·∫°i c·ªßa t√†i li·ªáu v√† [c·ªông ƒë·ªìng Discord](https://astro.build/chat) ƒë·ªÉ ti·∫øp t·ª•c h√†nh tr√¨nh!

## ƒêi·ªÉm t∆∞∆°ng ƒë·ªìng ch√≠nh gi·ªØa Next.js v√† Astro

Next.js v√† Astro c√≥ m·ªôt s·ªë ƒëi·ªÉm t∆∞∆°ng ƒë·ªìng gi√∫p b·∫°n chuy·ªÉn ƒë·ªïi d·ª± √°n:

- [C√∫ ph√°p c·ªßa file `.astro` t∆∞∆°ng t·ª± JSX](/vi/reference/astro-syntax/#differences-between-astro-and-jsx). Vi·∫øt Astro s·∫Ω c·∫£m th·∫•y quen thu·ªôc.
- D·ª± √°n Astro c√≥ th·ªÉ l√† SSG ho·∫∑c [SSR v·ªõi pre-rendering theo trang](/vi/guides/on-demand-rendering/).
- Astro s·ª≠ d·ª•ng routing d·ª±a tr√™n file, v√† [cho ph√©p c√°c trang c√≥ t√™n ƒë·∫∑c bi·ªát t·∫°o route ƒë·ªông](/vi/guides/routing/#dynamic-routes).
- Astro [d·ª±a tr√™n component](/vi/basics/astro-components/), v√† c·∫•u tr√∫c markup c·ªßa b·∫°n s·∫Ω t∆∞∆°ng t·ª± tr∆∞·ªõc v√† sau khi chuy·ªÉn ƒë·ªïi.
- Astro c√≥ [t√≠ch h·ª£p ch√≠nh th·ª©c cho React, Preact, v√† Solid](/vi/guides/integrations-guide/react/) n√™n b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng c√°c component JSX hi·ªán c√≥. L∆∞u √Ω trong Astro, c√°c file n√†y **ph·∫£i** c√≥ ph·∫ßn m·ªü r·ªông `.jsx` ho·∫∑c `.tsx`.
- Astro h·ªó tr·ª£ [c√†i ƒë·∫∑t g√≥i NPM](/vi/guides/imports/#npm-packages), bao g·ªìm th∆∞ vi·ªán React. Nhi·ªÅu dependency hi·ªán c√≥ s·∫Ω ho·∫°t ƒë·ªông trong Astro.

## ƒêi·ªÉm kh√°c bi·ªát ch√≠nh gi·ªØa Next.js v√† Astro

Khi b·∫°n x√¢y d·ª±ng l·∫°i trang Next.js trong Astro, b·∫°n s·∫Ω nh·∫≠n th·∫•y m·ªôt s·ªë kh√°c bi·ªát quan tr·ªçng:

- Next.js l√† ·ª©ng d·ª•ng React single-page, v√† s·ª≠ d·ª•ng `index.js` l√†m root c·ªßa d·ª± √°n. Astro l√† trang web multi-page, v√† `index.astro` l√† trang ch·ªß.

- [Component `.astro`](/vi/basics/astro-components/) kh√¥ng ƒë∆∞·ª£c vi·∫øt nh∆∞ c√°c h√†m export tr·∫£ v·ªÅ template trang. Thay v√†o ƒë√≥, b·∫°n s·∫Ω t√°ch code th√†nh "code fence" cho JavaScript v√† ph·∫ßn body ƒë·ªôc quy·ªÅn cho HTML b·∫°n t·∫°o ra.

- [T·∫≠p trung v√†o n·ªôi dung](/vi/concepts/why-astro/#content-driven): Astro ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ showcase n·ªôi dung v√† cho ph√©p b·∫°n opt-in t∆∞∆°ng t√°c ch·ªâ khi c·∫ßn. ·ª®ng d·ª•ng Next.js hi·ªán c√≥ c√≥ th·ªÉ ƒë∆∞·ª£c x√¢y d·ª±ng cho t∆∞∆°ng t√°c client-side cao v√† c√≥ th·ªÉ y√™u c·∫ßu k·ªπ thu·∫≠t Astro n√¢ng cao ƒë·ªÉ bao g·ªìm c√°c m·ª•c kh√≥ replicate h∆°n b·∫±ng component `.astro`, nh∆∞ dashboard.

## Chuy·ªÉn ƒë·ªïi d·ª± √°n Next.js

M·ªói d·ª± √°n chuy·ªÉn ƒë·ªïi s·∫Ω kh√°c nhau, nh∆∞ng c√≥ m·ªôt s·ªë h√†nh ƒë·ªông ph·ªï bi·∫øn b·∫°n s·∫Ω th·ª±c hi·ªán khi chuy·ªÉn t·ª´ Next.js sang Astro.

### T·∫°o d·ª± √°n Astro m·ªõi

S·ª≠ d·ª•ng l·ªánh `create astro` cho package manager ƒë·ªÉ kh·ªüi ch·∫°y CLI wizard c·ªßa Astro ho·∫∑c ch·ªçn theme c·ªông ƒë·ªìng t·ª´ [Astro Theme Showcase](https://astro.build/themes).

B·∫°n c√≥ th·ªÉ truy·ªÅn argument `--template` cho l·ªánh `create astro` ƒë·ªÉ b·∫Øt ƒë·∫ßu d·ª± √°n Astro m·ªõi v·ªõi m·ªôt trong c√°c starter ch√≠nh th·ª©c (vd: `docs`, `blog`, `portfolio`). Ho·∫∑c, b·∫°n c√≥ th·ªÉ [b·∫Øt ƒë·∫ßu d·ª± √°n m·ªõi t·ª´ b·∫•t k·ª≥ repository Astro n√†o tr√™n GitHub](/vi/install-and-setup/#install-from-the-cli-wizard).

  <PackageManagerTabs>
    <Fragment slot="npm">
    ```shell
    # kh·ªüi ch·∫°y Astro CLI Wizard 
    npm create astro@latest

    # t·∫°o d·ª± √°n m·ªõi v·ªõi v√≠ d·ª• ch√≠nh th·ª©c
    npm create astro@latest -- --template <example-name>
    ```
    </Fragment>
    <Fragment slot="pnpm">
    ```shell
    # kh·ªüi ch·∫°y Astro CLI Wizard 
    pnpm create astro@latest

    # t·∫°o d·ª± √°n m·ªõi v·ªõi v√≠ d·ª• ch√≠nh th·ª©c
    pnpm create astro@latest --template <example-name>
    ```
    </Fragment>
    <Fragment slot="yarn">
    ```shell
    # kh·ªüi ch·∫°y Astro CLI Wizard 
    yarn create astro@latest

    # t·∫°o d·ª± √°n m·ªõi v·ªõi v√≠ d·ª• ch√≠nh th·ª©c
    yarn create astro@latest --template <example-name>
    ```
    </Fragment>
  </PackageManagerTabs>

Sau ƒë√≥, copy c√°c file d·ª± √°n Next hi·ªán c√≥ sang d·ª± √°n Astro m·ªõi trong th∆∞ m·ª•c ri√™ng b√™n ngo√†i `src`.

:::tip
Truy c·∫≠p https://astro.new ƒë·ªÉ xem danh s√°ch ƒë·∫ßy ƒë·ªß c√°c template starter ch√≠nh th·ª©c, v√† link ƒë·ªÉ m·ªü d·ª± √°n m·ªõi trong IDX, StackBlitz, CodeSandbox, ho·∫∑c Gitpod.
:::

### C√†i ƒë·∫∑t t√≠ch h·ª£p (t√πy ch·ªçn)

B·∫°n c√≥ th·ªÉ th·∫•y h·ªØu √≠ch khi c√†i ƒë·∫∑t m·ªôt s·ªë [t√≠ch h·ª£p t√πy ch·ªçn c·ªßa Astro](/vi/guides/integrations-guide/) ƒë·ªÉ s·ª≠ d·ª•ng khi chuy·ªÉn ƒë·ªïi d·ª± √°n Next sang Astro:

- **@astrojs/react**: ƒë·ªÉ t√°i s·ª≠ d·ª•ng m·ªôt s·ªë component React UI hi·ªán c√≥ trong trang Astro m·ªõi, ho·∫∑c ti·∫øp t·ª•c vi·∫øt v·ªõi component React.

- **@astrojs/mdx**: ƒë·ªÉ mang file MDX hi·ªán c√≥ t·ª´ d·ª± √°n Next, ho·∫∑c s·ª≠ d·ª•ng MDX trong trang Astro m·ªõi.

### ƒê·∫∑t source code trong `src`

Theo [c·∫•u tr√∫c d·ª± √°n Astro](/vi/basics/project-structure/):

<Steps>
1. **Gi·ªØ** th∆∞ m·ª•c `public/` c·ªßa Next nguy√™n v·∫πn. 
   
    Astro s·ª≠ d·ª•ng th∆∞ m·ª•c `public/` cho static assets, gi·ªëng nh∆∞ Next. Kh√¥ng c·∫ßn thay ƒë·ªïi g√¨ cho th∆∞ m·ª•c n√†y v√† n·ªôi dung c·ªßa n√≥.

2. **Copy ho·∫∑c Di chuy·ªÉn** c√°c file v√† th∆∞ m·ª•c kh√°c c·ªßa Next (vd: `pages`, `styles` v.v.) v√†o th∆∞ m·ª•c `src/` c·ªßa Astro khi b·∫°n x√¢y d·ª±ng l·∫°i trang, theo [c·∫•u tr√∫c d·ª± √°n Astro](/vi/basics/project-structure/).

    Gi·ªëng Next, th∆∞ m·ª•c `src/pages/` c·ªßa Astro l√† th∆∞ m·ª•c ƒë·∫∑c bi·ªát d√πng cho file-based routing. T·∫•t c·∫£ th∆∞ m·ª•c kh√°c l√† t√πy ch·ªçn, v√† b·∫°n c√≥ th·ªÉ t·ªï ch·ª©c n·ªôi dung th∆∞ m·ª•c `src/` theo c√°ch b·∫°n mu·ªën. C√°c th∆∞ m·ª•c ph·ªï bi·∫øn kh√°c trong d·ª± √°n Astro bao g·ªìm `src/layouts/`, `src/components`, `src/styles`, `src/scripts`.
</Steps>

### File c·∫•u h√¨nh Astro

Astro c√≥ file c·∫•u h√¨nh ·ªü root d·ª± √°n g·ªçi l√† [`astro.config.mjs`](/vi/guides/configuring-astro/). N√†y ch·ªâ d√πng ƒë·ªÉ c·∫•u h√¨nh d·ª± √°n Astro v√† b·∫•t k·ª≥ t√≠ch h·ª£p n√†o ƒë∆∞·ª£c c√†i ƒë·∫∑t, bao g·ªìm [SSR adapters](/vi/guides/deploy/).

### M·∫πo: Chuy·ªÉn ƒë·ªïi file JSX th√†nh file `.astro`

D∆∞·ªõi ƒë√¢y l√† m·ªôt s·ªë m·∫πo ƒë·ªÉ chuy·ªÉn ƒë·ªïi component Next `.js` th√†nh component `.astro`:

1. S·ª≠ d·ª•ng JSX ƒë∆∞·ª£c return c·ªßa h√†m component Next.js hi·ªán c√≥ l√†m c∆° s·ªü cho HTML template.

2. Thay ƒë·ªïi b·∫•t k·ª≥ [c√∫ ph√°p Next ho·∫∑c JSX th√†nh Astro](#reference-convert-nextjs-syntax-to-astro) ho·∫∑c th√†nh chu·∫©n HTML web. Bao g·ªìm `<Link>`, `<Script>`, `{children}`, v√† `className`, v√≠ d·ª•.

3. Di chuy·ªÉn b·∫•t k·ª≥ JavaScript c·∫ßn thi·∫øt, bao g·ªìm import statements, v√†o ["code fence" (`---`)](/vi/basics/astro-components/#the-component-script). L∆∞u √Ω: JavaScript ƒë·ªÉ [render n·ªôi dung c√≥ ƒëi·ªÅu ki·ªán](/vi/reference/astro-syntax/#dynamic-html) th∆∞·ªùng ƒë∆∞·ª£c vi·∫øt tr·ª±c ti·∫øp trong HTML template trong Astro.

4. S·ª≠ d·ª•ng [`Astro.props`](/vi/reference/api-reference/#props) ƒë·ªÉ truy c·∫≠p b·∫•t k·ª≥ props b·ªï sung n√†o tr∆∞·ªõc ƒë√¢y ƒë∆∞·ª£c truy·ªÅn cho h√†m Next c·ªßa b·∫°n.

5. Quy·∫øt ƒë·ªãnh xem component ƒë∆∞·ª£c import c√≥ c·∫ßn chuy·ªÉn ƒë·ªïi th√†nh Astro kh√¥ng. V·ªõi t√≠ch h·ª£p ch√≠nh th·ª©c ƒë∆∞·ª£c c√†i ƒë·∫∑t, b·∫°n c√≥ th·ªÉ [s·ª≠ d·ª•ng component React hi·ªán c√≥ trong file Astro](/vi/guides/framework-components/). Nh∆∞ng b·∫°n c√≥ th·ªÉ mu·ªën chuy·ªÉn ƒë·ªïi ch√∫ng th√†nh component `.astro`, ƒë·∫∑c bi·ªát n·∫øu ch√∫ng kh√¥ng c·∫ßn t∆∞∆°ng t√°c!

6. Thay th·∫ø `getStaticProps()` b·∫±ng import statements ho·∫∑c [`import.meta.glob()`](/vi/guides/imports/#importmetaglob) ƒë·ªÉ query file local. S·ª≠ d·ª•ng `fetch()` ƒë·ªÉ fetch d·ªØ li·ªáu external.

Xem [v√≠ d·ª• v·ªÅ file Next `.js` ƒë∆∞·ª£c chuy·ªÉn ƒë·ªïi t·ª´ng b∆∞·ªõc](#guided-example-next-data-fetching-to-astro).

#### So s√°nh: JSX vs Astro

So s√°nh component Next sau v√† component Astro t∆∞∆°ng ·ª©ng:

<AstroJSXTabs>
  <Fragment slot="jsx">
    ```jsx title="StarCount.jsx"
    import Header from "./header";
    import Footer from "./footer";
    import "./layout.css";

    export async function getStaticProps() {
        const res = await fetch("https://api.github.com/repos/withastro/astro");
        const json = await res.json();
        return {
            props: { message: json.message, stars: json.stargazers_count || 0 },
        }
    }

    const Component = ({ stars, message }) => {
        
        return (
            <>
                <Header />
                <p style={{
                    backgroundColor: `#f4f4f4`,
                    padding: `1em 1.5em`,
                    textAlign: `center`,
                    marginBottom: `1em`
                }}>Astro c√≥ {stars} üßë‚ÄçüöÄ</p>
                <Footer />
            </>
        )
    }

    export default Component;
    ```
  </Fragment>
  <Fragment slot="astro">
    ```astro title="StarCount.astro"
    ---
    import Header from "./header";
    import Footer from "./footer";
    import "./layout.css";

    const res = await fetch("https://api.github.com/repos/withastro/astro");
    const json = await res.json();
    const message = json.message;
    const stars = json.stargazers_count || 0;
    ---
    <Header />
    <p class="banner">Astro c√≥ {stars} üßë‚ÄçüöÄ</p>
    <Footer />

    <style>
      .banner {
        background-color: #f4f4f4; 
        padding: 1em 1.5em;
        text-align: center;
        margin-bottom: 1em;
      }
    <style>
    ```
  </Fragment>
</AstroJSXTabs>

### Chuy·ªÉn ƒë·ªïi file Layout

B·∫°n c√≥ th·ªÉ th·∫•y h·ªØu √≠ch khi b·∫Øt ƒë·∫ßu b·∫±ng c√°ch chuy·ªÉn ƒë·ªïi layout v√† template Next.js th√†nh [component layout Astro](/vi/basics/layouts/).

Next c√≥ hai ph∆∞∆°ng ph√°p kh√°c nhau ƒë·ªÉ t·∫°o file layout, m·ªói c√°ch x·ª≠ l√Ω layout kh√°c v·ªõi Astro:

- Th∆∞ m·ª•c `pages`

- [Th∆∞ m·ª•c `/app`](https://nextjs.org/docs/app/building-your-application/routing/pages-and-layouts#layouts)

M·ªói trang Astro y√™u c·∫ßu r√µ r√†ng c√°c tag `<html>`, `<head>`, v√† `<body>` ph·∫£i c√≥ m·∫∑t, n√™n vi·ªác t√°i s·ª≠ d·ª•ng file layout qua c√°c trang l√† ph·ªï bi·∫øn. Astro s·ª≠ d·ª•ng [`<slot />`](/vi/basics/astro-components/#slots) cho n·ªôi dung trang, kh√¥ng c·∫ßn import statement. L∆∞u √Ω template HTML chu·∫©n, v√† truy c·∫≠p tr·ª±c ti·∫øp `<head>`:  

```astro title="src/layouts/Layout.astro"
---
---
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Astro</title>
	</head>
	<body>
    <!-- B·ªçc element slot v·ªõi template layout hi·ªán c√≥ -->
		<slot />
	</body>
</html>
```

#### Chuy·ªÉn ƒë·ªïi t·ª´ th∆∞ m·ª•c `pages` c·ªßa Next.js

D·ª± √°n Next c·ªßa b·∫°n c√≥ th·ªÉ c√≥ file `pages/_document.jsx` import component React ƒë·ªÉ t√πy ch·ªânh `<head>` c·ªßa app:

```jsx title="pages/_document.jsx"
import Document, { Html, Head, Main, NextScript } from "next/document";

export default class MyDocument extends Document {
  render() {
    return (
      <Html lang="en">
        <Head>
          <link rel="icon" href="/favicon.ico" />
        </Head>
        <body>
          <Main />
          <NextScript />
        </body>
      </Html>
    );
  }
}
```

<Steps>
1. T·∫°o file layout Astro m·ªõi ch·ªâ s·ª≠ d·ª•ng JSX ƒë∆∞·ª£c return.

2. Thay th·∫ø b·∫•t k·ª≥ component React n√†o b·∫±ng `<html>`, `<head>`, `<slot>`, v√† c√°c tag HTML chu·∫©n kh√°c.

    ```astro title="src/layouts/Document.astro"
    <html lang="en">
      <head>
          <link rel="icon" href="/favicon.ico" />
      </head>
      <body>
        <slot/>
      </body>
    </html>
    ```
</Steps>

#### Chuy·ªÉn ƒë·ªïi t·ª´ th∆∞ m·ª•c `/app` c·ªßa Next.js

File layout th∆∞ m·ª•c `app/` c·ªßa Next.js ƒë∆∞·ª£c t·∫°o v·ªõi hai file: file `layout.jsx` ƒë·ªÉ t√πy ch·ªânh n·ªôi dung `<html>` v√† `<body>`, v√† file `head.jsx` ƒë·ªÉ t√πy ch·ªânh n·ªôi dung element `<head>`.

```jsx title="app/layout.jsx"
export default function Layout({ children }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  );
}
```

```jsx title="app/head.jsx"
export default function Head() {
  return (
    <>
      <title>Trang c·ªßa t√¥i</title>
    </>
  );
}
```

<Steps>
1. T·∫°o file layout Astro m·ªõi ch·ªâ s·ª≠ d·ª•ng JSX ƒë∆∞·ª£c return.

2. Thay th·∫ø c·∫£ hai file n√†y b·∫±ng m·ªôt file layout Astro duy nh·∫•t ch·ª©a page shell (`<html>`, `<head>`, v√† `<body>` tags) v√† `<slot/>` thay v√¨ prop `{children}` c·ªßa React:

    ```astro title="src/layouts/Layout.astro"
    <html lang="en">
      <head>
          <title>Trang c·ªßa t√¥i</title>
      </head>
      <body>
        <slot/>
      </body>
    </html>
    ```
</Steps>

### Chuy·ªÉn ƒë·ªïi Pages v√† Posts

Trong Next.js, b√†i vi·∫øt c·ªßa b·∫°n s·ªëng trong `/pages` ho·∫∑c `/app/routeName/page.jsx`.

Trong Astro, t·∫•t c·∫£ n·ªôi dung trang ph·∫£i s·ªëng trong `src/` tr·ª´ khi b·∫°n s·ª≠ d·ª•ng [content collections](/vi/guides/content-collections/).

#### Trang React

C√°c trang Next JSX (`.js`) hi·ªán c√≥ s·∫Ω c·∫ßn ƒë∆∞·ª£c [chuy·ªÉn ƒë·ªïi t·ª´ file JSX th√†nh trang `.astro`](#tips-convert-jsx-files-to-astro-files). B·∫°n kh√¥ng th·ªÉ s·ª≠ d·ª•ng file trang JSX hi·ªán c√≥ trong Astro.

C√°c [trang `.astro`](/vi/basics/astro-pages/) n√†y ph·∫£i ƒë∆∞·ª£c ƒë·∫∑t trong `src/pages/` v√† s·∫Ω c√≥ route trang ƒë∆∞·ª£c t·∫°o t·ª± ƒë·ªông d·ª±a tr√™n ƒë∆∞·ªùng d·∫´n file.

#### Trang Markdown v√† MDX

Astro c√≥ h·ªó tr·ª£ t√≠ch h·ª£p cho Markdown v√† t√≠ch h·ª£p t√πy ch·ªçn cho file MDX. B·∫°n c√≥ th·ªÉ t√°i s·ª≠ d·ª•ng b·∫•t k·ª≥ [file Markdown v√† MDX](/vi/guides/markdown-content/) hi·ªán c√≥, nh∆∞ng ch√∫ng c√≥ th·ªÉ y√™u c·∫ßu m·ªôt s·ªë ƒëi·ªÅu ch·ªânh frontmatter, nh∆∞ th√™m [thu·ªôc t√≠nh frontmatter `layout` ƒë·∫∑c bi·ªát c·ªßa Astro](/vi/basics/layouts/#markdown-layouts). B·∫°n s·∫Ω kh√¥ng c√≤n c·∫ßn t·∫°o trang th·ªß c√¥ng cho m·ªói route ƒë∆∞·ª£c t·∫°o t·ª´ Markdown. C√°c file n√†y c√≥ th·ªÉ ƒë∆∞·ª£c ƒë·∫∑t trong `src/pages/` ƒë·ªÉ t·∫≠n d·ª•ng file-based routing t·ª± ƒë·ªông.

Ho·∫∑c, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng [content collections](/vi/guides/content-collections/) trong Astro ƒë·ªÉ l∆∞u tr·ªØ v√† qu·∫£n l√Ω n·ªôi dung. B·∫°n s·∫Ω t·ª± retrieve n·ªôi dung v√† [t·∫°o c√°c trang ƒë√≥ ƒë·ªông](/vi/guides/content-collections/#generating-routes-from-content).

### Chuy·ªÉn ƒë·ªïi Tests

V√¨ Astro xu·∫•t ra HTML th√¥, c√≥ th·ªÉ vi·∫øt end-to-end test s·ª≠ d·ª•ng output c·ªßa build step. B·∫•t k·ª≥ end-to-end test n√†o ƒë∆∞·ª£c vi·∫øt tr∆∞·ªõc ƒë√¢y c√≥ th·ªÉ ho·∫°t ƒë·ªông out-of-the-box n·∫øu b·∫°n c√≥ th·ªÉ match markup c·ªßa trang Next. Th∆∞ vi·ªán testing nh∆∞ Jest v√† React Testing Library c√≥ th·ªÉ ƒë∆∞·ª£c import v√† s·ª≠ d·ª•ng trong Astro ƒë·ªÉ test component React.

Xem [h∆∞·ªõng d·∫´n testing](/vi/guides/testing/) c·ªßa Astro ƒë·ªÉ bi·∫øt th√™m.

## Tham kh·∫£o: Chuy·ªÉn ƒë·ªïi c√∫ ph√°p Next.js sang Astro

### Next Links sang Astro

Chuy·ªÉn ƒë·ªïi b·∫•t k·ª≥ component Next `<Link to="">`, `<NavLink>` v.v. th√†nh tag HTML `<a href="">`. 

```astro del={1} ins={2}
<Link to="/blog">Blog</Link>
<a href="/blog">Blog</a>
```

Astro kh√¥ng s·ª≠ d·ª•ng component ƒë·∫∑c bi·ªát n√†o cho link, m·∫∑c d√π b·∫°n ƒë∆∞·ª£c ch√†o ƒë√≥n ƒë·ªÉ x√¢y d·ª±ng component `<Link>` c·ªßa ri√™ng m√¨nh. Sau ƒë√≥ b·∫°n c√≥ th·ªÉ import v√† s·ª≠ d·ª•ng `<Link>` n√†y gi·ªëng nh∆∞ b·∫•t k·ª≥ component n√†o kh√°c.

```astro title="src/components/Link.astro"
---
const { to } = Astro.props;
---
<a href={to}><slot /></a>
```

### Next Imports sang Astro

C·∫≠p nh·∫≠t b·∫•t k·ª≥ [file imports](/vi/guides/imports/) n√†o ƒë·ªÉ tham chi·∫øu ƒë∆∞·ªùng d·∫´n file t∆∞∆°ng ƒë·ªëi ch√≠nh x√°c. ƒêi·ªÅu n√†y c√≥ th·ªÉ ƒë∆∞·ª£c th·ª±c hi·ªán b·∫±ng [import aliases](/vi/guides/typescript/#import-aliases), ho·∫∑c b·∫±ng c√°ch vi·∫øt ra ƒë∆∞·ªùng d·∫´n t∆∞∆°ng ƒë·ªëi ƒë·∫ßy ƒë·ªß. 

L∆∞u √Ω `.astro` v√† m·ªôt s·ªë lo·∫°i file kh√°c ph·∫£i ƒë∆∞·ª£c import v·ªõi ph·∫ßn m·ªü r·ªông file ƒë·∫ßy ƒë·ªß.

```astro title="src/pages/authors/Fred.astro"
---
import Card from "../../components/Card.astro";
---
<Card />
```

### Next Children Props sang Astro

Chuy·ªÉn ƒë·ªïi b·∫•t k·ª≥ instance n√†o c·ªßa `{children}` th√†nh Astro `<slot />`. Astro kh√¥ng c·∫ßn nh·∫≠n `{children}` nh∆∞ function prop v√† s·∫Ω t·ª± ƒë·ªông render n·ªôi dung con trong `<slot />`.

```astro title="src/components/MyComponent.astro" del={3-9} ins={11-13}
---
---
export default function MyComponent(props) { 
    return (
      <div>
        {props.children}
      </div>
    );  
}

<div>
  <slot />
</div>
```

Component React truy·ªÅn nhi·ªÅu t·∫≠p children c√≥ th·ªÉ ƒë∆∞·ª£c chuy·ªÉn ƒë·ªïi th√†nh component Astro s·ª≠ d·ª•ng [named slots](/vi/basics/astro-components/#named-slots).

Xem th√™m v·ªÅ [c√°ch s·ª≠ d·ª•ng `<slot />` c·ª• th·ªÉ trong Astro](/vi/basics/astro-components/#slots).

### Next Data Fetching sang Astro

Chuy·ªÉn ƒë·ªïi b·∫•t k·ª≥ instance n√†o c·ªßa `getStaticProps()` th√†nh `import.meta.glob()` ho·∫∑c `getCollection()`/`getEntry()` ƒë·ªÉ truy c·∫≠p d·ªØ li·ªáu t·ª´ file kh√°c trong source d·ª± √°n. ƒê·ªÉ [fetch d·ªØ li·ªáu remote](/vi/guides/data-fetching/), s·ª≠ d·ª•ng `fetch()`.

C√°c data request n√†y ƒë∆∞·ª£c th·ª±c hi·ªán trong frontmatter c·ªßa component Astro v√† s·ª≠ d·ª•ng top-level await.

```astro title="src/pages/index.astro"
---
import { getCollection } from 'astro:content';

// L·∫•y t·∫•t c·∫£ entry `src/content/blog/`
const allBlogPosts = await getCollection('blog');

// L·∫•y t·∫•t c·∫£ entry `src/pages/posts/`
const allPosts = Object.values(import.meta.glob('../pages/posts/*.md', { eager: true }));

const response = await fetch('https://randomuser.me/api/');
const data = await response.json();
const randomUser = data.results[0];
---
```

Xem th√™m v·ªÅ import file local v·ªõi [`import.meta.glob()`](/vi/guides/imports/#importmetaglob), [querying s·ª≠ d·ª•ng Collections API](/vi/guides/content-collections/#querying-collections) ho·∫∑c [fetching d·ªØ li·ªáu remote](/vi/guides/data-fetching/).

### Next Styling sang Astro

B·∫°n c√≥ th·ªÉ c·∫ßn thay th·∫ø b·∫•t k·ª≥ [th∆∞ vi·ªán CSS-in-JS](https://github.com/withastro/astro/issues/4432) n√†o (vd: styled-components) b·∫±ng c√°c t√πy ch·ªçn CSS kh·∫£ d·ª•ng kh√°c trong Astro.

N·∫øu c·∫ßn, chuy·ªÉn ƒë·ªïi b·∫•t k·ª≥ style object inline n√†o (`style={{ fontWeight: "bold" }}`) th√†nh HTML style attribute inline (`style="font-weight:bold;"`). Ho·∫∑c s·ª≠ d·ª•ng [Astro `<style>` tag](/vi/guides/styling/#styling-in-astro) cho scoped CSS styles.

```astro title="src/components/Card.astro" del={1} ins={2}
<div style={{backgroundColor: `#f4f4f4`, padding: `1em`}}>{message}</div>
<div style="background-color: #f4f4f4; padding: 1em;">{message}</div>
```

Tailwind ƒë∆∞·ª£c h·ªó tr·ª£ sau khi c√†i ƒë·∫∑t [Tailwind Vite plugin](/vi/guides/styling/#tailwind). Kh√¥ng c·∫ßn thay ƒë·ªïi g√¨ v·ªõi code Tailwind hi·ªán c√≥!

Xem th√™m v·ªÅ [Styling trong Astro](/vi/guides/styling/).

### Next Image Plugin sang Astro

Chuy·ªÉn ƒë·ªïi b·∫•t k·ª≥ component Next `<Image />` n√†o th√†nh [component image c·ªßa Astro](/vi/guides/images/) trong file `.astro` ho·∫∑c `.mdx`, ho·∫∑c th√†nh [tag HTML `<img>` / JSX `<img />` chu·∫©n](/vi/guides/images/#images-in-ui-framework-components) khi ph√π h·ª£p trong component React. 

Component `<Image />` c·ªßa Astro ch·ªâ ho·∫°t ƒë·ªông trong file `.astro` v√† `.mdx`. Xem [danh s√°ch ƒë·∫ßy ƒë·ªß c√°c thu·ªôc t√≠nh component](/vi/reference/modules/astro-assets/#image-properties) v√† l∆∞u √Ω m·ªôt s·ªë s·∫Ω kh√°c v·ªõi thu·ªôc t√≠nh c·ªßa Next. 

```astro title="src/pages/index.astro"
---
import { Image } from 'astro:assets';
import rocket from '../assets/rocket.png';
---
<Image src={rocket} alt="T√†u rocket trong kh√¥ng gian." />
<img src={rocket.src} alt="T√†u rocket trong kh√¥ng gian.">
```

Trong component React (`.jsx`), s·ª≠ d·ª•ng c√∫ ph√°p image JSX chu·∫©n (`<img />`). Astro s·∫Ω kh√¥ng t·ªëi ∆∞u h√≥a nh·ªØng image n√†y, nh∆∞ng b·∫°n c√≥ th·ªÉ c√†i ƒë·∫∑t v√† s·ª≠ d·ª•ng g√≥i NPM ƒë·ªÉ c√≥ t√≠nh linh ho·∫°t h∆°n.

B·∫°n c√≥ th·ªÉ t√¨m hi·ªÉu th√™m v·ªÅ [s·ª≠ d·ª•ng image trong Astro](/vi/guides/images/) trong Images Guide.

## V√≠ d·ª• h∆∞·ªõng d·∫´n: Next data fetching sang Astro

ƒê√¢y l√† v√≠ d·ª• v·ªÅ fetch d·ªØ li·ªáu Pok√©dex Next.js ƒë∆∞·ª£c chuy·ªÉn ƒë·ªïi sang Astro.
    
`pages/index.js` fetch v√† hi·ªÉn th·ªã danh s√°ch 151 Pok√©mon ƒë·∫ßu ti√™n s·ª≠ d·ª•ng [REST Pok√©API](https://pokeapi.co/).

ƒê√¢y l√† c√°ch t√°i t·∫°o ƒëi·ªÅu ƒë√≥ trong `src/pages/index.astro`, thay th·∫ø `getStaticProps()` b·∫±ng `fetch()`.

<Steps>
1. X√°c ƒë·ªãnh return() JSX.

    ```jsx title="pages/index.js" {6-18}
    import Link from 'next/link'
    import styles from '../styles/poke-list.module.css';

    export default function Home({ pokemons }) {
        return (
            <>
                <ul className={`plain-list ${styles.pokeList}`}>
                    {pokemons.map((pokemon) => (
                        <li className={styles.pokemonListItem} key={pokemon.name}>
                            <Link className={styles.pokemonContainer} as={`/pokemon/${pokemon.name}`} href="/pokemon/[name]">
                                <p className={styles.pokemonId}>S·ªë {pokemon.id}</p>
                                <img className={styles.pokemonImage} src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.id}.png`} alt={`H√¨nh ${pokemon.name}`}></img>
                                <h2 className={styles.pokemonName}>{pokemon.name}</h2>
                            </Link>
                        </li>
                    ))}
                </ul>
            </>
        )
    }

    export const getStaticProps = async () => {
        const res = await fetch("https://pokeapi.co/api/v2/pokemon?limit=151")
        const resJson = await res.json();
        const pokemons = resJson.results.map(pokemon => {
            const name = pokemon.name;
            // https://pokeapi.co/api/v2/pokemon/1/
            const url = pokemon.url;
            const id = url.split("/")[url.split("/").length - 2];
            return {
                name,
                url,
                id
            }
        });
        return {
            props: {
                pokemons,
            },
        }
    }
    ```

2. T·∫°o `src/pages/index.astro`

    S·ª≠ d·ª•ng gi√° tr·ªã return c·ªßa h√†m Next. Chuy·ªÉn ƒë·ªïi b·∫•t k·ª≥ c√∫ ph√°p Next ho·∫∑c React n√†o th√†nh Astro, bao g·ªìm thay ƒë·ªïi case c·ªßa b·∫•t k·ª≥ [HTML global attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes) n√†o.

    L∆∞u √Ω:

    - `.map` v·∫´n ho·∫°t ƒë·ªông!

    - `className` tr·ªü th√†nh `class`.

    - `<Link>` tr·ªü th√†nh `<a>`.

    - Fragment `<> </>` kh√¥ng c·∫ßn thi·∫øt trong template Astro.

    - `key` l√† thu·ªôc t√≠nh React, v√† kh√¥ng ph·∫£i thu·ªôc t√≠nh c·ªßa `li` trong Astro.

    ```astro title="src/pages/index.astro" "class" "</a>" "<a"
    ---
    ---
    <ul class="plain-list pokeList">
        {pokemons.map((pokemon) => (
            <li class="pokemonListItem">
                <a class="pokemonContainer" href={`/pokemon/${pokemon.name}`}>
                    <p class="pokemonId">S·ªë {pokemon.id}</p>
                    <img class="pokemonImage" src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.id}.png`} alt={`H√¨nh ${pokemon.name}`}/>
                    <h2 class="pokemonName">{pokemon.name}</h2>
                </a>
            </li>
        ))}
    </ul>
    ```

3. Th√™m b·∫•t k·ª≥ import, props, v√† JavaScript c·∫ßn thi·∫øt

    L∆∞u √Ω:

    - H√†m `getStaticProps` kh√¥ng c√≤n c·∫ßn thi·∫øt. D·ªØ li·ªáu t·ª´ API ƒë∆∞·ª£c fetch tr·ª±c ti·∫øp trong code fence.
    - Component `<Layout>` ƒë∆∞·ª£c import v√† b·ªçc page templating.

    ```astro ins={2,4-16,19,31} title="src/pages/index.astro"
    ---
    import Layout from '../layouts/layout.astro';

    const res = await fetch("https://pokeapi.co/api/v2/pokemon?limit=151");
    const resJson = await res.json();
    const pokemons = resJson.results.map(pokemon => {
        const name = pokemon.name;
        // https://pokeapi.co/api/v2/pokemon/1/
        const url = pokemon.url;
        const id = url.split("/")[url.split("/").length - 2];
        return {
            name,
            url,
            id
        }
    });
    ---

    <Layout>
      <ul class="plain-list pokeList">
          {pokemons.map((pokemon) => (
              <li class="pokemonListItem" key={pokemon.name}>
                  <a class="pokemonContainer" href={`/pokemon/${pokemon.name}`}>
                      <p class="pokemonId">S·ªë {pokemon.id}</p>
                      <img class="pokemonImage" src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.id}.png`} alt={`H√¨nh ${pokemon.name}`}/>
                      <h2 class="pokemonName">{pokemon.name}</h2>
                  </a>
              </li>
          ))}
      </ul>
    </Layout>
    ```
</Steps>

## T√†i nguy√™n c·ªông ƒë·ªìng 

<CardGrid>

  <LinkCard title="T·∫°i sao ch√∫ng t√¥i chuy·ªÉn sang Astro (v√† t·∫°i sao n√≥ c√≥ th·ªÉ khi·∫øn b·∫°n quan t√¢m)" href="https://www.datocms.com/blog/why-we-switched-to-astro" />
  <LinkCard title="Chuy·ªÉn ƒë·ªïi t·ª´ Next.js sang Astro" href="https://johnzanussi.com/posts/nextjs-to-astro-migration" />
  <LinkCard title="T·ª´ NextJS sang Astro" href="https://vanntile.com/blog/next-to-astro" />
  <LinkCard title="Chuy·ªÉn ƒë·ªïi Next.js sang Astro" href="https://ericclemmons.com/blog/converting-nextjs-to-astro" />
  <LinkCard title="Chuy·ªÉn ƒë·ªïi sang Astro (t·ª´ Next.js)" href="https://www.raygesualdo.com/posts/migrating-to-astro-the-beginning/" />
  <LinkCard title="Astro.js nh∆∞ m·ªôt l·ª±a ch·ªçn thay th·∫ø cho Next.js" href="https://www.railyard.works/blog/astro-as-alternative-to-next" />
  <LinkCard title="T·∫°i sao t√¥i chuy·ªÉn trang web t·ª´ Next.js sang Astro" href="https://praveenjuge.com/blog/why-i-switched-my-website-from-nextjs-to-astro/" />
  <LinkCard title="NextJS sang Astro: ki·ªÉm so√°t nhi·ªÅu h∆°n = trang web nhanh h∆°n" href="https://www.youtube.com/watch?v=PSzCtdM20Fc" />
  <LinkCard title="Astro l√†m trang web t√¥i nhanh h∆°n 100 l·∫ßn nh∆∞ th·∫ø n√†o" href="https://www.youtube.com/watch?v=cOxA3kMYtkM" />

</CardGrid>

:::note[C√≥ t√†i nguy√™n ƒë·ªÉ chia s·∫ª?]
N·∫øu b·∫°n t√¨m th·∫•y (ho·∫∑c t·∫°o!) video ho·∫∑c b√†i blog h·ªØu √≠ch v·ªÅ chuy·ªÉn ƒë·ªïi trang Next.js sang Astro, [th√™m v√†o danh s√°ch n√†y](https://github.com/withastro/docs/edit/main/src/content/docs/vi/guides/migrate-to-astro/from-nextjs.mdx)!
:::