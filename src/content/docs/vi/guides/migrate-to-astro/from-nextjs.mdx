---
title: Chuyá»ƒn Ä‘á»•i tá»« Next.js
description: HÆ°á»›ng dáº«n chuyá»ƒn Ä‘á»•i dá»± Ã¡n Next.js hiá»‡n cÃ³ sang Astro
sidebar:
  label: Next.js
type: migration
stub: false
framework: Next.js
i18nReady: true
---
import { Steps, LinkCard, CardGrid } from '@astrojs/starlight/components';
import AstroJSXTabs from '~/components/tabs/AstroJSXTabs.astro';
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';

DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ khÃ¡i niá»‡m quan trá»ng vÃ  chiáº¿n lÆ°á»£c chuyá»ƒn Ä‘á»•i giÃºp báº¡n báº¯t Ä‘áº§u. Sá»­ dá»¥ng pháº§n cÃ²n láº¡i cá»§a tÃ i liá»‡u vÃ  [cá»™ng Ä‘á»“ng Discord](https://astro.build/chat) Ä‘á»ƒ tiáº¿p tá»¥c hÃ nh trÃ¬nh!

## Äiá»ƒm tÆ°Æ¡ng Ä‘á»“ng chÃ­nh giá»¯a Next.js vÃ  Astro

Next.js vÃ  Astro cÃ³ má»™t sá»‘ Ä‘iá»ƒm tÆ°Æ¡ng Ä‘á»“ng giÃºp báº¡n chuyá»ƒn Ä‘á»•i dá»± Ã¡n:

- [CÃº phÃ¡p cá»§a file `.astro` tÆ°Æ¡ng tá»± JSX](/en/reference/astro-syntax/#differences-between-astro-and-jsx). Viáº¿t Astro sáº½ cáº£m tháº¥y quen thuá»™c.
- Dá»± Ã¡n Astro cÃ³ thá»ƒ lÃ  SSG hoáº·c [SSR vá»›i pre-rendering theo trang](/en/guides/on-demand-rendering/).
- Astro sá»­ dá»¥ng routing dá»±a trÃªn file, vÃ  [cho phÃ©p cÃ¡c trang cÃ³ tÃªn Ä‘áº·c biá»‡t táº¡o route Ä‘á»™ng](/en/guides/routing/#dynamic-routes).
- Astro [dá»±a trÃªn component](/en/basics/astro-components/), vÃ  cáº¥u trÃºc markup cá»§a báº¡n sáº½ tÆ°Æ¡ng tá»± trÆ°á»›c vÃ  sau khi chuyá»ƒn Ä‘á»•i.
- Astro cÃ³ [tÃ­ch há»£p chÃ­nh thá»©c cho React, Preact, vÃ  Solid](/en/guides/integrations-guide/react/) nÃªn báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c component JSX hiá»‡n cÃ³. LÆ°u Ã½ trong Astro, cÃ¡c file nÃ y **pháº£i** cÃ³ pháº§n má»Ÿ rá»™ng `.jsx` hoáº·c `.tsx`.
- Astro há»— trá»£ [cÃ i Ä‘áº·t gÃ³i NPM](/en/guides/imports/#npm-packages), bao gá»“m thÆ° viá»‡n React. Nhiá»u dependency hiá»‡n cÃ³ sáº½ hoáº¡t Ä‘á»™ng trong Astro.

## Äiá»ƒm khÃ¡c biá»‡t chÃ­nh giá»¯a Next.js vÃ  Astro

Khi báº¡n xÃ¢y dá»±ng láº¡i trang Next.js trong Astro, báº¡n sáº½ nháº­n tháº¥y má»™t sá»‘ khÃ¡c biá»‡t quan trá»ng:

- Next.js lÃ  á»©ng dá»¥ng React single-page, vÃ  sá»­ dá»¥ng `index.js` lÃ m root cá»§a dá»± Ã¡n. Astro lÃ  trang web multi-page, vÃ  `index.astro` lÃ  trang chá»§.

- [Component `.astro`](/en/basics/astro-components/) khÃ´ng Ä‘Æ°á»£c viáº¿t nhÆ° cÃ¡c hÃ m export tráº£ vá» template trang. Thay vÃ o Ä‘Ã³, báº¡n sáº½ tÃ¡ch code thÃ nh "code fence" cho JavaScript vÃ  pháº§n body Ä‘á»™c quyá»n cho HTML báº¡n táº¡o ra.

- [Táº­p trung vÃ o ná»™i dung](/en/concepts/why-astro/#content-driven): Astro Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ showcase ná»™i dung vÃ  cho phÃ©p báº¡n opt-in tÆ°Æ¡ng tÃ¡c chá»‰ khi cáº§n. á»¨ng dá»¥ng Next.js hiá»‡n cÃ³ cÃ³ thá»ƒ Ä‘Æ°á»£c xÃ¢y dá»±ng cho tÆ°Æ¡ng tÃ¡c client-side cao vÃ  cÃ³ thá»ƒ yÃªu cáº§u ká»¹ thuáº­t Astro nÃ¢ng cao Ä‘á»ƒ bao gá»“m cÃ¡c má»¥c khÃ³ replicate hÆ¡n báº±ng component `.astro`, nhÆ° dashboard.

## Chuyá»ƒn Ä‘á»•i dá»± Ã¡n Next.js

Má»—i dá»± Ã¡n chuyá»ƒn Ä‘á»•i sáº½ khÃ¡c nhau, nhÆ°ng cÃ³ má»™t sá»‘ hÃ nh Ä‘á»™ng phá»• biáº¿n báº¡n sáº½ thá»±c hiá»‡n khi chuyá»ƒn tá»« Next.js sang Astro.

### Táº¡o dá»± Ã¡n Astro má»›i

Sá»­ dá»¥ng lá»‡nh `create astro` cho package manager Ä‘á»ƒ khá»Ÿi cháº¡y CLI wizard cá»§a Astro hoáº·c chá»n theme cá»™ng Ä‘á»“ng tá»« [Astro Theme Showcase](https://astro.build/themes).

Báº¡n cÃ³ thá»ƒ truyá»n argument `--template` cho lá»‡nh `create astro` Ä‘á»ƒ báº¯t Ä‘áº§u dá»± Ã¡n Astro má»›i vá»›i má»™t trong cÃ¡c starter chÃ­nh thá»©c (vd: `docs`, `blog`, `portfolio`). Hoáº·c, báº¡n cÃ³ thá»ƒ [báº¯t Ä‘áº§u dá»± Ã¡n má»›i tá»« báº¥t ká»³ repository Astro nÃ o trÃªn GitHub](/en/install-and-setup/#install-from-the-cli-wizard).

  <PackageManagerTabs>
    <Fragment slot="npm">
    ```shell
    # khá»Ÿi cháº¡y Astro CLI Wizard 
    npm create astro@latest

    # táº¡o dá»± Ã¡n má»›i vá»›i vÃ­ dá»¥ chÃ­nh thá»©c
    npm create astro@latest -- --template <example-name>
    ```
    </Fragment>
    <Fragment slot="pnpm">
    ```shell
    # khá»Ÿi cháº¡y Astro CLI Wizard 
    pnpm create astro@latest

    # táº¡o dá»± Ã¡n má»›i vá»›i vÃ­ dá»¥ chÃ­nh thá»©c
    pnpm create astro@latest --template <example-name>
    ```
    </Fragment>
    <Fragment slot="yarn">
    ```shell
    # khá»Ÿi cháº¡y Astro CLI Wizard 
    yarn create astro@latest

    # táº¡o dá»± Ã¡n má»›i vá»›i vÃ­ dá»¥ chÃ­nh thá»©c
    yarn create astro@latest --template <example-name>
    ```
    </Fragment>
  </PackageManagerTabs>

Sau Ä‘Ã³, copy cÃ¡c file dá»± Ã¡n Next hiá»‡n cÃ³ sang dá»± Ã¡n Astro má»›i trong thÆ° má»¥c riÃªng bÃªn ngoÃ i `src`.

:::tip
Truy cáº­p https://astro.new Ä‘á»ƒ xem danh sÃ¡ch Ä‘áº§y Ä‘á»§ cÃ¡c template starter chÃ­nh thá»©c, vÃ  link Ä‘á»ƒ má»Ÿ dá»± Ã¡n má»›i trong IDX, StackBlitz, CodeSandbox, hoáº·c Gitpod.
:::

### CÃ i Ä‘áº·t tÃ­ch há»£p (tÃ¹y chá»n)

Báº¡n cÃ³ thá»ƒ tháº¥y há»¯u Ã­ch khi cÃ i Ä‘áº·t má»™t sá»‘ [tÃ­ch há»£p tÃ¹y chá»n cá»§a Astro](/en/guides/integrations-guide/) Ä‘á»ƒ sá»­ dá»¥ng khi chuyá»ƒn Ä‘á»•i dá»± Ã¡n Next sang Astro:

- **@astrojs/react**: Ä‘á»ƒ tÃ¡i sá»­ dá»¥ng má»™t sá»‘ component React UI hiá»‡n cÃ³ trong trang Astro má»›i, hoáº·c tiáº¿p tá»¥c viáº¿t vá»›i component React.

- **@astrojs/mdx**: Ä‘á»ƒ mang file MDX hiá»‡n cÃ³ tá»« dá»± Ã¡n Next, hoáº·c sá»­ dá»¥ng MDX trong trang Astro má»›i.

### Äáº·t source code trong `src`

Theo [cáº¥u trÃºc dá»± Ã¡n Astro](/en/basics/project-structure/):

<Steps>
1. **Giá»¯** thÆ° má»¥c `public/` cá»§a Next nguyÃªn váº¹n. 
   
    Astro sá»­ dá»¥ng thÆ° má»¥c `public/` cho static assets, giá»‘ng nhÆ° Next. KhÃ´ng cáº§n thay Ä‘á»•i gÃ¬ cho thÆ° má»¥c nÃ y vÃ  ná»™i dung cá»§a nÃ³.

2. **Copy hoáº·c Di chuyá»ƒn** cÃ¡c file vÃ  thÆ° má»¥c khÃ¡c cá»§a Next (vd: `pages`, `styles` v.v.) vÃ o thÆ° má»¥c `src/` cá»§a Astro khi báº¡n xÃ¢y dá»±ng láº¡i trang, theo [cáº¥u trÃºc dá»± Ã¡n Astro](/en/basics/project-structure/).

    Giá»‘ng Next, thÆ° má»¥c `src/pages/` cá»§a Astro lÃ  thÆ° má»¥c Ä‘áº·c biá»‡t dÃ¹ng cho file-based routing. Táº¥t cáº£ thÆ° má»¥c khÃ¡c lÃ  tÃ¹y chá»n, vÃ  báº¡n cÃ³ thá»ƒ tá»• chá»©c ná»™i dung thÆ° má»¥c `src/` theo cÃ¡ch báº¡n muá»‘n. CÃ¡c thÆ° má»¥c phá»• biáº¿n khÃ¡c trong dá»± Ã¡n Astro bao gá»“m `src/layouts/`, `src/components`, `src/styles`, `src/scripts`.
</Steps>

### File cáº¥u hÃ¬nh Astro

Astro cÃ³ file cáº¥u hÃ¬nh á»Ÿ root dá»± Ã¡n gá»i lÃ  [`astro.config.mjs`](/en/guides/configuring-astro/). NÃ y chá»‰ dÃ¹ng Ä‘á»ƒ cáº¥u hÃ¬nh dá»± Ã¡n Astro vÃ  báº¥t ká»³ tÃ­ch há»£p nÃ o Ä‘Æ°á»£c cÃ i Ä‘áº·t, bao gá»“m [SSR adapters](/en/guides/deploy/).

### Máº¹o: Chuyá»ƒn Ä‘á»•i file JSX thÃ nh file `.astro`

DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ máº¹o Ä‘á»ƒ chuyá»ƒn Ä‘á»•i component Next `.js` thÃ nh component `.astro`:

1. Sá»­ dá»¥ng JSX Ä‘Æ°á»£c return cá»§a hÃ m component Next.js hiá»‡n cÃ³ lÃ m cÆ¡ sá»Ÿ cho HTML template.

2. Thay Ä‘á»•i báº¥t ká»³ [cÃº phÃ¡p Next hoáº·c JSX thÃ nh Astro](#reference-convert-nextjs-syntax-to-astro) hoáº·c thÃ nh chuáº©n HTML web. Bao gá»“m `<Link>`, `<Script>`, `{children}`, vÃ  `className`, vÃ­ dá»¥.

3. Di chuyá»ƒn báº¥t ká»³ JavaScript cáº§n thiáº¿t, bao gá»“m import statements, vÃ o ["code fence" (`---`)](/en/basics/astro-components/#the-component-script). LÆ°u Ã½: JavaScript Ä‘á»ƒ [render ná»™i dung cÃ³ Ä‘iá»u kiá»‡n](/en/reference/astro-syntax/#dynamic-html) thÆ°á»ng Ä‘Æ°á»£c viáº¿t trá»±c tiáº¿p trong HTML template trong Astro.

4. Sá»­ dá»¥ng [`Astro.props`](/en/reference/api-reference/#props) Ä‘á»ƒ truy cáº­p báº¥t ká»³ props bá»• sung nÃ o trÆ°á»›c Ä‘Ã¢y Ä‘Æ°á»£c truyá»n cho hÃ m Next cá»§a báº¡n.

5. Quyáº¿t Ä‘á»‹nh xem component Ä‘Æ°á»£c import cÃ³ cáº§n chuyá»ƒn Ä‘á»•i thÃ nh Astro khÃ´ng. Vá»›i tÃ­ch há»£p chÃ­nh thá»©c Ä‘Æ°á»£c cÃ i Ä‘áº·t, báº¡n cÃ³ thá»ƒ [sá»­ dá»¥ng component React hiá»‡n cÃ³ trong file Astro](/en/guides/framework-components/). NhÆ°ng báº¡n cÃ³ thá»ƒ muá»‘n chuyá»ƒn Ä‘á»•i chÃºng thÃ nh component `.astro`, Ä‘áº·c biá»‡t náº¿u chÃºng khÃ´ng cáº§n tÆ°Æ¡ng tÃ¡c!

6. Thay tháº¿ `getStaticProps()` báº±ng import statements hoáº·c [`import.meta.glob()`](/en/guides/imports/#importmetaglob) Ä‘á»ƒ query file local. Sá»­ dá»¥ng `fetch()` Ä‘á»ƒ fetch dá»¯ liá»‡u external.

Xem [vÃ­ dá»¥ vá» file Next `.js` Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i tá»«ng bÆ°á»›c](#guided-example-next-data-fetching-to-astro).

#### So sÃ¡nh: JSX vs Astro

So sÃ¡nh component Next sau vÃ  component Astro tÆ°Æ¡ng á»©ng:

<AstroJSXTabs>
  <Fragment slot="jsx">
    ```jsx title="StarCount.jsx"
    import Header from "./header";
    import Footer from "./footer";
    import "./layout.css";

    export async function getStaticProps() {
        const res = await fetch("https://api.github.com/repos/withastro/astro");
        const json = await res.json();
        return {
            props: { message: json.message, stars: json.stargazers_count || 0 },
        }
    }

    const Component = ({ stars, message }) => {
        
        return (
            <>
                <Header />
                <p style={{
                    backgroundColor: `#f4f4f4`,
                    padding: `1em 1.5em`,
                    textAlign: `center`,
                    marginBottom: `1em`
                }}>Astro cÃ³ {stars} ğŸ§‘â€ğŸš€</p>
                <Footer />
            </>
        )
    }

    export default Component;
    ```
  </Fragment>
  <Fragment slot="astro">
    ```astro title="StarCount.astro"
    ---
    import Header from "./header";
    import Footer from "./footer";
    import "./layout.css";

    const res = await fetch("https://api.github.com/repos/withastro/astro");
    const json = await res.json();
    const message = json.message;
    const stars = json.stargazers_count || 0;
    ---
    <Header />
    <p class="banner">Astro cÃ³ {stars} ğŸ§‘â€ğŸš€</p>
    <Footer />

    <style>
      .banner {
        background-color: #f4f4f4; 
        padding: 1em 1.5em;
        text-align: center;
        margin-bottom: 1em;
      }
    <style>
    ```
  </Fragment>
</AstroJSXTabs>

### Chuyá»ƒn Ä‘á»•i file Layout

Báº¡n cÃ³ thá»ƒ tháº¥y há»¯u Ã­ch khi báº¯t Ä‘áº§u báº±ng cÃ¡ch chuyá»ƒn Ä‘á»•i layout vÃ  template Next.js thÃ nh [component layout Astro](/en/basics/layouts/).

Next cÃ³ hai phÆ°Æ¡ng phÃ¡p khÃ¡c nhau Ä‘á»ƒ táº¡o file layout, má»—i cÃ¡ch xá»­ lÃ½ layout khÃ¡c vá»›i Astro:

- ThÆ° má»¥c `pages`

- [ThÆ° má»¥c `/app`](https://nextjs.org/docs/app/building-your-application/routing/pages-and-layouts#layouts)

Má»—i trang Astro yÃªu cáº§u rÃµ rÃ ng cÃ¡c tag `<html>`, `<head>`, vÃ  `<body>` pháº£i cÃ³ máº·t, nÃªn viá»‡c tÃ¡i sá»­ dá»¥ng file layout qua cÃ¡c trang lÃ  phá»• biáº¿n. Astro sá»­ dá»¥ng [`<slot />`](/en/basics/astro-components/#slots) cho ná»™i dung trang, khÃ´ng cáº§n import statement. LÆ°u Ã½ template HTML chuáº©n, vÃ  truy cáº­p trá»±c tiáº¿p `<head>`:  

```astro title="src/layouts/Layout.astro"
---
---
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Astro</title>
	</head>
	<body>
    <!-- Bá»c element slot vá»›i template layout hiá»‡n cÃ³ -->
		<slot />
	</body>
</html>
```

#### Chuyá»ƒn Ä‘á»•i tá»« thÆ° má»¥c `pages` cá»§a Next.js

Dá»± Ã¡n Next cá»§a báº¡n cÃ³ thá»ƒ cÃ³ file `pages/_document.jsx` import component React Ä‘á»ƒ tÃ¹y chá»‰nh `<head>` cá»§a app:

```jsx title="pages/_document.jsx"
import Document, { Html, Head, Main, NextScript } from "next/document";

export default class MyDocument extends Document {
  render() {
    return (
      <Html lang="en">
        <Head>
          <link rel="icon" href="/favicon.ico" />
        </Head>
        <body>
          <Main />
          <NextScript />
        </body>
      </Html>
    );
  }
}
```

<Steps>
1. Táº¡o file layout Astro má»›i chá»‰ sá»­ dá»¥ng JSX Ä‘Æ°á»£c return.

2. Thay tháº¿ báº¥t ká»³ component React nÃ o báº±ng `<html>`, `<head>`, `<slot>`, vÃ  cÃ¡c tag HTML chuáº©n khÃ¡c.

    ```astro title="src/layouts/Document.astro"
    <html lang="en">
      <head>
          <link rel="icon" href="/favicon.ico" />
      </head>
      <body>
        <slot/>
      </body>
    </html>
    ```
</Steps>

#### Chuyá»ƒn Ä‘á»•i tá»« thÆ° má»¥c `/app` cá»§a Next.js

File layout thÆ° má»¥c `app/` cá»§a Next.js Ä‘Æ°á»£c táº¡o vá»›i hai file: file `layout.jsx` Ä‘á»ƒ tÃ¹y chá»‰nh ná»™i dung `<html>` vÃ  `<body>`, vÃ  file `head.jsx` Ä‘á»ƒ tÃ¹y chá»‰nh ná»™i dung element `<head>`.

```jsx title="app/layout.jsx"
export default function Layout({ children }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  );
}
```

```jsx title="app/head.jsx"
export default function Head() {
  return (
    <>
      <title>Trang cá»§a tÃ´i</title>
    </>
  );
}
```

<Steps>
1. Táº¡o file layout Astro má»›i chá»‰ sá»­ dá»¥ng JSX Ä‘Æ°á»£c return.

2. Thay tháº¿ cáº£ hai file nÃ y báº±ng má»™t file layout Astro duy nháº¥t chá»©a page shell (`<html>`, `<head>`, vÃ  `<body>` tags) vÃ  `<slot/>` thay vÃ¬ prop `{children}` cá»§a React:

    ```astro title="src/layouts/Layout.astro"
    <html lang="en">
      <head>
          <title>Trang cá»§a tÃ´i</title>
      </head>
      <body>
        <slot/>
      </body>
    </html>
    ```
</Steps>

### Chuyá»ƒn Ä‘á»•i Pages vÃ  Posts

Trong Next.js, bÃ i viáº¿t cá»§a báº¡n sá»‘ng trong `/pages` hoáº·c `/app/routeName/page.jsx`.

Trong Astro, táº¥t cáº£ ná»™i dung trang pháº£i sá»‘ng trong `src/` trá»« khi báº¡n sá»­ dá»¥ng [content collections](/en/guides/content-collections/).

#### Trang React

CÃ¡c trang Next JSX (`.js`) hiá»‡n cÃ³ sáº½ cáº§n Ä‘Æ°á»£c [chuyá»ƒn Ä‘á»•i tá»« file JSX thÃ nh trang `.astro`](#tips-convert-jsx-files-to-astro-files). Báº¡n khÃ´ng thá»ƒ sá»­ dá»¥ng file trang JSX hiá»‡n cÃ³ trong Astro.

CÃ¡c [trang `.astro`](/en/basics/astro-pages/) nÃ y pháº£i Ä‘Æ°á»£c Ä‘áº·t trong `src/pages/` vÃ  sáº½ cÃ³ route trang Ä‘Æ°á»£c táº¡o tá»± Ä‘á»™ng dá»±a trÃªn Ä‘Æ°á»ng dáº«n file.

#### Trang Markdown vÃ  MDX

Astro cÃ³ há»— trá»£ tÃ­ch há»£p cho Markdown vÃ  tÃ­ch há»£p tÃ¹y chá»n cho file MDX. Báº¡n cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng báº¥t ká»³ [file Markdown vÃ  MDX](/en/guides/markdown-content/) hiá»‡n cÃ³, nhÆ°ng chÃºng cÃ³ thá»ƒ yÃªu cáº§u má»™t sá»‘ Ä‘iá»u chá»‰nh frontmatter, nhÆ° thÃªm [thuá»™c tÃ­nh frontmatter `layout` Ä‘áº·c biá»‡t cá»§a Astro](/en/basics/layouts/#markdown-layouts). Báº¡n sáº½ khÃ´ng cÃ²n cáº§n táº¡o trang thá»§ cÃ´ng cho má»—i route Ä‘Æ°á»£c táº¡o tá»« Markdown. CÃ¡c file nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘áº·t trong `src/pages/` Ä‘á»ƒ táº­n dá»¥ng file-based routing tá»± Ä‘á»™ng.

Hoáº·c, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng [content collections](/en/guides/content-collections/) trong Astro Ä‘á»ƒ lÆ°u trá»¯ vÃ  quáº£n lÃ½ ná»™i dung. Báº¡n sáº½ tá»± retrieve ná»™i dung vÃ  [táº¡o cÃ¡c trang Ä‘Ã³ Ä‘á»™ng](/en/guides/content-collections/#generating-routes-from-content).

### Chuyá»ƒn Ä‘á»•i Tests

VÃ¬ Astro xuáº¥t ra HTML thÃ´, cÃ³ thá»ƒ viáº¿t end-to-end test sá»­ dá»¥ng output cá»§a build step. Báº¥t ká»³ end-to-end test nÃ o Ä‘Æ°á»£c viáº¿t trÆ°á»›c Ä‘Ã¢y cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng out-of-the-box náº¿u báº¡n cÃ³ thá»ƒ match markup cá»§a trang Next. ThÆ° viá»‡n testing nhÆ° Jest vÃ  React Testing Library cÃ³ thá»ƒ Ä‘Æ°á»£c import vÃ  sá»­ dá»¥ng trong Astro Ä‘á»ƒ test component React.

Xem [hÆ°á»›ng dáº«n testing](/en/guides/testing/) cá»§a Astro Ä‘á»ƒ biáº¿t thÃªm.

## Tham kháº£o: Chuyá»ƒn Ä‘á»•i cÃº phÃ¡p Next.js sang Astro

### Next Links sang Astro

Chuyá»ƒn Ä‘á»•i báº¥t ká»³ component Next `<Link to="">`, `<NavLink>` v.v. thÃ nh tag HTML `<a href="">`. 

```astro del={1} ins={2}
<Link to="/blog">Blog</Link>
<a href="/blog">Blog</a>
```

Astro khÃ´ng sá»­ dá»¥ng component Ä‘áº·c biá»‡t nÃ o cho link, máº·c dÃ¹ báº¡n Ä‘Æ°á»£c chÃ o Ä‘Ã³n Ä‘á»ƒ xÃ¢y dá»±ng component `<Link>` cá»§a riÃªng mÃ¬nh. Sau Ä‘Ã³ báº¡n cÃ³ thá»ƒ import vÃ  sá»­ dá»¥ng `<Link>` nÃ y giá»‘ng nhÆ° báº¥t ká»³ component nÃ o khÃ¡c.

```astro title="src/components/Link.astro"
---
const { to } = Astro.props;
---
<a href={to}><slot /></a>
```

### Next Imports sang Astro

Cáº­p nháº­t báº¥t ká»³ [file imports](/en/guides/imports/) nÃ o Ä‘á»ƒ tham chiáº¿u Ä‘Æ°á»ng dáº«n file tÆ°Æ¡ng Ä‘á»‘i chÃ­nh xÃ¡c. Äiá»u nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c thá»±c hiá»‡n báº±ng [import aliases](/en/guides/typescript/#import-aliases), hoáº·c báº±ng cÃ¡ch viáº¿t ra Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i Ä‘áº§y Ä‘á»§. 

LÆ°u Ã½ `.astro` vÃ  má»™t sá»‘ loáº¡i file khÃ¡c pháº£i Ä‘Æ°á»£c import vá»›i pháº§n má»Ÿ rá»™ng file Ä‘áº§y Ä‘á»§.

```astro title="src/pages/authors/Fred.astro"
---
import Card from "../../components/Card.astro";
---
<Card />
```

### Next Children Props sang Astro

Chuyá»ƒn Ä‘á»•i báº¥t ká»³ instance nÃ o cá»§a `{children}` thÃ nh Astro `<slot />`. Astro khÃ´ng cáº§n nháº­n `{children}` nhÆ° function prop vÃ  sáº½ tá»± Ä‘á»™ng render ná»™i dung con trong `<slot />`.

```astro title="src/components/MyComponent.astro" del={3-9} ins={11-13}
---
---
export default function MyComponent(props) { 
    return (
      <div>
        {props.children}
      </div>
    );  
}

<div>
  <slot />
</div>
```

Component React truyá»n nhiá»u táº­p children cÃ³ thá»ƒ Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i thÃ nh component Astro sá»­ dá»¥ng [named slots](/en/basics/astro-components/#named-slots).

Xem thÃªm vá» [cÃ¡ch sá»­ dá»¥ng `<slot />` cá»¥ thá»ƒ trong Astro](/en/basics/astro-components/#slots).

### Next Data Fetching sang Astro

Chuyá»ƒn Ä‘á»•i báº¥t ká»³ instance nÃ o cá»§a `getStaticProps()` thÃ nh `import.meta.glob()` hoáº·c `getCollection()`/`getEntry()` Ä‘á»ƒ truy cáº­p dá»¯ liá»‡u tá»« file khÃ¡c trong source dá»± Ã¡n. Äá»ƒ [fetch dá»¯ liá»‡u remote](/en/guides/data-fetching/), sá»­ dá»¥ng `fetch()`.

CÃ¡c data request nÃ y Ä‘Æ°á»£c thá»±c hiá»‡n trong frontmatter cá»§a component Astro vÃ  sá»­ dá»¥ng top-level await.

```astro title="src/pages/index.astro"
---
import { getCollection } from 'astro:content';

// Láº¥y táº¥t cáº£ entry `src/content/blog/`
const allBlogPosts = await getCollection('blog');

// Láº¥y táº¥t cáº£ entry `src/pages/posts/`
const allPosts = Object.values(import.meta.glob('../pages/posts/*.md', { eager: true }));

const response = await fetch('https://randomuser.me/api/');
const data = await response.json();
const randomUser = data.results[0];
---
```

Xem thÃªm vá» import file local vá»›i [`import.meta.glob()`](/en/guides/imports/#importmetaglob), [querying sá»­ dá»¥ng Collections API](/en/guides/content-collections/#querying-collections) hoáº·c [fetching dá»¯ liá»‡u remote](/en/guides/data-fetching/).

### Next Styling sang Astro

Báº¡n cÃ³ thá»ƒ cáº§n thay tháº¿ báº¥t ká»³ [thÆ° viá»‡n CSS-in-JS](https://github.com/withastro/astro/issues/4432) nÃ o (vd: styled-components) báº±ng cÃ¡c tÃ¹y chá»n CSS kháº£ dá»¥ng khÃ¡c trong Astro.

Náº¿u cáº§n, chuyá»ƒn Ä‘á»•i báº¥t ká»³ style object inline nÃ o (`style={{ fontWeight: "bold" }}`) thÃ nh HTML style attribute inline (`style="font-weight:bold;"`). Hoáº·c sá»­ dá»¥ng [Astro `<style>` tag](/en/guides/styling/#styling-in-astro) cho scoped CSS styles.

```astro title="src/components/Card.astro" del={1} ins={2}
<div style={{backgroundColor: `#f4f4f4`, padding: `1em`}}>{message}</div>
<div style="background-color: #f4f4f4; padding: 1em;">{message}</div>
```

Tailwind Ä‘Æ°á»£c há»— trá»£ sau khi cÃ i Ä‘áº·t [Tailwind Vite plugin](/en/guides/styling/#tailwind). KhÃ´ng cáº§n thay Ä‘á»•i gÃ¬ vá»›i code Tailwind hiá»‡n cÃ³!

Xem thÃªm vá» [Styling trong Astro](/en/guides/styling/).

### Next Image Plugin sang Astro

Chuyá»ƒn Ä‘á»•i báº¥t ká»³ component Next `<Image />` nÃ o thÃ nh [component image cá»§a Astro](/en/guides/images/) trong file `.astro` hoáº·c `.mdx`, hoáº·c thÃ nh [tag HTML `<img>` / JSX `<img />` chuáº©n](/en/guides/images/#images-in-ui-framework-components) khi phÃ¹ há»£p trong component React. 

Component `<Image />` cá»§a Astro chá»‰ hoáº¡t Ä‘á»™ng trong file `.astro` vÃ  `.mdx`. Xem [danh sÃ¡ch Ä‘áº§y Ä‘á»§ cÃ¡c thuá»™c tÃ­nh component](/en/reference/modules/astro-assets/#image-properties) vÃ  lÆ°u Ã½ má»™t sá»‘ sáº½ khÃ¡c vá»›i thuá»™c tÃ­nh cá»§a Next. 

```astro title="src/pages/index.astro"
---
import { Image } from 'astro:assets';
import rocket from '../assets/rocket.png';
---
<Image src={rocket} alt="TÃ u rocket trong khÃ´ng gian." />
<img src={rocket.src} alt="TÃ u rocket trong khÃ´ng gian.">
```

Trong component React (`.jsx`), sá»­ dá»¥ng cÃº phÃ¡p image JSX chuáº©n (`<img />`). Astro sáº½ khÃ´ng tá»‘i Æ°u hÃ³a nhá»¯ng image nÃ y, nhÆ°ng báº¡n cÃ³ thá»ƒ cÃ i Ä‘áº·t vÃ  sá»­ dá»¥ng gÃ³i NPM Ä‘á»ƒ cÃ³ tÃ­nh linh hoáº¡t hÆ¡n.

Báº¡n cÃ³ thá»ƒ tÃ¬m hiá»ƒu thÃªm vá» [sá»­ dá»¥ng image trong Astro](/en/guides/images/) trong Images Guide.

## VÃ­ dá»¥ hÆ°á»›ng dáº«n: Next data fetching sang Astro

ÄÃ¢y lÃ  vÃ­ dá»¥ vá» fetch dá»¯ liá»‡u PokÃ©dex Next.js Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i sang Astro.
    
`pages/index.js` fetch vÃ  hiá»ƒn thá»‹ danh sÃ¡ch 151 PokÃ©mon Ä‘áº§u tiÃªn sá»­ dá»¥ng [REST PokÃ©API](https://pokeapi.co/).

ÄÃ¢y lÃ  cÃ¡ch tÃ¡i táº¡o Ä‘iá»u Ä‘Ã³ trong `src/pages/index.astro`, thay tháº¿ `getStaticProps()` báº±ng `fetch()`.

<Steps>
1. XÃ¡c Ä‘á»‹nh return() JSX.

    ```jsx title="pages/index.js" {6-18}
    import Link from 'next/link'
    import styles from '../styles/poke-list.module.css';

    export default function Home({ pokemons }) {
        return (
            <>
                <ul className={`plain-list ${styles.pokeList}`}>
                    {pokemons.map((pokemon) => (
                        <li className={styles.pokemonListItem} key={pokemon.name}>
                            <Link className={styles.pokemonContainer} as={`/pokemon/${pokemon.name}`} href="/pokemon/[name]">
                                <p className={styles.pokemonId}>Sá»‘ {pokemon.id}</p>
                                <img className={styles.pokemonImage} src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.id}.png`} alt={`HÃ¬nh ${pokemon.name}`}></img>
                                <h2 className={styles.pokemonName}>{pokemon.name}</h2>
                            </Link>
                        </li>
                    ))}
                </ul>
            </>
        )
    }

    export const getStaticProps = async () => {
        const res = await fetch("https://pokeapi.co/api/v2/pokemon?limit=151")
        const resJson = await res.json();
        const pokemons = resJson.results.map(pokemon => {
            const name = pokemon.name;
            // https://pokeapi.co/api/v2/pokemon/1/
            const url = pokemon.url;
            const id = url.split("/")[url.split("/").length - 2];
            return {
                name,
                url,
                id
            }
        });
        return {
            props: {
                pokemons,
            },
        }
    }
    ```

2. Táº¡o `src/pages/index.astro`

    Sá»­ dá»¥ng giÃ¡ trá»‹ return cá»§a hÃ m Next. Chuyá»ƒn Ä‘á»•i báº¥t ká»³ cÃº phÃ¡p Next hoáº·c React nÃ o thÃ nh Astro, bao gá»“m thay Ä‘á»•i case cá»§a báº¥t ká»³ [HTML global attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes) nÃ o.

    LÆ°u Ã½:

    - `.map` váº«n hoáº¡t Ä‘á»™ng!

    - `className` trá»Ÿ thÃ nh `class`.

    - `<Link>` trá»Ÿ thÃ nh `<a>`.

    - Fragment `<> </>` khÃ´ng cáº§n thiáº¿t trong template Astro.

    - `key` lÃ  thuá»™c tÃ­nh React, vÃ  khÃ´ng pháº£i thuá»™c tÃ­nh cá»§a `li` trong Astro.

    ```astro title="src/pages/index.astro" "class" "</a>" "<a"
    ---
    ---
    <ul class="plain-list pokeList">
        {pokemons.map((pokemon) => (
            <li class="pokemonListItem">
                <a class="pokemonContainer" href={`/pokemon/${pokemon.name}`}>
                    <p class="pokemonId">Sá»‘ {pokemon.id}</p>
                    <img class="pokemonImage" src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.id}.png`} alt={`HÃ¬nh ${pokemon.name}`}/>
                    <h2 class="pokemonName">{pokemon.name}</h2>
                </a>
            </li>
        ))}
    </ul>
    ```

3. ThÃªm báº¥t ká»³ import, props, vÃ  JavaScript cáº§n thiáº¿t

    LÆ°u Ã½:

    - HÃ m `getStaticProps` khÃ´ng cÃ²n cáº§n thiáº¿t. Dá»¯ liá»‡u tá»« API Ä‘Æ°á»£c fetch trá»±c tiáº¿p trong code fence.
    - Component `<Layout>` Ä‘Æ°á»£c import vÃ  bá»c page templating.

    ```astro ins={2,4-16,19,31} title="src/pages/index.astro"
    ---
    import Layout from '../layouts/layout.astro';

    const res = await fetch("https://pokeapi.co/api/v2/pokemon?limit=151");
    const resJson = await res.json();
    const pokemons = resJson.results.map(pokemon => {
        const name = pokemon.name;
        // https://pokeapi.co/api/v2/pokemon/1/
        const url = pokemon.url;
        const id = url.split("/")[url.split("/").length - 2];
        return {
            name,
            url,
            id
        }
    });
    ---

    <Layout>
      <ul class="plain-list pokeList">
          {pokemons.map((pokemon) => (
              <li class="pokemonListItem" key={pokemon.name}>
                  <a class="pokemonContainer" href={`/pokemon/${pokemon.name}`}>
                      <p class="pokemonId">Sá»‘ {pokemon.id}</p>
                      <img class="pokemonImage" src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.id}.png`} alt={`HÃ¬nh ${pokemon.name}`}/>
                      <h2 class="pokemonName">{pokemon.name}</h2>
                  </a>
              </li>
          ))}
      </ul>
    </Layout>
    ```
</Steps>

## TÃ i nguyÃªn cá»™ng Ä‘á»“ng 

<CardGrid>

  <LinkCard title="Táº¡i sao chÃºng tÃ´i chuyá»ƒn sang Astro (vÃ  táº¡i sao nÃ³ cÃ³ thá»ƒ khiáº¿n báº¡n quan tÃ¢m)" href="https://www.datocms.com/blog/why-we-switched-to-astro" />
  <LinkCard title="Chuyá»ƒn Ä‘á»•i tá»« Next.js sang Astro" href="https://johnzanussi.com/posts/nextjs-to-astro-migration" />
  <LinkCard title="Tá»« NextJS sang Astro" href="https://vanntile.com/blog/next-to-astro" />
  <LinkCard title="Chuyá»ƒn Ä‘á»•i Next.js sang Astro" href="https://ericclemmons.com/blog/converting-nextjs-to-astro" />
  <LinkCard title="Chuyá»ƒn Ä‘á»•i sang Astro (tá»« Next.js)" href="https://www.raygesualdo.com/posts/migrating-to-astro-the-beginning/" />
  <LinkCard title="Astro.js nhÆ° má»™t lá»±a chá»n thay tháº¿ cho Next.js" href="https://www.railyard.works/blog/astro-as-alternative-to-next" />
  <LinkCard title="Táº¡i sao tÃ´i chuyá»ƒn trang web tá»« Next.js sang Astro" href="https://praveenjuge.com/blog/why-i-switched-my-website-from-nextjs-to-astro/" />
  <LinkCard title="NextJS sang Astro: kiá»ƒm soÃ¡t nhiá»u hÆ¡n = trang web nhanh hÆ¡n" href="https://www.youtube.com/watch?v=PSzCtdM20Fc" />
  <LinkCard title="Astro lÃ m trang web tÃ´i nhanh hÆ¡n 100 láº§n nhÆ° tháº¿ nÃ o" href="https://www.youtube.com/watch?v=cOxA3kMYtkM" />

</CardGrid>

:::note[CÃ³ tÃ i nguyÃªn Ä‘á»ƒ chia sáº»?]
Náº¿u báº¡n tÃ¬m tháº¥y (hoáº·c táº¡o!) video hoáº·c bÃ i blog há»¯u Ã­ch vá» chuyá»ƒn Ä‘á»•i trang Next.js sang Astro, [thÃªm vÃ o danh sÃ¡ch nÃ y](https://github.com/withastro/docs/edit/main/src/content/docs/en/guides/migrate-to-astro/from-nextjs.mdx)!
:::