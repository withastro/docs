---
type: integration
title: '@astrojs/markdoc'
description: TÃ¬m hiá»ƒu cÃ¡ch sá»­ dá»¥ng tÃ­ch há»£p @astrojs/markdoc trong dá»± Ã¡n Astro cá»§a báº¡n.
sidebar:
  label: Markdoc
githubIntegrationURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/markdoc/'
category: other
i18nReady: true
---
import { FileTree } from '@astrojs/starlight/components';
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';
import { Steps } from '@astrojs/starlight/components';
import ReadMore from '~/components/ReadMore.astro';

**[TÃ­ch há»£p Astro][astro-integration]** nÃ y cho phÃ©p sá»­ dá»¥ng [Markdoc](https://markdoc.dev/) Ä‘á»ƒ táº¡o components, pages, vÃ  content collection entries.

## Táº¡i sao Markdoc?

Markdoc cho phÃ©p báº¡n nÃ¢ng cao Markdown cá»§a mÃ¬nh vá»›i [Astro components][astro-components]. Náº¿u báº¡n cÃ³ ná»™i dung hiá»‡n cÃ³ Ä‘Æ°á»£c viáº¿t báº±ng Markdoc, tÃ­ch há»£p nÃ y cho phÃ©p báº¡n mang nhá»¯ng tá»‡p Ä‘Ã³ vÃ o dá»± Ã¡n Astro báº±ng content collections.

## CÃ i Ä‘áº·t

Astro bao gá»“m lá»‡nh `astro add` Ä‘á»ƒ tá»± Ä‘á»™ng hÃ³a viá»‡c thiáº¿t láº­p cÃ¡c tÃ­ch há»£p chÃ­nh thá»©c. Náº¿u báº¡n muá»‘n, báº¡n cÃ³ thá»ƒ [cÃ i Ä‘áº·t tÃ­ch há»£p thá»§ cÃ´ng](#manual-install) thay tháº¿.

Cháº¡y má»™t trong cÃ¡c lá»‡nh sau trong cá»­a sá»• terminal má»›i.

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npx astro add markdoc
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm astro add markdoc
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn astro add markdoc
  ```
  </Fragment>
</PackageManagerTabs>

Náº¿u báº¡n gáº·p váº¥n Ä‘á» gÃ¬, [hÃ£y bÃ¡o cÃ¡o cho chÃºng tÃ´i trÃªn GitHub](https://github.com/withastro/astro/issues) vÃ  thá»­ cÃ¡c bÆ°á»›c cÃ i Ä‘áº·t thá»§ cÃ´ng bÃªn dÆ°á»›i.

### CÃ i Ä‘áº·t thá»§ cÃ´ng

Äáº§u tiÃªn, cÃ i Ä‘áº·t gÃ³i `@astrojs/markdoc`:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npm install @astrojs/markdoc
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm add @astrojs/markdoc
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn add @astrojs/markdoc
  ```
  </Fragment>
</PackageManagerTabs>

Sau Ä‘Ã³, Ã¡p dá»¥ng tÃ­ch há»£p vÃ o tá»‡p `astro.config.*` cá»§a báº¡n báº±ng thuá»™c tÃ­nh `integrations`:

```js ins="markdoc()" title="astro.config.mjs" ins={2}
import { defineConfig } from 'astro/config';
import markdoc from '@astrojs/markdoc';
export default defineConfig({
  // ...
  integrations: [markdoc()],
});
```

### TÃ­ch há»£p VS Code Editor

Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng VS Code, cÃ³ má»™t [extension ngÃ´n ngá»¯ Markdoc chÃ­nh thá»©c](https://marketplace.visualstudio.com/items?itemName=Stripe.markdoc-language-support) bao gá»“m syntax highlighting vÃ  autocomplete cho cÃ¡c tags Ä‘Ã£ cáº¥u hÃ¬nh. [Xem language server trÃªn GitHub](https://github.com/markdoc/language-server.git) Ä‘á»ƒ biáº¿t thÃªm thÃ´ng tin.

Äá»ƒ thiáº¿t láº­p extension, táº¡o tá»‡p `markdoc.config.json` trong thÆ° má»¥c gá»‘c dá»± Ã¡n vá»›i ná»™i dung sau:

```json title="markdoc.config.json"
[
  {
    "id": "my-site",
    "path": "src/content",
    "schema": {
      "path": "markdoc.config.mjs",
      "type": "esm",
      "property": "default",
      "watch": true
    }
  }
]
```

Äáº·t `markdoc.config.mjs` lÃ m tá»‡p cáº¥u hÃ¬nh cá»§a báº¡n vá»›i Ä‘á»‘i tÆ°á»£ng `schema`, vÃ  Ä‘á»‹nh nghÄ©a nÆ¡i lÆ°u trá»¯ cÃ¡c tá»‡p Markdoc cá»§a báº¡n báº±ng thuá»™c tÃ­nh `path`. VÃ¬ Markdoc dÃ nh riÃªng cho content collections, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng `src/content`.

## Sá»­ dá»¥ng

CÃ¡c tá»‡p Markdoc chá»‰ cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng trong content collections. ThÃªm entries vÃ o báº¥t ká»³ content collection nÃ o báº±ng extension `.mdoc`:

<FileTree>
- src/
  - content/
    - docs/
      - why-markdoc.mdoc
      - quick-start.mdoc
</FileTree>

Sau Ä‘Ã³, query collection cá»§a báº¡n báº±ng [Content Collection APIs](/en/guides/content-collections/#querying-collections):

```astro title="src/pages/why-markdoc.astro"
---
import { getEntry, render } from 'astro:content';

const entry = await getEntry('docs', 'why-markdoc');
const { Content } = await render(entry);
---

<!--Truy cáº­p thuá»™c tÃ­nh frontmatter vá»›i `data`-->
<h1>{entry.data.title}</h1>
<!--Render ná»™i dung Markdoc vá»›i component Content-->
<Content />
```

<ReadMore>Xem [tÃ i liá»‡u Astro Content Collection][astro-content-collections] Ä‘á»ƒ biáº¿t thÃªm thÃ´ng tin.</ReadMore>

## Truyá»n biáº¿n Markdoc

Báº¡n cÃ³ thá»ƒ cáº§n truyá»n [variables][markdoc-variables] cho ná»™i dung cá»§a mÃ¬nh. Äiá»u nÃ y há»¯u Ã­ch khi truyá»n tham sá»‘ SSR nhÆ° A/B tests.

Biáº¿n cÃ³ thá»ƒ Ä‘Æ°á»£c truyá»n nhÆ° props thÃ´ng qua component `Content`:

```astro title="src/pages/why-markdoc.astro"
---
import { getEntry, render } from 'astro:content';

const entry = await getEntry('docs', 'why-markdoc');
const { Content } = await render(entry);
---

<!--Truyá»n tham sá»‘ `abTest` nhÆ° má»™t biáº¿n-->
<Content abTestGroup={Astro.params.abTestGroup} />
```

BÃ¢y giá», `abTestGroup` cÃ³ sáºµn nhÆ° má»™t biáº¿n trong `docs/why-markdoc.mdoc`:

```md title="src/content/docs/why-markdoc.mdoc"
{% if $abTestGroup === 'image-optimization-lover' %}

HÃ£y Ä‘á»ƒ tÃ´i ká»ƒ cho báº¡n vá» tá»‘i Æ°u hÃ³a hÃ¬nh áº£nh...

{% /if %}
```

Äá»ƒ lÃ m cho má»™t biáº¿n trá»Ÿ thÃ nh global cho táº¥t cáº£ cÃ¡c tá»‡p Markdoc, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng thuá»™c tÃ­nh `variables` tá»« `markdoc.config.mjs|ts` cá»§a báº¡n:

```js title="markdoc.config.mjs"
import { defineMarkdocConfig } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  variables: {
    environment: process.env.IS_PROD ? 'prod' : 'dev',
  },
});
```

### Truy cáº­p frontmatter tá»« ná»™i dung Markdoc cá»§a báº¡n

Äá»ƒ truy cáº­p frontmatter, báº¡n cÃ³ thá»ƒ truyá»n thuá»™c tÃ­nh `data` cá»§a entry nhÆ° má»™t biáº¿n táº¡i nÆ¡i báº¡n render ná»™i dung:

```astro title="src/pages/why-markdoc.astro"
---
import { getEntry, render } from 'astro:content';

const entry = await getEntry('docs', 'why-markdoc');
const { Content } = await render(entry);
---

<Content frontmatter={entry.data} />
```

Äiá»u nÃ y bÃ¢y giá» cÃ³ thá»ƒ Ä‘Æ°á»£c truy cáº­p nhÆ° `$frontmatter` trong Markdoc cá»§a báº¡n.

## Render components

`@astrojs/markdoc` cung cáº¥p cÃ¡c tÃ¹y chá»n cáº¥u hÃ¬nh Ä‘á»ƒ sá»­ dá»¥ng táº¥t cáº£ cÃ¡c tÃ­nh nÄƒng cá»§a Markdoc vÃ  káº¿t ná»‘i cÃ¡c component UI vá»›i ná»™i dung cá»§a báº¡n.

### Sá»­ dá»¥ng Astro components nhÆ° Markdoc tags

Báº¡n cÃ³ thá»ƒ cáº¥u hÃ¬nh [Markdoc tags][markdoc-tags] Ã¡nh xáº¡ Ä‘áº¿n cÃ¡c component `.astro`. Báº¡n cÃ³ thá»ƒ thÃªm tag má»›i báº±ng cÃ¡ch táº¡o tá»‡p `markdoc.config.mjs|ts` táº¡i gá»‘c dá»± Ã¡n vÃ  cáº¥u hÃ¬nh thuá»™c tÃ­nh `tag`.

VÃ­ dá»¥ nÃ y render component `Aside`, vÃ  cho phÃ©p prop `type` Ä‘Æ°á»£c truyá»n nhÆ° má»™t string:

```js title="markdoc.config.mjs"
import { defineMarkdocConfig, component } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  tags: {
    aside: {
      render: component('./src/components/Aside.astro'),
      attributes: {
        // Markdoc yÃªu cáº§u type defs cho má»—i attribute.
        // Nhá»¯ng cÃ¡i nÃ y nÃªn mirror type `Props` cá»§a component
        // báº¡n Ä‘ang rendering.
        // Xem tÃ i liá»‡u Markdoc vá» defining attributes
        // https://markdoc.dev/docs/attributes#defining-attributes
        type: { type: String },
      },
    },
  },
});
```

Component nÃ y bÃ¢y giá» cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng trong cÃ¡c tá»‡p Markdoc cá»§a báº¡n vá»›i tag `{% aside %}`. Children sáº½ Ä‘Æ°á»£c truyá»n Ä‘áº¿n default slot cá»§a component:

```md
# ChÃ o má»«ng Ä‘áº¿n Markdoc ğŸ‘‹

{% aside type="tip" %}

Sá»­ dá»¥ng cÃ¡c tags nhÆ° "aside" fancy nÃ y Ä‘á»ƒ thÃªm má»™t chÃºt _flair_ vÃ o docs cá»§a báº¡n.

{% /aside %}
```

### Sá»­ dá»¥ng client-side UI components

Tags vÃ  nodes bá»‹ giá»›i háº¡n á»Ÿ cÃ¡c tá»‡p `.astro`. Äá»ƒ nhÃºng client-side UI components trong Markdoc, [sá»­ dá»¥ng wrapper component `.astro` render framework component](/en/guides/framework-components/#nesting-framework-components) vá»›i directive `client:` mong muá»‘n cá»§a báº¡n.

VÃ­ dá»¥ nÃ y wrap React component `Aside.tsx` vá»›i component `ClientAside.astro`:

```astro title="src/components/ClientAside.astro"
---
import Aside from './Aside';
---

<Aside {...Astro.props} client:load />
```

Component Astro nÃ y bÃ¢y giá» cÃ³ thá»ƒ Ä‘Æ°á»£c truyá»n Ä‘áº¿n prop `render` cho báº¥t ká»³ [tag][markdoc-tags] hoáº·c [node][markdoc-nodes] nÃ o trong cáº¥u hÃ¬nh cá»§a báº¡n:

```js title="markdoc.config.mjs"
import { defineMarkdocConfig, component } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  tags: {
    aside: {
      render: component('./src/components/ClientAside.astro'),
      attributes: {
        type: { type: String },
      },
    },
  },
});
```

### Sá»­ dá»¥ng Astro components tá»« npm packages vÃ  TypeScript files

Báº¡n cÃ³ thá»ƒ cáº§n sá»­ dá»¥ng cÃ¡c Astro component Ä‘Æ°á»£c export nhÆ° named exports tá»« cÃ¡c tá»‡p TypeScript hoáº·c JavaScript. Äiá»u nÃ y phá»• biáº¿n khi sá»­ dá»¥ng cÃ¡c npm packages vÃ  design systems.

Báº¡n cÃ³ thá»ƒ truyá»n tÃªn import nhÆ° Ä‘á»‘i sá»‘ thá»© hai cho hÃ m `component()`:

```js title="markdoc.config.mjs"
import { defineMarkdocConfig, component } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  tags: {
    tabs: {
      render: component('@astrojs/starlight/components', 'Tabs'),
    },
  },
});
```

Äiá»u nÃ y táº¡o ra cÃ¢u lá»‡nh import sau bÃªn trong:

```ts
import { Tabs } from '@astrojs/starlight/components';
```

## Markdoc Partials

Tag `{% partial /%}` cho phÃ©p báº¡n render cÃ¡c tá»‡p `.mdoc` khÃ¡c bÃªn trong ná»™i dung Markdoc cá»§a báº¡n.

Äiá»u nÃ y há»¯u Ã­ch Ä‘á»ƒ tÃ¡i sá»­ dá»¥ng ná»™i dung qua nhiá»u tÃ i liá»‡u, vÃ  cho phÃ©p báº¡n cÃ³ cÃ¡c tá»‡p ná»™i dung `.mdoc` khÃ´ng tuÃ¢n theo schema collection cá»§a báº¡n.

:::tip
Sá»­ dá»¥ng tiá»n tá»‘ underscore `_` cho cÃ¡c tá»‡p hoáº·c thÆ° má»¥c partial. Äiá»u nÃ y loáº¡i trá»« partials khá»i cÃ¡c queries content collection.
:::

VÃ­ dá»¥ nÃ y hiá»ƒn thá»‹ partial Markdoc cho footer Ä‘Æ°á»£c sá»­ dá»¥ng bÃªn trong cÃ¡c entries cá»§a blog collection:

```md title="src/content/blog/_footer.mdoc"
LiÃªn káº¿t xÃ£ há»™i:

- [Twitter / X](https://twitter.com/astrodotbuild)
- [Discord](https://astro.build/chat)
- [GitHub](https://github.com/withastro/astro)
```

Sá»­ dá»¥ng tag `{% partial /%}` vá»›i Ä‘á»ƒ render footer á»Ÿ cuá»‘i entry blog post. Ãp dá»¥ng thuá»™c tÃ­nh `file` vá»›i Ä‘Æ°á»ng dáº«n Ä‘áº¿n tá»‡p, sá»­ dá»¥ng Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i hoáº·c import alias:

```md title="src/content/blog/post.mdoc" ins='file="_footer.mdoc"'
# My Blog Post

{% partial file="./_footer.mdoc" /%}
```

## Syntax highlighting

`@astrojs/markdoc` cung cáº¥p extensions [Shiki](https://shiki.style) vÃ  [Prism](https://github.com/PrismJS) Ä‘á»ƒ highlight cÃ¡c code blocks cá»§a báº¡n.

### Shiki

Ãp dá»¥ng extension `shiki()` vÃ o cáº¥u hÃ¬nh Markdoc cá»§a báº¡n báº±ng thuá»™c tÃ­nh `extends`. Báº¡n cÃ³ thá»ƒ tÃ¹y chá»n truyá»n Ä‘á»‘i tÆ°á»£ng cáº¥u hÃ¬nh shiki:

```js title="markdoc.config.mjs"
import { defineMarkdocConfig } from '@astrojs/markdoc/config';
import shiki from '@astrojs/markdoc/shiki';

export default defineMarkdocConfig({
  extends: [
    shiki({
      // Chá»n tá»« themes built-in cá»§a Shiki (hoáº·c thÃªm cá»§a riÃªng báº¡n)
      // Máº·c Ä‘á»‹nh: 'github-dark'
      // https://shiki.style/themes
      theme: 'dracula',
      // Báº­t word wrap Ä‘á»ƒ ngÄƒn horizontal scrolling
      // Máº·c Ä‘á»‹nh: false
      wrap: true,
      // Truyá»n ngÃ´n ngá»¯ tÃ¹y chá»‰nh
      // LÆ°u Ã½: Shiki cÃ³ vÃ´ sá»‘ langs built-in, bao gá»“m `.astro`!
      // https://shiki.style/languages
      langs: [],
    }),
  ],
});
```

### Prism

Ãp dá»¥ng extension `prism()` vÃ o cáº¥u hÃ¬nh Markdoc cá»§a báº¡n báº±ng thuá»™c tÃ­nh `extends`.

```js title="markdoc.config.mjs" ins={5}
import { defineMarkdocConfig } from '@astrojs/markdoc/config';
import prism from '@astrojs/markdoc/prism';

export default defineMarkdocConfig({
  extends: [prism()],
});
```

<ReadMore>Äá»ƒ tÃ¬m hiá»ƒu vá» cáº¥u hÃ¬nh Prism stylesheets, [xem hÆ°á»›ng dáº«n syntax highlighting cá»§a chÃºng tÃ´i](/en/guides/syntax-highlighting/#add-a-prism-stylesheet).</ReadMore>

## Custom Markdoc nodes / elements

Báº¡n cÃ³ thá»ƒ muá»‘n render cÃ¡c pháº§n tá»­ Markdown tiÃªu chuáº©n, cháº³ng háº¡n nhÆ° paragraphs vÃ  bolded text, nhÆ° Astro components. Äá»ƒ lÃ m Ä‘iá»u nÃ y, báº¡n cÃ³ thá»ƒ cáº¥u hÃ¬nh [Markdoc node][markdoc-nodes]. Náº¿u má»™t node nháº­n Ä‘Æ°á»£c attributes, chÃºng sáº½ cÃ³ sáºµn nhÆ° component props.

VÃ­ dá»¥ nÃ y render blockquotes vá»›i component `Quote.astro` tÃ¹y chá»‰nh:

```js title="markdoc.config.mjs"
import { defineMarkdocConfig, nodes, component } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  nodes: {
    blockquote: {
      ...nodes.blockquote, // Ãp dá»¥ng defaults cá»§a Markdoc cho cÃ¡c tÃ¹y chá»n khÃ¡c
      render: component('./src/components/Quote.astro'),
    },
  },
});
```

<ReadMore>Xem [tÃ i liá»‡u Markdoc nodes](https://markdoc.dev/docs/nodes#built-in-nodes) Ä‘á»ƒ tÃ¬m hiá»ƒu vá» táº¥t cáº£ cÃ¡c built-in nodes vÃ  attributes.</ReadMore>

### Custom headings

`@astrojs/markdoc` tá»± Ä‘á»™ng thÃªm anchor links vÃ o headings cá»§a báº¡n, vÃ  [táº¡o danh sÃ¡ch `headings` qua content collections API](/en/guides/content-collections/#rendering-body-content). Äá»ƒ tÃ¹y chá»‰nh thÃªm cÃ¡ch headings Ä‘Æ°á»£c render, báº¡n cÃ³ thá»ƒ Ã¡p dá»¥ng Astro component [nhÆ° Markdoc node][markdoc-nodes].

VÃ­ dá»¥ nÃ y render component `Heading.astro` báº±ng thuá»™c tÃ­nh `render`:

```js title="markdoc.config.mjs"
import { defineMarkdocConfig, nodes, component } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  nodes: {
    heading: {
      ...nodes.heading, // Giá»¯ nguyÃªn viá»‡c táº¡o anchor link máº·c Ä‘á»‹nh
      render: component('./src/components/Heading.astro'),
    },
  },
});
```

Táº¥t cáº£ Markdown headings sáº½ render component `Heading.astro` vÃ  truyá»n cÃ¡c `attributes` sau nhÆ° component props:

* `level: number` Má»©c heading 1 - 6
* `id: string` Má»™t `id` Ä‘Æ°á»£c táº¡o tá»« ná»™i dung vÄƒn báº£n cá»§a heading. Äiá»u nÃ y tÆ°Æ¡ng á»©ng vá»›i `slug` Ä‘Æ°á»£c táº¡o bá»Ÿi [hÃ m `render()` cá»§a content](/en/guides/content-collections/#rendering-body-content).

VÃ­ dá»¥, heading `### Level 3 heading!` sáº½ truyá»n `level: 3` vÃ  `id: 'level-3-heading'` nhÆ° component props.

### Custom image components

Component `<Image />` cá»§a Astro khÃ´ng thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng trá»±c tiáº¿p trong Markdoc. Tuy nhiÃªn, báº¡n cÃ³ thá»ƒ cáº¥u hÃ¬nh Astro component Ä‘á»ƒ ghi Ä‘Ã¨ default image node má»—i khi sá»­ dá»¥ng cÃº phÃ¡p hÃ¬nh áº£nh `![]()` native, hoáº·c nhÆ° Markdoc tag tÃ¹y chá»‰nh Ä‘á»ƒ cho phÃ©p báº¡n chá»‰ Ä‘á»‹nh cÃ¡c thuá»™c tÃ­nh hÃ¬nh áº£nh bá»• sung.

#### Ghi Ä‘Ã¨ default image node cá»§a Markdoc

Äá»ƒ ghi Ä‘Ã¨ default image node, báº¡n cÃ³ thá»ƒ cáº¥u hÃ¬nh component `.astro` Ä‘á»ƒ Ä‘Æ°á»£c render thay cho `<img>` tiÃªu chuáº©n.

<Steps>
1. XÃ¢y dá»±ng component `MarkdocImage.astro` tÃ¹y chá»‰nh Ä‘á»ƒ truyá»n cÃ¡c thuá»™c tÃ­nh `src` vÃ  `alt` báº¯t buá»™c tá»« hÃ¬nh áº£nh cá»§a báº¡n Ä‘áº¿n component `<Image />`:

    ```astro title="src/components/MarkdocImage.astro"
    ---
    import { Image } from "astro:assets";
    interface Props {
      src: ImageMetadata;
      alt: string;
    }
    const { src, alt } = Astro.props;
    ---
    <Image src={src} alt={alt} />
    ```

2. Component `<Image />` yÃªu cáº§u `width` vÃ  `height` cho remote images khÃ´ng thá»ƒ Ä‘Æ°á»£c cung cáº¥p báº±ng cÃº phÃ¡p `![]()`. Äá»ƒ trÃ¡nh lá»—i khi sá»­ dá»¥ng remote images, cáº­p nháº­t component cá»§a báº¡n Ä‘á»ƒ render tag HTML `<img>` tiÃªu chuáº©n khi tÃ¬m tháº¥y `src` URL remote:

    ```astro title="src/components/MarkdocImage.astro" ins="| string" del={9} ins={10-12}
    ---
    import { Image } from "astro:assets";
    interface Props {
      src: ImageMetadata | string;
      alt: string;
    }
    const { src, alt } = Astro.props;
    ---
    <Image src={src} alt={alt} />
    {
      typeof src === 'string' ? <img src={src} alt={alt} /> : <Image src={src} alt={alt} />
    }
    ```

3. Cáº¥u hÃ¬nh Markdoc Ä‘á»ƒ ghi Ä‘Ã¨ default image node vÃ  render `MarkdocImage.astro`:

    ```js title="markdoc.config.mjs"
    import { defineMarkdocConfig, nodes, component } from '@astrojs/markdoc/config';

    export default defineMarkdocConfig({
      nodes: {
        image: {
          ...nodes.image, // Ãp dá»¥ng defaults cá»§a Markdoc cho cÃ¡c tÃ¹y chá»n khÃ¡c
          render: component('./src/components/MarkdocImage.astro'),
        },
      },
    });
    ```

4. CÃº phÃ¡p hÃ¬nh áº£nh native trong báº¥t ká»³ tá»‡p `.mdoc` nÃ o bÃ¢y giá» sáº½ sá»­ dá»¥ng component `<Image />` Ä‘á»ƒ tá»‘i Æ°u hÃ³a hÃ¬nh áº£nh cá»¥c bá»™ cá»§a báº¡n. Remote images váº«n cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng, nhÆ°ng sáº½ khÃ´ng Ä‘Æ°á»£c render bá»Ÿi component `<Image />` cá»§a Astro.

    ```md title="src/content/blog/post.mdoc"
    
    <!-- ÄÆ°á»£c tá»‘i Æ°u hÃ³a bá»Ÿi <Image /> -->
    ![A picture of a cat](/cat.jpg)

    <!-- <img> khÃ´ng tá»‘i Æ°u hÃ³a -->
    ![A picture of a dog](https://example.com/dog.jpg) 
    ```
</Steps>

#### Táº¡o Markdoc image tag tÃ¹y chá»‰nh

Markdoc `image` tag cho phÃ©p báº¡n Ä‘áº·t cÃ¡c thuá»™c tÃ­nh bá»• sung trÃªn hÃ¬nh áº£nh cá»§a báº¡n khÃ´ng thá»ƒ vá»›i cÃº phÃ¡p `![]()`. VÃ­ dá»¥, image tags tÃ¹y chá»‰nh cho phÃ©p báº¡n sá»­ dá»¥ng component `<Image />` cá»§a Astro cho remote images yÃªu cáº§u `width` vÃ  `height`.

CÃ¡c bÆ°á»›c sau sáº½ táº¡o Markdoc image tag tÃ¹y chá»‰nh Ä‘á»ƒ hiá»ƒn thá»‹ pháº§n tá»­ `<figure>` vá»›i caption, sá»­ dá»¥ng component `<Image />` cá»§a Astro Ä‘á»ƒ tá»‘i Æ°u hÃ³a hÃ¬nh áº£nh.

<Steps>
1. Táº¡o component `MarkdocFigure.astro` Ä‘á»ƒ nháº­n cÃ¡c props cáº§n thiáº¿t vÃ  render hÃ¬nh áº£nh vá»›i caption:

    ```astro title="src/components/MarkdocFigure.astro"
    ---
    // src/components/MarkdocFigure.astro
    import { Image } from "astro:assets";

    interface Props {
      src: ImageMetadata | string;
      alt: string;
      width: number;
      height: number;
      caption: string;
    }

    const { src, alt, width, height, caption } = Astro.props;
    ---
    <figure>
        <Image {src} {alt} {width} {height}  />
        {caption && <figcaption>{caption}</figcaption>}
    </figure>
    ```

2. Cáº¥u hÃ¬nh image tag tÃ¹y chá»‰nh cá»§a báº¡n Ä‘á»ƒ render Astro component:

    ```ts title="markdoc.config.mjs"
    import { component, defineMarkdocConfig, nodes } from '@astrojs/markdoc/config';

    export default defineMarkdocConfig({
      tags: {
        image: {
          attributes: {
            width: {
              type: String,
            },
            height: {
              type: String,
            },
            caption: {
              type: String,
            },
            ...nodes.image.attributes
          },
          render: component('./src/components/MarkdocFigure.astro'),
        },
      },
    });
    ```

3. Sá»­ dá»¥ng tag `image` trong cÃ¡c tá»‡p Markdoc Ä‘á»ƒ hiá»ƒn thá»‹ figure vá»›i caption, cung cáº¥p táº¥t cáº£ cÃ¡c thuá»™c tÃ­nh cáº§n thiáº¿t cho component cá»§a báº¡n:

    ```md
    {% image src="./astro-logo.png" alt="Astro Logo" width="100" height="100" caption="a caption!" /%}
    ```
</Steps>

## Cáº¥u hÃ¬nh Markdoc nÃ¢ng cao

Tá»‡p `markdoc.config.mjs|ts` cháº¥p nháº­n [táº¥t cáº£ cÃ¡c tÃ¹y chá»n cáº¥u hÃ¬nh Markdoc](https://markdoc.dev/docs/config), bao gá»“m [tags](https://markdoc.dev/docs/tags) vÃ  [functions](https://markdoc.dev/docs/functions).

Báº¡n cÃ³ thá»ƒ truyá»n cÃ¡c tÃ¹y chá»n nÃ y tá»« default export trong tá»‡p `markdoc.config.mjs|ts` cá»§a báº¡n:

```js title="markdoc.config.mjs"
import { defineMarkdocConfig } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  functions: {
    getCountryEmoji: {
      transform(parameters) {
        const [country] = Object.values(parameters);
        const countryToEmojiMap = {
          japan: 'ğŸ‡¯ğŸ‡µ',
          spain: 'ğŸ‡ªğŸ‡¸',
          france: 'ğŸ‡«ğŸ‡·',
        };
        return countryToEmojiMap[country] ?? 'ğŸ³';
      },
    },
  },
});
```

BÃ¢y giá», báº¡n cÃ³ thá»ƒ gá»i function nÃ y tá»« báº¥t ká»³ content entry Markdoc nÃ o:

```md
Â¡Hola {% getCountryEmoji("spain") %}!
```

<ReadMore>[Xem tÃ i liá»‡u Markdoc](https://markdoc.dev/docs/functions#creating-a-custom-function) Ä‘á»ƒ biáº¿t thÃªm vá» sá»­ dá»¥ng biáº¿n hoáº·c functions trong ná»™i dung cá»§a báº¡n.</ReadMore>

### Äáº·t root HTML element

Markdoc bá»c tÃ i liá»‡u vá»›i tag `<article>` theo máº·c Ä‘á»‹nh. Äiá»u nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c thay Ä‘á»•i tá»« Markdoc node `document`. Äiá»u nÃ y cháº¥p nháº­n tÃªn HTML element hoáº·c `null` náº¿u báº¡n muá»‘n loáº¡i bá» wrapper element:

```js title="markdoc.config.mjs"
import { defineMarkdocConfig, nodes } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  nodes: {
    document: {
      ...nodes.document, // Ãp dá»¥ng defaults cho cÃ¡c tÃ¹y chá»n khÃ¡c
      render: null, // máº·c Ä‘á»‹nh 'article'
    },
  },
});
```

## TÃ¹y chá»n cáº¥u hÃ¬nh tÃ­ch há»£p

TÃ­ch há»£p Astro Markdoc xá»­ lÃ½ viá»‡c cáº¥u hÃ¬nh cÃ¡c tÃ¹y chá»n vÃ  kháº£ nÄƒng Markdoc khÃ´ng cÃ³ sáºµn thÃ´ng qua tá»‡p `markdoc.config.js`.

### `allowHTML`

Cho phÃ©p viáº¿t HTML markup cÃ¹ng vá»›i Markdoc tags vÃ  nodes.

Theo máº·c Ä‘á»‹nh, Markdoc sáº½ khÃ´ng nháº­n diá»‡n HTML markup nhÆ° ná»™i dung semantic.

Äá»ƒ Ä‘áº¡t Ä‘Æ°á»£c tráº£i nghiá»‡m giá»‘ng Markdown hÆ¡n, nÆ¡i HTML elements cÃ³ thá»ƒ Ä‘Æ°á»£c bao gá»“m cÃ¹ng vá»›i ná»™i dung cá»§a báº¡n, Ä‘áº·t `allowHTML:true` nhÆ° tÃ¹y chá»n tÃ­ch há»£p `markdoc`. Äiá»u nÃ y sáº½ báº­t HTML parsing trong Markdoc markup.

```js ins="allowHTML: true" title="astro.config.mjs" ins={6}
  import { defineConfig } from 'astro/config';
  import markdoc from '@astrojs/markdoc';

  export default defineConfig({
    // ...
    integrations: [markdoc({ allowHTML: true })],
  });
```

:::caution
Khi `allowHTML` Ä‘Æ°á»£c báº­t, HTML markup bÃªn trong tÃ i liá»‡u Markdoc sáº½ Ä‘Æ°á»£c render nhÆ° HTML elements thá»±c táº¿ (bao gá»“m `<script>`), lÃ m cho cÃ¡c vector táº¥n cÃ´ng nhÆ° XSS trá»Ÿ nÃªn kháº£ thi. Äáº£m báº£o ráº±ng báº¥t ká»³ HTML markup nÃ o Ä‘á»u Ä‘áº¿n tá»« nguá»“n Ä‘Ã¡ng tin cáº­y.
:::

### `ignoreIndentation`

Theo máº·c Ä‘á»‹nh, báº¥t ká»³ ná»™i dung nÃ o Ä‘Æ°á»£c thá»¥t lá» bá»‘n spaces Ä‘á»u Ä‘Æ°á»£c coi nhÆ° code block. Tháº­t khÃ´ng may, hÃ nh vi nÃ y lÃ m cho viá»‡c sá»­ dá»¥ng cÃ¡c má»©c thá»¥t lá» tÃ¹y Ã½ Ä‘á»ƒ cáº£i thiá»‡n kháº£ nÄƒng Ä‘á»c cá»§a tÃ i liá»‡u cÃ³ cáº¥u trÃºc phá»©c táº¡p trá»Ÿ nÃªn khÃ³ khÄƒn.

Khi sá»­ dá»¥ng nested tags trong Markdoc, cÃ³ thá»ƒ há»¯u Ã­ch khi thá»¥t lá» ná»™i dung bÃªn trong tags Ä‘á»ƒ má»©c Ä‘á»™ sÃ¢u trá»Ÿ nÃªn rÃµ rÃ ng. Äá»ƒ há»— trá»£ thá»¥t lá» tÃ¹y Ã½, chÃºng ta pháº£i táº¯t cÃ¡c code blocks dá»±a trÃªn thá»¥t lá» vÃ  sá»­a Ä‘á»•i má»™t sá»‘ quy táº¯c parsing markdown-it khÃ¡c tÃ­nh Ä‘áº¿n cÃ¡c code blocks dá»±a trÃªn thá»¥t lá». Nhá»¯ng thay Ä‘á»•i nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c Ã¡p dá»¥ng báº±ng cÃ¡ch báº­t tÃ¹y chá»n ignoreIndentation.

```js "ignoreIndentation: true" title="astro.config.mjs" ins={6}
  import { defineConfig } from 'astro/config';
  import markdoc from '@astrojs/markdoc';

  export default defineConfig({
    // ...
    integrations: [markdoc({ ignoreIndentation: true })],
  });
```

```md
# ChÃ o má»«ng Ä‘áº¿n Markdoc vá»›i indented tags ğŸ‘‹

# LÆ°u Ã½: CÃ³ thá»ƒ sá»­ dá»¥ng spaces hoáº·c tabs Ä‘á»ƒ thá»¥t lá»

{% custom-tag %}
{% custom-tag %} ### Tags cÃ³ thá»ƒ Ä‘Æ°á»£c thá»¥t lá» Ä‘á»ƒ dá»… Ä‘á»c hÆ¡n

    {% another-custom-tag %}
      Äiá»u nÃ y dá»… theo dÃµi hÆ¡n khi cÃ³ nhiá»u nesting
    {% /another-custom-tag %}

{% /custom-tag %}
{% /custom-tag %}
```

## VÃ­ dá»¥

* [Template starter Astro Markdoc](https://github.com/withastro/astro/tree/latest/examples/with-markdoc) cho tháº¥y cÃ¡ch sá»­ dá»¥ng cÃ¡c tá»‡p Markdoc trong dá»± Ã¡n Astro cá»§a báº¡n.

[astro-integration]: /en/guides/integrations-guide/

[astro-components]: /en/basics/astro-components/

[astro-content-collections]: /en/guides/content-collections/

[markdoc-tags]: https://markdoc.dev/docs/tags

[markdoc-nodes]: https://markdoc.dev/docs/nodes

[markdoc-variables]: https://markdoc.dev/docs/variables