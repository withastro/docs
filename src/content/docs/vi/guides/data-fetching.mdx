---
title: Láº¥y dá»¯ liá»‡u
description: TÃ¬m hiá»ƒu cÃ¡ch láº¥y dá»¯ liá»‡u tá»« xa vá»›i Astro báº±ng fetch API.
i18nReady: true
---

File `.astro` cÃ³ thá»ƒ láº¥y dá»¯ liá»‡u tá»« xa Ä‘á»ƒ giÃºp báº¡n táº¡o ra cÃ¡c trang.

## `fetch()` trong Astro

Táº¥t cáº£ [Astro components](/vi/basics/astro-components/) Ä‘á»u cÃ³ quyá»n truy cáº­p vÃ o [hÃ m `fetch()` toÃ n cá»¥c](https://developer.mozilla.org/en-US/docs/Web/API/fetch) trong script component cá»§a chÃºng Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c yÃªu cáº§u HTTP tá»›i API báº±ng URL Ä‘áº§y Ä‘á»§ (vÃ­ dá»¥: `https://example.com/api`).
NgoÃ i ra, báº¡n cÃ³ thá»ƒ táº¡o URL cho cÃ¡c trang vÃ  endpoint cá»§a dá»± Ã¡n Ä‘Æ°á»£c render theo yÃªu cáº§u trÃªn server báº±ng [`new URL("/api", Astro.url)`](/vi/reference/api-reference/#url).

Lá»‡nh gá»i fetch nÃ y sáº½ Ä‘Æ°á»£c thá»±c thi táº¡i thá»i Ä‘iá»ƒm build, vÃ  dá»¯ liá»‡u sáº½ cÃ³ sáºµn cho template component Ä‘á»ƒ táº¡o HTML Ä‘á»™ng. Náº¿u cháº¿ Ä‘á»™ [SSR](/vi/guides/on-demand-rendering/) Ä‘Æ°á»£c báº­t, báº¥t ká»³ lá»‡nh gá»i fetch nÃ o sáº½ Ä‘Æ°á»£c thá»±c thi táº¡i runtime.

ğŸ’¡ Táº­n dá»¥ng [**`await` cáº¥p cao nháº¥t**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await#top_level_await) bÃªn trong script Astro component cá»§a báº¡n.

ğŸ’¡ Truyá»n dá»¯ liá»‡u Ä‘Ã£ láº¥y cho cáº£ Astro vÃ  framework components, dÆ°á»›i dáº¡ng props.

```astro /await fetch\\(.*?\\);/
---
// src/components/User.astro
import Contact from "../components/Contact.jsx";
import Location from "../components/Location.astro";

const response = await fetch("https://randomuser.me/api/");
const data = await response.json();
const randomUser = data.results[0];
---
<!-- Dá»¯ liá»‡u Ä‘Æ°á»£c láº¥y táº¡i build cÃ³ thá»ƒ Ä‘Æ°á»£c render trong HTML -->
<h1>User</h1>
<h2>{randomUser.name.first} {randomUser.name.last}</h2>

<!-- Dá»¯ liá»‡u Ä‘Æ°á»£c láº¥y táº¡i build cÃ³ thá»ƒ Ä‘Æ°á»£c truyá»n cho components dÆ°á»›i dáº¡ng props -->
<Contact client:load email={randomUser.email} />
<Location city={randomUser.location.city} />
```

:::note
HÃ£y nhá»› ráº±ng, táº¥t cáº£ dá»¯ liá»‡u trong Astro components Ä‘Æ°á»£c láº¥y khi má»™t component Ä‘Æ°á»£c render.

Trang web Astro Ä‘Ã£ deploy cá»§a báº¡n sáº½ láº¥y dá»¯ liá»‡u **má»™t láº§n, táº¡i thá»i Ä‘iá»ƒm build**. Trong mÃ´i trÆ°á»ng dev, báº¡n sáº½ tháº¥y viá»‡c láº¥y dá»¯ liá»‡u khi component Ä‘Æ°á»£c refresh. Náº¿u báº¡n cáº§n láº¥y láº¡i dá»¯ liá»‡u nhiá»u láº§n á»Ÿ phÃ­a client, hÃ£y sá»­ dá»¥ng [framework component](/vi/guides/framework-components/) hoáº·c [client-side script](/vi/guides/client-side-scripts/) trong má»™t Astro component.
:::

## `fetch()` trong Framework Components

HÃ m `fetch()` cÅ©ng cÃ³ sáºµn toÃ n cá»¥c cho báº¥t ká»³ [framework components](/vi/guides/framework-components/) nÃ o:

```tsx title="src/components/Movies.tsx" /await fetch\\(.*?\\)/
import type { FunctionalComponent } from 'preact';

const data = await fetch('https://example.com/movies.json').then((response) => response.json());

// Components Ä‘Æ°á»£c render táº¡i build-time cÅ©ng log ra CLI.
// Khi Ä‘Æ°á»£c render vá»›i directive `client:*`, chÃºng cÅ©ng log ra browser console.
console.log(data);

const Movies: FunctionalComponent = () => {
  // Xuáº¥t káº¿t quáº£ ra trang
  return <div>{JSON.stringify(data)}</div>;
};

export default Movies;
```

## Truy váº¥n GraphQL

Astro cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng `fetch()` Ä‘á»ƒ truy váº¥n GraphQL server vá»›i báº¥t ká»³ truy váº¥n GraphQL há»£p lá»‡ nÃ o.

```astro title="src/components/Film.astro" "await fetch"
---
const response = await fetch(
  "https://swapi-graphql.netlify.app/.netlify/functions/index",
  {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      query: `
        query getFilm ($id:ID!) {
          film(id: $id) {
            title
            releaseDate
          }
        }
      `,
      variables: {
        id: "ZmlsbXM6MQ==",
      },
    }),
  }
);


const json = await response.json();
const { film } = json.data;
---
<h1>Láº¥y thÃ´ng tin vá» Star Wars: A New Hope</h1>
<h2>TiÃªu Ä‘á»: {film.title}</h2>
<p>NÄƒm: {film.releaseDate}</p>
```

## Láº¥y dá»¯ liá»‡u tá»« Headless CMS

Astro components cÃ³ thá»ƒ láº¥y dá»¯ liá»‡u tá»« CMS yÃªu thÃ­ch cá»§a báº¡n vÃ  sau Ä‘Ã³ render nÃ³ nhÆ° ná»™i dung trang. Sá»­ dá»¥ng [dynamic routes](/vi/guides/routing/#dynamic-routes), components tháº­m chÃ­ cÃ³ thá»ƒ táº¡o ra cÃ¡c trang dá»±a trÃªn ná»™i dung CMS cá»§a báº¡n.

Xem [HÆ°á»›ng dáº«n CMS](/vi/guides/cms/) cá»§a chÃºng tÃ´i Ä‘á»ƒ biáº¿t chi tiáº¿t Ä‘áº§y Ä‘á»§ vá» viá»‡c tÃ­ch há»£p Astro vá»›i cÃ¡c headless CMS bao gá»“m Storyblok, Contentful, vÃ  WordPress.

## TÃ i nguyÃªn cá»™ng Ä‘á»“ng

- [Táº¡o á»©ng dá»¥ng fullstack vá»›i Astro + GraphQL](https://robkendal.co.uk/blog/how-to-build-astro-site-with-graphql/)