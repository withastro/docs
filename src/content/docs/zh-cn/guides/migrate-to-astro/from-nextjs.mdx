---
title: ä»Next.jsè¿ç§»
description: å°†ç°æœ‰çš„Next.jsé¡¹ç›®è¿ç§»åˆ°Astroçš„æç¤º
type: migration
stub: false
framework: Next.js
i18nReady: true
---
import AstroJSXTabs from '~/components/tabs/AstroJSXTabs.astro'
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'

è¿™é‡Œæœ‰ä¸€äº›å…³é”®çš„æ¦‚å¿µå’Œè¿ç§»ç­–ç•¥æ¥å¸®åŠ©ä½ å¼€å§‹ã€‚å¯ä»¥é€šè¿‡æ–‡æ¡£å…¶ä»–å†…å®¹å’Œæˆ‘ä»¬çš„[Discordç¤¾åŒº](https://astro.build/chat)æ¥ç»§ç»­å®Œæˆè¿ç§»!

## Next.js å’Œ Astro çš„ä¸»è¦ç›¸ä¼¼ä¹‹å¤„

Next.js å’Œ Astro æœ‰ä¸€äº›ç›¸ä¼¼ä¹‹å¤„ï¼Œå¯ä»¥å¸®åŠ©ä½ è¿ç§»ä½ çš„é¡¹ç›®ï¼š

- [`.astro` æ–‡ä»¶çš„è¯­æ³•ç±»ä¼¼äº JSX](/zh-cn/core-concepts/astro-syntax/#differences-between-astro-and-jsx)ã€‚ç¼–å†™ Astro åº”è¯¥ä¼šæ„Ÿè§‰å¾ˆç†Ÿæ‚‰ã€‚
- Astro é¡¹ç›®ä¹Ÿå¯ä»¥æ˜¯SSGæˆ–[å…·æœ‰é¡µé¢é¢„æ¸²æŸ“åŠŸèƒ½çš„SSR](/zh-cn/guides/server-side-rendering/#æ··åˆæ¸²æŸ“)ã€‚
- Astro ä½¿ç”¨åŸºäºæ–‡ä»¶çš„è·¯ç”±ï¼Œå¹¶[å…è®¸ç‰¹å®šå‘½åçš„é¡µé¢åˆ›å»ºåŠ¨æ€è·¯ç”±](/zh-cn/core-concepts/routing/#åŠ¨æ€è·¯ç”±)ã€‚
- Astro æ˜¯[åŸºäºç»„ä»¶](/zh-cn/core-concepts/astro-components/)çš„ï¼Œæ ‡ç­¾åœ¨è¿ç§»å‰åä¼šå¾ˆç›¸ä¼¼ã€‚
- Astro å…·æœ‰é’ˆå¯¹ [Reactã€Preact å’Œ Solid çš„å®˜æ–¹é›†æˆ](/zh-cn/guides/integrations-guide/react/)ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ç°æœ‰çš„ JSX ç»„ä»¶ã€‚è¯·æ³¨æ„ï¼Œåœ¨ Astro ä¸­ï¼Œè¿™äº›æ–‡ä»¶**å¿…é¡»**å…·æœ‰ `.jsx` æˆ– `.tsx` æ‰©å±•åã€‚
- Astro æ”¯æŒ[å®‰è£… NPM åŒ…](/zh-cn/guides/imports/#npm-åŒ…)ï¼ŒåŒ…æ‹¬ React åº“ã€‚è®¸å¤šç°æœ‰çš„ä¾èµ–å°†åœ¨ Astro ä¸­èµ·ä½œç”¨ã€‚

## Next.jså’ŒAstroçš„ä¸»è¦ä¸åŒä¹‹å¤„

å½“ä½ åœ¨Astroä¸­é‡å»ºä½ çš„Next.jsç½‘ç«™æ—¶ï¼Œä½ ä¼šå‘ç°ä¸€äº›é‡è¦çš„åŒºåˆ«ï¼š

- [MPA vs SPA](/zh-cn/concepts/mpa-vs-spa/): Next.jsæ˜¯ä¸€ä¸ªReact single-pageåº”ç”¨ï¼Œä½¿ç”¨`index.js`ä½œä¸ºé¡¹ç›®çš„rootã€‚Astroæ˜¯ä¸€ä¸ªmulti-pageçš„ç½‘ç«™ï¼Œ`index.astro`æ˜¯ä½ çš„ä¸»é¡µã€‚

- [`.astro` ç»„ä»¶](/zh-cn/core-concepts/astro-components/) ä¸æ˜¯ä½œä¸ºè¿”å›é¡µé¢æ¨¡æ¿çš„å¯¼å‡ºå‡½æ•°å»ç¼–å†™çš„ã€‚ç›¸åï¼Œä¼šæŠŠä½ çš„ä»£ç åˆ†æˆä¸€ä¸ªJavaScriptçš„"ä»£ç å›´æ "å’Œä¸€ä¸ªä¸“é—¨ç”¨äºç”ŸæˆHTMLçš„ä¸»ä½“ã€‚

- [é‡è¦å†…å®¹](/zh-cn/concepts/why-astro/): Astroä¸»è¦ç”¨äºä»¥å†…å®¹ä¸ºé‡ç‚¹çš„ç½‘ç«™ï¼Œå¹¶åŒ…å«å°‘é‡äº¤äº’ã€‚å·²æœ‰çš„Next.jsåº”ç”¨ç¨‹åºå¯èƒ½æ˜¯ä¸ºäº†é‡äº¤äº’æ€§è€Œæ„å»ºçš„ï¼Œå¹¶ä¸”å¯èƒ½åŒ…å«ä½¿ç”¨`.astro`ç»„ä»¶éš¾ä»¥å¤åˆ¶çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ä»ªè¡¨ç›˜ã€‚

## è½¬æ¢ä½ çš„Next.jsé¡¹ç›®

å°½ç®¡æ¯ä¸ªé¡¹ç›®åœ¨è¿ç§»çš„å®é™…è¿‡ç¨‹ä¸­éƒ½ä¼šæœ‰äº›ä¸åŒï¼Œä½†åœ¨ä»Next.jsè½¬æ¢åˆ°Astroæ—¶ï¼Œæœ‰ä¸€äº›å¸¸è§çš„æ“ä½œå¯ä»¥å‚è€ƒã€‚

### åˆ›å»ºä¸€ä¸ªæ–°çš„Astroé¡¹ç›®
é€šè¿‡ä½ çš„package manageræ‰§è¡Œå‘½ä»¤`create astro`æ¥å¯åŠ¨Astroçš„CLIå‘å¯¼ï¼Œæˆ–ä»[Astro Theme Showcase](https://astro.build/themes)é€‰æ‹©ä¸€ä¸ªç¤¾åŒºä¸»é¢˜ã€‚

ä½ å¯ä»¥åœ¨`create astro`å‘½ä»¤ä¸­ä¼ é€’ä¸€ä¸ª`--template`å‚æ•°ï¼Œç”¨æˆ‘ä»¬çš„å®˜æ–¹å¯åŠ¨å™¨ï¼ˆå¦‚`docs`ã€`blog`ã€`portfolio`ï¼‰å¯åŠ¨ä¸€ä¸ªæ–°çš„Astroé¡¹ç›®ã€‚æˆ–è€…ï¼Œä½ å¯ä»¥[ä»GitHubä¸Šä»»ä½•ç°æœ‰çš„Astroä»“åº“å¼€å§‹ä¸€ä¸ªæ–°é¡¹ç›®](/zh-cn/install/auto/#starter-templates)ã€‚

  <PackageManagerTabs>
    <Fragment slot="npm">
    ```shell
    # launch the Astro CLI Wizard 
    npm create astro@latest

    # create a new project with an official example
    npm create astro@latest -- --template <example-name>
    ```
    </Fragment>
    <Fragment slot="pnpm">
    ```shell
    # launch the Astro CLI Wizard 
    pnpm create astro@latest

    # create a new project with an official example
    pnpm create astro@latest --template <example-name>
    ```
    </Fragment>
    <Fragment slot="yarn">
    ```shell
    # launch the Astro CLI Wizard 
    yarn create astro@latest

    # create a new project with an official example
    yarn create astro@latest --template <example-name>
    ```
    </Fragment>
  </PackageManagerTabs>

ç„¶åï¼ŒæŠŠç°æœ‰çš„Nexté¡¹ç›®æ–‡ä»¶å¤åˆ¶åˆ°ä½ çš„æ–°Astroé¡¹ç›®ä¸­ï¼Œæ”¾åœ¨`src`ä»¥å¤–çš„å•ç‹¬æ–‡ä»¶å¤¹ä¸­ã€‚

:::tip
è®¿é—®https://astro.new ï¼Œäº†è§£å®˜æ–¹å¯åŠ¨æ¨¡æ¿çš„å®Œæ•´åˆ—è¡¨ï¼Œä»¥åŠåœ¨StackBlitzã€CodeSandboxæˆ–Gitpodä¸­æ‰“å¼€ä¸€ä¸ªæ–°é¡¹ç›®çš„é“¾æ¥ã€‚
:::

### å®‰è£…é›†æˆ (å¯é€‰)

åœ¨å°† Next é¡¹ç›®è½¬æ¢ä¸º Astro æ—¶ï¼Œä½ å¯èƒ½ä¼šå‘ç°å®‰è£…ä¸€äº› [Astro å¯é€‰é›†æˆ](/zh-cn/guides/integrations-guide/) æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚

- **@astrojs/react**: æ¥åœ¨ä½ çš„æ–°Astroç½‘ç«™ä¸Šé‡ç”¨ä¸€äº›ç°æœ‰çš„React UIç»„ä»¶ï¼Œæˆ–è€…ç»§ç»­ç”¨Reactç»„ä»¶æ¥ç¼–å†™ã€‚

- **@astrojs/image**: ç”¨Astroè‡ªå·±çš„å›¾ç‰‡ä¼˜åŒ–ç»„ä»¶æ¥æ›¿ä»£Nextçš„Imageã€‚ï¼ˆExperimentalï¼šåªé€‚ç”¨äº`.astro`å’Œ`.mdx`æ–‡ä»¶ï¼‰ã€‚

- **@astrojs/mdx**: å°†ç°æœ‰çš„Nexté¡¹ç›®ä¸­çš„ MDX æ–‡ä»¶å¯¼å…¥ï¼Œæˆ–åœ¨æ–°çš„ Astro ç«™ç‚¹ä¸­ä½¿ç”¨ MDXã€‚

### å°†æºç æ”¾åœ¨`src`ç›®å½•å†…

æŒ‰ç…§ [Astroçš„é¡¹ç›®ç»“æ„](/zh-cn/core-concepts/project-structure/)ï¼š

1. **ä¿æŒ** Nextçš„`public/`æ–‡ä»¶å¤¹ä¸åŠ¨ã€‚
   
    Astroä½¿ç”¨`public/`ç›®å½•æ¥å­˜æ”¾é™æ€èµ„äº§ï¼Œå°±åƒNextä¸€æ ·ã€‚è¿™ä¸ªæ–‡ä»¶å¤¹å’Œå®ƒçš„å†…å®¹éƒ½ä¸éœ€è¦æ”¹å˜ã€‚

2. **å¤åˆ¶æˆ–ç§»åŠ¨**Nextçš„å…¶ä»–æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼ˆå¦‚`pages`ï¼Œ`styles`ç­‰ï¼‰åˆ°Astroçš„`src/`æ–‡ä»¶å¤¹ï¼Œå½“ä½ åœ¨é‡æ„ç½‘ç«™æ—¶ï¼Œéµå¾ª[Astroçš„é¡¹ç›®ç»“æ„](/zh-cn/corecepts/project-structure/)ã€‚

    åƒNextä¸€æ ·ï¼ŒAstroçš„`src/pages/`æ–‡ä»¶å¤¹æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶å¤¹ï¼Œç”¨äºåŸºäºæ–‡ä»¶çš„è·¯ç”±ã€‚æ‰€æœ‰å…¶ä»–æ–‡ä»¶å¤¹éƒ½æ˜¯å¯é€‰çš„ï¼Œä½ å¯ä»¥ä»¥ä»»ä½•æ–¹å¼ç»„ç»‡ä½ çš„`src/`æ–‡ä»¶å¤¹çš„å†…å®¹ã€‚Astroé¡¹ç›®ä¸­å…¶ä»–å¸¸è§çš„æ–‡ä»¶å¤¹åŒ…æ‹¬`src/layouts/`ã€`src/components`ã€`src/styles`å’Œ`src/scripts`ã€‚


### Astroçš„é…ç½®æ–‡ä»¶

Astroåœ¨ä½ é¡¹ç›®çš„æ ¹ç›®å½•æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå«åš[`astro.config.mjs`](/zh-cn/guides/configuring-astro/)ã€‚è¿™ä»…ç”¨äºé…ç½®ä½ çš„Astroé¡¹ç›®å’Œä»»ä½•å·²å®‰è£…çš„é›†æˆï¼ŒåŒ…æ‹¬[SSRé€‚é…å™¨](/zh-cn/guides/deploy/)ã€‚

### Tips: å°†JSXæ–‡ä»¶è½¬æ¢ä¸º`.astro'æ–‡ä»¶

è¿™é‡Œæœ‰ä¸€äº›å°†`Next.js`ç»„ä»¶è½¬æ¢ä¸º`.astro`ç»„ä»¶çš„æç¤ºï¼š

1. ä½¿ç”¨ç°æœ‰Next.jsç»„ä»¶å‡½æ•°è¿”å›çš„JSXä½œä¸ºä½ çš„HTMLæ¨¡æ¿çš„åŸºç¡€ã€‚

2. è°ƒæ•´[Nextæˆ–JSXè¯­æ³•ä¸ºAstro](#å‚è€ƒ-å°†nextjsè¯­æ³•è½¬æ¢ä¸ºastroè¯­æ³•)æˆ–HTMLç½‘é¡µæ ‡å‡†ã€‚è¿™åŒ…æ‹¬`<Link>`ã€`<Script>`ã€`{children}`å’Œ`className`ï¼Œä¾‹å¦‚ã€‚

1. å°†ä»»ä½•å¿…è¦çš„JavaScriptï¼ŒåŒ…æ‹¬å¯¼å…¥è¯­å¥ï¼Œç§»åˆ°["ä»£ç æ …æ "ï¼ˆ`---`ï¼‰](/zh-cn/core-concepts/astro-components/#the-component-script)ã€‚æ³¨æ„ï¼š[æ¡ä»¶æ¸²æŸ“å†…å®¹](/zh-cn/core-concepts/astro-syntax/#dynamic-html)çš„JavaScripté€šå¸¸ç›´æ¥å†™åœ¨Astroçš„HTMLæ¨¡æ¿å†…ã€‚

4. ä½¿ç”¨[`Astro.props`](/zh-cn/reference/api-reference/#astroprops)æ¥è®¿é—®ä¹‹å‰ä¼ é€’ç»™ä½ çš„Nextå‡½æ•°çš„ä»»ä½•é¢å¤–propsã€‚

4. å†³å®šæ˜¯å¦éœ€è¦å°†å¯¼å…¥çš„ç»„ä»¶è½¬æ¢ä¸º Astroã€‚å®‰è£…äº†å®˜æ–¹é›†æˆåï¼Œ[å¯ä»¥åœ¨ Astro æ–‡ä»¶ä¸­ä½¿ç”¨ç°æœ‰çš„ React ç»„ä»¶](/zh-cn/core-concepts/framework-components/)ã€‚ä½†æ˜¯ï¼Œå¦‚æœå®ƒä»¬ä¸éœ€è¦äº¤äº’ï¼Œä½ å¯èƒ½éœ€è¦å°†å®ƒä»¬è½¬æ¢ä¸º `.astro` ç»„ä»¶ï¼

4. ç”¨å¯¼å…¥è¯­å¥æˆ–[`Astro.glob()`](/zh-cn/reference/api-reference/#astroglob)ä»£æ›¿`getStaticProps()`æ¥æŸ¥è¯¢ä½ çš„æœ¬åœ°æ–‡ä»¶ã€‚ä½¿ç”¨`fetch()`æ¥è·å–å¤–éƒ¨æ•°æ®ã€‚

å‚è€ƒ[`Next.js`æ–‡ä»¶é€æ­¥è½¬æ¢çš„ä¾‹å­](#ç¤ºä¾‹-æ•°æ®è¯·æ±‚)ã€‚

#### æ¯”è¾ƒ: JSX vs Astro

æ¯”è¾ƒä»¥ä¸‹Nextç»„ä»¶å’Œç›¸åº”çš„Astroç»„ä»¶ï¼š

<AstroJSXTabs>
  <Fragment slot="jsx">
    ```jsx title="StarCount.jsx"
    import Header from "./header";
    import Footer from './footer';
    import "./layout.css";

    export async function getStaticProps() {
        const res = await fetch('https://api.github.com/repos/withastro/astro')
        const json = await res.json()
        return {
            props: { message: json.message, stars: json.stargazers_count || 0 },
        }
    }

    const Component = ({ stars, message }) => {
        
        return (
            <>
                <Header />
                <p style={{
                    backgroundColor: `#f4f4f4`,
                    padding: `1em 1.5em`,
                    textAlign: `center`,
                    marginBottom: `1em`
                }}>Astro has {stars} ğŸ§‘â€ğŸš€</p>
                <Footer />
            </>
        )
    }

    export default Component;
    ```
  </Fragment>
  <Fragment slot="astro">
    ```astro title="StarCount.astro"
    ---
    import Header from "./header";
    import Footer from "./footer";
    import "./layout.css";

    const res = await fetch('https://api.github.com/repos/withastro/astro')
    const json = await res.json()
    const message = json.message;
    const stars = json.stargazers_count || 0;
    ---
    <Header />
    <p class="banner">Astro has {stars} ğŸ§‘â€ğŸš€</p>
    <Footer />

    <style>
      .banner {
        background-color: #f4f4f4; 
        padding: 1em 1.5em;
        text-align: center;
        margin-bottom: 1em;
      }
    <style>
    ```
  </Fragment>
</AstroJSXTabs>

### è¿ç§»å¸ƒå±€æ–‡ä»¶

ä½ å¯èƒ½ä¼šå‘ç°æŠŠä½ çš„Next.jså¸ƒå±€å’Œæ¨¡æ¿è½¬æ¢ä¸º[Astroå¸ƒå±€ç»„ä»¶](/zh-cn/core-concepts/layouts/)æ˜¯æœ‰å¸®åŠ©çš„ã€‚

Nextæœ‰ä¸¤ç§ä¸åŒçš„æ–¹æ³•æ¥åˆ›å»ºå¸ƒå±€æ–‡ä»¶ï¼Œæ¯ç§æ–¹æ³•å¤„ç†å¸ƒå±€çš„æ–¹å¼éƒ½ä¸Astroä¸åŒï¼š

- `pages`ç›®å½•

- [`/app`ç›®å½• (in beta)](https://beta.nextjs.org/docs/routing/pages-and-layouts#layouts)

æ¯ä¸ªAstroé¡µé¢éƒ½æ˜ç¡®è¦æ±‚æœ‰`<html>`ã€`<head>`å’Œ`<body>`æ ‡ç­¾ï¼Œæ‰€ä»¥åœ¨ä¸åŒçš„é¡µé¢ä¸­é‡å¤ä½¿ç”¨ä¸€ä¸ªå¸ƒå±€æ–‡ä»¶æ˜¯å¾ˆå¸¸è§çš„ã€‚Astroä½¿ç”¨ä¸€ä¸ª[`<slot />`](/zh-cn/corecepts/astro-components/#slots)ä½œä¸ºé¡µé¢å†…å®¹ï¼Œä¸éœ€è¦å¯¼å…¥è¯­å¥ã€‚æ³¨æ„æ ‡å‡†çš„HTMLæ¨¡æ¿ï¼Œä»¥åŠå¯¹`<head>`çš„ç›´æ¥è®¿é—®ï¼š

```astro title="src/layouts/Layout.astro"
---
---
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Astro</title>
	</head>
	<body>
    <!-- Wrap the slot element with your existing layout templating -->
		<slot />
	</body>
</html>
```

#### è¿ç§»Next.jsçš„`page`ç›®å½•

ä½ çš„Nexté¡¹ç›®å¯èƒ½æœ‰ä¸€ä¸ª`pages/_document.jsx`æ–‡ä»¶ï¼Œå®ƒå¯¼å…¥äº†ä¸€äº›Reactç»„ä»¶æ¥å®šåˆ¶ä½ çš„åº”ç”¨ç¨‹åºçš„`<head>`ï¼š

```jsx title="pages/_document.jsx"
import Document, { Html, Head, Main, NextScript } from "next/document";

export default class MyDocument extends Document {
  render() {
    return (
      <Html lang="en">
        <Head>
          <link rel="icon" href="/favicon.ico" />
        </Head>
        <body>
          <Main />
          <NextScript />
        </body>
      </Html>
    );
  }
}
```

1. å¼€å‘ä¸€ä¸ªæ–°çš„åªè¿”å›JSXçš„Astroå¸ƒå±€æ–‡ä»¶ã€‚

2. ç”¨`<html>`ã€`<head>`ã€`<slot>`å’Œå…¶ä»–HTMLæ ‡ç­¾æ›¿æ¢Reactç»„ä»¶ã€‚


```astro title="src/layouts/Document.astro"
<html lang="en">
	<head>
	    <link rel="icon" href="/favicon.ico" />
	</head>
	<body>
		<slot/>
	</body>
</html>
```

#### è¿ç§»Next.jsçš„`/app`ç›®å½•

Next.jsçš„`app/`ç›®å½•å¸ƒå±€æ–‡ä»¶æ˜¯ç”¨ä¸¤ä¸ªæ–‡ä»¶åˆ›å»ºçš„ï¼šä¸€ä¸ª`layout.jsx`æ–‡ä»¶ç”¨äºå®šåˆ¶`<html>`å’Œ`<body>`å†…å®¹ï¼Œä¸€ä¸ª`head.jsx`æ–‡ä»¶ç”¨äºå®šåˆ¶`<head>`å…ƒç´ å†…å®¹ã€‚

```jsx title="app/layout.jsx"
export default function Layout({ children }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  );
}
```

```jsx title="app/head.jsx"
export default function Head() {
  return (
    <>
      <title>My Page</title>
    </>
  );
}
```

1. å¼€å‘ä¸€ä¸ªæ–°çš„åªè¿”å›JSXçš„Astroå¸ƒå±€æ–‡ä»¶ã€‚

2. ç”¨ä¸€ä¸ªå•ä¸€çš„Astroå¸ƒå±€æ–‡ä»¶æ›¿æ¢è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªé¡µé¢å¤–å£³ï¼ˆ`<html>`ã€`<head>`å’Œ`<body>`æ ‡ç­¾ï¼‰å’Œä¸€ä¸ª`<slot/>`ï¼Œè€Œä¸æ˜¯Reactçš„`{children}`propsï¼š

```astro title="src/layouts/Layout.astro"
<html lang="en">
	<head>
	    <title>My Page</title>
	</head>
	<body>
		<slot/>
	</body>
</html>
```

### è¿ç§»Pageså’ŒPosts

åœ¨Next.jsä¸­ï¼Œä½ çš„postsè¦ä¹ˆåœ¨`/pages`ï¼Œè¦ä¹ˆåœ¨`/app/routeName/page.jsx`ã€‚

åœ¨Astroä¸­ï¼Œ**ä½ æ‰€æœ‰çš„é¡µé¢å†…å®¹å¿…é¡»åœ¨`src/`**ä¸­ï¼Œåœ¨`src/pages`æˆ–`src/content`å…¶ä¸­ã€‚

#### Reacté¡µé¢

ç°æœ‰çš„Next JSX (.js)é¡µé¢å°†éœ€è¦ä»JSXæ–‡ä»¶è½¬æ¢ä¸º.astroé¡µé¢ã€‚ä½ ä¸èƒ½åœ¨Astroä¸­ä½¿ç”¨ç°æœ‰çš„JSXé¡µé¢æ–‡ä»¶ã€‚

è¿™äº›.astroé¡µé¢å¿…é¡»ä½äºsrc/pages/å†…ï¼Œå¹¶å°†æ ¹æ®å…¶æ–‡ä»¶è·¯å¾„è‡ªåŠ¨ç”Ÿæˆé¡µé¢è·¯ç”±ã€‚

#### Markdownå’ŒMDXé¡µé¢

Astroå†…ç½®äº†å¯¹Markdownçš„æ”¯æŒå’Œå¯¹MDXæ–‡ä»¶çš„å¯é€‰æ•´åˆã€‚ä½ å¯ä»¥å¤ç”¨ä»»ä½•ç°æœ‰çš„[Markdownå’ŒMDXæ–‡ä»¶](/zh-cn/guides/markdown-content/)ï¼Œä½†å®ƒä»¬å¯èƒ½éœ€è¦å¯¹å®ƒä»¬çš„frontmatterè¿›è¡Œä¸€äº›è°ƒæ•´ï¼Œæ¯”å¦‚æ·»åŠ [Astroçš„ç‰¹æ®Š`layout`å‰è¨€å±æ€§](/zh-cn/corecepts/layouts/#markdownmdx-layouts)ã€‚ä½ å°†ä¸å†éœ€è¦ä¸ºæ¯ä¸ªMarkdownç”Ÿæˆçš„è·¯ç”±æ‰‹åŠ¨åˆ›å»ºé¡µé¢ã€‚è¿™äº›æ–‡ä»¶å¯ä»¥æ”¾åœ¨`src/pages/`ä¸­ï¼Œåˆ©ç”¨æ–‡ä»¶å³è·¯ç”±çš„ä¼˜åŠ¿è‡ªåŠ¨ç”Ÿæˆã€‚

å¦å¤–ï¼Œä½ å¯ä»¥åœ¨Astroä¸­ä½¿ç”¨[å†…å®¹é›†åˆ](/zh-cn/guides/content-collections/)æ¥å­˜å‚¨å’Œç®¡ç†ä½ çš„å†…å®¹ã€‚å½“ä½œä¸ºä¸€ä¸ªé›†åˆçš„ä¸€éƒ¨åˆ†æ—¶ï¼ŒMarkdownå’ŒMDXæ–‡ä»¶å°†åœ¨`src/content/`çš„æ–‡ä»¶å¤¹ä¸­ã€‚ä½ å°†è‡ªå·±æ£€ç´¢å†…å®¹ï¼Œå¹¶[åŠ¨æ€ç”Ÿæˆè¿™äº›é¡µé¢](/zh-cn/guides/content-collections/#generating-routes-from-content)ã€‚

### è¿ç§»æµ‹è¯•

ç”±äºAstroè¾“å‡ºçš„æ˜¯åŸå§‹HTMLï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æ„å»ºæ­¥éª¤çš„è¾“å‡ºæ¥ç¼–å†™ç«¯åˆ°ç«¯çš„æµ‹è¯•ã€‚å¦‚æœä½ å·²ç»èƒ½å¤ŸåŒ¹é…ä½ çš„Nextç½‘ç«™çš„æ ‡è®°ï¼Œä»¥å‰å†™çš„ä»»ä½•ç«¯åˆ°ç«¯æµ‹è¯•éƒ½å¯èƒ½å¼€ç®±å³ç”¨ã€‚æµ‹è¯•åº“ï¼Œå¦‚Jestå’ŒReactæµ‹è¯•åº“ï¼Œå¯ä»¥è¢«å¯¼å…¥å¹¶ç”¨äºAstroæµ‹è¯•ä½ çš„Reactç»„ä»¶ã€‚

å‚è§Astroçš„[æµ‹è¯•æŒ‡å—](/zh-cn/guides/testing/)äº†è§£æ›´å¤šã€‚

## å‚è€ƒ: å°†Next.jsè¯­æ³•è½¬æ¢ä¸ºAstroè¯­æ³•

### Links

å°†ä»»ä½•Next `<Link to="">`, `<NavLink>`ç­‰ç»„ä»¶è½¬æ¢æˆHTML `<a href="">`æ ‡ç­¾ã€‚

```astro del={1} ins={2}
<Link to="/blog">Blog</Link>
<a href="/blog">Blog</a>
```

Astroæ²¡æœ‰ä¸ºlinksä½¿ç”¨ä»»ä½•ç‰¹æ®Šçš„ç»„ä»¶ï¼Œä½†æˆ‘ä»¬æ¬¢è¿ä½ å»ºç«‹ä½ è‡ªå·±çš„`<Link>`ç»„ä»¶ã€‚ç„¶åä½ å¯ä»¥åƒä½¿ç”¨å…¶ä»–ç»„ä»¶ä¸€æ ·å¯¼å…¥å’Œä½¿ç”¨è¿™ä¸ª`<Link>`ã€‚

```astro title="src/components/Link.astro"
---
const { to } = Astro.props
---
<a href={to}><slot /></a>
```

### Imports

æ›´æ–°ä»»ä½•[æ–‡ä»¶å¯¼å…¥](/zh-cn/guides/imports/)ä»¥å‡†ç¡®å¼•ç”¨ç›¸å¯¹æ–‡ä»¶è·¯å¾„ã€‚è¿™å¯ä»¥é€šè¿‡[import aliases](/zh-cn/guides/typescript/#import-aliases)æ¥å®Œæˆï¼Œæˆ–è€…é€šè¿‡å†™å‡ºç›¸å¯¹è·¯å¾„çš„å…¨ç§°ã€‚

è¯·æ³¨æ„ï¼Œ".astro "å’Œå…¶ä»–ä¸€äº›æ–‡ä»¶ç±»å‹å¿…é¡»ä»¥å…¶å®Œæ•´çš„æ–‡ä»¶æ‰©å±•åå¯¼å…¥ã€‚

```astro title="src/pages/authors/Fred.astro"
---
import Card from `../../components/Card.astro`
---
<Card />
```

### Children Props

å°†ä»»ä½•`{children}`çš„å®ä¾‹è½¬æ¢ä¸ºAstroçš„`<slot />`ã€‚Astroä¸éœ€è¦æ¥æ”¶`{children}`ä½œä¸ºä¸€ä¸ªå‡½æ•°propï¼Œå¹¶ä¼šè‡ªåŠ¨åœ¨`<slot />`ä¸­æ¸²æŸ“childå†…å®¹ã€‚

```astro title="src/components/MyComponent" del={3-9} ins={11-13}
---
---
export default function MyComponent(props) { 
    return (
      <div>
        {props.children}
      </div>
    );  
}

<div>
  <slot />
</div>
```

å¯ä»¥ä½¿ç”¨[å‘½åæ’æ§½](/zh-cn/corecepts/astro-components/#named-slots)å°†æœ‰å¤šä¸ªå­ç»„ä»¶çš„Reactç»„ä»¶è¿ç§»åˆ°Astroç»„ä»¶ã€‚

å‚è€ƒæ›´å¤šå…³äº[Astroä¸­å…·ä½“çš„`<slot />`ç”¨æ³•](/zh-cn/core-concepts/astro-components/#slots)ã€‚

### Fetching

å°†`getStaticProps()`ä¸­ä»»ä½•å®ä¾‹è½¬æ¢ä¸º`Astro.glob()`æˆ–`getCollection()`/`getEntryBySlug()`ï¼Œä»¥ä¾¿è®¿é—®é¡¹ç›®ä¸­å…¶ä»–æ–‡ä»¶çš„æ•°æ®ã€‚ä¸ºäº†[è·å–è¿œç¨‹æ•°æ®](/zh-cn/guides/data-fetching/)ï¼Œä½¿ç”¨`fetch()`ã€‚

è¿™äº›æ•°æ®è¯·æ±‚æ˜¯åœ¨Astroç»„ä»¶çš„frontmatterä¸­æ‰§è¡Œçš„ï¼Œå¹¶ä½¿ç”¨top-level awaitã€‚

```astro title="src/pages/index.astro"
---
import { getCollection } from 'astro:content';

// Get all `src/content/blog/` entries
const allBlogPosts = await getCollection('blog');

// Get all `src/pages/posts/` entries
const allPosts = await Astro.glob('../pages/posts/*.md');

const response = await fetch('https://randomuser.me/api/');
const data = await response.json();
const randomUser = data.results[0];
---
```

æŸ¥çœ‹æ›´å¤šå…³äº[ç”¨`Astro.glob()`å¯¼å…¥æœ¬åœ°æ–‡ä»¶](/zh-cn/guides/imports/#astroglob)ï¼Œ[ä½¿ç”¨Collections APIæŸ¥è¯¢](/zh-cn/guides/content-collections/#querying-collections)æˆ–[è·å–è¿œç¨‹æ•°æ®](/zh-cn/guides/Data-fetching/)ã€‚

### Styling

ä½ å¯èƒ½éœ€è¦ç”¨Astroä¸­å…¶ä»–å¯ç”¨çš„CSSé€‰é¡¹æ¥æ›¿æ¢ä»»ä½•[CSS-in-JSåº“](https://github.com/withastro/astro/issues/4432)ï¼ˆä¾‹å¦‚styled-componentsï¼‰ã€‚

å¦‚æœæœ‰å¿…è¦ï¼Œå°†ä»»ä½•å†…è”æ ·å¼å¯¹è±¡ï¼ˆ`style={{ fontWeight: "bold" }}`ï¼‰è½¬æ¢æˆå†…è”HTMLæ ·å¼å±æ€§ï¼ˆ`style="font-weight:bold;"`ï¼‰ã€‚æˆ–è€…ï¼Œä½¿ç”¨[Astro `<style>`æ ‡ç­¾](/zh-cn/guides/styling/#styling-in-astro)å®ç°scoped CSS stylesã€‚

```astro title="src/components/Card.astro" del={1} ins={2}
<div style={{backgroundColor: `#f4f4f4`, padding: `1em`}}>{message}</div>
<div style="background-color: #f4f4f4; padding: 1em;">{message}</div>
```

åœ¨å®‰è£…äº†[Tailwindé›†æˆ](/zh-cn/guides/integrations-guide/tailwind/)ä¹‹åï¼Œå°±æ”¯æŒTailwindã€‚ä¸éœ€è¦å¯¹æ‚¨ç°æœ‰çš„Tailwindä»£ç è¿›è¡Œä»»ä½•ä¿®æ”¹

æŸ¥çœ‹æ›´å¤šå…³äº [Styling in Astro](/zh-cn/guides/styling/)çš„ä¿¡æ¯ã€‚

### Image

ç”¨[Astroè‡ªå·±çš„å›¾ç‰‡é›†æˆç»„ä»¶](/zh-cn/guides/images/#astros-image-integration)ï¼Œæˆ–ç”¨æ ‡å‡†çš„HTML`<img>`æ¥è½¬æ¢ä»»ä½•Next`<Image />`ç»„ä»¶ã€‚è¯·çœ‹[ç»„ä»¶å±æ€§çš„å®Œæ•´åˆ—è¡¨](/zh-cn/guides/integrations-guide/image/#usage)ï¼Œå¯ç”¨äºAstroçš„`<Image />`å’Œ`<Picture />`ç»„ä»¶ï¼Œæ³¨æ„æœ‰å‡ ä¸ªå±æ€§å’ŒNextä¸åŒã€‚

```astro title="src/pages/index.astro"
---
import { Image } from '@astrojs/image/components';
import localImage from "../images/brand/logo.png";
import rocket from '../images/rocket.svg';
---
<Image src={localImage} alt="The Astro Logo" />
<img src={rocket} alt="A rocketship in space.">
```

åœ¨Reactï¼ˆ`.jsx`ï¼‰ç»„ä»¶ä¸­ï¼Œä½¿ç”¨æ ‡å‡†çš„JSXçš„å›¾ç‰‡è¯­æ³•ï¼ˆ`<img />`ï¼‰ã€‚Astroä¸ä¼šä¼˜åŒ–è¿™äº›å›¾ç‰‡ï¼Œä½†ä½ ä¹Ÿå¯ä»¥å®‰è£…å’Œä½¿ç”¨NPMåŒ…ä»¥æå‡çµæ´»æ€§ã€‚

ä½ å¯ä»¥åœ¨å›¾åƒæŒ‡å—ä¸­äº†è§£æ›´å¤šå…³äº[åœ¨Astroä¸­ä½¿ç”¨å›¾åƒ](/zh-cn/guides/images/)çš„ä¿¡æ¯ã€‚



## ç¤ºä¾‹: æ•°æ®è¯·æ±‚

ä¸‹é¢æ˜¯ä¸€ä¸ªNext.js PokÃ©dexæ•°æ®è·å–è½¬æ¢ä¸ºAstroçš„ä¾‹å­ã€‚
    
`pages/index.js`ä½¿ç”¨[REST PokÃ©API](https://pokeapi.co/)è·å–å¹¶æ˜¾ç¤ºå‰151ä¸ªç¥å¥‡å®è´çš„åˆ—è¡¨ã€‚

ä¸‹é¢æ˜¯å¦‚ä½•åœ¨`src/pages/index.astro`ä¸­é‡æ–°åˆ›å»ºï¼Œå°†`getStaticProps()`æ›¿æ¢ä¸º`fetch()`ã€‚

1. å®šä¹‰return() JSXã€‚

```jsx title="pages/index.js" {6-18}
import Link from 'next/link'
import styles from '../styles/poke-list.module.css';

export default function Home({ pokemons }) {
    return (
        <>
            <ul className={`plain-list ${styles.pokeList}`}>
                {pokemons.map((pokemon) => (
                    <li className={styles.pokemonListItem} key={pokemon.name}>
                        <Link className={styles.pokemonContainer} as={`/pokemon/${pokemon.name}`} href="/pokemon/[name]">
                            <p className={styles.pokemonId}>No. {pokemon.id}</p>
                            <img className={styles.pokemonImage} src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.id}.png`} alt={`${pokemon.name} picture`}></img>
                            <h2 className={styles.pokemonName}>{pokemon.name}</h2>
                        </Link>
                    </li>
                ))}
            </ul>
        </>
    )
}

export const getStaticProps = async () => {
    const res = await fetch("https://pokeapi.co/api/v2/pokemon?limit=151")
    const resJson = await res.json();
    const pokemons = resJson.results.map(pokemon => {
        const name = pokemon.name;
        // https://pokeapi.co/api/v2/pokemon/1/
        const url = pokemon.url;
        const id = url.split("/")[url.split("/").length - 2];
        return {
            name,
            url,
            id
        }
    });
    return {
        props: {
            pokemons,
        },
    }
}
```

2. åˆ›å»º`src/pages/index.astro`

ä½¿ç”¨Nextå‡½æ•°çš„è¿”å›å€¼ã€‚å°†ä»»ä½•Nextæˆ–Reactè¯­æ³•è½¬æ¢æˆAstroï¼ŒåŒ…æ‹¬æ”¹å˜ä»»ä½•[HTMLå…¨å±€å±æ€§]çš„å¤§å°å†™(https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes)ã€‚

æ³¨æ„:

- `.map` å°±å·²ç»å¯ä»¥äº†

- `className` å˜æˆ `class`.

- `<Link>` å˜æˆ `<a>`.

- `<> </>`åœ¨Astroæ¨¡æ¿è®¾è®¡ä¸­æ˜¯ä¸éœ€è¦çš„ã€‚

```astro title="src/pages/index.astro" "class" "</a>" "<a"
---
---
<ul class="plain-list pokeList">
    {pokemons.map((pokemon) => (
        <li class="pokemonListItem" key={pokemon.name}>
            <a class="pokemonContainer" href={`/pokemon/${pokemon.name}`}>
                <p class="pokemonId">No. {pokemon.id}</p>
                <img class="pokemonImage" src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.id}.png`} alt={`${pokemon.name} picture`}/>
                <h2 class="pokemonName">{pokemon.name}</h2>
            </a>
        </li>
    ))}
</ul>
```

3. æ·»åŠ ä»»ä½•éœ€è¦çš„imports, props, å’ŒJavaScript

æ³¨æ„:

- ä¸å†éœ€è¦ "getStaticProps "å‡½æ•°ã€‚æ¥è‡ªAPIçš„æ•°æ®ç›´æ¥åœ¨ä»£ç å›´æ ä¸­è¢«è·å–ã€‚
- ä¸€ä¸ª`<Layout>`ç»„ä»¶è¢«å¯¼å…¥å¹¶åŒ…è£¹äº†é¡µé¢æ¨¡æ¿ã€‚

```astro ins={2,4-16,19,31} title="src/pages/index.astro"
---
import Layout from '../layouts/layout.astro';

const res = await fetch("https://pokeapi.co/api/v2/pokemon?limit=151");
const resJson = await res.json();
const pokemons = resJson.results.map(pokemon => {
    const name = pokemon.name;
    // https://pokeapi.co/api/v2/pokemon/1/
    const url = pokemon.url;
    const id = url.split("/")[url.split("/").length - 2];
    return {
        name,
        url,
        id
    }
});
---

<Layout>
  <ul class="plain-list pokeList">
      {pokemons.map((pokemon) => (
          <li class="pokemonListItem" key={pokemon.name}>
              <a class="pokemonContainer" href={`/pokemon/${pokemon.name}`}>
                  <p class="pokemonId">No. {pokemon.id}</p>
                  <img class="pokemonImage" src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.id}.png`} alt={`${pokemon.name} picture`}/>
                  <h2 class="pokemonName">{pokemon.name}</h2>
              </a>
          </li>
      ))}
  </ul>
</Layout>
```

## ç¤¾åŒºèµ„æº

- Video: [NextJS to Astro: more control = faster sites](https://www.youtube.com/watch?v=PSzCtdM20Fc).

- Video: [How Astro made my site 100x faster](https://www.youtube.com/watch?v=cOxA3kMYtkM).

- Blog post: [Migrating from Next.js to Astro](https://johnzanussi.com/posts/nextjs-to-astro-migration).

- Blog Post: [From NextJS to Astro](https://vanntile.com/blog/next-to-astro).
- Blog Post: [Converting Next.js to Astro](https://ericclemmons.com/blog/converting-nextjs-to-astro).
