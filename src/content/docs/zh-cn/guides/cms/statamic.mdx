---
title: æ— å¤´æ¨¡å¼çš„ Statamic ä¸ Astro
description: å°† Statamic ä½œä¸º CMS å¹¶ä¸ºä½ çš„ Astro é¡¹ç›®æ·»åŠ å†…å®¹
type: cms
stub: false
service: Statamic
i18nReady: true
---

[Statamic](https://statamic.com/) æ˜¯ä¸€ä¸ªç°ä»£çš„ã€æ–‡æ¡£æ‰å¹³çš„ CMSã€‚å®ƒå…è®¸å¼€å‘äººå‘˜è½»æ¾åˆ›å»ºåŠ¨æ€ç½‘ç«™å’Œåº”ç”¨ç¨‹åºï¼ŒåŒæ—¶æä¾›ç›´è§‚å’Œç”¨æˆ·å‹å¥½çš„ç•Œé¢ä¾›å†…å®¹ç¼–è¾‘è€…ç®¡ç†å†…å®¹ã€‚

## ä¸ Astro çš„é›†æˆ

Statamic æä¾›äº†å†…ç½®çš„ [REST API](https://statamic.dev/rest-api) å’Œ [GraphQL API](https://statamic.dev/graphql)ï¼Œç”¨äºå°†ä½ çš„æ•°æ®ä¸ Astro è¿›è¡Œè¿æ¥ã€‚

### å‰æœŸå‡†å¤‡

é¦–å…ˆï¼Œä½ éœ€è¦å…·å¤‡ä»¥ä¸‹æ¡ä»¶ï¼š

1. REST API å’Œ GraphQL API ä»…åœ¨ Statamic çš„ä¸“ä¸šç‰ˆä¸­å¯ç”¨ã€‚ä½ å¯ä»¥åœ¨ [æœ¬åœ°æœºå™¨](https://statamic.dev/tips/how-to-enable-statamic-pro#trial-mode) ä¸Šå…è´¹è¯•ç”¨ä¸“ä¸šç‰ˆã€‚
2. **Astro é¡¹ç›®** - å¦‚æœä½ è¿˜éœ€è¦ä¸€ä¸ª Astro é¡¹ç›®ï¼Œæˆ‘ä»¬çš„ [å®‰è£…æŒ‡å—](/zh-cn/install/auto/) å°†å¸®åŠ©ä½ å¿«é€Ÿå¯åŠ¨ã€‚
3. **Statamic ç«™ç‚¹** - å¦‚æœä½ éœ€è¦ä¸€ä¸ª Statamic ç½‘ç«™ï¼Œ[è¿™ä¸ªæŒ‡å—](https://statamic.dev/quick-start-guide) å°†å¸®åŠ©ä½ å…¥é—¨ã€‚è®°å¾—åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ  `STATAMIC_API_ENABLED=true` æˆ– `STATAMIC_GRAPHQL_ENABLED=true` æ¥å¯ç”¨ REST API æˆ– GraphQL APIï¼Œå¹¶åœ¨ API é…ç½®æ–‡ä»¶ä¸­å¯ç”¨æ‰€éœ€èµ„æºã€‚

:::caution
æ‰€æœ‰çš„ç¤ºä¾‹éƒ½å‡è®¾ä½ çš„ç½‘ç«™æœ‰ä¸€ä¸ªå«åš `posts` çš„é›†åˆï¼Œè¯¥é›†åˆæ‹¥æœ‰ä¸€ä¸ªå«åš `post` çš„è“å›¾ï¼Œå¹¶ä¸”è¯¥è“å›¾å…·æœ‰ä¸€ä¸ªæ ‡é¢˜å­—æ®µï¼ˆå­—æ®µç±»å‹ä¸ºæ–‡æœ¬ï¼‰å’Œä¸€ä¸ªå†…å®¹å­—æ®µï¼ˆå­—æ®µç±»å‹ä¸º Markdownï¼‰ã€‚
:::

### è·å–æ•°æ®
:::caution
å¦‚æœä½ åœ¨æœ¬åœ°åŒæ—¶ä½¿ç”¨ Statamic å’Œ Astroï¼Œè¯·è®°å¾—åœ¨è·å– API æ—¶ä½¿ç”¨ `127.0.0.1` è€Œä¸æ˜¯ `localhost`ã€‚

åœ¨å‘ Astro æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ—¶ï¼Œ`localhost` ä¸ä¼šåƒåœ¨æµè§ˆå™¨ä¸­ä¸€æ ·æ­£ç¡®è§£æï¼Œå› æ­¤ä»»ä½•å¯¹ API çš„è¯·æ±‚éƒ½ä¼šå¤±è´¥ã€‚
:::

#### REST API

ä»ä½ ç«™ç‚¹çš„ REST API URL è·å– Statamic æ•°æ®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ `https://[ä½ çš„ç«™ç‚¹]/api/`ã€‚ç„¶åï¼Œä½ å¯ä»¥ä½¿ç”¨ Astro çš„ `set:html={}` æŒ‡ä»¤æ¥æ¸²æŸ“ä½ çš„æ•°æ®å±æ€§ã€‚

ä¾‹å¦‚ï¼Œè¦æ˜¾ç¤ºæ‰€é€‰ [é›†åˆ](https://statamic.dev/collections) ä¸­çš„æ ‡é¢˜å’Œå†…å®¹åˆ—è¡¨ï¼š

```astro title="src/pages/index.astro
---
const res = await fetch("https://[YOUR-SITE]/api/collections/posts/entries?sort=-date")
const posts = await res.json()
---
<h1>Astro + Statamic ğŸš€</h1>
{
  posts.map((post) => (
      <h2 set:html={post.title} />
      <p set:html={post.content} />
  ))
}
```

#### GraphQL

é€šè¿‡ç«™ç‚¹çš„ GraphQL API URL è·å–ä½ çš„ Statamic æ•°æ®ã€‚åŒæ ·åœ°ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒæ˜¯ `https://[ä½ çš„ç½‘ç«™]/graphql/`ã€‚ç„¶åï¼Œä½ å¯ä»¥ä½¿ç”¨ Astro çš„ `set:html={}` æŒ‡ä»¤æ¥æ¸²æŸ“ä½ çš„æ•°æ®å±æ€§ã€‚

ä¾‹å¦‚ï¼Œè¦æ˜¾ç¤ºæ‰€é€‰ [é›†åˆ](https://statamic.dev/collections) ä¸­çš„æ ‡é¢˜å’Œå†…å®¹åˆ—è¡¨ï¼š

```astro title="src/pages/index.astro
---
const res = await fetch("https://[YOUR-SITE]/graphql/",
  {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify({
      query: `
        posts: entries(collection: "posts", sort: "date desc") {
          data {
            title
            ... on Entry_Posts_Post {
              content
            }
          }
        }
      `
    }),
  });
const entries = await res.json()
---
<h1>Astro + Statamic ğŸš€</h1>
{
  entries.data.posts.data.map((post) => (
      <h2 set:html={post.title} />
      <p set:html={post.content} />
  ))
}
```

### å‘å¸ƒä½ çš„ç½‘ç«™

è¦éƒ¨ç½²ä½ çš„ Astro ç½‘ç«™ï¼Œè¯·è®¿é—®æˆ‘ä»¬çš„[éƒ¨ç½²æŒ‡å—](/zh-cn/guides/deploy/)ï¼Œå¹¶æŒ‰ç…§ä½ æ‰€é€‰æ‹©çš„æ‰˜ç®¡æä¾›å•†çš„è¯´æ˜è¿›è¡Œæ“ä½œã€‚

## ç¤¾åŒºèµ„æº

-  [ä½¿ç”¨ Statamic ä½œä¸ºæ— å¤´ CMS æ„å»ºé™æ€ç«™ç‚¹çš„æ•™ç¨‹](https://buddy.works/guides/statamic-rest-api)
-  [åœ¨æ— å¤´çš„ Statamic ä¸­ä¸º Astro å®ç°å®æ—¶é¢„è§ˆ](https://maciekpalmowski.dev/implementing-live-previews-in-headless-statamic-when-using-astro/)