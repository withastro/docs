---
type: integration
title: '@astrojs/lit'
description: å­¦ä¹ å¦‚ä½•ä½¿ç”¨ @astrojs/lit æ¡†æ¶é›†æˆæ¥æ‰©å±• Astro é¡¹ç›®ä¸­çš„ç»„ä»¶æ”¯æŒã€‚
githubIntegrationURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/lit/'
category: renderer
i18nReady: true
---

import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'

è¿™ä¸ª **[Astro é›†æˆ][astro-integration]** ä¸ºä½ çš„ [Lit](https://lit.dev/) è‡ªå®šä¹‰å…ƒç´ æä¾›äº†æœåŠ¡ç«¯æ¸²æŸ“å’Œå®¢æˆ·ç«¯æ°´åˆã€‚

## å®‰è£… \{#installation\}

Astro åŒ…å«äº†ä¸€ä¸ª `astro add` å‘½ä»¤ï¼Œç”¨äºè‡ªåŠ¨è®¾ç½®å®˜æ–¹é›†æˆã€‚å¦‚æœä½ æ„¿æ„ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©[æ‰‹åŠ¨å®‰è£…é›†æˆ](#manual-install)ã€‚

è¦å®‰è£… `@astrojs/lit`ï¼Œè¯·ä»é¡¹ç›®ç›®å½•è¿è¡Œä»¥ä¸‹å‘½ä»¤å¹¶æŒ‰ç…§æç¤ºæ“ä½œï¼š

<PackageManagerTabs>
  <Fragment slot="npm">
    ```sh
    npx astro add lit
    ```
  </Fragment>
  <Fragment slot="pnpm">
    ```sh
    pnpm astro add lit
    ```
  </Fragment>
  <Fragment slot="yarn">
    ```sh
    yarn astro add lit
    ```
  </Fragment>
</PackageManagerTabs>

å¦‚æœä½ é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œ[è¯·éšæ—¶åœ¨ GitHub ä¸Šå‘æˆ‘ä»¬æŠ¥å‘Š](https://github.com/withastro/astro/issues) å¹¶å°è¯•ä¸‹é¢çš„æ‰‹åŠ¨å®‰è£…æ­¥éª¤ã€‚

### æ‰‹åŠ¨å®‰è£… \{#manual-install\}

é¦–å…ˆï¼Œå®‰è£… `@astrojs/lit` åŒ…ï¼š

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npm install @astrojs/lit
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm add @astrojs/lit
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn add @astrojs/lit
  ```
  </Fragment>
</PackageManagerTabs>

å¤§å¤šæ•°åŒ…ç®¡ç†å™¨ä¹Ÿä¼šå®‰è£…ç›¸å…³çš„å¯¹ç­‰ä¾èµ–ã€‚å¦‚æœä½ åœ¨å¯åŠ¨ Astro æ—¶çœ‹åˆ° "Cannot find package 'lit'"ï¼ˆæˆ–ç±»ä¼¼ï¼‰çš„è­¦å‘Šï¼Œä½ éœ€è¦å®‰è£… `lit` å’Œ `@webcomponents/template-shadowroot`ï¼š

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npm install lit @webcomponents/template-shadowroot
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm add lit @webcomponents/template-shadowroot
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn add lit @webcomponents/template-shadowroot
  ```
  </Fragment>
</PackageManagerTabs>

ç„¶åï¼Œä½¿ç”¨ `integrations` å±æ€§å°†é›†æˆåº”ç”¨åˆ°ä½ çš„ `astro.config.*` æ–‡ä»¶ä¸­ï¼š

```js ins={2} ins="lit()" title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import lit from '@astrojs/lit';

export default defineConfig({
  // ...
  integrations: [lit()],
});
```

## å…¥é—¨ \{#getting-started\}

è¦åœ¨ Astro ä¸­ä½¿ç”¨ä½ çš„ç¬¬ä¸€ä¸ª Lit ç»„ä»¶ï¼Œä½ å¯ä»¥ç§»æ­¥æˆ‘ä»¬çš„ [UI æ¡†æ¶æ–‡æ¡£][astro-ui-frameworks]ã€‚ä½ å°†ä¼šäº†è§£åˆ°ï¼š

* ğŸ“¦ å¦‚ä½•åŠ è½½æ¡†æ¶ç»„ä»¶
* ğŸ’§ å®¢æˆ·ç«¯æ°´åˆé€‰é¡¹
* ğŸ¤ æ··åˆå’ŒåµŒå¥—æ¡†æ¶çš„æœºä¼š

åœ¨ Astro ä¸­ç¼–å†™å’Œå¯¼å…¥ Lit ç»„ä»¶çš„ä»£ç å¦‚ä¸‹ï¼š

```js title="src/components/my-element.js"
import { LitElement, html } from 'lit';

export class MyElement extends LitElement {
  render() {
    return html`<p>Hello world! From my-element</p>`;
  }
}

customElements.define('my-element', MyElement);
```

ç°åœ¨ï¼Œè¯¥ç»„ä»¶å·²ç»å‡†å¤‡å¥½é€šè¿‡ Astro frontmatter å¯¼å…¥ï¼š

```astro title="src/pages/index.astro"
---
import { MyElement } from '../components/my-element.js';
---

<MyElement />
```

:::note
Lit éœ€è¦æµè§ˆå™¨å…¨å±€å˜é‡ï¼Œå¦‚ `HTMLElement` å’Œ `customElements`ã€‚å› æ­¤ï¼ŒLit æ¸²æŸ“å™¨ä¼šåœ¨æœåŠ¡å™¨ä¸Šæ¨¡æ‹Ÿè¿™äº›å…¨å±€å˜é‡ï¼Œä»¥ä¾¿ Lit å¯ä»¥è¿è¡Œã€‚ä½  *å¯èƒ½* ä¼šé‡åˆ°ä¸€äº›å› æ­¤è€Œæ— æ³•æ­£å¸¸å·¥ä½œçš„åº“ã€‚
:::

### Experimental Decorators \{#experimental-decorators\}

è¦åœ¨ Lit ä¸­ä½¿ç”¨ [experimental decorators](https://lit.dev/docs/components/decorators/)ï¼Œè¯·åœ¨ä½ çš„ `tsconfig.json` æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```json title="tsconfig.json" add={3}
{
  "compilerOptions": {
    "experimentalDecorators": true,
  }
}
```

è¿™ä½¿ä½ å¯ä»¥ä½¿ç”¨å¦‚ `@customElement` å’Œ `@state` è¿™æ ·çš„ `experimental decorators` æ¥æ³¨å†Œè‡ªå®šä¹‰å…ƒç´ å¹¶åœ¨ä½ çš„ Lit ç»„ä»¶ä¸­å®šä¹‰çŠ¶æ€å±æ€§ï¼š

```ts title="src/components/my-element.ts"
import { LitElement, html } from "lit";
import { customElement, state } from "lit/decorators.js";

@customElement("my-element")
export class MyElement extends LitElement {
    @state() name = "my-element";

    override render() {
        return html`<p>ä½ å¥½ä¸–ç•Œï¼æ¥è‡ª ${this.name}</p>`;
    }
}
```

### Polyfills ä¸æ°´åˆ \{#polyfills--hydration\}

æ¸²æŸ“å™¨ä¼šè‡ªåŠ¨å¤„ç†ä¸ºä¸æ”¯æŒ Declarative Shadow DOM çš„æµè§ˆå™¨æ·»åŠ é€‚å½“çš„ polyfillã€‚polyfill å¤§çº¦ä¸º *1.5kB*ã€‚å¦‚æœæµè§ˆå™¨æ”¯æŒ Declarative Shadow DOMï¼Œåˆ™åŠ è½½çš„å­—èŠ‚æ•°å°‘äº 250 å­—èŠ‚ï¼ˆç”¨äºæ£€æµ‹æ”¯æŒï¼‰ã€‚

æ°´åˆä¹Ÿæ˜¯è‡ªåŠ¨å¤„ç†çš„ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸ Astro æ”¯æŒçš„å…¶ä»–åº“ç›¸åŒçš„æ°´åˆæŒ‡ä»¤ï¼Œä¾‹å¦‚ `client:load`ã€`client:idle` å’Œ `client:visible`ã€‚

```astro
---
import { MyElement } from '../components/my-element.js';
---

<MyElement client:visible />
```

ä¸Šé¢çš„ä»£ç å°†åªåœ¨ç”¨æˆ·æ»šåŠ¨åˆ°è§†å›¾ä¸­æ—¶åŠ è½½å…ƒç´ çš„ JavaScriptã€‚ç”±äºå®ƒæ˜¯æœåŠ¡å™¨æ¸²æŸ“çš„ï¼Œç”¨æˆ·å°†çœ‹ä¸åˆ°ä»»ä½•å¡é¡¿ï¼›å®ƒå°†é€æ˜åœ°åŠ è½½å’Œæ°´åˆã€‚

## æ•…éšœæ’é™¤ \{#troubleshooting\}

å¦‚éœ€å¸®åŠ©ï¼Œè¯·æŸ¥çœ‹ [Discord](https://astro.build/chat) ä¸Šçš„ `#support` é¢‘é“ã€‚æˆ‘ä»¬å‹å¥½çš„æ”¯æŒå°ç»„æˆå‘˜å°†åœ¨æ­¤å¤„æä¾›å¸®åŠ©ï¼

ä½ ä¹Ÿå¯ä»¥æŸ¥çœ‹æˆ‘ä»¬çš„ [Astro é›†æˆæ–‡æ¡£][astro-integration] äº†è§£æ›´å¤šä¿¡æ¯ã€‚

å¸¸è§é—®é¢˜å¦‚ä¸‹ï¼š

### æµè§ˆå™¨å…¨å±€å˜é‡ \{#browser-globals\}

Lit é›†æˆçš„ SSR é€šè¿‡å‘å…¨å±€ç¯å¢ƒæ·»åŠ ä¸€äº›æµè§ˆå™¨å…¨å±€å±æ€§æ¥å·¥ä½œã€‚å®ƒæ·»åŠ çš„ä¸€äº›å±æ€§åŒ…æ‹¬ `window`ã€`document` å’Œ `location`ã€‚

è¿™äº›å…¨å±€å˜é‡ *å¯èƒ½* ä¼šå¹²æ‰°å…¶ä»–å¯èƒ½ä½¿ç”¨è¿™äº›å˜é‡çš„åº“ï¼Œä»¥æ£€æµ‹å®ƒä»¬æ˜¯å¦åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œè€Œå®é™…ä¸Šå®ƒä»¬æ˜¯åœ¨æœåŠ¡å™¨ä¸­è¿è¡Œçš„ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´è¿™äº›åº“å‡ºç°é”™è¯¯ã€‚

å› æ­¤ï¼ŒLit é›†æˆå¯èƒ½ä¸è¿™äº›ç±»å‹çš„åº“ä¸å…¼å®¹ã€‚å¯ä»¥å¸®åŠ©çš„ä¸€ä»¶äº‹æ˜¯åœ¨ Lit å¹²æ‰°å…¶ä»–é›†æˆæ—¶æ›´æ”¹é›†æˆçš„é¡ºåºï¼š

```js lang="js" title="astro.config.mjs" ins={7} del={6}
  import { defineConfig } from 'astro/config';
  import vue from '@astrojs/vue';
  import lit from '@astrojs/lit';

  export default defineConfig({
    integrations: [vue(), lit()]
    integrations: [lit(), vue()]
  });
```

æ­£ç¡®çš„é¡ºåºå¯èƒ½å› é—®é¢˜çš„æ ¹æœ¬åŸå› è€Œæœ‰æ‰€ä¸åŒã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸èƒ½ä¿è¯è§£å†³æ¯ä¸ªé—®é¢˜ï¼Œè€Œä¸”ç”±äºè¿™ä¸ªåŸå› ï¼Œä¸€äº›åº“ä¸èƒ½åœ¨ä½¿ç”¨ Lit é›†æˆæ—¶ä½¿ç”¨ã€‚

### ä¸¥æ ¼çš„åŒ…ç®¡ç†å™¨ \{#strict-package-managers\}

å½“ä½¿ç”¨åƒ `pnpm` è¿™æ ·çš„ [ä¸¥æ ¼çš„åŒ…ç®¡ç†å™¨](https://pnpm.io/pnpm-vs-npm#npms-flat-tree) æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°é”™è¯¯ï¼Œä¾‹å¦‚ `ReferenceError: module is not defined`ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¯·ä½¿ç”¨ `.npmrc` æ–‡ä»¶æå‡ Lit ä¾èµ–é¡¹ï¼š

```ini title=".npmrc"
public-hoist-pattern[]=*lit*
```

### é™åˆ¶ \{#limitations\}

- Lit é›†æˆç”± `@lit-labs/ssr` æä¾›æ”¯æŒï¼Œè¯¥é›†æˆå­˜åœ¨ä¸€äº›é™åˆ¶ã€‚è¯·æŸ¥çœ‹ä»–ä»¬çš„ [é™åˆ¶æ–‡æ¡£](https://www.npmjs.com/package/@lit-labs/ssr#notes-and-limitations) äº†è§£æ›´å¤šä¿¡æ¯ã€‚

- Astro ä¸æ”¯æŒ Lit ç»„ä»¶çš„ IntelliSense åŠŸèƒ½ã€‚

[astro-integration]: /zh-cn/guides/integrations-guide/

[astro-ui-frameworks]: /zh-cn/guides/framework-components/#ä½¿ç”¨æ¡†æ¶ç»„ä»¶
