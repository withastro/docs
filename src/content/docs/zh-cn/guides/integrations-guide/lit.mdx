---
type: integration
title: '@astrojs/lit'
description: å­¦ä¹ å¦‚ä½•ä½¿ç”¨ @astrojs/lit æ¡†æ¶é›†æˆæ¥æ‰©å±• Astro é¡¹ç›®ä¸­çš„ç»„ä»¶æ”¯æŒã€‚
githubURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/lit/'
hasREADME: true
category: renderer
i18nReady: true
---

import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';

è¿™ä¸ª **[Astro é›†æˆ][astro-integration]** ä¸ºä½ çš„ [Lit](https://lit.dev/) è‡ªå®šä¹‰å…ƒç´ æä¾›äº†æœåŠ¡ç«¯æ¸²æŸ“å’Œå®¢æˆ·ç«¯æ°´åˆã€‚

## å®‰è£…

æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å°†é›†æˆæ·»åŠ åˆ°ä½ çš„é¡¹ç›®ä¸­ã€‚è®©æˆ‘ä»¬é¦–å…ˆå°è¯•æœ€æ–¹ä¾¿çš„é€‰é¡¹ï¼

### `astro add` å‘½ä»¤

Astro åŒ…å«ä¸€ä¸ªç”¨äºæ·»åŠ ç¬¬ä¸€æ–¹é›†æˆçš„ CLI å·¥å…·ï¼š`astro add`ã€‚è¿™ä¸ªå‘½ä»¤å°†ï¼š

1.  (å¯é€‰) å®‰è£…æ‰€æœ‰å¿…è¦çš„ä¾èµ–å’ŒåŒè¡Œä¾èµ–
2.  (åŒæ ·å¯é€‰) æ›´æ–°ä½ çš„ `astro.config.*` æ–‡ä»¶æ¥åº”ç”¨è¿™ä¸ªé›†æˆ

è¦å®‰è£… `@astrojs/lit`ï¼Œè¯·ä»é¡¹ç›®ç›®å½•è¿è¡Œä»¥ä¸‹å‘½ä»¤å¹¶æŒ‰ç…§æç¤ºæ“ä½œï¼š

<PackageManagerTabs>

<Fragment slot="npm">
```shell
npx astro add lit
```
</Fragment>

<Fragment slot="pnpm">
```shell
pnpm astro add lit  
```
</Fragment>

<Fragment slot="yarn">
```shell
yarn astro add lit
```
</Fragment>
</PackageManagerTabs>

å¦‚æœä½ é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œ[è¯·éšæ—¶åœ¨ GitHub ä¸Šå‘æˆ‘ä»¬æŠ¥å‘Š](https://github.com/withastro/astro/issues) å¹¶å°è¯•ä¸‹é¢çš„æ‰‹åŠ¨å®‰è£…æ­¥éª¤ã€‚

### æ‰‹åŠ¨å®‰è£…ä¾èµ–

é¦–å…ˆï¼Œåƒè¿™æ ·å®‰è£… `@astrojs/lit` é›†æˆï¼š

```sh
npm install @astrojs/lit
```

å¤§å¤šæ•°åŒ…ç®¡ç†å™¨ä¹Ÿä¼šå®‰è£…ç›¸å…³çš„åŒè¡Œä¾èµ–ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ åœ¨å¯åŠ¨ Astro æ—¶çœ‹åˆ°â€œCannot find package 'lit'â€ï¼ˆæˆ–ç±»ä¼¼ï¼‰çš„è­¦å‘Šï¼Œä½ éœ€è¦å®‰è£… `lit` å’Œ `@webcomponents/template-shadowroot`ï¼š

```sh
npm install lit @webcomponents/template-shadowroot
```

ç°åœ¨ï¼Œä½¿ç”¨ `integrations` å±æ€§å°†è¿™ä¸ªé›†æˆåº”ç”¨åˆ°ä½ çš„ `astro.config.*` æ–‡ä»¶ä¸­ï¼š

```js ins={3} "lit()"
// astro.config.mjs
import { defineConfig } from 'astro/config';
import lit from '@astrojs/lit';

export default defineConfig({
  // ...
  integrations: [lit()],
});
```

## å…¥é—¨

è¦åœ¨ Astro ä¸­ä½¿ç”¨ä½ çš„ç¬¬ä¸€ä¸ª Lit ç»„ä»¶ï¼Œä½ å¯ä»¥ç§»æ­¥æˆ‘ä»¬çš„ [UI æ¡†æ¶æ–‡æ¡£][astro-ui-frameworks]ã€‚ä½ å°†ä¼šäº†è§£åˆ°ï¼š

*   ğŸ“¦ å¦‚ä½•åŠ è½½æ¡†æ¶ç»„ä»¶
*   ğŸ’§ å®¢æˆ·ç«¯æ°´åˆé€‰é¡¹
*   ğŸ¤ æ··åˆå’ŒåµŒå¥—æ¡†æ¶çš„æœºä¼š

åœ¨ Astro ä¸­ç¼–å†™å’Œå¯¼å…¥ Lit ç»„ä»¶çš„ä»£ç å¦‚ä¸‹ï¼š

```js
// src/components/my-element.js
import { LitElement, html } from 'lit';

export class MyElement extends LitElement {
  render() {
    return html` <p>Hello world! From my-element</p> `;
  }
}

customElements.define('my-element', MyElement);
```

ç°åœ¨ï¼Œè¯¥ç»„ä»¶å·²ç»å‡†å¤‡å¥½é€šè¿‡ Astro frontmatter å¯¼å…¥ï¼š

```astro title="src/pages/index.astro"
---
import { MyElement } from '../components/my-element.js';
---

<MyElement />
```

> è¯·æ³¨æ„ï¼ŒLit éœ€è¦æµè§ˆå™¨å…¨å±€å˜é‡ï¼Œä¾‹å¦‚ `HTMLElement` å’Œ `customElements`ã€‚å› æ­¤ï¼ŒLit æ¸²æŸ“å™¨ä½¿ç”¨è¿™äº›å…¨å±€å˜é‡æ¥æ¨¡æ‹ŸæœåŠ¡å™¨ï¼Œä»¥ä¾¿ Lit å¯ä»¥è¿è¡Œã€‚å› æ­¤ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ç”±äºæ­¤åŸå› è€Œæ— æ³•æ­£å¸¸å·¥ä½œçš„åº“ã€‚

### Polyfills ä¸æ°´åˆ

æ¸²æŸ“å™¨ä¼šè‡ªåŠ¨å¤„ç†ä¸ºä¸æ”¯æŒ Declarative Shadow DOM çš„æµè§ˆå™¨æ·»åŠ é€‚å½“çš„ polyfillã€‚polyfill å¤§çº¦ä¸º *1.5kB*ã€‚å¦‚æœæµè§ˆå™¨æ”¯æŒ Declarative Shadow DOMï¼Œåˆ™åŠ è½½çš„å­—èŠ‚æ•°å°‘äº 250 å­—èŠ‚ï¼ˆç”¨äºæ£€æµ‹æ”¯æŒï¼‰ã€‚

æ°´åˆä¹Ÿæ˜¯è‡ªåŠ¨å¤„ç†çš„ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸ Astro æ”¯æŒçš„å…¶ä»–åº“ç›¸åŒçš„æ°´åˆæŒ‡ä»¤ï¼Œä¾‹å¦‚ `client:load`ã€`client:idle` å’Œ `client:visible`ã€‚

```astro
---
import { MyElement } from '../components/my-element.js';
---

<MyElement client:visible />
```

ä¸Šé¢çš„ä»£ç å°†åªåœ¨ç”¨æˆ·æ»šåŠ¨åˆ°è§†å›¾ä¸­æ—¶åŠ è½½å…ƒç´ çš„ JavaScriptã€‚ç”±äºå®ƒæ˜¯æœåŠ¡å™¨æ¸²æŸ“çš„ï¼Œç”¨æˆ·å°†çœ‹ä¸åˆ°ä»»ä½•å¡é¡¿ï¼›å®ƒå°†é€æ˜åœ°åŠ è½½å’Œæ°´åˆã€‚

## æ•…éšœæ’é™¤

å¦‚éœ€å¸®åŠ©ï¼Œè¯·æŸ¥çœ‹ [Discord](https://astro.build/chat) ä¸Šçš„ `#support` é¢‘é“ã€‚æˆ‘ä»¬å‹å¥½çš„æ”¯æŒå°ç»„æˆå‘˜å°†åœ¨æ­¤å¤„æä¾›å¸®åŠ©ï¼

ä½ ä¹Ÿå¯ä»¥æŸ¥çœ‹æˆ‘ä»¬çš„ [Astro é›†æˆæ–‡æ¡£][astro-integration] äº†è§£æ›´å¤šä¿¡æ¯ã€‚

å¸¸è§é—®é¢˜å¦‚ä¸‹ï¼š

### æµè§ˆå™¨å…¨å±€å˜é‡

Lit é›†æˆçš„ SSR é€šè¿‡å‘å…¨å±€ç¯å¢ƒæ·»åŠ ä¸€äº›æµè§ˆå™¨å…¨å±€å±æ€§æ¥å·¥ä½œã€‚å®ƒæ·»åŠ çš„ä¸€äº›å±æ€§åŒ…æ‹¬ `window`ã€`document` å’Œ `location`ã€‚

è¿™äº›å…¨å±€å˜é‡ *å¯èƒ½* ä¼šå¹²æ‰°å…¶ä»–å¯èƒ½ä½¿ç”¨è¿™äº›å˜é‡çš„åº“ï¼Œä»¥æ£€æµ‹å®ƒä»¬æ˜¯å¦åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œè€Œå®é™…ä¸Šå®ƒä»¬æ˜¯åœ¨æœåŠ¡å™¨ä¸­è¿è¡Œçš„ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´è¿™äº›åº“å‡ºç°é”™è¯¯ã€‚

å› æ­¤ï¼ŒLit é›†æˆå¯èƒ½ä¸è¿™äº›ç±»å‹çš„åº“ä¸å…¼å®¹ã€‚å¯ä»¥å¸®åŠ©çš„ä¸€ä»¶äº‹æ˜¯åœ¨ Lit å¹²æ‰°å…¶ä»–é›†æˆæ—¶æ›´æ”¹é›†æˆçš„é¡ºåºï¼š

```js  del={7} ins={8}
// astro.config.mjs
import { defineConfig } from 'astro/config';
import vue from '@astrojs/vue';
import lit from '@astrojs/lit';

export default defineConfig({
  integrations: [vue(), lit()]
  integrations: [lit(), vue()]
});
```

æ­£ç¡®çš„é¡ºåºå¯èƒ½å› é—®é¢˜çš„æ ¹æœ¬åŸå› è€Œæœ‰æ‰€ä¸åŒã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸èƒ½ä¿è¯è§£å†³æ¯ä¸ªé—®é¢˜ï¼Œè€Œä¸”ç”±äºè¿™ä¸ªåŸå› ï¼Œä¸€äº›åº“ä¸èƒ½åœ¨ä½¿ç”¨ Lit é›†æˆæ—¶ä½¿ç”¨ã€‚

### ä¸¥æ ¼çš„åŒ…ç®¡ç†å™¨

å½“ä½¿ç”¨åƒ `pnpm` è¿™æ ·çš„ [ä¸¥æ ¼çš„åŒ…ç®¡ç†å™¨](https://pnpm.io/pnpm-vs-npm#npms-flat-tree) æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°é”™è¯¯ï¼Œä¾‹å¦‚ `ReferenceError: module is not defined`ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¯·ä½¿ç”¨ `.npmrc` æ–‡ä»¶æå‡ Lit ä¾èµ–é¡¹ï¼š

```ini title=".npmrc"
public-hoist-pattern[]=*lit*
```

### é™åˆ¶

Lit é›†æˆç”± `@lit-labs/ssr` æä¾›æ”¯æŒï¼Œè¯¥é›†æˆæœ‰ä¸€äº›é™åˆ¶ã€‚è¯·æŸ¥çœ‹ä»–ä»¬çš„ [é™åˆ¶æ–‡æ¡£](https://www.npmjs.com/package/@lit-labs/ssr#user-content-notes-and-limitations) äº†è§£æ›´å¤šä¿¡æ¯ã€‚

## è´¡çŒ®

è¯¥è½¯ä»¶åŒ…ç”± Astro æ ¸å¿ƒå›¢é˜Ÿç»´æŠ¤ã€‚æ¬¢è¿æäº¤ issue æˆ– PRï¼

[astro-integration]: /zh-cn/guides/integrations-guide/

[astro-ui-frameworks]: /zh-cn/core-concepts/framework-components/#ä½¿ç”¨æ¡†æ¶ç»„ä»¶
