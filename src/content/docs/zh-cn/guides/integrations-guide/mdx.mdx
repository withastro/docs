---
type: integration
title: '@astrojs/mdx'
description: äº†è§£å¦‚ä½•åœ¨ä½ çš„ Astro é¡¹ç›®ä¸­ä½¿ç”¨ @astrojs/mdx é›†æˆã€‚
githubURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/mdx/'
hasREADME: true
category: other
i18nReady: true
---


æ­¤ **[Astro é›†æˆ][astro-integration]** èƒ½å¤Ÿä½¿ç”¨ [MDX](https://mdxjs.com/) ç»„ä»¶ï¼Œå¹¶å…è®¸ä½ é€šè¿‡ `.mdx` æ–‡ä»¶åˆ›å»ºé¡µé¢ã€‚

## ä¸ºä»€ä¹ˆæ˜¯ MDXï¼Ÿ

MDX å…è®¸ä½ åœ¨ Astro é¡¹ç›®çš„ [Markdown å†…å®¹ä¸­ä½¿ç”¨å˜é‡ã€JSX è¡¨è¾¾å¼å’Œç»„ä»¶](/zh-cn/guides/markdown-content/#mdx-ç‹¬æœ‰ç‰¹æ€§)ã€‚å¦‚æœä½ æœ‰ç°æœ‰çš„ç”¨ MDX ç¼–å†™çš„å†…å®¹ï¼Œè¿™ä¸ªé›†æˆå…è®¸ä½ æŠŠè¿™äº›æ–‡ä»¶å¸¦åˆ°ä½ çš„ Astro é¡¹ç›®ä¸­ã€‚

## å®‰è£…

### å¿«é€Ÿå®‰è£…

`astro add` å‘½ä»¤è¡Œå·¥å…·ä¸ºä½ è‡ªåŠ¨è¿›è¡Œå®‰è£…ã€‚åœ¨ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£ä¸­è¿è¡Œä¸‹åˆ—å…¶ä¸­ä¸€ä¸ªå‘½ä»¤ã€‚ï¼ˆå¦‚æœä½ ä¸ç¡®å®šä½ ä½¿ç”¨çš„æ˜¯å“ªä¸ªåŒ…ç®¡ç†å™¨ï¼Œè¯·è¿è¡Œç¬¬ä¸€ä¸ªå‘½ä»¤ï¼‰ã€‚ç„¶åæŒ‰ç…§æç¤ºï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥â€œyâ€ï¼ˆæ„æ€æ˜¯â€œæ˜¯â€ï¼‰ï¼Œæ¯ä¸€æ¡éƒ½æ˜¯å¦‚æ­¤ã€‚

```sh
# Using NPM
npx astro add mdx
# Using Yarn
yarn astro add mdx
# Using PNPM
pnpm astro add mdx
```

å¦‚æœä½ é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œ[è¯·éšæ—¶åœ¨ GitHub ä¸Šå‘æˆ‘ä»¬æŠ¥å‘Š](https://github.com/withastro/astro/issues)å¹¶å°è¯•ä¸‹é¢çš„æ‰‹åŠ¨å®‰è£…æ­¥éª¤ã€‚

### æ‰‹åŠ¨å®‰è£…

é¦–å…ˆï¼Œç”¨ä½ çš„åŒ…ç®¡ç†å™¨å®‰è£… `@astrojs/mdx` åŒ…ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ npm æˆ–è€…ä¸ç¡®å®šå“ªä¸ªåŒ…ç®¡ç†å™¨ï¼Œåœ¨ç»ˆç«¯è¿è¡Œè¿™ä¸ªï¼š

```sh
npm install @astrojs/mdx
```

ç„¶åï¼Œä½¿ç”¨ `integrations` å±æ€§å°†è¿™ä¸ªé›†æˆåº”ç”¨åˆ°ä½ çš„ `astro.config.*` æ–‡ä»¶ï¼š

```diff lang="js" "mdx()"
  // astro.config.mjs
  import { defineConfig } from 'astro/config';
+ import mdx from '@astrojs/mdx';

  export default defineConfig({
    // ...
    integrations: [mdx()],
    //             ^^^^^
  });
```

### ç¼–è¾‘å™¨é›†æˆ

å¯¹äº [VS Code](https://code.visualstudio.com/) çš„ç¼–è¾‘å™¨æ”¯æŒï¼Œè¯·å®‰è£…[å®˜æ–¹çš„ MDX æ‰©å±•](https://marketplace.visualstudio.com/items?itemName=unifiedjs.vscode-mdx)ã€‚

å¯¹äºå…¶ä»–ç¼–è¾‘å™¨ï¼Œè¯·ä½¿ç”¨ [MDX è¯­è¨€æœåŠ¡å™¨](https://github.com/mdx-js/mdx-analyzer/tree/main/packages/language-server)ã€‚

## ä½¿ç”¨

é€šè¿‡ Astro MDX é›†æˆï¼Œä½ å¯ä»¥åœ¨ä½ çš„ `src/pages/` ç›®å½•ä¸‹æ·»åŠ  `.mdx` æ–‡ä»¶æ¥[æ·»åŠ  MDX é¡µé¢åˆ°ä½ çš„é¡¹ç›®](/zh-cn/guides/markdown-content/#markdown-å’Œ-mdx-é¡µé¢)ã€‚ä½ ä¹Ÿå¯ä»¥[å¯¼å…¥ `.mdx` æ–‡ä»¶](/zh-cn/guides/markdown-content/#å¯¼å…¥-markdown)åˆ° `.astro` æ–‡ä»¶ã€‚

Astro çš„ MDX é›†æˆä¸ºæ ‡å‡†çš„ MDX å¢åŠ äº†é¢å¤–çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ Markdown é£æ ¼çš„ frontmatterã€‚è¿™å…è®¸ä½ ä½¿ç”¨å¤§éƒ¨åˆ† Astro çš„å†…ç½® Markdown åŠŸèƒ½ï¼Œæ¯”å¦‚ä¸€ä¸ª[ç‰¹æ®Šçš„ frontmatter`layout` å±æ€§](/zh-cn/guides/markdown-content/#frontmatter-layout)ã€‚

åœ¨æˆ‘ä»¬çš„ [Markdown & MDX æŒ‡å—](/zh-cn/guides/markdown-content/)ä¸­å¯ä»¥çœ‹åˆ° MDX åœ¨ Astro ä¸­çš„å·¥ä½œåŸç†å’Œä¾‹å­ã€‚

è®¿é—® [MDX æ–‡æ¡£](https://mdxjs.com/docs/what-is-mdx/)ï¼Œäº†è§£ä½¿ç”¨æ ‡å‡† MDX åŠŸèƒ½çš„æƒ…å†µã€‚

## é…ç½®

ä¸€æ—¦ MDX é›†æˆè¢«å®‰è£…ï¼Œåœ¨ä½ çš„ Astro é¡¹ç›®ä¸­ä½¿ç”¨ `.mdx` æ–‡ä»¶å°±ä¸éœ€è¦é…ç½®ã€‚

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹é€‰é¡¹é…ç½®ä½ çš„ MDX çš„æ¸²æŸ“æ–¹å¼ï¼š

*   [ç»§æ‰¿è‡ª Markdown é…ç½®çš„é€‰é¡¹](#ç»§æ‰¿è‡ª-markdown-é…ç½®çš„é€‰é¡¹)
*   [`extendMarkdownConfig`](#extendmarkdownconfig)
*   [`recmaPlugins`](#recmaplugins)
*   [`ä¼˜åŒ–`](#ä¼˜åŒ–)

### ç»§æ‰¿è‡ª Markdown é…ç½®çš„é€‰é¡¹

é™¤äº† `drafts`ï¼Œæ‰€æœ‰çš„[`markdown` é…ç½®é€‰é¡¹](/zh-cn/reference/configuration-reference/#markdown-é€‰é¡¹)å¯ä»¥åœ¨ MDX é›†æˆä¸­å•ç‹¬é…ç½®ã€‚è¿™åŒ…æ‹¬å¤‡æ³¨å’Œ rehype æ’ä»¶ï¼Œè¯­æ³•é«˜äº®ï¼Œç­‰ç­‰ã€‚é€‰é¡¹å°†é»˜è®¤ä¸ºä½ çš„ Markdown é…ç½®ä¸­çš„é€‰é¡¹ï¼ˆ[æŸ¥é˜… `extendMarkdownConfig` é€‰é¡¹](#extendmarkdownconfig)æ¥è¿›è¡Œä¿®æ”¹ï¼‰ã€‚

:::note
å¯¹äº[åŒ…æ‹¬åœ¨æ„å»ºä¸­æ ‡è®°ä¸ºè‰ç¨¿çš„é¡µé¢](/zh-cn/reference/configuration-reference/#markdowndrafts)æ²¡æœ‰å•ç‹¬çš„ MDX é…ç½®ã€‚è¿™ä¸ª Markdown è®¾ç½®å°†è¢« Markdown å’Œ MDX æ–‡ä»¶æ‰€éµå®ˆï¼Œç‰¹åˆ«æ˜¯ä¸èƒ½è¢« MDX æ–‡ä»¶æ‰€é‡å†™ã€‚
:::

```js
// astro.config.mjs
import { defineConfig } from 'astro/config';
import mdx from '@astrojs/mdx';
import remarkToc from 'remark-toc';
import rehypeMinifyHtml from 'rehype-minify-html';

export default defineConfig({
  integrations: [
    mdx({
      syntaxHighlight: 'shiki',
      shikiConfig: { theme: 'dracula' },
      remarkPlugins: [remarkToc],
      rehypePlugins: [rehypeMinifyHtml],
      remarkRehype: { footnoteLabel: 'Footnotes' },
      gfm: false,
    }),
  ],
});
```

:::caution
MDX ä¸æ”¯æŒä»¥å­—ç¬¦ä¸²å½¢å¼ä¼ é€’å¤‡æ³¨å’Œ rehype æ’ä»¶ã€‚ä½ åº”è¯¥å®‰è£…ã€å¯¼å…¥å¹¶åº”ç”¨æ’ä»¶åŠŸèƒ½æ¥ä»£æ›¿ã€‚
:::

ğŸ“š å‚è§ [Markdown é€‰é¡¹å‚è€ƒ](/zh-cn/reference/configuration-reference/#markdown-é€‰é¡¹) ä»¥è·å¾—å®Œæ•´çš„é€‰é¡¹åˆ—è¡¨ã€‚

### `extendMarkdownConfig`

*   **ç±»å‹ï¼š** `boolean`
*   **é»˜è®¤å€¼ï¼š** `true`

MDX å°†é»˜è®¤æ‰©å±•[ä½ çš„é¡¹ç›®ç°æœ‰çš„ Markdown é…ç½®](/zh-cn/reference/configuration-reference/#markdown-é€‰é¡¹)ã€‚è¦è¦†ç›–ä¸ªåˆ«é€‰é¡¹ï¼Œä½ å¯ä»¥åœ¨ä½ çš„ MDX é…ç½®ä¸­è¿›è¡Œç­‰ä»·é…ç½®ã€‚

ä¾‹å¦‚ï¼Œå‡è®¾ä½ éœ€è¦ç¦ç”¨ GitHub-Flavored Markdownï¼Œå¹¶ä¸º MDX æ–‡ä»¶åº”ç”¨ä¸€å¥—ä¸åŒçš„æ³¨é‡Šæ’ä»¶ã€‚ä½ å¯ä»¥åƒè¿™æ ·åº”ç”¨è¿™äº›é€‰é¡¹ï¼Œ`extendMarkdownConfig` é»˜è®¤ä¸ºå¯ç”¨ï¼š

```js
// astro.config.mjs
import { defineConfig } from 'astro/config';
import mdx from '@astrojs/mdx';

export default defineConfig({
  markdown: {
    syntaxHighlight: 'prism',
    remarkPlugins: [remarkPlugin1],
    gfm: true,
  },
  integrations: [
    mdx({
      // ç»§æ‰¿è‡ª Markdown çš„ `syntaxHighlight`

      // Markdown `remarkPlugins` è¢«å¿½ç•¥ï¼Œ
      // åªå¯ç”¨ `remarkPlugin2`ã€‚
      remarkPlugins: [remarkPlugin2],
      // `gfm` è¢«é‡å†™ä¸º `false`
      gfm: false,
    }),
  ],
});
```

ä½ å¯èƒ½è¿˜éœ€è¦åœ¨ MDX ä¸­ç¦ç”¨ `markdown` é…ç½®æ‰©å±•ã€‚ä¸ºæ­¤ï¼Œå°† `extendMarkdownConfig` è®¾ç½®ä¸º `false`ï¼š

```js
// astro.config.mjs
import { defineConfig } from 'astro/config';
import mdx from '@astrojs/mdx';

export default defineConfig({
  markdown: {
    remarkPlugins: [remarkPlugin1],
  },
  integrations: [
    mdx({
      // Markdown é…ç½®ç°åœ¨è¢«å¿½ç•¥äº†
      extendMarkdownConfig: false,
      // `remarkPlugins` æ²¡æœ‰å¯ç”¨
    }),
  ],
});
```

### `recmaPlugins`

è¿™äº›æ˜¯ç›´æ¥ä¿®æ”¹è¾“å‡º [estree](https://github.com/estree/estree) çš„æ’ä»¶ã€‚è¿™å¯¹äºåœ¨ä½ çš„ MDX æ–‡ä»¶ä¸­ä¿®æ”¹æˆ–æ³¨å…¥ JavaScript å˜é‡å¾ˆæœ‰ç”¨ã€‚

æˆ‘ä»¬å»ºè®®[ä½¿ç”¨ AST Explorer](https://astexplorer.net/)æ¥å¤„ç† estree çš„è¾“å‡ºï¼Œå¹¶å°è¯• [`estree-util-visit`](https://unifiedjs.com/explore/package/estree-util-visit/) æ¥æœç´¢æ•´ä¸ª JavaScript èŠ‚ç‚¹ã€‚

### ä¼˜åŒ–

*   **ç±»å‹ï¼š** `boolean | { customComponentNames?: string[] }`

è¿™æ˜¯ä¸€ä¸ªå¯é€‰çš„é…ç½®è®¾ç½®ï¼Œç”¨äºä¼˜åŒ– MDX è¾“å‡ºï¼Œä»¥ä¾¿é€šè¿‡å†…éƒ¨ rehype æ’ä»¶åŠ å¿«æ„å»ºå’Œæ¸²æŸ“é€Ÿåº¦ã€‚å¦‚æœä½ çš„ MDX æ–‡ä»¶è¾ƒå¤šï¼Œå¹¶æ³¨æ„åˆ°æ„å»ºé€Ÿåº¦è¾ƒæ…¢ï¼Œè¿™å¯èƒ½ä¼šå¾ˆæœ‰ç”¨ã€‚ä¸è¿‡ï¼Œè¯¥é€‰é¡¹å¯èƒ½ä¼šç”Ÿæˆä¸€äº›æœªè½¬ä¹‰çš„ HTMLï¼Œå› æ­¤è¯·ç¡®ä¿ä½ ç½‘ç«™çš„äº¤äº’å¼éƒ¨åˆ†åœ¨å¯ç”¨è¯¥é€‰é¡¹åä»èƒ½æ­£å¸¸å·¥ä½œã€‚

é»˜è®¤æƒ…å†µä¸‹æ˜¯ç¦ç”¨çš„ã€‚è¦å¯ç”¨ MDX ä¼˜åŒ–ï¼Œè¯·åœ¨ MDX é›†æˆé…ç½®ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```js
// astro.config.mjs
import { defineConfig } from 'astro/config';
import mdx from '@astrojs/mdx';

export default defineConfig({
  integrations: [
    mdx({
      optimize: true,
    }),
  ],
});
```

#### customComponentNames

*   **ç±»å‹ï¼š** `string[]`

`optimize` çš„ä¸€ä¸ªå¯é€‰å±æ€§ï¼Œç”¨äºé˜²æ­¢ MDX ä¼˜åŒ–å™¨å¤„ç†[é€šè¿‡ç»„ä»¶å±æ€§ä¼ é€’ç»™å¯¼å…¥çš„ MDX å†…å®¹çš„ä»»ä½•è‡ªå®šä¹‰ç»„ä»¶](/zh-cn/guides/markdown-content/#ä½¿ç”¨å¯¼å…¥çš„-mdx-çš„è‡ªå®šä¹‰ç»„ä»¶)ã€‚

ä½ éœ€è¦å°†è¿™äº›ç»„ä»¶ä»ä¼˜åŒ–ä¸­æ’é™¤ï¼Œå› ä¸ºä¼˜åŒ–å™¨ä¼šæ€¥åˆ‡åœ°å°†å†…å®¹è½¬æ¢ä¸ºé™æ€å­—ç¬¦ä¸²ï¼Œè¿™å°†ç ´åéœ€è¦åŠ¨æ€å‘ˆç°çš„è‡ªå®šä¹‰ç»„ä»¶ã€‚

ä¾‹å¦‚ï¼Œä»¥ä¸‹å†…å®¹çš„é¢„æœŸ MDX è¾“å‡ºåº”ä¸º `<Heading>...</Heading>`ï¼Œè€Œä¸æ˜¯æ¯ä¸ª `"<h1>...</h1>"`ï¼š

```astro
---
import { Content, components } from '../content.mdx';
import Heading from '../Heading.astro';
---

<Content components={{ ...components, h1: Heading }} />
```

è¦ä½¿ç”¨ `customComponentNames` å±æ€§é…ç½®æ­¤ä¼˜åŒ–ï¼ŒæŒ‡å®šåº”è§†ä¸ºè‡ªå®šä¹‰ç»„ä»¶çš„ HTML å…ƒç´ åç§°æ•°ç»„ï¼š

```js
// astro.config.mjs
import { defineConfig } from 'astro/config';
import mdx from '@astrojs/mdx';

export default defineConfig({
  integrations: [
    mdx({
      optimize: {
        // é˜²æ­¢ä¼˜åŒ–å™¨å¤„ç† `h1` å…ƒç´ 
        // è¿™äº›å…ƒç´ å°†è¢«è§†ä¸ºè‡ªå®šä¹‰ç»„ä»¶
        customComponentNames: ['h1'],
      },
    }),
  ],
});
```

è¯·æ³¨æ„ï¼Œå¦‚æœä½ çš„ MDX æ–‡ä»¶[ä½¿ç”¨ `export const components = {...}` é…ç½®è‡ªå®šä¹‰ç»„ä»¶](/zh-cn/guides/markdown-content/#å°†è‡ªå®šä¹‰ç»„ä»¶åˆ†é…ç»™-html-å…ƒç´ )ï¼Œåˆ™ä½ æ— éœ€æ‰‹åŠ¨é…ç½®æ­¤é€‰é¡¹ã€‚ä¼˜åŒ–å™¨å°†è‡ªåŠ¨æ£€æµ‹å®ƒä»¬ã€‚


## ä¾‹å­

*   [Astro MDX å¯åŠ¨æ¨¡æ¿](https://github.com/withastro/astro/tree/latest/examples/with-mdx)æ˜¾ç¤ºäº†å¦‚ä½•åœ¨ä½ çš„ Astro é¡¹ç›®ä¸­ä½¿ç”¨ MDX æ–‡ä»¶ã€‚

## æ•…éšœæ’é™¤

å¦‚éœ€å¸®åŠ©ï¼Œè¯·æŸ¥çœ‹ [Discord](https://astro.build/chat) ä¸Šçš„ `#support` é¢‘é“ã€‚æˆ‘ä»¬å‹å¥½çš„æ”¯æŒå°ç»„æˆå‘˜å°†åœ¨è¿™é‡Œæä¾›å¸®åŠ©ï¼

ä½ ä¹Ÿå¯ä»¥æŸ¥çœ‹æˆ‘ä»¬çš„ [Astro é›†æˆæ–‡æ¡£][astro-integration]ï¼Œäº†è§£æ›´å¤šå…³äºé›†æˆçš„ä¿¡æ¯ã€‚

## è´¡çŒ®

è¿™ä¸ªé¡¹ç›®ç”± Astro çš„æ ¸å¿ƒå›¢é˜Ÿç»´æŠ¤ï¼Œæ¬¢è¿ä½ æäº¤ issue æˆ– PRï¼

## æ›´æ”¹æ—¥å¿—

æœ‰å…³è¯¥é›†æˆçš„å˜åŒ–å†å²ï¼Œè¯·å‚é˜… [CHANGELOG.md](https://github.com/withastro/astro/tree/main/packages/integrations/tailwind/CHANGELOG.md)ã€‚

[astro-integration]: /zh-cn/guides/integrations-guide/

[astro-ui-frameworks]: /zh-cn/core-concepts/framework-components/#ä½¿ç”¨æ¡†æ¶ç»„ä»¶
