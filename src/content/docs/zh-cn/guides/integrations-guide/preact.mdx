---
type: integration
title: '@astrojs/preact'
description: å­¦ä¹ å¦‚ä½•åœ¨ä½ çš„Astroé¡¹ç›®ä½¿ç”¨ @astrojs/preactæ¡†æ¶é›†æˆæ¥æ‰©å±•ç»„ä»¶æ”¯æŒã€‚
githubURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/preact/'
hasREADME: true
category: renderer
i18nReady: true
---

import Video from '~/components/Video.astro';
import DontEditWarning from '~/components/DontEditWarning.astro';
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';

è¿™ä¸ª **[Astro é›†æˆ][astro-integration]** å¯ä»¥ä¸ºä½ çš„ [Preact](https://preactjs.com/) ç»„ä»¶æä¾›æœåŠ¡å™¨ç«¯æ¸²æŸ“å’Œå®¢æˆ·ç«¯æ°´åˆï¼ˆhydrationï¼‰åŠŸèƒ½ã€‚

## ä¸ºä»€ä¹ˆé€‰æ‹© Preact?

Preact æ˜¯ä¸€ä¸ªå…è®¸ä½ æ„å»ºé€‚ç”¨äºç½‘ç»œçš„äº¤äº’å¼ UI ç»„ä»¶çš„åº“ã€‚å¦‚æœä½ æƒ³ä½¿ç”¨ JavaScript åœ¨ä½ çš„ç½‘ç«™ä¸Šæ„å»ºäº¤äº’å¼åŠŸèƒ½ï¼Œä½ å¯èƒ½æ›´å–œæ¬¢ä½¿ç”¨å®ƒçš„ç»„ä»¶æ ¼å¼ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨æµè§ˆå™¨çš„ APIã€‚

å¦‚æœä½ ä¹‹å‰ä½¿ç”¨è¿‡ Reactï¼ŒPreact ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚Preact æä¾›ä¸ React ç›¸åŒçš„ APIï¼Œä½†æ‰“åŒ…ä½“ç§¯æ›´å°ï¼Œä»…ä¸º 3kBã€‚å®ƒç”šè‡³æ”¯æŒé€šè¿‡ compat é…ç½®é€‰é¡¹æ¥æ¸²æŸ“è®¸å¤š React ç»„ä»¶ï¼ˆè§ä¸‹æ–‡ï¼‰ã€‚

**åœ¨ä½¿ç”¨è¿™ä¸ªé›†æˆä¹‹å‰ï¼Œæƒ³è¦äº†è§£æ›´å¤šå…³äº Preact çš„ä¿¡æ¯å—ï¼Ÿ**\
å¯ä»¥æŸ¥çœ‹ä»–ä»¬ç½‘ç«™ä¸Šçš„ [â€œåœ¨ 10 åˆ†é’Ÿå†…å­¦ä¹  Preactâ€](https://preactjs.com/tutorial) äº’åŠ¨æ•™ç¨‹ã€‚

## å®‰è£…

### å¿«é€Ÿå®‰è£…

`astro add `å‘½ä»¤è¡Œå·¥å…·å¯ä»¥è‡ªåŠ¨åŒ–ä¸ºä½ å®‰è£…ã€‚åœ¨æ–°çš„ç»ˆç«¯çª—å£ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ä¹‹ä¸€ã€‚ï¼ˆå¦‚æœä½ ä¸ç¡®å®šä½ æ­£åœ¨ä½¿ç”¨å“ªä¸ªåŒ…ç®¡ç†å™¨ï¼Œè¿è¡Œç¬¬ä¸€ä¸ªå‘½ä»¤ã€‚ï¼‰ç„¶åï¼ŒæŒ‰ç…§æç¤ºæ“ä½œï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥ â€œyâ€ï¼ˆè¡¨ç¤º "yes"ï¼‰æ¥ç¡®è®¤æ¯ä¸€ä¸ªæ­¥éª¤ã€‚

<PackageManagerTabs>

<Fragment slot="npm">
```shell
npx astro add preact
```
</Fragment>

<Fragment slot="pnpm">
```shell
pnpm astro add preact  
```
</Fragment>

<Fragment slot="yarn">
```shell
yarn astro add preact
```
</Fragment>
</PackageManagerTabs>

å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œ[è¯·éšæ—¶åœ¨ GitHub ç•™è¨€](https://github.com/withastro/astro/issues) å¹¶å°è¯•ä»¥ä¸‹çš„æ‰‹åŠ¨å®‰è£…æ­¥éª¤ã€‚

### æ‰‹åŠ¨å®‰è£…


é¦–å…ˆï¼Œä½¿ç”¨ä½ çš„åŒ…ç®¡ç†å™¨å®‰è£… `@astrojs/preact`åŒ…ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ npm æˆ–è€…ä¸ç¡®å®šï¼Œå¯ä»¥åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```sh
npm install @astrojs/preact
```

å¤§å¤šæ•°åŒ…ç®¡ç†å™¨ä¼šä¸€å¹¶å®‰è£…ç›¸å…³çš„ peer ä¾èµ–ã€‚ç„¶è€Œï¼Œå¦‚æœåœ¨å¯åŠ¨ Astro æ—¶çœ‹åˆ°â€æ‰¾ä¸åˆ°åŒ…  `preact` â€œï¼ˆæˆ–ç±»ä¼¼ï¼‰çš„è­¦å‘Šï¼Œä½ å°†éœ€è¦å®‰è£… Preactï¼š

```sh
npm install preact
```


ç„¶åï¼Œå°†è¿™ä¸ªé›†æˆåº”ç”¨åˆ°ä½ çš„ `astro.config.* `æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ `integrations` å±æ€§ï¼š

```js ins={3} "preact()"
// astro.config.mjs
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';

export default defineConfig({
  // ...
  integrations: [preact()],
});
```

##  ä½¿ç”¨

è¦åœ¨ Astro ä¸­ä½¿ç”¨ä½ çš„ç¬¬ä¸€ä¸ª Preact ç»„ä»¶ï¼Œè¯·å‰å¾€æˆ‘ä»¬çš„ [UI æ¡†æ¶æ–‡æ¡£][astro-ui-frameworks]ã€‚ä½ å°†ä¼šäº†è§£åˆ°ï¼š

*   ğŸ“¦ å¦‚ä½•åŠ è½½æ¡†æ¶ç»„ä»¶
*   ğŸ’§ å®¢æˆ·ç«¯æ°´åˆé€‰é¡¹
*   ğŸ¤ å°†ä¸åŒæ¡†æ¶æ··åˆå’ŒåµŒå¥—åœ¨ä¸€èµ·çš„æœºä¼š

è¿˜å¯ä»¥æŸ¥é˜…æˆ‘ä»¬çš„ [Astro é›†æˆæ–‡æ¡£][astro-integration] ä»¥è·å–æ›´å¤šå…³äºé›†æˆçš„ä¿¡æ¯ã€‚

## é…ç½®

Astro Preact é›†æˆå¤„ç†äº† Preact ç»„ä»¶çš„æ¸²æŸ“ï¼Œå¹¶å…·æœ‰è‡ªå·±çš„é€‰é¡¹ã€‚ä½ å¯ä»¥åœ¨ `astro.config.mjs` æ–‡ä»¶ä¸­ä¿®æ”¹è¿™äº›é€‰é¡¹ï¼Œè¿™æ˜¯ä½ çš„é¡¹ç›®é›†æˆè®¾ç½®æ‰€åœ¨çš„åœ°æ–¹ã€‚

å¯¹äºåŸºæœ¬ç”¨æ³•ï¼Œä½ æ— éœ€é…ç½® Preact é›†æˆã€‚

### å…¼å®¹

ä½ å¯ä»¥å¯ç”¨ `preact/compat`ï¼Œè¿™æ˜¯ Preact çš„å…¼å®¹å±‚ï¼Œç”¨äºåœ¨ä¸éœ€è¦å®‰è£…æˆ–å°† React çš„è¾ƒå¤§åº“å‘é€åˆ°ç”¨æˆ·çš„ç½‘ç»œæµè§ˆå™¨çš„æƒ…å†µä¸‹æ¸²æŸ“ React ç»„ä»¶ã€‚

è¦å®ç°è¿™ä¸€ç‚¹ï¼Œå‘ Preact é›†æˆä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶è®¾ç½®  `compat: true`ã€‚

```js "compat: true"
// astro.config.mjs
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';

export default defineConfig({
  integrations: [preact({ compat: true })],
});
```

å½“å¯ç”¨äº† `compat` é€‰é¡¹åï¼ŒPreact é›†æˆå°†ä¼šåœ¨ä½ çš„é¡¹ç›®ä¸­æ¸²æŸ“ React ç»„ä»¶å’Œ Preact ç»„ä»¶ï¼ŒåŒæ—¶è¿˜å…è®¸ä½ åœ¨ Preact ç»„ä»¶ä¸­å¯¼å…¥ React ç»„ä»¶ã€‚åœ¨ Preact ç½‘ç«™çš„[â€œä» React åˆ‡æ¢åˆ° Preactâ€](https://preactjs.com/guide/v10/switching-to-preact)é¡µé¢ä¸­å¯ä»¥é˜…è¯»æ›´å¤šä¿¡æ¯ã€‚

å½“å¯¼å…¥ React ç»„ä»¶åº“æ—¶ï¼Œä¸ºäº†å°† `react` å’Œ `react-dom` çš„ä¾èµ–æ›¿æ¢ä¸º `preact/compat`, ä½ å¯ä»¥ä½¿ [`overrides`](https://docs.npmjs.com/cli/v8/configuring-npm/package-json#overrides) æ¥å®ç°ã€‚

```json
// package.json
{
  "overrides": {
    "react": "npm:@preact/compat@latest",
    "react-dom": "npm:@preact/compat@latest"
  }
}
```

å¯ä»¥æŸ¥é˜…[`pnpm` overrides](https://pnpm.io/package_json#pnpmoverrides) å’Œ [`yarn` resolutions](https://yarnpkg.com/configuration/manifest#resolutions) çš„æ–‡æ¡£ï¼Œäº†è§£å®ƒä»¬å„è‡ªçš„è¦†ç›–åŠŸèƒ½ã€‚

:::note 
ç›®å‰ï¼Œ`compat` é€‰é¡¹åªé€‚ç”¨äº React åº“ï¼Œå°†ä»£ç ä»¥ ESM çš„å½¢å¼å¯¼å‡ºã€‚å¦‚æœåœ¨æ„å»ºæ—¶å‡ºç°é”™è¯¯ï¼Œè¯·å°è¯•å°†è¯¥åº“æ·»åŠ åˆ°ä½ çš„`vite.ssr.noExternal: ['the-react-library']` çš„ `astro.config.mjs` æ–‡ä»¶ä¸­ã€‚
:::

## é€‰é¡¹

### ç»„åˆå¤šä¸ª JSX æ¡†æ¶

å½“ä½ åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨å¤šä¸ª JSX æ¡†æ¶ï¼ˆReactã€Preactã€Solidï¼‰æ—¶ï¼ŒAstro éœ€è¦ç¡®å®šæ¯ä¸ªç»„ä»¶åº”è¯¥ä½¿ç”¨å“ªä¸ª JSX æ¡†æ¶çš„è½¬æ¢å™¨ï¼ˆtransformationï¼‰ã€‚å¦‚æœä½ åªå‘ä½ çš„é¡¹ç›®ä¸­æ·»åŠ äº†ä¸€ä¸ª JSX æ¡†æ¶é›†æˆï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦é¢å¤–çš„é…ç½®ã€‚

ä½¿ç”¨ `include`ï¼ˆå¿…å¡«ï¼‰å’Œ `exclude`ï¼ˆå¯é€‰ï¼‰é…ç½®é€‰é¡¹æ¥æŒ‡å®šå“ªäº›æ–‡ä»¶å±äºå“ªä¸ªæ¡†æ¶ã€‚ä¸ºä½ ä½¿ç”¨çš„æ¯ä¸ªæ¡†æ¶æä¾›ä¸€ä¸ªæ–‡ä»¶æˆ–/å’Œæ–‡ä»¶å¤¹æ•°ç»„ã€‚é€šé…ç¬¦å¯ç”¨äºåŒ…å«å¤šä¸ªæ–‡ä»¶è·¯å¾„ã€‚

æˆ‘ä»¬å»ºè®®å°†æ¯ä¸ªæ¡†æ¶çš„ç»„ä»¶æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼ˆä¾‹å¦‚ `/components/react/` å’Œ `/components/solid/`ï¼‰ï¼Œä»¥ä¾¿æ›´å®¹æ˜“åœ°æŒ‡å®šä½ çš„åŒ…å«å†…å®¹ï¼Œä½†è¿™ä¸æ˜¯å¿…éœ€çš„ï¼š

```js
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';
import react from '@astrojs/react';
import svelte from '@astrojs/svelte';
import vue from '@astrojs/vue';
import solid from '@astrojs/solid-js';

export default defineConfig({
  // å¯ç”¨å¤šä¸ªæ¡†æ¶æ¥æ”¯æŒæ‰€æœ‰ä¸åŒç±»å‹çš„ç»„ä»¶ã€‚
  // å¦‚æœä½ åªä½¿ç”¨ä¸€ä¸ª JSX æ¡†æ¶ï¼Œåˆ™ä¸éœ€è¦ `include`ï¼
  integrations: [
    preact({
      include: ['**/preact/*'],
    }),
    react({
      include: ['**/react/*'],
    }),
    solid({
      include: ['**/solid/*'],
    }),
  ],
});
```

##  ç¤ºä¾‹

*   åœ¨ [Astro Preact ç¤ºä¾‹](https://github.com/withastro/astro/tree/latest/examples/framework-preact) ä¸­å±•ç¤ºäº†å¦‚ä½•åœ¨ Astro é¡¹ç›®ä¸­ä½¿ç”¨äº¤äº’å¼çš„ Preact ç»„ä»¶ã€‚
*   åœ¨ [Astro Nanostores ç¤ºä¾‹](https://github.com/withastro/astro/tree/latest/examples/with-nanostores) ä¸­å±•ç¤ºäº†å¦‚ä½•åœ¨ Astro é¡¹ç›®ä¸­åœ¨ä¸åŒç»„ä»¶ä¹‹é—´å…±äº«çŠ¶æ€ï¼Œç”šè‡³å¯ä»¥è·¨ä¸åŒæ¡†æ¶å…±äº«çŠ¶æ€ã€‚

## æ•…éšœæ’æŸ¥

å¦‚æœéœ€è¦å¸®åŠ©ï¼Œè¯·è®¿é—® [Discord](https://astro.build/chat) ä¸Šçš„ `#support` é¢‘é“ã€‚æˆ‘ä»¬å‹å¥½çš„æ”¯æŒå›¢é˜Ÿæˆå‘˜å°†åœ¨é‚£é‡Œå¸®åŠ©ä½ ï¼

ä½ ä¹Ÿå¯ä»¥æŸ¥é˜… [Astro é›†æˆæ–‡æ¡£][astro-integration] è·å¾—æ›´å¤šé›†æˆä¿¡æ¯ã€‚

##  è´¡çŒ® 

è¿™ä¸ªåŒ…ç”± Astro çš„æ ¸å¿ƒå›¢é˜Ÿç»´æŠ¤ã€‚æ¬¢è¿ä½ æäº¤ issue æˆ– PR!

## æ›´æ–°æ—¥å¿—

æŸ¥çœ‹ [CHANGELOG.md](https://github.com/withastro/astro/tree/main/packages/integrations/preact/CHANGELOG.md) äº†è§£æ­¤é›†æˆçš„æ›´æ”¹å†å²ã€‚

[astro-integration]: /zh-cn/guides/integrations-guide/

[astro-ui-frameworks]: /zh-cn/core-concepts/framework-components/#ä½¿ç”¨æ¡†æ¶ç»„ä»¶
