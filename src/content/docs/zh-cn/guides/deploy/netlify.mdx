---
title: éƒ¨ç½²ä½ çš„ Astro ç«™ç‚¹è‡³ Netlify
description: å¦‚ä½•ä½¿ç”¨ ç½‘ç«™éƒ¨ç½²åˆ°ç½‘ç»œä¸Šã€‚Netlify å°†ä½ çš„ Astro ç½‘ç«™éƒ¨ç½²åˆ°ç½‘ç»œä¸Šã€‚
type: deploy
i18nReady: true
---
[Netlify](https://netlify.com) ä¸ºç½‘ç»œåº”ç”¨ç¨‹åºå’Œé™æ€ç½‘ç«™æä¾›æ‰˜ç®¡å’Œæ— æœåŠ¡å™¨åç«¯æœåŠ¡ã€‚ä»»ä½• Astro ç½‘ç«™éƒ½å¯ä»¥æ‰˜ç®¡åœ¨ Netlify ä¸Šï¼

æœ¬æŒ‡å—åŒ…æ‹¬é€šè¿‡ç½‘ç«™ç”¨æˆ·æ“ä½œç•Œé¢æˆ– Netlify çš„ CLI(å‘½ä»¤è¡Œå·¥å…·) éƒ¨ç½²åˆ° Netlify çš„è¯´æ˜ã€‚

## é¡¹ç›®é…ç½®

ä½ çš„ Astro é¡¹ç›®å¯ä»¥é€šè¿‡ä¸‰ç§ä¸åŒçš„æ–¹å¼éƒ¨ç½²åˆ° Netlifyï¼šä½œä¸ºä¸€ä¸ªé™æ€ç½‘ç«™ï¼Œä¸€ä¸ªæœåŠ¡ç«¯æ¸²æŸ“çš„ç½‘ç«™ï¼Œæˆ–ä¸€ä¸ªè¾¹ç¼˜æ¸²æŸ“çš„ç½‘ç«™ã€‚

### é™æ€ç½‘ç«™

ä½ çš„ Astro é¡¹ç›®é»˜è®¤å°±æ˜¯é™æ€ç½‘ç«™ã€‚ä½ ä¸éœ€è¦ä»»ä½•é¢å¤–çš„é…ç½®å°±å¯ä»¥å°†é™æ€çš„ Astro ç½‘ç«™éƒ¨ç½²åˆ° Netlifyã€‚

### SSR é€‚é…å™¨

ä¸ºä½ çš„ Astro é¡¹ç›®å¼€å¯ SSR å¹¶åœ¨ Netlity ä¸Šéƒ¨ç½²ï¼ŒåŒ…æ‹¬ä½¿ç”¨ Netlify çš„è¾¹ç¼˜å‡½æ•°ï¼š

é€šè¿‡ä»¥ä¸‹çš„ `astro add` å‘½ä»¤ï¼Œæ·»åŠ  [Netlify é€‚é…å™¨](/zh-cn/guides/integrations-guide/netlify/)ï¼Œåœ¨ä½ çš„ Astro é¡¹ç›®ä¸­å¯ç”¨ SSRã€‚è¿™ä¸€æ­¥å°†ä¼šå®‰è£…é€‚é…å™¨å¹¶ä¸”å¯¹ä½ çš„ `astro.config.mjs` æ–‡ä»¶è¿›è¡Œé€‚å½“çš„ä¿®æ”¹ã€‚

```bash
npx astro add netlify
```

å¦‚æœä½ æ›´å€¾å‘äºæ‰‹åŠ¨å®‰è£…é€‚é…å™¨ï¼Œé‚£ä¹ˆè¯·å®Œæˆä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š

1. ä½¿ç”¨ä½ å–œæ¬¢çš„åŒ…ç®¡ç†å™¨å°† [@astrojs/netlify é€‚é…å™¨](https://github.com/withastro/astro/tree/main/packages/integrations/netlify) å®‰è£…åˆ°ä½ çš„é¡¹ç›®ä¾èµ–ä¸­ã€‚å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ npm æˆ–è€…ä¸ç¡®å®šä½¿ç”¨ä½•ç§åŒ…ç®¡ç†å™¨ï¼Œå¯ä»¥åœ¨ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

    ```bash
      npm install @astrojs/netlify
    ```

2. åœ¨ä½ çš„ `astro.config.mjs` é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸¤è¡Œæ–°å¢å†…å®¹ï¼š

    ```js title="astro.config.mjs" ins={2, 5-6}
    import { defineConfig } from 'astro/config';
    import netlify from '@astrojs/netlify/functions';

    export default defineConfig({
      output: 'server',
      adapter: netlify(),
    });
    ```

    ä½ è¿˜å¯ä½¿ç”¨ Netlify çš„è¾¹ç¼˜å‡½æ•°éƒ¨ç½²ä½ çš„é¡¹ç›®ï¼Œå³é€šè¿‡åœ¨ Netlify é€‚é…å™¨çš„é…ç½®ä¸­æ·»åŠ  `edgeMiddleware: true`ï¼š

    ```diff lang="js"
      // astro.config.mjs
      import { defineConfig } from 'astro/config';
      import netlify from '@astrojs/netlify/functions';

      export default defineConfig({
        output: 'server',
        adapter: netlify({
    +     edgeMiddleware: true
        }),
      });
    ```

## å¦‚ä½•éƒ¨ç½²

ä½ å¯ä»¥é€šè¿‡ç½‘ç«™ç”¨æˆ·æ“ä½œç•Œé¢æˆ–ä½¿ç”¨ Netlify çš„ CLI(å‘½ä»¤è¡Œå·¥å…·) è¿›è¡Œéƒ¨ç½²ã€‚æ— è®ºæ˜¯é™æ€ç½‘ç«™è¿˜æ˜¯ SSR çš„ Astro ç½‘ç«™ï¼Œå…¶è¿‡ç¨‹éƒ½æ˜¯ç›¸åŒçš„ã€‚

### ç½‘ç«™ç”¨æˆ·æ“ä½œç•Œé¢éƒ¨ç½²æ–¹å¼

å¦‚æœä½ çš„é¡¹ç›®å­˜å‚¨åœ¨ GitHubã€GitLabã€BitBucket æˆ– Azure DevOps ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ Netlify çš„ç½‘ç«™ç”¨æˆ·æ“ä½œç•Œé¢æ¥éƒ¨ç½²ä½ çš„ Astro ç½‘ç«™ã€‚

1. åœ¨ [Netlify dashboard](https://app.netlify.com/) é¡µé¢ä¸Šï¼Œç‚¹å‡» <kbd>Add a new site</kbd>

2. é€‰æ‹© <kbd>Import an existing project</kbd>

    å½“ä½ ä»ä½ çš„ Git æä¾›å•†ä¸­å¯¼å…¥ Astro ä»“åº“æ—¶ï¼ŒNetlify åº”è¯¥ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶é¢„å¡«å……æ­£ç¡®çš„é…ç½®è®¾ç½®ã€‚

3. ç¡®ä¿å·²è¾“å…¥ä»¥ä¸‹è®¾ç½®ï¼Œç„¶åæŒ‰ä¸‹ <kbd>Deploy</kbd> æŒ‰é’®ï¼š

    - **Build Command:** `astro build` or `npm run build`
    - **Publish directory:** `dist`

 éƒ¨ç½²åï¼Œä½ å°†è¢«é‡å®šå‘åˆ°ç«™ç‚¹æ¦‚è§ˆé¡µé¢ã€‚åœ¨é‚£é‡Œï¼Œä½ å¯ä»¥ç¼–è¾‘ä½ ç«™ç‚¹çš„è¯¦ç»†ä¿¡æ¯ã€‚

æ ¹æ®ä½ çš„éƒ¨ç½²é…ç½®ï¼Œæœªæ¥å¯¹æºä»£ç åº“çš„ä»»ä½•ä¿®æ”¹éƒ½å°†è§¦å‘é¢„è§ˆå’Œç”Ÿäº§éƒ¨ç½²ã€‚

#### `netlify.toml` æ–‡ä»¶

ä½ å¯ä»¥é€‰æ‹©åœ¨é¡¹ç›®ä»“åº“çš„é¡¶å±‚åˆ›å»ºä¸€ä¸ªæ–°çš„ `netlify.toml` æ–‡ä»¶ï¼Œç”¨æ¥é…ç½®ä½ çš„æ„å»ºå‘½ä»¤å’Œå‘å¸ƒç›®å½•ï¼Œä»¥åŠå…¶ä»–é¡¹ç›®è®¾ç½®ï¼ŒåŒ…æ‹¬ç¯å¢ƒå˜é‡å’Œé‡å®šå‘ã€‚Netlify å°†è¯»å–æ­¤æ–‡ä»¶å¹¶è‡ªåŠ¨é…ç½®ä½ çš„éƒ¨ç½²ã€‚

ä¸ºäº†é…ç½®é»˜è®¤è®¾ç½®ï¼Œåˆ›å»ºä¸€ä¸ª `netlify.toml` æ–‡ä»¶ï¼Œå¹¶å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š

```toml
[build]
  command = "npm run build"
  publish = "dist"
```

ğŸ“š æ›´å¤šä¿¡æ¯å¯ä»¥åœ¨ Netlify çš„åšå®¢æ–‡ç«  [â€œéƒ¨ç½²ç°æœ‰çš„ Astro Git ä»“åº“â€](https://www.netlify.com/blog/how-to-deploy-astro/#deploy-an-existing-git-repository-to-netlify) ä¸­æ‰¾åˆ°ã€‚



### CLI éƒ¨ç½²æ–¹å¼

ä½ ä¹Ÿå¯ä»¥åœ¨ Netlify ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„ç«™ç‚¹ï¼Œå¹¶é€šè¿‡å®‰è£…å’Œä½¿ç”¨ [Netlify CLI](https://cli.netlify.com/) æ¥å…³è”ä½ çš„ Git ä»“åº“ã€‚

1. å…¨å±€å®‰è£… Netlify CLI å·¥å…·

    ```bash
    npm install --global netlify-cli
    ```

2. è¿è¡Œ `netlify login` å¹¶æŒ‰ç…§æŒ‡ç¤ºè¿›è¡Œç™»å½•å¹¶æˆæƒ Netlifyã€‚
3. è¿è¡Œ `netlify init` å¹¶æŒ‰ç…§æŒ‡ç¤ºè¿›è¡Œæ“ä½œã€‚
4. ç¡®è®¤ä½ çš„æ„å»ºå‘½ä»¤ (`astro build`)

    CLI å°†è‡ªåŠ¨æ£€æµ‹æ„å»ºè®¾ç½®ï¼ˆ`astro build`ï¼‰å’Œéƒ¨ç½²ç›®å½•ï¼ˆ`dist`ï¼‰ï¼Œå¹¶å°†æä¾›ä¸€ä¸ªè‡ªåŠ¨ç”Ÿæˆä¸”æœ‰è¿™äº›å¯¹åº”è®¾ç½®çš„ [`netlify.toml` æ–‡ä»¶](#netlifytoml-æ–‡ä»¶)ã€‚

5. æ¨é€åˆ° Git æ¥è§¦å‘æ„å»ºå’Œéƒ¨ç½²

    CLI å°†å‘ä»“åº“æ·»åŠ ä¸€ä¸ªéƒ¨ç½²å¯†é’¥ï¼Œè¿™æ„å‘³ç€æ¯æ¬¡ä½ ä½¿ç”¨ `git push` æ—¶ï¼Œä½ çš„ç½‘ç«™éƒ½ä¼šåœ¨ Netlify ä¸Šè‡ªåŠ¨é‡æ–°æ„å»ºã€‚

ğŸ“š æ›´å¤šè¯¦æƒ…è¯·å‚é˜… Netlify çš„æ–‡ç« ï¼š[ä½¿ç”¨ Netlify CLI éƒ¨ç½² Astro ç½‘ç«™](https://www.netlify.com/blog/how-to-deploy-astro/#link-your-astro-project-and-deploy-using-the-netlify-cli)ã€‚

### è®¾ç½® Node.js ç‰ˆæœ¬

å¦‚æœä½ åœ¨ Netlify ä¸Šä½¿ç”¨çš„æ˜¯æ—§ç‰ˆçš„ [æ„å»ºé•œåƒ](https://docs.netlify.com/configure-builds/get-started/#build-image-selection)ï¼ˆXenialï¼‰ï¼Œè¯·ç¡®ä¿ä½ å·²ç»è®¾ç½®äº† Node.js çš„ç‰ˆæœ¬ã€‚Astro éœ€è¦ v18.14.1 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚

ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•åœ¨ [Netlify ä¸­æŒ‡å®š Node.js ç‰ˆæœ¬](https://docs.netlify.com/configure-builds/manage-dependencies/#node-js-and-javascript)ï¼š
- åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸­å­˜æ”¾ä¸€ä¸ª [`.nvmrc`](https://github.com/nvm-sh/nvm#nvmrc) æ–‡ä»¶
- åœ¨ä½ çš„ç½‘ç«™è®¾ç½®ä¸­ä½¿ç”¨ Netlify é¡¹ç›®é¢æ¿çš„ `NODE_VERSION` ç¯å¢ƒå˜é‡ã€‚

## ä½¿ç”¨ Netlify Functions

åœ¨ Astro ä¸­ä½¿ç”¨ Netlify Functions æ— éœ€ç‰¹æ®Šé…ç½®ã€‚åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸­æ·»åŠ ä¸€ä¸ª `netlify/functions` ç›®å½•ï¼Œå¹¶æŒ‰ç…§ [Netlify Functions æ–‡æ¡£](https://docs.netlify.com/functions/overview/) çš„æŒ‡å¼•å¼€å§‹å§ï¼

## ç¤ºä¾‹

- [å¦‚ä½•éƒ¨ç½² Astro ç«™ç‚¹](https://www.netlify.com/blog/how-to-deploy-astro/) â€” Netlify åšå®¢
- [ä½¿ç”¨è¡¨å•ã€æ— æœåŠ¡å™¨åŠŸèƒ½å’Œé‡å®šå‘åŠŸèƒ½éƒ¨ç½² Astro ç½‘ç«™](https://www.netlify.com/blog/deploy-an-astro-site-with-forms-serverless-functions-and-redirects/) â€” Netlify åšå®¢
- [éƒ¨ç½²æ¼”ç¤ºè§†é¢‘](https://youtu.be/GrSLYq6ZTes) â€” Netlify YouTube é¢‘é“
