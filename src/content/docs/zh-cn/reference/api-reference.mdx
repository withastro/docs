---
title: API å‚è€ƒ
---
import Since from '~/components/Since.astro';
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'


## `Astro`

`Astro` åœ¨æ‰€æœ‰ `.astro` æ–‡ä»¶ä¸­å‡å¯ç”¨ã€‚å®ƒæœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š

### `Astro.glob()`

`Astro.glob()` å¯ä»¥åœ¨é™æ€ç½‘ç«™ setup ä¸­åŠ è½½æœ¬åœ°æ–‡ä»¶ï¼š

```astro
---
// ./src/components/my-component.astro
const posts = await Astro.glob('../pages/post/*.md'); // è¿”å› ./src/pages/post/*.md çš„æ•°ç»„
---

<div>
{posts.slice(0, 3).map((post) => (
  <article>
    <h1>{post.frontmatter.title}</h1>
    <p>{post.frontmatter.description}</p>
    <a href={post.frontmatter.url}>Read more</a>
  </article>
))}
</div>
```

`.glob()` åªéœ€è¦ä¸€ä¸ªå‚æ•°ï¼šä½ æƒ³å¯¼å…¥çš„æœ¬åœ°æ–‡ä»¶å…¨å±€ç›¸å¯¹é“¾æ¥ã€‚å®ƒå¼‚æ­¥è¿”å›åŒ¹é…æ–‡ä»¶çš„æ•°ç»„ã€‚

`.glob()` ä¸èƒ½æ¥å—æ’å€¼çš„å˜é‡æˆ–å­—ç¬¦ä¸²ï¼Œå› ä¸ºå®ƒä»¬ä¸æ˜¯é™æ€å¯åˆ†æçš„ã€‚(å‚è§[æ•…éšœæ’æŸ¥](/zh-cn/guides/troubleshooting/#æ”¯æŒçš„å€¼)ä»¥äº†è§£è§£å†³æ–¹æ³•)ã€‚ è¿™æ˜¯å› ä¸º `Astro.glob()` æ˜¯ Vite çš„ [`import.meta.glob()`](https://vitejs.dev/guide/features.html#glob-import) çš„åŒ…è£…å™¨ã€‚

:::note
ä½ ä¹Ÿå¯ä»¥åœ¨ Astro é¡¹ç›®ä¸­ä½¿ç”¨ `import.meta.glob()` æœ¬èº«ã€‚ä½ å¯èƒ½æƒ³åœ¨ä»¥ä¸‹æƒ…å†µä¸‹è¿™æ ·åšï¼š

- ä½ åœ¨ä¸€ä¸ªä¸æ˜¯ `.astro` çš„æ–‡ä»¶ä¸­éœ€è¦è¿™ä¸ªåŠŸèƒ½ï¼Œæ¯”å¦‚ä¸€ä¸ª API è·¯ç”±ã€‚`Astro.glob()` åªåœ¨ `.astro` æ–‡ä»¶ä¸­å¯ç”¨ï¼Œè€Œ `import.meta.glob()` åœ¨é¡¹ç›®çš„ä»»ä½•åœ°æ–¹éƒ½å¯ç”¨ã€‚
- ä½ ä¸å¸Œæœ›ç«‹å³åŠ è½½æ¯ä¸ªæ–‡ä»¶ã€‚`import.meta.glob()` å¯ä»¥è¿”å›å¯¼å…¥æ–‡ä»¶å†…å®¹çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯è¿”å›å†…å®¹æœ¬èº«ã€‚
- ä½ æƒ³è®¿é—®æ¯ä¸ªæ–‡ä»¶çš„è·¯å¾„ã€‚`import.meta.glob()` è¿”å›æ–‡ä»¶è·¯å¾„åˆ°å…¶å†…å®¹çš„æ˜ å°„ï¼Œè€Œ `Astro.glob()` è¿”å›å†…å®¹çš„åˆ—è¡¨ã€‚
- ä½ æƒ³ä¼ é€’å¤šç§æ¨¡å¼ï¼›ä¾‹å¦‚ï¼Œä½ æƒ³æ·»åŠ ä¸€ä¸ªâ€œè´Ÿæ¨¡å¼â€ï¼Œè¿‡æ»¤æ‰æŸäº›æ–‡ä»¶ã€‚`import.meta.glob()` å¯ä»¥é€‰æ‹©æ¥å— glob å­—ç¬¦ä¸²æ•°ç»„ï¼Œè€Œä¸æ˜¯å•ä¸ªå­—ç¬¦ä¸²ã€‚

åœ¨ [Vite æ–‡æ¡£](https://vitejs.dev/guide/features.html#glob-import)ä¸­é˜…è¯»æ›´å¤šå†…å®¹ã€‚
:::

#### Markdown æ–‡ä»¶

Markdown æ–‡ä»¶æœ‰ä»¥ä¸‹æ¥å£ï¼š

```ts
export interface MarkdownInstance<T extends Record<string, any>> {
  /* åœ¨æ­¤æ–‡ä»¶çš„ YAML frontmatter ä¸­æŒ‡å®šçš„ä»»ä½•æ•°æ® */
 frontmatter: T;
  /* è¯¥æ–‡ä»¶çš„æ–‡ä»¶è·¯å¾„ */
 file: string;
  /* è¯¥æ–‡ä»¶çš„æ¸²æŸ“è·¯å¾„ */
 url: string | undefined;
  /* æ¸²æŸ“æ­¤æ–‡ä»¶å†…å®¹çš„ Astro ç»„ä»¶ */
 Content: AstroComponent;
  /* è¿”å›è¯¥æ–‡ä»¶ä¸­ h1...h6 å…ƒç´ æ•°ç»„çš„å‡½æ•° */
 getHeadings(): Promise<{ depth: number; slug: string; text: string }[]>;
}
```

ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ TypeScript æ³›å‹æŒ‡å®š `frontmatter` å˜é‡ç±»å‹ï¼š

```astro
---
interface Frontmatter {
  title: string;
  description?: string;
}
const posts = await Astro.glob<Frontmatter>('../pages/post/*.md');
---

<ul>
  {posts.map(post => <li>{post.frontmatter.title}</li>)}
</ul>
```

### `Astro.props`

`Astro.props` æ˜¯ä¸€ä¸ªåŒ…å«ä»»ä½•ä½œä¸º[ç»„ä»¶å±æ€§](/zh-cn/core-concepts/astro-components/#ç»„ä»¶å‚æ•°)ä¼ é€’çš„å€¼çš„å¯¹è±¡ã€‚`.md` å’Œ `.mdx` æ–‡ä»¶çš„å¸ƒå±€ç»„ä»¶æ¥æ”¶ä½œä¸ºå‚æ•°çš„ frontmatter å€¼ã€‚

```astro {3}
---
// ./src/components/Heading.astro
const { title, date } = Astro.props;
---
<div>
    <h1>{title}</h1>
    <p>{date}</p>
</div>
```

```astro /title=".+"/ /date=".+"/
---
// ./src/pages/index.astro
import Heading from '../components/Heading.astro';
---
<Heading title="æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« " date="09 Aug 2022" />
```

ğŸ“š è¿›ä¸€æ­¥äº†è§£ [Markdown å’Œ MDX å¸ƒå±€](/zh-cn/guides/markdown-content/#markdown-å¸ƒå±€)å¦‚ä½•å¤„ç†é“å…·ã€‚

ğŸ“š äº†è§£å¦‚ä½•ä¸ºä½ çš„é“å…·æ·»åŠ  [TypeScript ç±»å‹å®šä¹‰](/zh-cn/guides/typescript/#ç»„ä»¶å‚æ•°)ã€‚

#### Astro æ–‡ä»¶

Astro æ–‡ä»¶æœ‰ä»¥ä¸‹æ¥å£ï¼š

```ts
export interface AstroInstance {
 default: AstroComponent;
}
```

#### å…¶ä»–æ–‡ä»¶

å…¶ä»–æ–‡ä»¶å¯èƒ½æœ‰å„ç§ä¸åŒçš„æ¥å£ï¼Œä½† `Astro.glob()` å‡æ¥å— TypeScript æ³›å‹ï¼Œå¦‚æœä½ æ˜ç¡®çŸ¥é“æœªè¢«è¯†åˆ«çš„æ–‡ä»¶ç±»å‹åŒ…å«äº›ä»€ä¹ˆï¼š

```ts
---
interface CustomDataFile {
  default: Record<string, any>;
}
const data = await Astro.glob<CustomDataFile>('../data/**/*.js');
---
```

### `Astro.request`

`Astro.request` æ˜¯æ ‡å‡†çš„ [Request](https://developer.mozilla.org/en-US/docs/Web/API/Request) å¯¹è±¡ã€‚å®ƒå¯ä»¥ç”¨æ¥è·å–è¯·æ±‚çš„ `url`ã€`headers`ã€`method`ï¼Œç”šè‡³æ˜¯ `body`ã€‚å¯ä»¥ä½¿ç”¨ `new URL(Astro.request.url)` æ¥è·å¾—é“¾æ¥å¯¹è±¡ã€‚

```astro
<p>Received a {Astro.request.method} request to "{Astro.request.url}".</p>
<p>Received request headers: <code>{JSON.stringify(Object.fromEntries(Astro.request.headers))}</code>
```

å‚è§ï¼š[`Astro.url`](#astrourl)

:::note
é»˜è®¤çš„ `output: static` é€‰é¡¹ä¸­ï¼Œ`Astro.request.url` ä¸åŒ…å«æœç´¢å‚æ•°ï¼Œå¦‚ `?foo=bar`ï¼Œå› ä¸ºåœ¨é™æ€æ„å»ºä¸­ä¸å¯èƒ½æå‰ç¡®å®šè¿™äº›å‚æ•°ã€‚ä½†æ˜¯åœ¨ `output: 'server'` æ¨¡å¼ä¸‹ï¼Œ`Astro.request.url` å¯ä»¥åŒ…å«æœç´¢å‚æ•°ï¼Œå› ä¸ºå®ƒå¯ä»¥ä»æœåŠ¡å™¨è¯·æ±‚ä¸­ç¡®å®šã€‚
:::

### `Astro.response`

`Astro.response` æ˜¯æ ‡å‡†çš„ [ResponseInit](https://developer.mozilla.org/en-US/docs/Web/API/Response/Response#init)å¯¹è±¡ã€‚å®ƒç”¨äºè®¾ç½®é¡µé¢å“åº”ä¸­çš„ `status`ã€`statusText` å’Œ `headers`

```astro
---
if(condition) {
  Astro.response.status = 404;
  Astro.response.statusText = 'Not found';
}
---
```

æˆ–è€…è®¾ç½® headerï¼š

```astro
---
Astro.response.headers.set('Set-Cookie', 'a=b; Path=/;');
---
```

### `Astro.canonicalURL`

:::caution[åºŸå¼ƒ]
ä½¿ç”¨ [`Astro.url`](#astrourl) æ¥æ„å»ºä½ è‡ªå·±çš„æ ‡å‡†é“¾æ¥ã€‚
:::

å½“å‰é¡µé¢çš„[æ ‡å‡†é“¾æ¥][canonical]ã€‚

### `Astro.url`

<Since v="1.0.0-rc" />

[URL](https://developer.mozilla.org/en-US/docs/Web/API/URL )å¯¹è±¡ï¼Œç”±å½“å‰ `Astro.request.url` çš„é“¾æ¥å­—ç¬¦ä¸²å€¼æ„æˆã€‚å¯¹äºä¸è¯·æ±‚çš„é“¾æ¥çš„ä¸ªåˆ«å±æ€§è¿›è¡Œäº¤äº’æ˜¯æœ‰ç”¨çš„ï¼Œå¦‚è·¯å¾„åå’Œèµ·æºã€‚

ç›¸å½“äºåš `new URL(Astro.request.url)`ã€‚

```astro
<h1>å½“å‰é“¾æ¥æ˜¯ï¼š{Astro.url}</h1>
<h1>å½“å‰é“¾æ¥è·¯å¾„åæ˜¯ï¼š{Astro.url.pathname}</h1>
<h1>å½“å‰é“¾æ¥æºæ˜¯ï¼š{Astro.url.origin}</h1>
```

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `Astro.url` æ¥åˆ›å»ºæ–°çš„é“¾æ¥ï¼Œå¹¶æŠŠå®ƒä½œä¸ºå‚æ•°ä¼ ç»™ [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL)ã€‚

```astro
---
// ç¤ºä¾‹ï¼šä½¿ç”¨ä½ çš„ç”Ÿäº§åŸŸåæ„å»ºä¸€ä¸ªè§„èŒƒçš„URL
const canonicalURL = new URL(Astro.url.pathname, Astro.site);
// ç¤ºä¾‹ï¼šä½¿ç”¨ä½ ç›®å‰çš„åŸŸåæ„å»ºä¸€ä¸ªç”¨äºSEOå…ƒæ ‡ç­¾çš„URL
const socialImageURL = new URL('/images/preview.png', Astro.url);
---
<link rel="canonical" href={canonicalURL} />
<meta property="og:image" content={socialImageURL} />
```

### `Astro.clientAddress`

<Since v="1.0.0-rc" />

æŒ‡å®šè¯·æ±‚çš„ [IP åœ°å€](https://en.wikipedia.org/wiki/IP_address)ã€‚è¿™ä¸ªå±æ€§åªåœ¨ä¸º SSRï¼ˆæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼‰æ„å»ºæ—¶å¯ç”¨ï¼Œä¸åº”è¯¥ç”¨äºé™æ€ç½‘ç«™ã€‚

```astro
---
const ip = Astro.clientAddress;
---

<div>ä½ çš„ IP åœ°å€æ˜¯ï¼š<span class="address">{ ip }</span></div>
```

### `Astro.site`

`Astro.site` è¿”å›æ ¹æ® Astro é…ç½®ä¸­çš„ `site` ç”Ÿæˆçš„ `URL`ã€‚å¦‚æœæ²¡æŒ‡å®šï¼Œå°†è¿”å›æ ¹æ® `localhost` ç”Ÿæˆçš„é“¾æ¥ã€‚

### `Astro.generator`

<Since v="1.0.0" />

`Astro.generator` æ˜¯ä¸ªä¾¿æ·æ–¹æ³•ï¼Œå®ƒå¯ä»¥æ·»åŠ ä¸ä½ å½“å‰ Astro ç‰ˆæœ¬ä¸€è‡´çš„ [`<meta name="generator">`](https://html.spec.whatwg.org/multipage/semantics.html#meta-generator) æ ‡ç­¾ã€‚å®ƒéµå¾ªçš„æ ¼å¼æ˜¯ `"Astro v1.x.x"`ã€‚

```astro mark="Astro.generator"
<html>
  <head>
    <meta name="generator" content={Astro.generator} />
  </head>
  <body>
    <footer>
      <p>ç”± <a href="https://astro.build">{Astro.generator}</a> æ„å»º</p>
    </footer>
  </body>
</html>
```

### `Astro.slots`

`Astro.slots` åŒ…å«ä¿®æ”¹ Astro ç»„ä»¶æ’æ§½çš„å®ç”¨å‡½æ•°ã€‚

| åç§°     | ç±»å‹                                              | æè¿°                      |
| :------- | :------------------------------------------------ | :------------------------ |
| `has`    | `(name: string) => boolean`                       | æ­¤æ’æ§½æ˜¯å¦å­˜åœ¨å†…å®¹        |
| `render` | `(name: string, args?: any[]) => Promise<string>` | å¼‚æ­¥æ¸²æŸ“è¯¥æ’æ§½å¹¶è¿”å› HTML |

```astro
---
let html: string = '';
if (Astro.slots.has('default')) {
  html = await Astro.slots.render('default')
}
---
<Fragment set:html={html} />
```

### `Astro.self`

`Astro.self` å…è®¸ Astro ç»„ä»¶è¢«é€’å½’è°ƒç”¨ã€‚è¿™ä½¿å¾—ä½ å¯ä»¥é€šè¿‡åœ¨ç»„ä»¶æ¨¡æ¿ä¸­ä½¿ç”¨ `<Astro.self>` ä»è‡ªèº«å†…éƒ¨æ¸²æŸ“ Astro ç»„ä»¶ã€‚è¿™å¯¹è¿­ä»£å¤§å‹æ•°æ®å­˜å‚¨å’ŒåµŒå¥—æ•°æ®ç»“æ„å¾ˆæœ‰å¸®åŠ©ã€‚

```astro
---
// NestedList.astro
const { items } = Astro.props;
---
<ul class="nested-list">
  {items.map((item) => (
    <li>
      <!-- å¦‚æœæœ‰åµŒå¥—çš„æ•°æ®ç»“æ„ï¼Œå°†æ¸²æŸ“ `<Astro.self>` -->
      <!-- å¹¶å¯ä»¥é€šè¿‡é€’å½’è°ƒç”¨æ¥ä¼ é€’å‚æ•° -->
      {Array.isArray(item) ? (
        <Astro.self items={item} />
      ) : (
        item
      )}
    </li>
  ))}
</ul>
```

ç„¶åï¼Œè¿™ä¸ªç»„ä»¶å¯ä»¥è¿™æ ·ç”¨ï¼š

```astro
---
import NestedList from './NestedList.astro';
---
<NestedList items={['A', ['B', 'C'], 'D']} />
```

å¹¶æ¸²æŸ“è¿™æ ·çš„ HTMLï¼š

```html
<ul class="nested-list">
  <li>A</li>
  <li>
    <ul class="nested-list">
      <li>B</li>
      <li>C</li>
    </ul>
  </li>
  <li>D</li>
</ul>
```

## `getStaticPaths()`

å¦‚æœé¡µé¢åœ¨æ–‡ä»¶åä¸­ä½¿ç”¨åŠ¨æ€å‚æ•°ï¼Œè¯¥ç»„ä»¶å°†éœ€è¦å¯¼å‡ºä¸€ä¸ª `getStaticPaths()` å‡½æ•°ã€‚

å¿…é¡»è¦æœ‰è¯¥å‡½æ•°ï¼Œå› ä¸º Astro æ˜¯é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ã€‚è¿™æ„å‘³ç€æ•´ä¸ªç½‘ç«™æ˜¯é¢„æ„å»ºçš„ã€‚å¦‚æœ Astro ä¸çŸ¥é“åœ¨æ„å»ºæ—¶ç”Ÿæˆä»€ä¹ˆé¡µé¢ï¼Œä½ çš„ç”¨æˆ·åœ¨è®¿é—®ä½ çš„ç½‘ç«™æ—¶å°±çœ‹ä¸åˆ°å®ƒã€‚

```astro
---
export async function getStaticPaths() {
  return [
    { params: { /* å¿…éœ€ */ }, props: { /* å¯é€‰ */ } },
    { params: { ... } },
    { params: { ... } },
    // ...
  ];
}
---
<!-- ä½ çš„ HTML æ¨¡æ¿åœ¨è¿™é‡Œ -->
```

`getStaticPaths()` å‡½æ•°åº”è¯¥è¿”å›å¯¹è±¡æ•°ç»„ï¼Œä»¥ç¡®å®šå“ªäº›è·¯å¾„ä¼šè¢« Astro é¢„æ¸²æŸ“ã€‚

:::caution
`getStaticPaths()` å‡½æ•°åœ¨ä¼šä»»ä½•é¡µé¢åŠ è½½ä¹‹å‰ï¼Œåœ¨å®ƒè‡ªå·±çš„éš”ç¦»èŒƒå›´å†…æ‰§è¡Œä¸€æ¬¡ã€‚å› æ­¤ï¼Œé™¤äº†æ–‡ä»¶å¯¼å…¥ä¹‹å¤–ï¼Œä½ ä¸èƒ½ä»å®ƒçš„çˆ¶ä½œç”¨åŸŸä¸­å¼•ç”¨ä»»ä½•ä¸œè¥¿ã€‚å¦‚æœä½ è¿åäº†è¿™ä¸ªè¦æ±‚ï¼Œç¼–è¯‘å™¨ä¼šå‘å‡ºè­¦å‘Šã€‚
:::

### `params`

æ¯ä¸ªè¿”å›å¯¹è±¡çš„ `params` é”®éƒ½ä¼šå‘Šè¯‰ Astro è¦å»ºç«‹ä»€ä¹ˆè·¯å¾„ã€‚è¿”å›å‚æ•°å¿…é¡»æ˜ å°„åˆ°ä½ çš„ç»„ä»¶æ–‡ä»¶è·¯å¾„ä¸­å®šä¹‰çš„åŠ¨æ€å‚æ•°å’Œå…¶ä½™å‚æ•°ã€‚

`params` è¢«ç¼–ç åˆ°é“¾æ¥ä¸­ï¼Œæ‰€ä»¥åªèƒ½ç”±å­—ç¬¦ä¸²å’Œæ•°å­—ã€‚æ¯ä¸ª `params` å¯¹è±¡çš„å€¼å¿…é¡»ä¸é¡µé¢åç§°ä¸­ä½¿ç”¨çš„å‚æ•°ä¸€è‡´ã€‚

æ¯”å¦‚è¯´æœ‰ `src/pages/posts/[id].astro` é¡µé¢ã€‚å¦‚æœä½ ä»è¿™ä¸ªé¡µé¢å¯¼å‡º `getStaticPaths` å¹¶è¿”å›ä»¥ä¸‹çš„è·¯ç”±ï¼š

```astro
---
export async function getStaticPaths() {
  return [
    { params: { id: '1' } },
    { params: { id: '2' } },
    { params: { id:  3  } }  // ä¹Ÿå¯ä»¥æ˜¯æ•°å­—ï¼
  ];
}

const { id } = Astro.params;
---
<h1>{id}</h1>
```

ç„¶å Astro ä¼šåœ¨æ„å»ºæ—¶é™æ€åœ°ç”Ÿæˆ `posts/1`ã€`posts/2` å’Œ `posts/3`ã€‚

### é€šè¿‡ `props` ä¼ é€’æ•°æ®

ä¸ºäº†ç»™æ¯ä¸ªç”Ÿæˆçš„é¡µé¢ä¼ é€’é¢å¤–çš„æ•°æ®ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨æ¯ä¸ªè¿”å›çš„è·¯å¾„å¯¹è±¡ä¸Šè®¾ç½® `props` å€¼ã€‚ä¸ `params` ä¸åŒçš„æ˜¯ï¼Œ`props` æ²¡æœ‰è¢«ç¼–ç åˆ°é“¾æ¥ä¸­ï¼Œæ‰€ä»¥å¹¶ä¸å±€é™äºå­—ç¬¦ä¸²ã€‚

ä¾‹å¦‚ï¼Œå‡è®¾ä½ æ ¹æ®ä»è¿œç¨‹ API è·å–çš„æ•°æ®æ¥ç”Ÿæˆé¡µé¢ã€‚ä½ å¯ä»¥å°†å®Œæ•´çš„æ•°æ®å¯¹è±¡ä¼ é€’ç»™ `getStaticPaths` ä¸­çš„é¡µé¢ç»„ä»¶ã€‚

```astro
---
export async function getStaticPaths() {
  const data = await fetch('...').then(response => response.json());

  return data.map((post) => {
    return {
      params: { id: post.id },
      props: { post },
    };
  });
}

const { id } = Astro.params;
const { post } = Astro.props;
---
<h1>{id}: {post.name}</h1>
```

ä½ ä¹Ÿå¯ä»¥ä¼ é€’æ™®é€šæ•°ç»„ï¼Œè¿™åœ¨ç”Ÿæˆæˆ–ç¼“å­˜å·²çŸ¥è·¯å¾„åˆ—è¡¨æ—¶å¯èƒ½ä¼šæœ‰å¸®åŠ©ã€‚

```astro
---
export async function getStaticPaths() {
  const posts = [
    {id: '1', category: "astro", title: "API Reference"},
    {id: '2', category: "react", title: "Creating a React Counter!"}
  ];
  return posts.map((post) => {
    return {
      params: { id: post.id },
      props: { post }
    };
  });
}
const {id} = Astro.params;
const {post} = Astro.props;
---
<body>
  <h1>{id}: {post.title}</h1>
  <h2>Category: {post.category}</h2>
</body>
```

ç„¶å Astro å°†åœ¨æ„å»ºæ—¶ä½¿ç”¨ `pages/posts/[id].astro` ä¸­çš„é¡µé¢ç»„ä»¶é™æ€åœ°ç”Ÿæˆ `posts/1` å’Œ `posts/2`ã€‚é¡µé¢å¯ä»¥ä½¿ç”¨ `Astro.props` å¼•ç”¨è¿™äº›æ•°æ®ã€‚

### `paginate()`

åˆ†é¡µæ˜¯ Astro é€šè¿‡ `paginate()` å‡½æ•°åŸç”Ÿæ”¯æŒç½‘ç«™çš„å¸¸è§ç”¨ä¾‹ã€‚`paginate()` å°†è‡ªåŠ¨ç”Ÿæˆæ•°ç»„ï¼Œä»`getStaticPaths()`è¿”å›ï¼Œä¸ºåˆ†é¡µé›†åˆçš„æ¯ä¸ªé¡µé¢åˆ›å»ºä¸€ä¸ªURLã€‚é¡µé¢ç¼–å·å°†ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œè€Œé¡µé¢æ•°æ®å°†ä½œä¸º`page`é“å…·ä¼ é€’ã€‚

```js
export async function getStaticPaths({ paginate }) {
  // ç”¨ fetch()ã€Astro.glob() ç­‰åŠ è½½ä½ çš„æ•°æ®
  const response = await fetch(`https://pokeapi.co/api/v2/pokemon?limit=150`);
  const result = await response.json();
  const allPokemon = result.results;

  // è¿”å›åŒ…å«åˆ†é¡µçš„æ‰€æœ‰å¸–å­çš„è·¯ç”±é›†åˆ
  return paginate(allPokemon, { pageSize: 10 });
}

// å¦‚æœè®¾ç½®æ­£ç¡®ï¼Œç°åœ¨é¡µé¢å·²ç»å…·å¤‡äº†æ¸²æŸ“å•é¡µæ‰€éœ€çš„ä¸€åˆ‡å‚æ•°ï¼ˆè§ä¸‹ä¸€èŠ‚ï¼‰ã€‚
const { page } = Astro.props;
```

`paginate()`ï¼šå‡å®šæ–‡ä»¶åä¸º `[page].astro` æˆ– `[...page].astro`ã€‚`page` å‚æ•°å°†æ˜¯é“¾æ¥ä¸­çš„é¡µæ•°ã€‚

- `/posts/[page].astro`ï¼šä¼šäº§ç”Ÿ `/posts/1`ã€`/posts/2`ã€`/posts/3` ç­‰é“¾æ¥ã€‚
- `/posts/[...page].astro`ï¼šå°†äº§ç”Ÿ `/posts`ã€`/posts/2`
`/posts/3` ç­‰é“¾æ¥ã€‚

#### `page` åˆ†é¡µå‚æ•°

åˆ†é¡µä¼šç»™æ¯ä¸ªæ¸²æŸ“çš„é¡µé¢ä¼ é€’ `page` å‚æ•°ï¼Œä»£è¡¨åˆ†é¡µé›†åˆä¸­çš„å•é¡µæ•°æ®ã€‚è¿™åŒ…æ‹¬ä½ åˆ†é¡µçš„æ•°æ®ï¼ˆ`page.data`ï¼‰ä»¥åŠè¯¥é¡µçš„å…ƒæ•°æ®ï¼ˆ`page.url`ã€`page.start`ã€`page.end`ã€`page.total` ç­‰ï¼‰ã€‚è¿™äº›å…ƒæ•°æ®å¯¹è¯¸å¦‚â€œä¸‹ä¸€é¡µâ€æŒ‰é’®æˆ–â€œæ˜¾ç¤º 100 ä¸ªä¸­å‰åä¸ªâ€çš„ä¿¡æ¯å¾ˆæœ‰ç”¨ã€‚

| åç§°               |         ç±»å‹          | æè¿°                                                                                                         |
| :----------------- | :-------------------: | :----------------------------------------------------------------------------------------------------------- |
| `page.data`        |        `Array`        | ä» `data()` ä¸­è¿”å›å½“å‰é¡µé¢æ•°æ®æ•°ç»„                                                                           |
| `page.start`       |       `number`        | å½“å‰é¡µç¬¬ä¸€ä¸ªé¡¹ç›®çš„ç´¢å¼•ï¼Œä» `0` å¼€å§‹ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœ `pageSize: 25`ï¼Œç¬¬ä¸€é¡µè¯¥å€¼æœª `0`ï¼Œç¬¬äºŒé¡µä¸º`25`ï¼Œä»¥æ­¤ç±»æ¨ï¼‰ã€‚ |
| `page.end`         |       `number`        | å½“å‰é¡µé¢æœ€åä¸€ä¸ªé¡¹ç›®çš„ç´¢å¼•                                                                               |
| `page.size`        |       `number`        | æ¯ä¸ªé¡µé¢æœ‰å¤šå°‘é¡¹ç›®                                                                                        |
| `page.total`       |       `number`        | æ‰€æœ‰é¡¹ç›®çš„æ€»æ•°é‡                                                                                    |
| `page.currentPage` |       `number`        | å½“å‰é¡µç ï¼Œä» `1` å¼€å§‹                                                                                        |
| `page.lastPage`    |       `number`        | æ€»é¡µæ•°                                                                                   |
| `page.url.current` |       `string`        | è·å–å½“å‰é¡µé¢çš„é“¾æ¥ï¼ˆå¯¹è§„èŒƒé“¾æ¥å¾ˆæœ‰ç”¨ï¼‰ã€‚                                                  |
| `page.url.prev`    | `string \| undefined` | è·å–ä¸Šä¸€é¡µé“¾æ¥ï¼ˆå¦‚æœåœ¨é¦–é¡µï¼Œå°†æ˜¯`undefined`ï¼‰ã€‚                                         |
| `page.url.next`    | `string \| undefined` | è·å–ä¸‹ä¸€é¡µé“¾æ¥ï¼ˆå¦‚æœæ²¡æœ‰æ›´å¤šçš„é¡µé¢ï¼Œå°†æ˜¯`undefined`ï¼‰                                         |

## `import.meta`

æ‰€æœ‰ ESM æ¨¡å—éƒ½åŒ…å« `import.meta` å±æ€§ã€‚Astro åŸºäº [Vite](https://vitejs.dev/guide/env-and-mode.html) å¢åŠ äº† `import.meta.env`ã€‚

**`import.meta.env.SSR`** å¯ä»¥ç”¨æ¥äº†è§£æœåŠ¡å™¨ä¸Šæ¸²æŸ“æ—¶é•¿ã€‚æœ‰æ—¶ä½ å¯èƒ½æƒ³è¦ä¸åŒçš„é€»è¾‘ï¼Œä¾‹å¦‚ï¼ŒæŸä¸ªç»„ä»¶åº”è¯¥åªåœ¨å®¢æˆ·ç«¯æ¸²æŸ“:

```jsx
import { h } from 'preact';

export default function () {
  return import.meta.env.SSR ? <div class="spinner"></div> : <FancyComponent />;
}
```

## å†…ç½®ç»„ä»¶

Astro åŒ…æ‹¬å‡ ä¸ªå†…ç½®çš„ç»„ä»¶ä¾›ä½ åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨ã€‚åœ¨ `.astro` æ–‡ä»¶ä¸­å¯ä»¥é€šè¿‡ `import {} from 'astro/components';` å¼•ç”¨æ‰€æœ‰çš„å†…ç½®ç»„ä»¶ã€‚

### `<Markdown />`

Markdown ç»„ä»¶ä¸å†å†…ç½®åˆ° Astro ä¸­ã€‚è¯·åœ¨ Markdown é¡µé¢æŸ¥çœ‹å¦‚ä½•[å°† Markdown å¯¼å…¥ Astro æ–‡ä»¶](/zh-cn/guides/markdown-content/#å¯¼å…¥-markdown)ã€‚

### `<Code />`

```astro
---
import { Code } from 'astro/components';
---
<!-- ä½¿ç”¨è¯­æ³•å‡¸æ˜¾éƒ¨åˆ† JavaScript ä»£ç -->
<Code code={`const foo = 'bar';`} lang="js" />
<!-- å¯é€‰ï¼šå®šåˆ¶ä½ çš„ä¸»é¢˜ -->
<Code code={`const foo = 'bar';`} lang="js" theme="dark-plus" />
<!-- å¯é€‰ï¼šå¯ç”¨æ–‡å­—åŒ…è£… -->
<Code code={`const foo = 'bar';`} lang="js" wrap />
```

è¯¥ç»„ä»¶åœ¨æ„å»ºæ—¶ä¸ºä»£ç å—æä¾›è¯­æ³•é«˜äº®ï¼ˆä¸åŒ…æ‹¬å®¢æˆ·ç«¯ JavaScriptï¼‰ã€‚è¯¥ç»„ä»¶ç”± Shiki é©±åŠ¨ï¼Œå®ƒæ”¯æŒæ‰€æœ‰æµè¡Œçš„[ä¸»é¢˜](https://github.com/shikijs/shiki/blob/main/docs/themes.md)å’Œ[è¯­è¨€](https://github.com/shikijs/shiki/blob/main/docs/languages.md)ã€‚å¦å¤–ï¼Œä½ å¯ä»¥é€šè¿‡ç»™ `theme` å’Œ `lang` ä¼ é€’è‡ªå®šä¹‰ä¸»é¢˜å’Œè¯­è¨€åˆ†åˆ«æ·»åŠ å®ƒä»¬ã€‚

### `<Prism />`

:::note[å®‰è£…]

è¦å®‰è£… `Prism` é«˜äº®å™¨ç»„ä»¶, éœ€è¦**å…ˆå®‰è£…** `@astrojs/prism` åŒ…ï¼š

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm i @astrojs/prism
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm i @astrojs/prism
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn add @astrojs/prism
  ```
  </Fragment>
</PackageManagerTabs>
:::

```astro
---
import { Prism } from '@astrojs/prism';
---
<Prism lang="js" code={`const foo = 'bar';`} />
```

è¿™ä¸ªç»„ä»¶é€šè¿‡åº”ç”¨ Prism çš„ CSS ç±»ä¸ºä»£ç å—æä¾›ç‰¹å®šè¯­è¨€çš„è¯­æ³•é«˜äº®ã€‚æ³¨æ„ï¼Œ**ä½ éœ€è¦æä¾› Prism çš„ CSS æ ·å¼è¡¨**ï¼ˆæˆ–ç”¨è‡ªå·±çš„ï¼‰ï¼Œä»¥å¯ç”¨è¯­æ³•é«˜äº®! å‚è§ [Prism é…ç½®éƒ¨åˆ†](/zh-cn/guides/markdown-content/#prism-é…ç½®)äº†è§£æ›´å¤šç»†èŠ‚ã€‚

å‚è§ [Prism æ”¯æŒçš„è¯­è¨€åˆ—è¡¨](https://prismjs.com/#supported-languages)ï¼Œåœ¨é‚£é‡Œä½ å¯ä»¥æ‰¾åˆ°ä¸€ç§è¯­è¨€çš„å¯¹åº”åˆ«åã€‚è€Œä¸”ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ `lang="astro"` æ¥å±•ç¤º Astro ä»£ç å—!

### `<Debug />`

```astro
---
import { Debug } from 'astro/components';
const serverObject = {
  a: 0,
  b: "string",
  c: {
    nested: "object"
  }
}
---
<Debug {serverObject} />
```

è¿™ä¸ªç»„ä»¶æä¾›äº†æ— éœ€ JavaScript åœ¨å®¢æˆ·ç«¯æ£€æŸ¥æ•°å€¼çš„æ–¹æ³•ã€‚

[canonical]: https://en.wikipedia.org/wiki/Canonical_link_element
