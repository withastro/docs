---
title: ã‚¢ã‚¤ãƒ©ãƒ³ãƒ‰é–“ã§çŠ¶æ…‹ã‚’å…±æœ‰ã™ã‚‹
description: Nano Storesã‚’ä½¿ç”¨ã—ã¦ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§çŠ¶æ…‹ã‚’å…±æœ‰ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚
i18nReady: true
type: recipe
---

import UIFrameworkTabs from '~/components/tabs/UIFrameworkTabs.astro'
import LoopingVideo from '~/components/LoopingVideo.astro'
import JavascriptFlavorTabs from '~/components/tabs/JavascriptFlavorTabs.astro'
import RecipeLinks from "~/components/RecipeLinks.astro"

Astroã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’ [ã‚¢ã‚¤ãƒ©ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ / ãƒ‘ãƒ¼ã‚·ãƒ£ãƒ«ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³](/ja/concepts/islands/) ã§æ§‹ç¯‰ã™ã‚‹éš›ã«ã€ **ã€Œã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§çŠ¶æ…‹ã‚’å…±æœ‰ã—ãŸã„ã€** ã¨ã„ã†å•é¡Œã«ç›´é¢ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

Reactã‚„Vueãªã©ã®UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ã€ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãªã©ã® [ã€Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼](https://react.dev/learn/passing-data-deeply-with-context) ã®åˆ©ç”¨ã‚’å¥¨åŠ±ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚   
ãŸã ã—ã€Astroã‚„Markdownå†…ã§ [ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’éƒ¨åˆ†çš„ã«ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ãƒˆ](/ja/guides/framework-components/#ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ) ã™ã‚‹å ´åˆã€ã“ã‚Œã‚‰ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚

Astroã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®å…±æœ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«åˆ¥ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ ([Nano Stores](https://github.com/nanostores/nanostores)) ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚

<RecipeLinks slugs={["ja/recipes/sharing-state"]} />

## ãªãœNano Storesãªã®ã‹ï¼Ÿ

[Nano Stores](https://github.com/nanostores/nanostores)ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ä»»æ„ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒç›¸äº’ä½œç”¨ã§ãã‚‹ã‚¹ãƒˆã‚¢ã‚’ä½œæˆã§ãã¾ã™ã€‚   
Nano Storesã‚’æ¨å¥¨ã™ã‚‹ç†ç”±ã¯æ¬¡ã®é€šã‚Šã§ã™ã€‚
- **è»½é‡ã§ã™ã€‚** Nano Storesã¯å¿…è¦æœ€ä½é™ã®JSï¼ˆ1KBæœªæº€ï¼‰ã‚’ä¾å­˜é–¢ä¿‚ãªã—ã§æä¾›ã—ã¾ã™ã€‚
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ä¾å­˜ã—ã¾ã›ã‚“ã€‚** ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯é–“ã§ã®çŠ¶æ…‹å…±æœ‰ãŒã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«ãªã‚Šã¾ã™ï¼Astroã¯æŸ”è»Ÿæ€§ã‚’é‡è¦–ã—ã¦ã„ã‚‹ãŸã‚ã€ã©ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨ã—ã¦ã‚‚åŒæ§˜ã®é–‹ç™ºè€…ä½“é¨“ã‚’æä¾›ã™ã‚‹ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¥½ãã§ã™ã€‚

ãã‚Œã§ã‚‚ã€ã‚ãªãŸãŒæ¢ã›ã‚‹é¸æŠè‚¢ã¯ã„ãã¤ã‚‚ã‚ã‚Šã¾ã™ã€‚   
é¸æŠè‚¢ã¯ã«ã¯æ¬¡ã®ã‚‚ã®ãŒå«ã¾ã‚Œã¾ã™ã€‚
- [Svelteã®çµ„ã¿è¾¼ã¿ã‚¹ãƒˆã‚¢](https://svelte.dev/tutorial/writable-stores)
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå¤–ã§ã®[Solidã‚·ã‚°ãƒŠãƒ«](https://www.solidjs.com/docs/latest)
- [Vueã®ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£API](https://vuejs.org/guide/scaling-up/state-management.html#simple-state-management-with-reactivity-api)
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§ã®[ã‚«ã‚¹ã‚¿ãƒ ãƒ–ãƒ©ã‚¦ã‚¶ã‚¤ãƒ™ãƒ³ãƒˆã®é€ä¿¡](https://developer.mozilla.org/en-US/docs/Web/Events/Creating_and_triggering_events)

:::note[FAQ]

<details>
<summary>**ğŸ™‹ Nano Storesã‚’`.astro`ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ä»–ã®ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ä½¿ç”¨ã§ãã¾ã™ã‹ï¼Ÿ**</summary>
Nano Storesã¯ `<script>` ã‚¿ã‚°å†…ã§ [`.astro` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§ã®çŠ¶æ…‹ã‚’å…±æœ‰ã™ã‚‹](/ja/recipes/sharing-state/) ã“ã¨ãŒã§ãã¾ã™ã€‚   
ãŸã ã—ã€æ¬¡ã®åˆ¶é™ãŒã‚ã‚‹ãŸã‚ã€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼ã§Nano Storesã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯æ¨å¥¨ã•ã‚Œã¾ã›ã‚“ã€‚

- `.astro`ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ [ãƒãƒ³ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ãƒˆ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](/ja/guides/framework-components/#ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ) ã‹ã‚‰ã‚¹ãƒˆã‚¢ã«æ›¸ãè¾¼ã‚“ã§ã‚‚ã€ [ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](/ja/reference/directives-reference/#ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–) ãŒå—ã‘å–ã‚‹å€¤ã«ã¯å½±éŸ¿ã—ã¾ã›ã‚“ã€‚
- Nano Storeã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã« "prop"ã¨ã—ã¦æ¸¡ã™ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚
- Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œãªã„ãŸã‚ã€`.astro`ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®å¤‰æ›´ã‚’ä¿å­˜ã™ã‚‹ã‚ˆã†ã«ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚

ã“ã‚Œã‚‰ã®åˆ¶é™ã‚’ç†è§£ã—ãŸä¸Šã§ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€Nano Storesã‚’è©¦ã—ã¦ã¿ã¦ãã ã•ã„ï¼   
Nano Storesã¯ **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ** ã®å¤‰æ›´ã«åå¿œã™ã‚‹ã‚ˆã†ã«æ§‹ç¯‰ã•ã‚Œã¦ã„ã‚‹ã®ã§æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

</details>

<details>
<summary>**ğŸ™‹ Svelteã‚¹ãƒˆã‚¢ã¯Nano Storesã¨ã©ã†æ¯”è¼ƒã•ã‚Œã¾ã™ã‹ï¼Ÿ**</summary>

**Nano Storesã¨[Svelteã‚¹ãƒˆã‚¢](https://svelte.dev/tutorial/writable-stores)ã¯éå¸¸ã«ä¼¼ã¦ã„ã¾ã™ï¼** å®Ÿéš›ã€[Nano Storesã¯Svelteã‚¹ãƒˆã‚¢ã§ä½¿ç”¨ã•ã‚Œã‚‹ã®ã¨åŒã˜`$`ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ](https://github.com/nanostores/nanostores#svelte)ã‚’ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã«ä½¿ç”¨ã§ãã¾ã™ã€‚

ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é¿ã‘ãŸã„å ´åˆã¯ã€[Svelteã‚¹ãƒˆã‚¢](https://svelte.dev/tutorial/writable-stores)ãŒå„ªã‚ŒãŸã‚¢ã‚¤ãƒ©ãƒ³ãƒ‰é–“ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«ã«ãªã‚Šã¾ã™ã€‚

ãã‚Œã§ã‚‚ã€æ¬¡ã®ã‚ˆã†ãªç†ç”±ã§ã‚ã‚Œã°ã€Nano Storesã®æ–¹ãŒã„ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚   
a) ["objects"](https://github.com/nanostores/nanostores#maps)ã‚„[async state](https://github.com/nanostores/nanostores#lazy-stores)ç”¨ã®ã‚¢ãƒ‰ã‚ªãƒ³ãŒå¥½ããªå ´åˆ   
b) Svelteã¨ä»–ã®UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆPreactã‚„Vueãªã©ï¼‰é–“ã§é€šä¿¡ã—ãŸã„å ´åˆ

</details>

<details>
<summary>**ğŸ™‹ Solidã‚·ã‚°ãƒŠãƒ«ã¯Nano Storesã¨ã©ã†æ¯”è¼ƒã•ã‚Œã¾ã™ã‹ï¼Ÿ**</summary>

Solidã‚’ä½¿ç”¨ã—ãŸéš›ã«ã€[signals](https://www.solidjs.com/docs/latest#createsignal)ã‚„[stores](https://www.solidjs.com/docs/latest#createstore)ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å¤–ã«ç§»å‹•ã—ã¦ã¿ãŸã“ã¨ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
ã“ã‚Œã¯ã€Solidã®ã‚¢ã‚¤ãƒ©ãƒ³ãƒ‰é–“ã§çŠ¶æ…‹ã‚’å…±æœ‰ã™ã‚‹ç´ æ™´ã‚‰ã—ã„æ–¹æ³•ã§ã™ï¼
å…±æœ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚·ã‚°ãƒŠãƒ«ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```js
// sharedStore.js
import { createSignal } from 'solid-js';

export const sharedCount = createSignal(0);
```
...ãã—ã¦ã€ã“ã®`sharedCount`ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã™ã¹ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯åŒã˜çŠ¶æ…‹ã‚’å…±æœ‰ã—ã¾ã™ã€‚
ã“ã®æ–¹æ³•ã¯ã†ã¾ãæ©Ÿèƒ½ã—ã¾ã™ãŒã€æ¬¡ã®ã‚ˆã†ãªç†ç”±ã§ã‚ã‚Œã°ã€Nano Storesã®æ–¹ãŒã„ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚   
a) ["objects"](https://github.com/nanostores/nanostores#maps)ã‚„[async state](https://github.com/nanostores/nanostores#lazy-stores)ç”¨ã®ã‚¢ãƒ‰ã‚ªãƒ³ãŒå¥½ããªå ´åˆ   
b) Solidã¨ä»–ã®UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆPreactã‚„Vueãªã©ï¼‰é–“ã§é€šä¿¡ã—ãŸã„å ´åˆ
</details>
:::

## Nano Storesã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ä½¿ã„å§‹ã‚ã‚‹ã«ã¯ã€Nano Storesã¨ã€ãŠå¥½ã¿ã®UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ç”¨ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚

<UIFrameworkTabs>
  <Fragment slot="preact">
  ```shell
  npm install nanostores @nanostores/preact
  ```
  </Fragment>
  <Fragment slot="react">
  ```shell
  npm install nanostores @nanostores/react
  ```
  </Fragment>
  <Fragment slot="solid">
  ```shell
  npm install nanostores @nanostores/solid
  ```
  </Fragment>
  <Fragment slot="svelte">
  ```shell
  npm install nanostores
  ```
  :::note
  ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã‚ã‚Šã¾ã›ã‚“ï¼Nano Storesã¯æ¨™æº–çš„ãªSvelteã‚¹ãƒˆã‚¢ã¨åŒæ§˜ã«ä½¿ç”¨ã§ãã¾ã™ã€‚
  :::
  </Fragment>
  <Fragment slot="vue">
  ```shell
  npm install nanostores @nanostores/vue
  ```
  </Fragment>
  <Fragment slot="lit">
  ```shell
  npm install nanostores @nanostores/lit
  ```
  </Fragment>
</UIFrameworkTabs>

ã“ã“ã‹ã‚‰[Nano Storesä½¿ç”¨ã‚¬ã‚¤ãƒ‰](https://github.com/nanostores/nanostores#guide)ã«é·ç§»ã™ã‚‹ã‹ã€ä»¥ä¸‹ã®ä¾‹ã«å¾“ã£ã¦é€²ã‚ã¦ãã ã•ã„ï¼

## ä½¿ç”¨ä¾‹ - eã‚³ãƒãƒ¼ã‚¹ã®ã‚«ãƒ¼ãƒˆãƒ•ãƒ©ã‚¤ã‚¢ã‚¦ãƒˆ

ç°¡å˜ãªeã‚³ãƒãƒ¼ã‚¹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æ§‹ç¯‰ã™ã‚‹ã¨ã—ã¾ã—ã‚‡ã†ã€‚   
ä»¥ä¸‹ã®3ã¤ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªè¦ç´ ãŒã‚ã‚Šã¾ã™ã€‚
- ã€Œã‚«ãƒ¼ãƒˆã«è¿½åŠ ã€é€ä¿¡ãƒ•ã‚©ãƒ¼ãƒ 
- ã‚«ãƒ¼ãƒˆã«è¿½åŠ ã•ã‚ŒãŸã‚¢ã‚¤ãƒ†ãƒ ã‚’è¡¨ç¤ºã™ã‚‹ãƒ•ãƒ©ã‚¤ã‚¢ã‚¦ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼
- ã‚«ãƒ¼ãƒˆãƒ•ãƒ©ã‚¤ã‚¢ã‚¦ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒˆã‚°ãƒ«

<LoopingVideo sources={[{ src: '/videos/stores-example.mp4', type: 'video/mp4' }]} />

_[**å®Œæˆã—ãŸä¾‹**](https://github.com/withastro/astro/tree/main/examples/with-nanostores) ã‚’ã‚ãªãŸã®ãƒã‚·ãƒ³ã‚„ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§StackBlitzã‚’ä»‹ã—ã¦è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚_

ã‚ãªãŸã®åŸºæœ¬çš„ãªAstroãƒ•ã‚¡ã‚¤ãƒ«ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```astro
---
// src/pages/index.astro
import CartFlyoutToggle from '../components/CartFlyoutToggle';
import CartFlyout from '../components/CartFlyout';
import AddToCartForm from '../components/AddToCartForm';
---

<!DOCTYPE html>
<html lang="en">
<head>...</head>
<body>
  <header>
    <nav>
      <a href="/">Astro storefront</a>
      <CartFlyoutToggle client:load />
    </nav>
  </header>
  <main>
    <AddToCartForm client:load>
    <!-- ... -->
    </AddToCartForm>
  </main>
  <CartFlyout client:load />
</body>
</html>
```

### ã€Œatomsã€ã‚’ä½¿ç”¨ã™ã‚‹

`CartFlyoutToggle`ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã«`CartFlyout`ã‚’é–‹ãã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚

ã¾ãšã€æ–°ã—ã„JSã¾ãŸã¯TSãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã€ã‚¹ãƒˆã‚¢ã‚’å«ã‚ã¾ã™ã€‚   
ã“ã®ãŸã‚ã«["atoms"](https://github.com/nanostores/nanostores#atoms)ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```js
// src/cartStore.js
import { atom } from 'nanostores';

export const isCartOpen = atom(false);
```

æ¬¡ã«ã€ã“ã®ã‚¹ãƒˆã‚¢ã‚’èª­ã¿å–ã‚Šã‚„æ›¸ãè¾¼ã¿ãŒå¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚   
ã¾ãšã€`CartFlyoutToggle`ã‚’æ¥ç¶šã—ã¾ã™ã€‚

<UIFrameworkTabs>
<Fragment slot="preact">
```jsx
// src/components/CartFlyoutToggle.jsx
import { useStore } from '@nanostores/preact';
import { isCartOpen } from '../cartStore';

export default function CartButton() {
  // `useStore`ãƒ•ãƒƒã‚¯ã§ã‚¹ãƒˆã‚¢ã®å€¤ã‚’èª­ã¿å–ã‚‹
  const $isCartOpen = useStore(isCartOpen);
  // ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚¹ãƒˆã‚¢ã«`.set`ã‚’ä½¿ã£ã¦æ›¸ãè¾¼ã‚€
  return (
    <button onClick={() => isCartOpen.set(!$isCartOpen)}>Cart</button>
  )
}
```
</Fragment>
<Fragment slot="react">
```jsx
// src/components/CartFlyoutToggle.jsx
import { useStore } from '@nanostores/react';
import { isCartOpen } from '../cartStore';

export default function CartButton() {
  // `useStore`ãƒ•ãƒƒã‚¯ã§ã‚¹ãƒˆã‚¢ã®å€¤ã‚’èª­ã¿å–ã‚‹
  const $isCartOpen = useStore(isCartOpen);
  // ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚¹ãƒˆã‚¢ã«`.set`ã‚’ä½¿ã£ã¦æ›¸ãè¾¼ã‚€
  return (
    <button onClick={() => isCartOpen.set(!$isCartOpen)}>Cart</button>
  )
}
```
</Fragment>
<Fragment slot="solid">
```jsx
// src/components/CartFlyoutToggle.jsx
import { useStore } from '@nanostores/solid';
import { isCartOpen } from '../cartStore';

export default function CartButton() {
  // `useStore`ãƒ•ãƒƒã‚¯ã§ã‚¹ãƒˆã‚¢ã®å€¤ã‚’èª­ã¿å–ã‚‹
  const $isCartOpen = useStore(isCartOpen);
  // ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚¹ãƒˆã‚¢ã«`.set`ã‚’ä½¿ã£ã¦æ›¸ãè¾¼ã‚€
  return (
    <button onClick={() => isCartOpen.set(!$isCartOpen())}>Cart</button>
  )
}
```
</Fragment>
<Fragment slot="svelte">
```svelte
<!--src/components/CartFlyoutToggle.svelte-->
<script>
  import { isCartOpen } from '../cartStore';
</script>

<!-- "$"ã‚’ä½¿ç”¨ã—ã¦ã‚¹ãƒˆã‚¢ã®å€¤ã‚’èª­ã¿å–ã‚‹ -->
<button on:click={() => isCartOpen.set(!$isCartOpen)}>Cart</button>
```
</Fragment>
<Fragment slot="vue">
```vue
<!--src/components/CartFlyoutToggle.vue-->
<template>
  <!-- ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚¹ãƒˆã‚¢ã«`.set`ã‚’ä½¿ã£ã¦æ›¸ãè¾¼ã‚€ -->
  <button @click="isCartOpen.set(!$isCartOpen)">Cart</button>
</template>

<script setup>
  import { isCartOpen } from '../cartStore';
  import { useStore } from '@nanostores/vue';

  // `useStore`ãƒ•ãƒƒã‚¯ã§ã‚¹ãƒˆã‚¢ã®å€¤ã‚’èª­ã¿å–ã‚‹
  const $isCartOpen = useStore(isCartOpen);
</script>
```
</Fragment>
<Fragment slot="lit">
```ts
// src/components/CartFlyoutToggle.ts
import { LitElement, html } from 'lit';
import { isCartOpen } from '../cartStore';

export class CartFlyoutToggle extends LitElement {
  handleClick() {
    isCartOpen.set(!isCartOpen.get());
  }

  render() {
    return html`
      <button @click="${this.handleClick}">Cart</button>
    `;
  }
}

customElements.define('cart-flyout-toggle', CartFlyoutToggle);
```
</Fragment>
</UIFrameworkTabs>

æ¬¡ã«ã€`CartFlyout`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰`isCartOpen`ã‚’èª­ã¿å–ã‚Šã¾ã™ã€‚

<UIFrameworkTabs>
<Fragment slot="preact">
```jsx
// src/components/CartFlyout.jsx
import { useStore } from '@nanostores/preact';
import { isCartOpen } from '../cartStore';

export default function CartFlyout() {
  const $isCartOpen = useStore(isCartOpen);

  return $isCartOpen ? <aside>...</aside> : null;
}
```
</Fragment>
<Fragment slot="react">
```jsx
// src/components/CartFlyout.jsx
import { useStore } from '@nanostores/react';
import { isCartOpen } from '../cartStore';

export default function CartFlyout() {
  const $isCartOpen = useStore(isCartOpen);

  return $isCartOpen ? <aside>...</aside> : null;
}
```
</Fragment>
<Fragment slot="solid">
```jsx
// src/components/CartFlyout.jsx
import { useStore } from '@nanostores/solid';
import { isCartOpen } from '../cartStore';

export default function CartFlyout() {
  const $isCartOpen = useStore(isCartOpen);

  return $isCartOpen() ? <aside>...</aside> : null;
}
```
</Fragment>
<Fragment slot="svelte">
```svelte
<!--src/components/CartFlyout.svelte-->
<script>
  import { isCartOpen } from '../cartStore';
</script>

{#if $isCartOpen}
<aside>...</aside>
{/if}
```
</Fragment>
<Fragment slot="vue">
```vue
<!--src/components/CartFlyout.vue-->
<template>
  <aside v-if="$isCartOpen">...</aside>
</template>

<script setup>
  import { isCartOpen } from '../cartStore';
  import { useStore } from '@nanostores/vue';

  const $isCartOpen = useStore(isCartOpen);
</script>
```
</Fragment>
<Fragment slot="lit">
```ts
// src/components/CartFlyout.ts
import { isCartOpen } from '../cartStore';
import { LitElement, html } from 'lit';
import { StoreController } from '@nanostores/lit';

export class CartFlyout extends LitElement {
  private cartOpen = new StoreController(this, isCartOpen);

  render() {
    return this.cartOpen.value ? html`<aside>...</aside>` : null;
  }
}

customElements.define('cart-flyout', CartFlyout);

```
</Fragment>
</UIFrameworkTabs>

### ã€Œmapsã€ã‚’ä½¿ç”¨ã™ã‚‹

:::tip
**[maps](https://github.com/nanostores/nanostores#maps)ã¯ã€å®šæœŸçš„ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«æ›¸ãè¾¼ã¿ã‚’è¡Œã†å ´åˆã«æœ€é©ãªé¸æŠè‚¢ã§ã™ï¼**   
æ¨™æº–ã®`atom`ãŒæä¾›ã™ã‚‹`get()`ãŠã‚ˆã³`set()`ãƒ˜ãƒ«ãƒ‘ãƒ¼ã«åŠ ãˆã¦ã€å€‹ã€…ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚­ãƒ¼ã‚’åŠ¹ç‡çš„ã«æ›´æ–°ã™ã‚‹ãŸã‚ã®`.setKey()`é–¢æ•°ã‚‚ä½¿ç”¨ã§ãã¾ã™ã€‚
:::

ã§ã¯ã€ã‚«ãƒ¼ãƒˆå†…ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½è·¡ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚   
é‡è¤‡ã‚’é¿ã‘ã€ã€Œæ•°é‡ã€ã‚’è¿½è·¡ã™ã‚‹ãŸã‚ã«ã€ã‚¢ã‚¤ãƒ†ãƒ ã®IDã‚’ã‚­ãƒ¼ã¨ã—ã¦ã‚«ãƒ¼ãƒˆã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ä¿å­˜ã§ãã¾ã™ã€‚   
ã“ã‚Œã«[maps](https://github.com/nanostores/nanostores#maps)ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

å…ˆã»ã©ã®`cartStore.js`ã«`cartItem`ã‚¹ãƒˆã‚¢ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚   
å‹ã‚’å®šç¾©ã—ãŸã„å ´åˆã¯TypeScriptãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

<JavascriptFlavorTabs>
  <Fragment slot="js">
  ```js
  // src/cartStore.js
  import { atom, map } from 'nanostores';

  export const isCartOpen = atom(false);

  /**
   * @typedef {Object} CartItem
   * @property {string} id
   * @property {string} name
   * @property {string} imageSrc
   * @property {number} quantity
   */

  /** @type {import('nanostores').MapStore<Record<string, CartItem>>} */
  export const cartItems = map({});
  ```
  </Fragment>
  <Fragment slot="ts">
  ```ts
  // src/cartStore.ts
  import { atom, map } from 'nanostores';

  export const isCartOpen = atom(false);

  export type CartItem = {
    id: string;
    name: string;
    imageSrc: string;
    quantity: number;
  }

  export const cartItems = map<Record<string, CartItem>>({});
  ```
  </Fragment>
</JavascriptFlavorTabs>

æ¬¡ã«ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«`addCartItem`ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
- **ã‚¢ã‚¤ãƒ†ãƒ ãŒã‚«ãƒ¼ãƒˆã«å­˜åœ¨ã—ãªã„å ´åˆ**ã€æ•°é‡1ã§ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ ã—ã¾ã™ã€‚
- **ã‚¢ã‚¤ãƒ†ãƒ ãŒã‚«ãƒ¼ãƒˆã«å­˜åœ¨ã™ã‚‹å ´åˆ**ã€æ•°é‡ã‚’1ã¤å¢—ã‚„ã—ã¾ã™ã€‚

<JavascriptFlavorTabs>
  <Fragment slot="js">
  ```js
  // src/cartStore.js
  ...
  export function addCartItem({ id, name, imageSrc }) {
    const existingEntry = cartItems.get()[id];
    if (existingEntry) {
      cartItems.setKey(id, {
        ...existingEntry,
        quantity: existingEntry.quantity + 1,
      })
    } else {
      cartItems.setKey(
        id,
        { id, name, imageSrc, quantity: 1 }
      );
    }
  }
  ```
  </Fragment>
  <Fragment slot="ts">
  ```ts
  // src/cartStore.ts
  ...
  type ItemDisplayInfo = Pick<CartItem, 'id' | 'name' | 'imageSrc'>;
  export function addCartItem({ id, name, imageSrc }: ItemDisplayInfo) {
    const existingEntry = cartItems.get()[id];
    if (existingEntry) {
      cartItems.setKey(id, {
        ...existingEntry,
        quantity: existingEntry.quantity + 1,
      });
    } else {
      cartItems.setKey(
        id,
        { id, name, imageSrc, quantity: 1 }
      );
    }
  }
  ```
  </Fragment>
</JavascriptFlavorTabs>

:::note
<details>

<summary>**ğŸ™‹ ãªãœã“ã“ã§ `useStore` ãƒ˜ãƒ«ãƒ‘ãƒ¼ã§ã¯ãªã `.get()` ã‚’ä½¿ç”¨ã™ã‚‹ã®ã§ã™ã‹ï¼Ÿ**</summary>

ã“ã“ã§ã€React / Preact / Solid / Vue ã®ä¾‹ã§ä½¿ç”¨ã—ãŸ `useStore` ãƒ˜ãƒ«ãƒ‘ãƒ¼ã®ä»£ã‚ã‚Šã«ã€`cartItems.get()` ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹ã“ã¨ã«æ°—ã¥ã„ãŸã‹ã¨æ€ã„ã¾ã™ã€‚   
ã“ã‚Œã¯ã€**useStoreã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹ãŸã‚ã®ã‚‚ã®**ã ã‹ã‚‰ã§ã™ã€‚è¨€ã„æ›ãˆã‚‹ã¨ã€ã‚¹ãƒˆã‚¢ã®å€¤ãŒUIã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã¨ãã¯ã„ã¤ã§ã‚‚ `useStore` ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚   
**ã‚¤ãƒ™ãƒ³ãƒˆ**ï¼ˆã“ã®å ´åˆã¯ `addToCart`ï¼‰ãŒãƒˆãƒªã‚¬ãƒ¼ã•ã‚ŒãŸã¨ãã«å€¤ã‚’èª­ã¿è¾¼ã‚“ã§ãŠã‚Šã€ãã®å€¤ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã®ã§ã€ã“ã“ã§ã¯ `useStore` ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚
</details>
:::

ã‚¹ãƒˆã‚¢ã‚’è¨­ç½®ã™ã‚Œã°ã€ãƒ•ã‚©ãƒ¼ãƒ ãŒé€ä¿¡ã•ã‚Œã‚‹ãŸã³ã« `AddToCartForm` å†…ã§ã“ã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚   
ã¾ãŸã€ã‚«ãƒ¼ãƒˆã®ãƒ•ãƒ©ã‚¤ã‚¢ã‚¦ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ãã€ã‚«ãƒ¼ãƒˆã®å…¨ä½“ã®æ¦‚è¦ã‚’è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

<UIFrameworkTabs>
<Fragment slot="preact">
```jsx
// src/components/AddToCartForm.jsx
import { addCartItem, isCartOpen } from '../cartStore';

export default function AddToCartForm({ children }) {
  // ã‚ã‹ã‚Šã‚„ã™ãã™ã‚‹ãŸã‚ã«ã‚¢ã‚¤ãƒ†ãƒ æƒ…å ±ã‚’ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¾ã™ï¼
  const hardcodedItemInfo = {
    id: 'astronaut-figurine',
    name: 'Astronaut Figurine',
    imageSrc: '/images/astronaut-figurine.png',
  }

  function addToCart(e) {
    e.preventDefault();
    isCartOpen.set(true);
    addCartItem(hardcodedItemInfo);
  }

  return (
    <form onSubmit={addToCart}>
      {children}
    </form>
  )
}
```
</Fragment>
<Fragment slot="react">
```jsx
// src/components/AddToCartForm.jsx
import { addCartItem, isCartOpen } from '../cartStore';

export default function AddToCartForm({ children }) {
  // ã‚ã‹ã‚Šã‚„ã™ãã™ã‚‹ãŸã‚ã«ã‚¢ã‚¤ãƒ†ãƒ æƒ…å ±ã‚’ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¾ã™ï¼
  const hardcodedItemInfo = {
    id: 'astronaut-figurine',
    name: 'Astronaut Figurine',
    imageSrc: '/images/astronaut-figurine.png',
  }

  function addToCart(e) {
    e.preventDefault();
    isCartOpen.set(true);
    addCartItem(hardcodedItemInfo);
  }

  return (
    <form onSubmit={addToCart}>
      {children}
    </form>
  )
}
```
</Fragment>
<Fragment slot="solid">
```jsx
// src/components/AddToCartForm.jsx
import { addCartItem, isCartOpen } from '../cartStore';

export default function AddToCartForm({ children }) {
  // ã‚ã‹ã‚Šã‚„ã™ãã™ã‚‹ãŸã‚ã«ã‚¢ã‚¤ãƒ†ãƒ æƒ…å ±ã‚’ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¾ã™ï¼
  const hardcodedItemInfo = {
    id: 'astronaut-figurine',
    name: 'Astronaut Figurine',
    imageSrc: '/images/astronaut-figurine.png',
  }

  function addToCart(e) {
    e.preventDefault();
    isCartOpen.set(true);
    addCartItem(hardcodedItemInfo);
  }

  return (
    <form onSubmit={addToCart}>
      {children}
    </form>
  )
}
```
</Fragment>
<Fragment slot="svelte">
```svelte
<!--src/components/AddToCartForm.svelte-->
<form on:submit|preventDefault={addToCart}>
  <slot></slot>
</form>

<script>
  import { addCartItem, isCartOpen } from '../cartStore';

  // ã‚ã‹ã‚Šã‚„ã™ãã™ã‚‹ãŸã‚ã«ã‚¢ã‚¤ãƒ†ãƒ æƒ…å ±ã‚’ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¾ã™ï¼
  const hardcodedItemInfo = {
    id: 'astronaut-figurine',
    name: 'Astronaut Figurine',
    imageSrc: '/images/astronaut-figurine.png',
  }

  function addToCart() {
    isCartOpen.set(true);
    addCartItem(hardcodedItemInfo);
  }
</script>
```
</Fragment>
<Fragment slot="vue">
```vue
<!--src/components/AddToCartForm.vue-->
<template>
  <form @submit="addToCart">
    <slot></slot>
  </form>
</template>

<script setup>
  import { addCartItem, isCartOpen } from '../cartStore';

  // ã‚ã‹ã‚Šã‚„ã™ãã™ã‚‹ãŸã‚ã«ã‚¢ã‚¤ãƒ†ãƒ æƒ…å ±ã‚’ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¾ã™ï¼
  const hardcodedItemInfo = {
    id: 'astronaut-figurine',
    name: 'Astronaut Figurine',
    imageSrc: '/images/astronaut-figurine.png',
  }

  function addToCart(e) {
    e.preventDefault();
    isCartOpen.set(true);
    addCartItem(hardcodedItemInfo);
  }
</script>
```
</Fragment>
<Fragment slot="lit">
```ts
// src/components/AddToCartForm.ts
import { LitElement, html } from 'lit';
import { isCartOpen, addCartItem } from '../cartStore';

export class AddToCartForm extends LitElement {
  static get properties() {
    return {
      item: { type: Object },
    };
  }

  constructor() {
    super();
    this.item = {};
  }

  addToCart(e) {
    e.preventDefault();
    isCartOpen.set(true);
    addCartItem(this.item);
  }

  render() {
    return html`
      <form @submit="${this.addToCart}">


        <slot></slot>
      </form>
    `;
  }
}
customElements.define('add-to-cart-form', AddToCartForm);
```
</Fragment>
</UIFrameworkTabs>

æœ€å¾Œã«ã€ã‚«ãƒ¼ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã‚’ `CartFlyout` å†…ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚

<UIFrameworkTabs>
<Fragment slot="preact">
```jsx
// src/components/CartFlyout.jsx
import { useStore } from '@nanostores/preact';
import { isCartOpen, cartItems } from '../cartStore';

export default function CartFlyout() {
  const $isCartOpen = useStore(isCartOpen);
  const $cartItems = useStore(cartItems);

  return $isCartOpen ? (
    <aside>
      {Object.values($cartItems).length ? (
        <ul>
          {Object.values($cartItems).map(cartItem => (
            <li>
              <img src={cartItem.imageSrc} alt={cartItem.name} />
              <h3>{cartItem.name}</h3>
              <p>Quantity: {cartItem.quantity}</p>
            </li>
          ))}
        </ul>
      ) : <p>Your cart is empty!</p>}
    </aside>
  ) : null;
}
```
</Fragment>
<Fragment slot="react">
```jsx
// src/components/CartFlyout.jsx
import { useStore } from '@nanostores/react';
import { isCartOpen, cartItems } from '../cartStore';

export default function CartFlyout() {
  const $isCartOpen = useStore(isCartOpen);
  const $cartItems = useStore(cartItems);

  return $isCartOpen ? (
    <aside>
      {Object.values($cartItems).length ? (
        <ul>
          {Object.values($cartItems).map(cartItem => (
            <li>
              <img src={cartItem.imageSrc} alt={cartItem.name} />
              <h3>{cartItem.name}</h3>
              <p>Quantity: {cartItem.quantity}</p>
            </li>
          ))}
        </ul>
      ) : <p>Your cart is empty!</p>}
    </aside>
  ) : null;
}
```
</Fragment>
<Fragment slot="solid">
```jsx
// src/components/CartFlyout.jsx
import { useStore } from '@nanostores/solid';
import { isCartOpen, cartItems } from '../cartStore';

export default function CartFlyout() {
  const $isCartOpen = useStore(isCartOpen);
  const $cartItems = useStore(cartItems);

  return $isCartOpen() ? (
    <aside>
      {Object.values($cartItems()).length ? (
        <ul>
          {Object.values($cartItems()).map(cartItem => (
            <li>
              <img src={cartItem.imageSrc} alt={cartItem.name} />
              <h3>{cartItem.name}</h3>
              <p>Quantity: {cartItem.quantity}</p>
            </li>
          ))}
        </ul>
      ) : <p>Your cart is empty!</p>}
    </aside>
  ) : null;
}
```
</Fragment>
<Fragment slot="svelte">
```svelte
<!--src/components/CartFlyout.svelte-->
<script>
  import { isCartOpen, cartItems } from '../cartStore';
</script>

{#if $isCartOpen}
  {#if Object.values($cartItems).length}
    <aside>
      {#each Object.values($cartItems) as cartItem}
      <li>
        <img src={cartItem.imageSrc} alt={cartItem.name} />
        <h3>{cartItem.name}</h3>
        <p>Quantity: {cartItem.quantity}</p>
      </li>
      {/each}
    </aside>
  {:else}
    <p>Your cart is empty!</p>
  {/if}
{/if}
```
</Fragment>
<Fragment slot="vue">
```vue
<!--src/components/CartFlyout.vue-->
<template>
  <aside v-if="$isCartOpen">
    <ul v-if="Object.values($cartItems).length">
      <li v-for="cartItem in Object.values($cartItems)" v-bind:key="cartItem.name">
        <img :src=cartItem.imageSrc :alt=cartItem.name />
        <h3>{{cartItem.name}}</h3>
        <p>Quantity: {{cartItem.quantity}}</p>
      </li>
    </ul>
    <p v-else>Your cart is empty!</p>
  </aside>
</template>

<script setup>
  import { cartItems, isCartOpen } from '../cartStore';
  import { useStore } from '@nanostores/vue';

  const $isCartOpen = useStore(isCartOpen);
  const $cartItems = useStore(cartItems);
</script>
```
</Fragment>
<Fragment slot="lit">
```ts
// src/components/CartFlyout.ts
import { LitElement, html } from 'lit';
import { isCartOpen, cartItems } from '../cartStore';
import { StoreController } from '@nanostores/lit';

export class CartFlyoutLit extends LitElement {
  private cartOpen = new StoreController(this, isCartOpen);
  private getCartItems = new StoreController(this, cartItems);

  renderCartItem(cartItem) {
    return html`
      <li>
        <img src="${cartItem.imageSrc}" alt="${cartItem.name}" />
        <h3>${cartItem.name}</h3>
        <p>Quantity: ${cartItem.quantity}</p>
      </li>
    `;
  }

  render() {
    return this.cartOpen.value
      ? html`
          <aside>
            ${
              Object.values(this.getCartItems.value).length
                ? html`
                  <ul>
                    ${Object.values(this.getCartItems.value).map((cartItem) =>
                      this.renderCartItem(cartItem)
                    )}
                  </ul>
                `
                : html`<p>Your cart is empty!</p>`
            }
          </aside>
        `
      : null;
  }
}

customElements.define('cart-flyout', CartFlyoutLit);
```
</Fragment>
</UIFrameworkTabs>

ã“ã‚Œã§ã€éŠ€æ²³ç³»ã§æœ€å°ã®JSãƒãƒ³ãƒ‰ãƒ«ã‚’æŒã¤å®Œå…¨ã«ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªeã‚³ãƒãƒ¼ã‚¹ã®ã‚µãƒ³ãƒ—ãƒ«ãŒå®Œæˆã—ã¾ã—ãŸ ğŸš€

[**å®Œæˆã—ãŸä¾‹ã‚’è©¦ã—ã¦ã¿ã¦ãã ã•ã„**](https://github.com/withastro/astro/tree/main/examples/with-nanostores) è‡ªåˆ†ã®ãƒã‚·ãƒ³ã¾ãŸã¯StackBlitzã§ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼
