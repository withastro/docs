---
title: ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ
description: Astroã§fetch APIã‚’ä½¿ç”¨ã—ã¦ãƒªãƒ¢ãƒ¼ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã—ã‚‡ã†ã€‚
i18nReady: true
---

`.astro`ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ã€ãƒªãƒ¢ãƒ¼ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ãƒšãƒ¼ã‚¸ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚

## Astroã§ã®`fetch()`

[Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](/ja/basics/astro-components/)ã§ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§[ã‚°ãƒ­ãƒ¼ãƒãƒ«ã®`fetch()`é–¢æ•°](https://developer.mozilla.org/ja/docs/Web/API/fetch)ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€https://example.com/api ã‚„`Astro.url + "/api"`ã®ã‚ˆã†ã«URLå…¨ä½“ã‚’æŒ‡å®šã—ã¦APIã«HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãŠã“ãªãˆã¾ã™ã€‚

ã“ã®fetchå‘¼ã³å‡ºã—ã¯ãƒ“ãƒ«ãƒ‰æ™‚ã«å®Ÿè¡Œã•ã‚Œã€ãã®ãƒ‡ãƒ¼ã‚¿ã¯å‹•çš„ãªHTMLã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§åˆ©ç”¨ã§ãã¾ã™ã€‚[SSR](/ja/guides/on-demand-rendering/)ãƒ¢ãƒ¼ãƒ‰ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹å ´åˆã€fetchå‘¼ã³å‡ºã—ã¯ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

ğŸ’¡ Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å†…éƒ¨ã§ã€[**top-level await**](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/await#top_level_await)ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚

ğŸ’¡ å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã¯ã€Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¸¡æ–¹ã«propsã¨ã—ã¦æ¸¡ã›ã¾ã™ã€‚

```astro /await fetch\\(.*?\\)/
---
// src/components/User.astro
import Contact from '../components/Contact.jsx';
import Location from '../components/Location.astro';

const response = await fetch('https://randomuser.me/api/');
const data = await response.json();
const randomUser = data.results[0]
---
<!-- ãƒ“ãƒ«ãƒ‰æ™‚ã«å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã§HTMLãŒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚ -->
<h1>ãƒ¦ãƒ¼ã‚¶ãƒ¼</h1>
<h2>{randomUser.name.first} {randomUser.name.last}</h2>

<!-- ãƒ“ãƒ«ãƒ‰æ™‚ã«å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ãŒpropsã¨ã—ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æ¸¡ã•ã‚Œã¾ã™ã€‚ -->
<Contact client:load email={randomUser.email} />
<Location city={randomUser.location.city} />
```

:::note
Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã¨ãã«ãƒ•ã‚§ãƒƒãƒã•ã‚Œã‚‹ã“ã¨ã‚’è¦šãˆã¦ãŠã„ã¦ãã ã•ã„ã€‚

ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸAstroã‚µã‚¤ãƒˆã¯ã€**ãƒ“ãƒ«ãƒ‰æ™‚ã«ä¸€åº¦ã ã‘**ãƒ‡ãƒ¼ã‚¿ã‚’fetchã—ã¾ã™ã€‚é–‹ç™ºç’°å¢ƒã§ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ›´æ–°æ™‚ã«fetchã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§ä½•åº¦ã‚‚ãƒ‡ãƒ¼ã‚¿ã‚’å†å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§[ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](/ja/guides/framework-components/)ã¾ãŸã¯[ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ](/ja/guides/client-side-scripts/)ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
:::


## ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®`fetch()`

`fetch()`é–¢æ•°ã¯ã€ä»»æ„ã®[ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](/ja/guides/framework-components/)ã‹ã‚‰ã‚‚ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«åˆ©ç”¨ã§ãã¾ã™ã€‚

```tsx title="src/components/Movies.tsx" /await fetch\\(.*?\\)/
import type { FunctionalComponent } from 'preact';

const data = await fetch('https://example.com/movies.json').then((response) =>
  response.json()
);

// ãƒ“ãƒ«ãƒ‰æ™‚ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯CLIã«ã‚‚ãƒ­ã‚°ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚
// client:* ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸå ´åˆã€ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚‚ãƒ­ã‚°ãŒå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚
console.log(data);

const Movies: FunctionalComponent = () => {
  // çµæœã‚’ãƒšãƒ¼ã‚¸ã«å‡ºåŠ›ã™ã‚‹
  return <div>{JSON.stringify(data)}</div>;
};

export default Movies;
```


## GraphQLã‚¯ã‚¨ãƒª

Astroã¯ã¾ãŸã€`fetch()`ã‚’ä½¿ç”¨ã—ã¦ä»»æ„ã®æœ‰åŠ¹ãªGraphQLã‚¯ã‚¨ãƒªã§GraphQLã‚µãƒ¼ãƒãƒ¼ã«ã‚¯ã‚¨ãƒªã‚’æŠ•ã’ã‚‰ã‚Œã¾ã™ã€‚

```astro title="src/components/Film.astro" "await fetch"
---
const response = await fetch("https://swapi-graphql.netlify.app/.netlify/functions/index",
  {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify({
      query: `
        query getFilm ($id:ID!) {
          film(id: $id) {
            title
            releaseDate
          }
        }
      `,
      variables: {
        id: "ZmlsbXM6MQ==",
      },
    }),
  });

const json = await response.json();
const { film } = json.data;
---
<h1>Star Wars: A New Hopeã«é–¢ã™ã‚‹æƒ…å ±ã‚’å–å¾—</h1>
<h2>ã‚¿ã‚¤ãƒˆãƒ«: {film.title}</h2>
<p>å…¬é–‹å¹´: {film.releaseDate}</p>
```

## ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMSã‹ã‚‰ã®fetch

Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€ãŠæ°—ã«å…¥ã‚Šã®CMSã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€ãã‚Œã‚’ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨ã—ã¦ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ãã¾ã™ã€‚[å‹•çš„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](/ja/guides/routing/#å‹•çš„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)ã‚’ä½¿ç”¨ã™ã‚Œã°ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯CMSã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ã‚‚ã¨ã«ãƒšãƒ¼ã‚¸ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚

Storyblokã‚„Contentfulã€WordPressãªã©ã®ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMSã¨Astroã‚’çµ„ã¿åˆã‚ã›ã‚‹æ–¹æ³•ã«ã¤ã„ã¦è©³ã—ãã¯ã€[CMSã‚¬ã‚¤ãƒ‰](/ja/guides/cms/)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒªã‚½ãƒ¼ã‚¹

- [Creating a fullstack app with Astro + GraphQL](https://robkendal.co.uk/blog/how-to-build-astro-site-with-graphql/)
