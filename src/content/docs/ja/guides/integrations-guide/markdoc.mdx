---
type: integration
title: '@astrojs/markdoc'
description: Astroãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§@astrojs/markdocã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚
sidebar:
  label: Markdoc
githubIntegrationURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/markdoc/'
category: other
i18nReady: false
---
import { FileTree } from '@astrojs/starlight/components';
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';
import { Steps } from '@astrojs/starlight/components';
import ReadMore from '~/components/ReadMore.astro';

ã“ã®[**Astroã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**][astro-integration]ã¯ã€[Markdoc](https://markdoc.dev/)ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ãƒšãƒ¼ã‚¸ã€ãŠã‚ˆã³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¨ãƒ³ãƒˆãƒªã‚’ä½œæˆã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

## ãªãœMarkdocãªã®ã‹

Markdocã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€[Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ][astro-components]ã§Markdownã‚’å¼·åŒ–ã§ãã¾ã™ã€‚Markdocã§ä½œæˆã•ã‚ŒãŸæ—¢å­˜ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã‚ã‚‹å ´åˆã€ã“ã®ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ãã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’Astroãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æŒã¡è¾¼ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Astroã«ã¯ã€å…¬å¼ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’è‡ªå‹•åŒ–ã™ã‚‹ãŸã‚ã®`astro add`ã‚³ãƒãƒ³ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ã‚‚ã—ã‚ˆã‚ã—ã‘ã‚Œã°ã€[æ‰‹å‹•ã§ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹](#æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

æ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§æ¬¡ã®ã„ãšã‚Œã‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npx astro add markdoc
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm astro add markdoc
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn astro add markdoc
  ```
  </Fragment>
</PackageManagerTabs>

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€[GitHubã§å ±å‘Šã—ã¦ãã ã•ã„](https://github.com/withastro/astro/issues)ã€‚ãã—ã¦ã€ä»¥ä¸‹ã®æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã‚’è©¦ã—ã¦ãã ã•ã„ã€‚

### æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã¾ãšã€`@astrojs/markdoc`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npm install @astrojs/markdoc
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm add @astrojs/markdoc
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn add @astrojs/markdoc
  ```
  </Fragment>
</PackageManagerTabs>

æ¬¡ã«ã€`integrations`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦ã€ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’`astro.config.*`ãƒ•ã‚¡ã‚¤ãƒ«ã«é©ç”¨ã—ã¾ã™ã€‚

```js ins="markdoc()" title="astro.config.mjs" ins={2}
import { defineConfig } from 'astro/config';
import markdoc from '@astrojs/markdoc';
export default defineConfig({
  // ...
  integrations: [markdoc()],
});
```

### VS Codeã‚¨ãƒ‡ã‚£ã‚¿ã®çµ±åˆ

VS Codeã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€æ§‹æˆã•ã‚ŒãŸã‚¿ã‚°ã®æ§‹æ–‡ãƒã‚¤ãƒ©ã‚¤ãƒˆã¨ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã‚’å«ã‚€å…¬å¼ã®[Markdocè¨€èªæ‹¡å¼µæ©Ÿèƒ½](https://marketplace.visualstudio.com/items?itemName=Stripe.markdoc-language-support)ãŒã‚ã‚Šã¾ã™ã€‚è©³ç´°ã«ã¤ã„ã¦ã¯ã€[GitHubã®è¨€èªã‚µãƒ¼ãƒãƒ¼](https://github.com/markdoc/language-server.git)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

æ‹¡å¼µæ©Ÿèƒ½ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ã«ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆã«`markdoc.config.json`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€æ¬¡ã®å†…å®¹ã‚’å«ã‚ã¾ã™ã€‚

```json title="markdoc.config.json"
[
  {
    "id": "my-site",
    "path": "src/content",
    "schema": {
      "path": "markdoc.config.mjs",
      "type": "esm",
      "property": "default",
      "watch": true
    }
  }
]
```

`markdoc.config.mjs`ã‚’`schema`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒã¤è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦è¨­å®šã—ã€`path`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦Markdocãƒ•ã‚¡ã‚¤ãƒ«ãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹å ´æ‰€ã‚’å®šç¾©ã—ã¾ã™ã€‚Markdocã¯ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«å›ºæœ‰ã§ã‚ã‚‹ãŸã‚ã€`src/content`ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

## ä½¿ã„æ–¹

Markdocãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å†…ã§ã®ã¿ä½¿ç”¨ã§ãã¾ã™ã€‚`.mdoc`æ‹¡å¼µå­ã‚’ä½¿ç”¨ã—ã¦ã€ä»»æ„ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¨ãƒ³ãƒˆãƒªã‚’è¿½åŠ ã—ã¾ã™ã€‚

<FileTree>
- src/
  - content/
    - docs/
      - why-markdoc.mdoc
      - quick-start.mdoc
</FileTree>

æ¬¡ã«ã€[ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³API](/ja/guides/content-collections/#ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¯ã‚¨ãƒª)ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã‚¯ã‚¨ãƒªã—ã¾ã™ã€‚

```astro title="src/pages/why-markdoc.astro"
---
import { getEntry, render } from 'astro:content';

const entry = await getEntry('docs', 'why-markdoc');
const { Content } = await render(entry);
---

<!--dataã§ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã‚¢ã‚¯ã‚»ã‚¹-->
<h1>{entry.data.title}</h1>
<!--Contentã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§Markdocã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°-->
<Content />
```

<ReadMore>[Astroã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ][astro-content-collections]ã§è©³ç´°ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</ReadMore>

## Markdocå¤‰æ•°ã‚’æ¸¡ã™

ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«[å¤‰æ•°][markdoc-variables]ã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€A/Bãƒ†ã‚¹ãƒˆãªã©ã®SSRãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã™å ´åˆã«ä¾¿åˆ©ã§ã™ã€‚

å¤‰æ•°ã¯ã€`Content`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä»‹ã—ã¦ãƒ—ãƒ­ãƒƒãƒ—ã¨ã—ã¦æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

```astro title="src/pages/why-markdoc.astro"
---
import { getEntry, render } from 'astro:content';

const entry = await getEntry('docs', 'why-markdoc');
const { Content } = await render(entry);
---

<!--abTestãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã‚’æ¸¡ã™-->
<Content abTestGroup={Astro.params.abTestGroup} />
```

ã“ã‚Œã§ã€`abTestGroup`ã¯`docs/why-markdoc.mdoc`ã§å¤‰æ•°ã¨ã—ã¦åˆ©ç”¨ã§ãã¾ã™ã€‚

```md title="src/content/docs/why-markdoc.mdoc"
{% if $abTestGroup === 'image-optimization-lover' %}

ç”»åƒã®æœ€é©åŒ–ã«ã¤ã„ã¦ãŠè©±ã—ã—ã¾ã—ã‚‡ã†...

{% /if %}
```

ã™ã¹ã¦ã®Markdocãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªå¤‰æ•°ã‚’ä½œæˆã™ã‚‹ã«ã¯ã€`markdoc.config.mjs|ts`ã‹ã‚‰`variables`å±æ€§ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

```js title="markdoc.config.mjs"
import { defineMarkdocConfig } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  variables: {
    environment: process.env.IS_PROD ? 'prod' : 'dev',
  },
});
```

### Markdocã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‹ã‚‰ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹

ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã«ã¯ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹å ´æ‰€ã§ã‚¨ãƒ³ãƒˆãƒªã®`data`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

```astro title="src/pages/why-markdoc.astro"
---
import { getEntry, render } from 'astro:content';

const entry = await getEntry('docs', 'why-markdoc');
const { Content } = await render(entry);
---

<Content frontmatter={entry.data} />
```

ã“ã‚Œã¯ã€Markdocã§`$frontmatter`ã¨ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

`@astrojs/markdoc`ã¯ã€Markdocã®ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ã€UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«æ¥ç¶šã™ã‚‹ãŸã‚ã®è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æä¾›ã—ã¾ã™ã€‚

### Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’Markdocã‚¿ã‚°ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹

`.astro`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ãƒãƒƒãƒ”ãƒ³ã‚°ã•ã‚Œã‚‹[Markdocã‚¿ã‚°][markdoc-tags]ã‚’è¨­å®šã§ãã¾ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆã«`markdoc.config.mjs|ts`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€`tag`å±æ€§ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€æ–°ã—ã„ã‚¿ã‚°ã‚’è¿½åŠ ã§ãã¾ã™ã€‚

ã“ã®ä¾‹ã§ã¯ã€`Aside`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã€`type`propã‚’æ–‡å­—åˆ—ã¨ã—ã¦æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

```js title="markdoc.config.mjs"
import { defineMarkdocConfig, component } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  tags: {
    aside: {
      render: component('./src/components/Aside.astro'),
      attributes: {
        // Markdocã¯å„å±æ€§ã«å‹å®šç¾©ã‚’è¦æ±‚ã—ã¾ã™ã€‚
        // ã“ã‚Œã‚‰ã¯ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®
        // `Props`å‹ã‚’åæ˜ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
        // å±æ€§ã®å®šç¾©ã«é–¢ã™ã‚‹Markdocã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„
        // https://markdoc.dev/docs/attributes#defining-attributes
        type: { type: String },
      },
    },
  },
});
```

ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€`{% aside %}`ã‚¿ã‚°ã‚’ä½¿ç”¨ã—ã¦Markdocãƒ•ã‚¡ã‚¤ãƒ«ã§ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚å­ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ãƒ­ãƒƒãƒˆã«æ¸¡ã•ã‚Œã¾ã™ã€‚

```md
# Markdocã¸ã‚ˆã†ã“ãğŸ‘‹

{% aside type="tip" %}

ã“ã®æ´¾æ‰‹ãªã€Œasideã€ã®ã‚ˆã†ãªã‚¿ã‚°ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«_ã‚»ãƒ³ã‚¹_ã‚’åŠ ãˆã¦ãã ã•ã„ã€‚

{% /aside %}
```

### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã™ã‚‹

ã‚¿ã‚°ã¨ãƒãƒ¼ãƒ‰ã¯`.astro`ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ¶é™ã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’Markdocã«åŸ‹ã‚è¾¼ã‚€ã«ã¯ã€[ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ãƒ©ãƒƒãƒ‘ãƒ¼`.astro`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨](/ja/guides/framework-components/#ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒã‚¹ãƒˆã•ã›ã‚‹)ã—ã€ç›®çš„ã®`client:`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã‚’æŒ‡å®šã—ã¾ã™ã€‚

ã“ã®ä¾‹ã§ã¯ã€React `Aside.tsx`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’`ClientAside.astro`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ãƒ©ãƒƒãƒ—ã—ã¾ã™ã€‚

```astro title="src/components/ClientAside.astro"
---
import Aside from './Aside';
---

<Aside {...Astro.props} client:load />
```

ã“ã®Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€è¨­å®šå†…ã®ä»»æ„ã®[ã‚¿ã‚°][markdoc-tags]ã¾ãŸã¯[ãƒãƒ¼ãƒ‰][markdoc-nodes]ã®`render`propã«æ¸¡ã™ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

```js title="markdoc.config.mjs"
import { defineMarkdocConfig, component } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  tags: {
    aside: {
      render: component('./src/components/ClientAside.astro'),
      attributes: {
        type: { type: String },
      },
    },
  },
});
```

### npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨TypeScriptãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã™ã‚‹

TypeScriptã¾ãŸã¯JavaScriptãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰åå‰ä»˜ãã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã¨ã—ã¦å…¬é–‹ã•ã‚Œã¦ã„ã‚‹Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚„ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã«ã‚ˆãã‚ã‚Šã¾ã™ã€‚

`component()`é–¢æ•°ã®2ç•ªç›®ã®å¼•æ•°ã¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆåã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

```js title="markdoc.config.mjs"
import { defineMarkdocConfig, component } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  tags: {
    tabs: {
      render: component('@astrojs/starlight/components', 'Tabs'),
    },
  },
});
```

ã“ã‚Œã«ã‚ˆã‚Šã€å†…éƒ¨ã§æ¬¡ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

```ts
import { Tabs } from '@astrojs/starlight/components';
```

## Markdocãƒ‘ãƒ¼ã‚·ãƒ£ãƒ«

`{% partial /%}`ã‚¿ã‚°ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€Markdocã‚³ãƒ³ãƒ†ãƒ³ãƒ„å†…ã«ä»–ã®`.mdoc`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ãã¾ã™ã€‚

ã“ã‚Œã¯ã€è¤‡æ•°ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å†åˆ©ç”¨ã™ã‚‹å ´åˆã«ä¾¿åˆ©ã§ã€ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚¹ã‚­ãƒ¼ãƒã«å¾“ã‚ãªã„`.mdoc`ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒã¤ã“ã¨ãŒã§ãã¾ã™ã€‚

:::tip
ãƒ‘ãƒ¼ã‚·ãƒ£ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã¾ãŸã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢`_`ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ‘ãƒ¼ã‚·ãƒ£ãƒ«ãŒã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚¯ã‚¨ãƒªã‹ã‚‰é™¤å¤–ã•ã‚Œã¾ã™ã€‚
:::

ã“ã®ä¾‹ã¯ã€ãƒ–ãƒ­ã‚°ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ãƒˆãƒªå†…ã§ä½¿ç”¨ã™ã‚‹ãƒ•ãƒƒã‚¿ãƒ¼ã®Markdocãƒ‘ãƒ¼ã‚·ãƒ£ãƒ«ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚

```md title="src/content/blog/_footer.mdoc"
ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒªãƒ³ã‚¯:

- [Twitter / X](https://twitter.com/astrodotbuild)
- [Discord](https://astro.build/chat)
- [GitHub](https://github.com/withastro/astro)
```

`{% partial /%}`ã‚¿ã‚°ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ–ãƒ­ã‚°æŠ•ç¨¿ã‚¨ãƒ³ãƒˆãƒªã®ä¸‹éƒ¨ã«ãƒ•ãƒƒã‚¿ãƒ¼ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚ç›¸å¯¾ãƒ‘ã‚¹ã¾ãŸã¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¦`file`å±æ€§ã‚’é©ç”¨ã—ã¾ã™ã€‚

```md title="src/content/blog/post.mdoc" ins='file="_footer.mdoc"'
# ç§ã®ãƒ–ãƒ­ã‚°æŠ•ç¨¿

{% partial file="./_footer.mdoc" /%}
```

## æ§‹æ–‡ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ

`@astrojs/markdoc`ã¯ã€ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã™ã‚‹ãŸã‚ã®[Shiki](https://shiki.style)ãŠã‚ˆã³[Prism](https://github.com/PrismJS)æ‹¡å¼µæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

### Shiki

`extends`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦ã€Markdocè¨­å®šã«`shiki()`æ‹¡å¼µæ©Ÿèƒ½ã‚’é©ç”¨ã—ã¾ã™ã€‚ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã€shikiè¨­å®šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

```js title="markdoc.config.mjs"
import { defineMarkdocConfig } from '@astrojs/markdoc/config';
import shiki from '@astrojs/markdoc/shiki';

export default defineMarkdocConfig({
  extends: [
    shiki({
      // Shikiã®çµ„ã¿è¾¼ã¿ãƒ†ãƒ¼ãƒã‹ã‚‰é¸æŠï¼ˆã¾ãŸã¯ç‹¬è‡ªã«è¿½åŠ ï¼‰
      // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 'github-dark'
      // https://shiki.style/themes
      theme: 'dracula',
      // æ°´å¹³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’é˜²ããŸã‚ã«ãƒ¯ãƒ¼ãƒ‰ãƒ©ãƒƒãƒ—ã‚’æœ‰åŠ¹ã«ã™ã‚‹
      // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: false
      wrap: true,
      // ã‚«ã‚¹ã‚¿ãƒ è¨€èªã‚’æ¸¡ã™
      // æ³¨: Shikiã«ã¯ã€`.astro`ã‚’å«ã‚€ç„¡æ•°ã®è¨€èªãŒçµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã™ï¼
      // https://shiki.style/languages
      langs: [],
    }),
  ],
});
```

### Prism

`extends`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦ã€Markdocè¨­å®šã«`prism()`æ‹¡å¼µæ©Ÿèƒ½ã‚’é©ç”¨ã—ã¾ã™ã€‚

```js title="markdoc.config.mjs" ins={5}
import { defineMarkdocConfig } from '@astrojs/markdoc/config';
import prism from '@astrojs/markdoc/prism';

export default defineMarkdocConfig({
  extends: [prism()],
});
```

<ReadMore>Prismã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã®è¨­å®šã«ã¤ã„ã¦ã¯ã€[æ§‹æ–‡ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚¬ã‚¤ãƒ‰](/ja/guides/syntax-highlighting/#prismã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã‚’è¿½åŠ ã™ã‚‹)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</ReadMore>

## ã‚«ã‚¹ã‚¿ãƒ Markdocãƒãƒ¼ãƒ‰/è¦ç´ 

æ®µè½ã‚„å¤ªå­—ã®ãƒ†ã‚­ã‚¹ãƒˆãªã©ã®æ¨™æº–çš„ãªMarkdownè¦ç´ ã‚’Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ãŸã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ãŸã‚ã«ã€[Markdocãƒãƒ¼ãƒ‰][markdoc-nodes]ã‚’è¨­å®šã§ãã¾ã™ã€‚ç‰¹å®šã®ãƒãƒ¼ãƒ‰ãŒå±æ€§ã‚’å—ã‘å–ã‚‹å ´åˆã€ãã‚Œã‚‰ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ—ãƒ­ãƒƒãƒ—ã¨ã—ã¦åˆ©ç”¨ã§ãã¾ã™ã€‚

ã“ã®ä¾‹ã§ã¯ã€ã‚«ã‚¹ã‚¿ãƒ ã®`Quote.astro`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ãƒ–ãƒ­ãƒƒã‚¯ã‚¯ã‚ªãƒ¼ãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚

```js title="markdoc.config.mjs"
import { defineMarkdocConfig, nodes, component } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  nodes: {
    blockquote: {
      ...nodes.blockquote, // ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¯Markdocã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’é©ç”¨
      render: component('./src/components/Quote.astro'),
    },
  },
});
```

<ReadMore>ã™ã¹ã¦ã®çµ„ã¿è¾¼ã¿ãƒãƒ¼ãƒ‰ã¨å±æ€§ã«ã¤ã„ã¦ã¯ã€[Markdocãƒãƒ¼ãƒ‰ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://markdoc.dev/docs/nodes#built-in-nodes)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</ReadMore>

### ã‚«ã‚¹ã‚¿ãƒ è¦‹å‡ºã—

`@astrojs/markdoc`ã¯ã€è¦‹å‡ºã—ã«ã‚¢ãƒ³ã‚«ãƒ¼ãƒªãƒ³ã‚¯ã‚’è‡ªå‹•çš„ã«è¿½åŠ ã—ã€[ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³APIã‚’ä»‹ã—ã¦`headings`ã®ãƒªã‚¹ãƒˆã‚’ç”Ÿæˆã—ã¾ã™](/ja/guides/content-collections/)ã€‚è¦‹å‡ºã—ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ–¹æ³•ã‚’ã•ã‚‰ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã«ã¯ã€Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’[Markdocãƒãƒ¼ãƒ‰ã¨ã—ã¦][markdoc-nodes]é©ç”¨ã§ãã¾ã™ã€‚

ã“ã®ä¾‹ã§ã¯ã€`render`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦`Heading.astro`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚

```js title="markdoc.config.mjs"
import { defineMarkdocConfig, nodes, component } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  nodes: {
    heading: {
      ...nodes.heading, // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¢ãƒ³ã‚«ãƒ¼ãƒªãƒ³ã‚¯ç”Ÿæˆã‚’ç¶­æŒ
      render: component('./src/components/Heading.astro'),
    },
  },
});
```

ã™ã¹ã¦ã®Markdownè¦‹å‡ºã—ã¯`Heading.astro`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã€æ¬¡ã®`attributes`ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ—ãƒ­ãƒƒãƒ—ã¨ã—ã¦æ¸¡ã—ã¾ã™ã€‚

* `level: number` è¦‹å‡ºã—ãƒ¬ãƒ™ãƒ«1ã€œ6
* `id: string` è¦‹å‡ºã—ã®ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‹ã‚‰ç”Ÿæˆã•ã‚ŒãŸ`id`ã€‚ã“ã‚Œã¯ã€[ã‚³ãƒ³ãƒ†ãƒ³ãƒ„`render()`é–¢æ•°](/ja/guides/content-collections/)ã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸ`slug`ã«å¯¾å¿œã—ã¾ã™ã€‚

ãŸã¨ãˆã°ã€è¦‹å‡ºã—`### ãƒ¬ãƒ™ãƒ«3ã®è¦‹å‡ºã—ï¼`ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ—ãƒ­ãƒƒãƒ—ã¨ã—ã¦`level: 3`ã¨`id: 'level-3-heading'`ã‚’æ¸¡ã—ã¾ã™ã€‚

### ã‚«ã‚¹ã‚¿ãƒ ç”»åƒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

Astroã®`<Image />`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€Markdocã§ç›´æ¥ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ãŸã ã—ã€ãƒã‚¤ãƒ†ã‚£ãƒ–ã®`![]()`ç”»åƒæ§‹æ–‡ãŒä½¿ç”¨ã•ã‚Œã‚‹ãŸã³ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ç”»åƒãƒãƒ¼ãƒ‰ã‚’ä¸Šæ›¸ãã™ã‚‹ã‚ˆã†ã«Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¨­å®šã—ãŸã‚Šã€è¿½åŠ ã®ç”»åƒå±æ€§ã‚’æŒ‡å®šã§ãã‚‹ã‚«ã‚¹ã‚¿ãƒ Markdocã‚¿ã‚°ã¨ã—ã¦è¨­å®šã—ãŸã‚Šã§ãã¾ã™ã€‚

#### Markdocã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒãƒãƒ¼ãƒ‰ã‚’ä¸Šæ›¸ãã™ã‚‹

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ç”»åƒãƒãƒ¼ãƒ‰ã‚’ä¸Šæ›¸ãã™ã‚‹ã«ã¯ã€æ¨™æº–ã®`<img>`ã®ä»£ã‚ã‚Šã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã‚ˆã†ã«`.astro`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¨­å®šã§ãã¾ã™ã€‚

<Steps>
1. ã‚«ã‚¹ã‚¿ãƒ ã®`MarkdocImage.astro`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ã€ç”»åƒã‹ã‚‰å¿…è¦ãª`src`ãŠã‚ˆã³`alt`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’`<Image />`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æ¸¡ã—ã¾ã™ã€‚

    ```astro title="src/components/MarkdocImage.astro"
    ---
    import { Image } from "astro:assets";
    interface Props {
      src: ImageMetadata;
      alt: string;
    }
    const { src, alt } = Astro.props;
    ---
    <Image src={src} alt={alt} />
    ```

2. `<Image />`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¯ã€`![]()`æ§‹æ–‡ã§ã¯æä¾›ã§ããªã„ãƒªãƒ¢ãƒ¼ãƒˆç”»åƒã®`width`ã¨`height`ãŒå¿…è¦ã§ã™ã€‚ãƒªãƒ¢ãƒ¼ãƒˆç”»åƒã‚’ä½¿ç”¨ã™ã‚‹éš›ã®ã‚¨ãƒ©ãƒ¼ã‚’å›é¿ã™ã‚‹ã«ã¯ã€ãƒªãƒ¢ãƒ¼ãƒˆURLã®`src`ãŒè¦‹ã¤ã‹ã£ãŸå ´åˆã«æ¨™æº–ã®HTML `<img>`ã‚¿ã‚°ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ã‚ˆã†ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ›´æ–°ã—ã¾ã™ã€‚

    ```astro title="src/components/MarkdocImage.astro" ins="| string" del={9} ins={10-12}
    ---
    import { Image } from "astro:assets";
    interface Props {
      src: ImageMetadata | string;
      alt: string;
    }
    const { src, alt } = Astro.props;
    ---
    <Image src={src} alt={alt} />
    {
      typeof src === 'string' ? <img src={src} alt={alt} /> : <Image src={src} alt={alt} />
    }
    ```

3. Markdocã‚’è¨­å®šã—ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ç”»åƒãƒãƒ¼ãƒ‰ã‚’ä¸Šæ›¸ãã—ã€`MarkdocImage.astro`ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚

    ```js title="markdoc.config.mjs"
    import { defineMarkdocConfig, nodes, component } from '@astrojs/markdoc/config';

    export default defineMarkdocConfig({
      nodes: {
        image: {
          ...nodes.image, // ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¯Markdocã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’é©ç”¨
          render: component('./src/components/MarkdocImage.astro'),
        },
      },
    });
    ```

4. `.mdoc`ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ãƒã‚¤ãƒ†ã‚£ãƒ–ç”»åƒæ§‹æ–‡ã¯ã€`<Image />`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ç”»åƒã‚’æœ€é©åŒ–ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãƒªãƒ¢ãƒ¼ãƒˆç”»åƒã¯å¼•ãç¶šãä½¿ç”¨ã§ãã¾ã™ãŒã€Astroã®`<Image />`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã¯ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã›ã‚“ã€‚

    ```md title="src/content/blog/post.mdoc"
    
    <!-- <Image />ã«ã‚ˆã£ã¦æœ€é©åŒ– -->
    ![çŒ«ã®å†™çœŸ](/cat.jpg)

    <!-- æœ€é©åŒ–ã•ã‚Œã¦ã„ãªã„<img> -->
    ![çŠ¬ã®å†™çœŸ](https://example.com/dog.jpg) 
    ```
</Steps>

#### ã‚«ã‚¹ã‚¿ãƒ Markdocç”»åƒã‚¿ã‚°ã‚’ä½œæˆã™ã‚‹

Markdocã®`image`ã‚¿ã‚°ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€`![]()`æ§‹æ–‡ã§ã¯ä¸å¯èƒ½ãªè¿½åŠ ã®å±æ€§ã‚’ç”»åƒã«è¨­å®šã§ãã¾ã™ã€‚ãŸã¨ãˆã°ã€ã‚«ã‚¹ã‚¿ãƒ ç”»åƒã‚¿ã‚°ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€`width`ã¨`height`ãŒå¿…è¦ãªãƒªãƒ¢ãƒ¼ãƒˆç”»åƒã«Astroã®`<Image />`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

æ¬¡ã®æ‰‹é †ã§ã¯ã€Astro `<Image />`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ç”»åƒã‚’æœ€é©åŒ–ã—ã€ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ä»˜ãã®`<figure>`è¦ç´ ã‚’è¡¨ç¤ºã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ Markdocç”»åƒã‚¿ã‚°ã‚’ä½œæˆã—ã¾ã™ã€‚

<Steps>
1. å¿…è¦ãªpropsã‚’å—ã‘å–ã‚Šã€ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ä»˜ãã®ç”»åƒã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹`MarkdocFigure.astro`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚

    ```astro title="src/components/MarkdocFigure.astro"
    ---
    // src/components/MarkdocFigure.astro
    import { Image } from "astro:assets";

    interface Props {
      src: ImageMetadata | string;
      alt: string;
      width: number;
      height: number;
      caption: string;
    }

    const { src, alt, width, height, caption } = Astro.props;
    ---
    <figure>
        <Image {src} {alt} {width} {height}  />
        {caption && <figcaption>{caption}</figcaption>}
    </figure>
    ```

2. Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ã‚ˆã†ã«ã‚«ã‚¹ã‚¿ãƒ ç”»åƒã‚¿ã‚°ã‚’è¨­å®šã—ã¾ã™ã€‚

    ```ts title="markdoc.config.mjs"
    import { component, defineMarkdocConfig, nodes } from '@astrojs/markdoc/config';

    export default defineMarkdocConfig({
      tags: {
        image: {
          attributes: {
            width: {
              type: String,
            },
            height: {
              type: String,
            },
            caption: {
              type: String,
            },
            ...nodes.image.attributes
          },
          render: component('./src/components/MarkdocFigure.astro'),
        },
      },
    });
    ```

3. Markdocãƒ•ã‚¡ã‚¤ãƒ«ã§`image`ã‚¿ã‚°ã‚’ä½¿ç”¨ã—ã¦ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¿…è¦ãªã™ã¹ã¦ã®å±æ€§ã‚’æŒ‡å®šã—ã¦ã€ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ä»˜ãã®å›³ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

    ```md
    {% image src="./astro-logo.png" alt="Astro Logo" width="100" height="100" caption="a caption!" /%}
    ```
</Steps>

## é«˜åº¦ãªMarkdocè¨­å®š

`markdoc.config.mjs|ts`ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€[ã‚¿ã‚°](https://markdoc.dev/docs/tags)ã‚„[é–¢æ•°](https://markdoc.dev/docs/functions)ãªã©ã€[ã™ã¹ã¦ã®Markdocè¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³](https://markdoc.dev/docs/config)ã‚’å—ã‘å…¥ã‚Œã¾ã™ã€‚

ã“ã‚Œã‚‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€`markdoc.config.mjs|ts`ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‹ã‚‰æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

```js title="markdoc.config.mjs"
import { defineMarkdocConfig } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  functions: {
    getCountryEmoji: {
      transform(parameters) {
        const [country] = Object.values(parameters);
        const countryToEmojiMap = {
          japan: 'ğŸ‡¯ğŸ‡µ',
          spain: 'ğŸ‡ªğŸ‡¸',
          france: 'ğŸ‡«ğŸ‡·',
        };
        return countryToEmojiMap[country] ?? 'ğŸ³';
      },
    },
  },
});
```

ã“ã‚Œã§ã€ä»»æ„ã®Markdocã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒ³ãƒˆãƒªã‹ã‚‰ã“ã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚

```md
Â¡Hola {% getCountryEmoji("spain") %}!
```

<ReadMore>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã§ã®å¤‰æ•°ã‚„é–¢æ•°ã®ä½¿ç”¨æ–¹æ³•ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€[Markdocã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://markdoc.dev/docs/functions#creating-a-custom-function)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</ReadMore>

### ãƒ«ãƒ¼ãƒˆHTMLè¦ç´ ã‚’è¨­å®šã™ã‚‹

Markdocã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’`<article>`ã‚¿ã‚°ã§ãƒ©ãƒƒãƒ—ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€`document` Markdocãƒãƒ¼ãƒ‰ã‹ã‚‰å¤‰æ›´ã§ãã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒ©ãƒƒãƒ‘ãƒ¼è¦ç´ ã‚’å‰Šé™¤ã—ãŸã„å ´åˆã¯ã€HTMLè¦ç´ åã¾ãŸã¯`null`ã‚’å—ã‘å…¥ã‚Œã¾ã™ã€‚

```js title="markdoc.config.mjs"
import { defineMarkdocConfig, nodes } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  nodes: {
    document: {
      ...nodes.document, // ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’é©ç”¨
      render: null, // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯'article'
    },
  },
});
```

## ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³

Astro Markdocã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€`markdoc.config.js`ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯åˆ©ç”¨ã§ããªã„Markdocã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨æ©Ÿèƒ½ã®è¨­å®šã‚’å‡¦ç†ã—ã¾ã™ã€‚

### `allowHTML`

Markdocã‚¿ã‚°ã‚„ãƒãƒ¼ãƒ‰ã¨ä¸¦ã¹ã¦HTMLãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã‚’è¨˜è¿°ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€Markdocã¯HTMLãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã‚’æ„å‘³ã®ã‚ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨ã—ã¦èªè­˜ã—ã¾ã›ã‚“ã€‚

HTMLè¦ç´ ã‚’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨ä¸¦ã¹ã¦å«ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€ã‚ˆã‚ŠMarkdownã‚‰ã—ã„ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ã‚’å®Ÿç¾ã™ã‚‹ã«ã¯ã€`markdoc`ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦`allowHTML:true`ã‚’è¨­å®šã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€Markdocãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã§HTMLè§£æãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚

```js ins="allowHTML: true" title="astro.config.mjs" ins={6}
  import { defineConfig } from 'astro/config';
  import markdoc from '@astrojs/markdoc';

  export default defineConfig({
    // ...
    integrations: [markdoc({ allowHTML: true })],
  });
```

:::caution
`allowHTML`ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹å ´åˆã€Markdocãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå†…ã®HTMLãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã¯å®Ÿéš›ã®HTMLè¦ç´ ï¼ˆ`<script>`ã‚’å«ã‚€ï¼‰ã¨ã—ã¦ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ãŸã‚ã€XSSãªã©ã®æ”»æ’ƒãƒ™ã‚¯ãƒˆãƒ«ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚HTMLãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ãŒä¿¡é ¼ã§ãã‚‹ã‚½ãƒ¼ã‚¹ã‹ã‚‰ã®ã‚‚ã®ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
:::

### `ignoreIndentation`

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€4ã¤ã®ã‚¹ãƒšãƒ¼ã‚¹ã§ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚æ®‹å¿µãªãŒã‚‰ã€ã“ã®å‹•ä½œã«ã‚ˆã‚Šã€è¤‡é›‘ãªæ§‹é€ ã‚’æŒã¤ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®èª­ã¿ã‚„ã™ã•ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã«ä»»æ„ã®ãƒ¬ãƒ™ãƒ«ã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒå›°é›£ã«ãªã‚Šã¾ã™ã€‚

Markdocã§ãƒã‚¹ãƒˆã•ã‚ŒãŸã‚¿ã‚°ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€ã‚¿ã‚°å†…ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã—ã¦ã€æ·±ã•ã®ãƒ¬ãƒ™ãƒ«ãŒæ˜ç¢ºã«ãªã‚‹ã‚ˆã†ã«ã™ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚ä»»æ„ã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã«ã¯ã€ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚’ç„¡åŠ¹ã«ã—ã€ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚’è€ƒæ…®ã™ã‚‹ä»–ã®ã„ãã¤ã‹ã®markdown-itè§£æãƒ«ãƒ¼ãƒ«ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã®å¤‰æ›´ã¯ã€ignoreIndentationã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã“ã¨ã§é©ç”¨ã§ãã¾ã™ã€‚

```js "ignoreIndentation: true" title="astro.config.mjs" ins={6}
  import { defineConfig } from 'astro/config';
  import markdoc from '@astrojs/markdoc';

  export default defineConfig({
    // ...
    integrations: [markdoc({ ignoreIndentation: true })],
  });
```

```md
# ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã•ã‚ŒãŸã‚¿ã‚°ã‚’æŒã¤Markdocã¸ã‚ˆã†ã“ãğŸ‘‹

# æ³¨ï¼šã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã«ã¯ã‚¹ãƒšãƒ¼ã‚¹ã¾ãŸã¯ã‚¿ãƒ–ã®ã„ãšã‚Œã‹ã‚’ä½¿ç”¨ã§ãã¾ã™

{% custom-tag %}
{% custom-tag %} ### ã‚¿ã‚°ã¯èª­ã¿ã‚„ã™ãã™ã‚‹ãŸã‚ã«ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã§ãã¾ã™

    {% another-custom-tag %}
      ãƒã‚¹ãƒˆãŒå¤šã„å ´åˆã«ã“ã‚Œã‚’è¿½è·¡ã—ã‚„ã™ããªã‚Šã¾ã™
    {% /another-custom-tag %}

{% /custom-tag %}
{% /custom-tag %}
```

## ä¾‹

* [Astro Markdocã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ](https://github.com/withastro/astro/tree/latest/examples/with-markdoc)ã¯ã€Astroãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§Markdocãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚

[astro-integration]: /ja/guides/integrations-guide/

[astro-components]: /ja/basics/astro-components/

[astro-content-collections]: /ja/guides/content-collections/

[markdoc-tags]: https://markdoc.dev/docs/tags

[markdoc-nodes]: https://markdoc.dev/docs/nodes

[markdoc-variables]: https://markdoc.dev/docs/variables
