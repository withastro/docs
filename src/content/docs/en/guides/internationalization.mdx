---
title: Internationalization (i18n) Routing
sidebar:
  label: Internationalization (i18n)
description: Learn how to use Astro’s i18n routing features to configure URLs and manage localized pages for your site.
i18nReady: true
---

import { FileTree, Aside } from '@astrojs/starlight/components';
import Since from '~/components/Since.astro';
import ReadMore from '~/components/ReadMore.astro';

Astro’s internationalization (i18n) features help you adapt your project for an international audience. This guide focuses on Astro's **i18n routing API**, which helps you generate, use, and verify the URLs that your multi-language site produces.

Astro's i18n routing helps you manage your multilingual content by providing support for configuring a default language, computing relative page URLs, and accepting preferred languages provided by your visitor's browser.

<Aside type="note">
This guide covers Astro's **routing API** for i18n. For a comprehensive solution including UI string translation, language pickers, and managing translated content with Content Collections, please see our [**Add i18n features recipe**](/en/recipes/i18n/).
</Aside>

## Routing Logic

Astro uses a [middleware](/en/guides/middleware/) to implement its routing logic. This middleware function is placed in the [first position](/en/guides/middleware/#chaining-middleware) where it awaits every `Response` coming from any additional middleware and each page route before finally executing its own logic.

This means that operations (e.g. redirects) from your own middleware and your page logic are run first, your routes are rendered, and then the i18n middleware performs its own actions such as verifying that a localized URL corresponds to a valid route.

You can also choose to [add your own i18n logic in addition to or instead of Astro's i18n middleware](#manual-routing-control-routing-manual), giving you even more control over your routes while still having access to the `astro:i18n` helper functions.

## Configure i18n routing

To enable i18n routing, specify a list of all supported languages ([`locales`](/en/reference/configuration-reference/#i18nlocales)) and a default language ([`defaultLocale`](/en/reference/configuration-reference/#i18ndefaultlocale)) in your `astro.config.mjs`. The `defaultLocale` must be one of the languages listed in `locales`.

```js title="astro.config.mjs"
import { defineConfig } from "astro/config"
export default defineConfig({
  i18n: {
    // A list of all supported languages
    locales: ["en", "fr"],
    // The default language for your site
    defaultLocale: "en",
    // Additional routing and fallback options can be configured here
  }
})
```

## Page Organization Strategies

Astro's i18n routing works with your `src/pages/` directory. How you organize your pages depends on your preferred URL structure and content management strategy.

### Strategy 1: Folder per Locale for Each Page

Create individual `/[locale]/` subfolders within `src/pages/` for each language. Place translated versions of your pages in these folders. Your folder names must match the items in `locales` exactly.

This approach is straightforward and allows for easy translation of URL slugs directly in filenames.

<FileTree>
- src
  - pages
    - index.astro
    - about.astro
    - fr
      - index.astro
      - about.astro
</FileTree>

If `prefixDefaultLocale: true` (see [routing options](#routing) below), your default language content would also reside in a locale-specific folder (e.g., `src/pages/en/about.astro`).

:::note
Localized folders do not need to be at the root of the `/pages/` folder. They can be nested, e.g., `src/pages/blog/es/my-post.astro`.
:::

### Strategy 2: Dynamic Locale Segments with `[locale]`

To avoid duplicating page files for identical structures, you can use a dynamic `[locale]` parameter in your file paths. This is useful when the page layout is the same across languages, and only the content changes.

This will allow you to generate routes for each language defined in your `locales` configuration. Inside these pages, `Astro.currentLocale` will give you the current language context.

<FileTree>
- src
  - pages
    - [locale]
      - about.astro              // Handles /en/about/ & /fr/about/
      - index.astro              // Handles /en/ & /fr/
    - index.astro                // Required root index page
</FileTree>

This setup implies `prefixDefaultLocale: true`, as all pages, including the default language, are served from a path prefixed with their locale.

In your `[locale]/about.astro` page, you would use `getStaticPaths` to define paths for each locale:

```astro title="src/pages/[locale]/about.astro"
---
export function getStaticPaths() {
  return [
    { params: { locale: "en" } }, // Default locale
    { params: { locale: "fr" } },
  ];
}

const currentLocale = Astro.currentLocale;
---

<h1>About Us ({currentLocale})</h1>
```

### Strategy 3: Optional Default Locale Prefix with `[...locale]`

If you want your default language to be served from the root (e.g., `/about/`) while other languages are prefixed (e.g., `/fr/about/`), you can use a rest parameter `[...locale]`. This is often combined with `prefixDefaultLocale: false` (the default).

The `[...locale]` parameter will be `undefined` for the default locale and the language code (e.g., `"fr"`) for other locales.

<FileTree>
- src
  - pages
    - [...locale]
      - about.astro              // Handles /about/ & /fr/about/
      - index.astro              // Handles / & /fr/
    - index.astro                // Required root index page
</FileTree>

In your `[...locale]/about.astro` page, you would use `getStaticPaths` to define paths for each locale, including `undefined` for the default:

```astro title="src/pages/[...locale]/about.astro"
---
export function getStaticPaths() {
  return [
    { params: { locale: "undefined" } }, // Default locale
    { params: { locale: "fr" } },
  ];
}

const currentLocale = Astro.currentLocale;
---

<h1>About Us ({currentLocale})</h1>
```


## Create Links

With i18n routing configured, use helper functions from the `astro:i18n` module to compute links to pages within your site. These generated links will always provide the correct, localized route.

You can also still write links manually if you are certain of the path.

```astro title="src/components/Header.astro"
---
import { getRelativeLocaleUrl } from 'astro:i18n';

// Assuming current page is in 'fr' and defaultLocale is 'en'
const homeURLFr = getRelativeLocaleUrl("fr"); // -> /fr/
const aboutURLFr = getRelativeLocaleUrl("fr", "about"); // -> /fr/about/

const homeURLEn = getRelativeLocaleUrl("en"); // -> /
const aboutURLEn = getRelativeLocaleUrl("en", "about"); // -> /about/
---
<nav>
  <a href={homeURLFr}>Home (FR)</a>
  <a href={aboutURLFr}>à propos (FR)</a>
  <a href={aboutURLEn}>About Us (EN)</a>
  <a href={getRelativeLocaleUrl(Astro.currentLocale, 'blog')}>Blog (Current Lang)</a>
</nav>
```
See the full list of helpers in the [`astro:i18n` module reference](/en/reference/modules/astro-i18n/).

## `routing`

The `routing` object within your `i18n` configuration allows fine-grained control over URL generation and behavior. Many of these options can be used together for even more customization.

### `prefixDefaultLocale`

<p><Since v="3.5.0" /></p>

This option defines whether your default language's URLs should use a language prefix (e.g. `/en/about/`).

*   **`false` (default):** URLs in your default language will **not** have a `/[locale]/` prefix (e.g., `example.com/about/`). Files for the default language should be at the root of `src/pages/` (e.g., `src/pages/about.astro`) or handled by a `[...locale]` dynamic route. All other locales will have a prefix (e.g., `example.com/fr/about/`).
*   **`true`:** All URLs, including your default language, will have a `/[locale]/` prefix (e.g., `example.com/en/about/`). All page content files, including those for your `defaultLocale`, must exist in a localized folder (e.g., `src/pages/en/about.astro`) or be handled by a `[locale]` dynamic route.

<Aside type="note">
By default, if `prefixDefaultLocale: true` is set, `redirectToDefaultLocale` also defaults to `true`, meaning `src/pages/index.astro` will redirect to the index page of your default locale (e.g., `/en/`).
You can opt out of this by setting `redirectToDefaultLocale: false` (see [below](#redirecttodefaultlocale)).
</Aside>

```js title="astro.config.mjs" ins={6-8}
import { defineConfig } from "astro/config"
export default defineConfig({
  i18n: {
    locales: ["en", "fr"],
    defaultLocale: "en",
    routing: {
        prefixDefaultLocale: false
    }
  }
})
```

The choice of `prefixDefaultLocale` influences your page organization strategy:
*   If `false`: Use Strategy 1 (default lang files at root, others in folders) or Strategy 3 (`[...locale]`).
*   If `true`: Use Strategy 1 (all lang files in respective folders) or Strategy 2 (`[locale]`).

### `redirectToDefaultLocale`

<p><Since v="4.2.0" /></p>

Configures whether the home URL (`/`) generated by `src/pages/index.astro` will redirect to `/<defaultLocale>/`.

```js title="astro.config.mjs" ins={8}
import { defineConfig } from "astro/config"
export default defineConfig({
  i18n: {
    locales: ["en", "fr"],
    defaultLocale: "en",
    routing: {
        prefixDefaultLocale: true,
        redirectToDefaultLocale: false // Serve content from src/pages/index.astro at `/`
    }
  }
})
```

### Manual Routing Control (`routing: "manual"`)

<p><Since v="4.6.0" /></p>

When `routing: "manual"` is enabled, Astro **disables** its built-in i18n middleware, allowing you to implement custom routing logic. No other `routing` options (e.g., `prefixDefaultLocale`) can be configured with `routing: "manual"`.

```js title="astro.config.mjs"
import { defineConfig } from "astro/config"
export default defineConfig({
  i18n: {
    locales: ["en", "fr"],
    defaultLocale: "en",
    routing: "manual"
  }
})
```

You are then responsible for your routing logic. Astro provides helper functions for your custom middleware: [`redirectToDefaultLocale()`](/en/reference/modules/astro-i18n/#redirecttodefaultlocale), [`notFound()`](/en/reference/modules/astro-i18n/#notfound), [`redirectToFallback()`](/en/reference/modules/astro-i18n/#redirecttofallback), [`middleware()`](/en/reference/modules/astro-i18n/#middleware) and [`requestHasLocale()`](/en/reference/modules/astro-i18n/#requesthaslocale).

```js title="src/middleware.js"
import { defineMiddleware } from "astro:middleware";
import { redirectToDefaultLocale } from "astro:i18n"; // Function available with `manual` routing
export const onRequest = defineMiddleware(async (ctx, next) => {
  // Example: Custom logic for /about, default behavior for others
  if (ctx.url.pathname.startsWith("/about")) {
    return next(); // Process /about normally
  } else {
    // For other paths, redirect to the default locale's equivalent
    return redirectToDefaultLocale(302);
  }
});
```

#### Using Astro's Middleware Manually

You can also run Astro's i18n middleware logic manually alongside your own, using the [`middleware`](/en/reference/modules/astro-i18n/#middleware) function from `astro:i18n` and the [`sequence`](/en/reference/modules/astro-middleware/#sequence) utility. This allows you to extend Astro's i18n routing rather than completely replacing it.

```js title="src/middleware.js"
import {defineMiddleware, sequence} from "astro:middleware";
import { middleware as astroI18nMiddleware } from "astro:i18n"; // Astro's own i18n routing logic

// Your custom middleware
export const userMiddleware = defineMiddleware(async (ctx, next) => {
  // `next()` could invoke Astro's i18n middleware if sequenced after it
  const response = await next();
  // Example: Custom handling for /about, even if Astro's i18n might 404 it
  if (ctx.url.pathname.startsWith("/about") && response.status === 404) {
    return new Response("Custom About Page (override)", {
      status: 200
    });
  }
  return response;
});

// Define the order of execution
export const onRequest = sequence(
  // Run Astro's i18n middleware first, with specific options
  astroI18nMiddleware({
    redirectToDefaultLocale: false,
    prefixDefaultLocale: true
  }),
  // Then run your custom middleware
  userMiddleware
);
```

## `domains`

<p><Since v="4.9.0" /></p>

This routing option allows you to customize your domains on a per-language basis for `server` rendered projects using an appropriate adapter (e.g., [`@astrojs/node`](/en/guides/integrations-guide/node/), [`@astrojs/vercel`](/en/guides/integrations-guide/vercel/)) and a `site` configured in `astro.config.mjs`.

Add `i18n.domains` to map supported `locales` to custom URLs:

```js title="astro.config.mjs" {3-7} ins={14-17}
import { defineConfig } from "astro/config"
export default defineConfig({
  site: "https://example.com", // Required for domains
  output: "server",             // Required, with no prerendered pages
  adapter: node({               // Or your preferred SSR adapter
    mode: 'standalone',
  }),
  i18n: {
    locales: ["en", "fr", "es", "ja"],
    defaultLocale: "en",
    routing: {
      prefixDefaultLocale: false // Affects non-mapped locales
    },
    domains: {
      fr: "https://fr.example.com", // French content on its own subdomain
      es: "https://example.es"      // Spanish content on a TLD
    }
  }
})
```
With this configuration:
- A page at `src/pages/fr/about.astro` will be available at `https://fr.example.com/about`.
- A page at `src/pages/es/about.astro` will be available at `https://example.es/about`.
- A page at `src/pages/ja/about.astro` will follow `prefixDefaultLocale` (false), so it will be at `https://example.com/ja/about`.
- A page for the default locale `en` (e.g. `src/pages/about.astro` or `src/pages/en/about.astro` depending on your file structure for default) will be at `https://example.com/about`.

Even if `prefixDefaultLocale` is `false`, page files for your `defaultLocale` must exist in a localized folder if other languages are mapped to domains (e.g., an `/en/` folder is required if `fr` is mapped to `fr.example.com`).

The `getAbsoluteLocaleUrl()` and `getAbsoluteLocaleUrlList()` functions will return URLs reflecting these domain mappings.

## Fallback

When a page in one language doesn't exist (e.g., not yet translated), you can display fallback content from another `locale` instead of a 404 page. This is configured per-language.

Your fallback strategy has two parts:
1.  [`i18n.fallback`](/en/reference/configuration-reference/#i18nfallback): An object mapping a locale to its fallback locale (e.g., `{ fr: "es" }` means if a French page is missing, use the Spanish version).
2.  [`i18n.routing.fallbackType`](/en/reference/configuration-reference/#i18nroutingfallbacktype) <Since v="4.15.0" />: Determines how fallback content is shown:
    *   `"redirect"` (default): The user is redirected to the URL of the fallback language's page.
    *   `"rewrite"`: The content of the fallback language's page is served at the original URL (URL doesn't change for the user).

```js title="astro.config.mjs" ins={6-8,10}
import { defineConfig } from "astro/config"
export default defineConfig({
  i18n: {
    locales: ["en", "fr", "es"],
    defaultLocale: "en",
    fallback: {
      fr: "es" // If a /fr/ page is missing, use the /es/ version
    },
    routing: {
      fallbackType: "rewrite" // Show /es/ content at the /fr/ URL
    }
  }
})
```
With this setup, if `src/pages/fr/my-page.astro` doesn't exist but `src/pages/es/my-page.astro` does, a visit to `example.com/fr/my-page/` will display the content from the Spanish page without changing the URL.

### Limitations for this feature

- The `site` option is mandatory.
- The `output` option must be set to `"server"`.
- There cannot be any individual prerendered pages.

Astro relies on the following headers in order to support the feature:
- [`X-Forwarded-Host`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-Host) and [`Host`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Host). Astro will use the former, and if not present, will try the latter.
- [`X-Forwarded-Proto`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-Proto) and [`URL#protocol`](https://developer.mozilla.org/en-US/docs/Web/API/URL/protocol) of the server request.

Make sure that your server proxy/hosting platform is able to provide this information. Failing to retrieve these headers will result in a 404 error page.

## Custom Locale Paths

Map [browser-recognized language `codes`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language#syntax) to a custom URL `path`. `codes` must follow browser syntax, while `path` defines the URL segment and corresponding folder name.

Pass an object to the `locales` array with a `path` key (URL segment and folder name) and a `codes` array (browser language codes mapped to this path).

```js title="astro.config.mjs" del={4} ins={5-8}
import { defineConfig } from "astro/config"
export default defineConfig({
  i18n: {
    locales: ["es", "en", "fr"],
    locales: ["en", {
      path: "french",
      codes: ["fr", "fr-BR", "fr-CA"]
    }, "es"],
    defaultLocale: "en",
  }
})
```
When using `astro:i18n` functions like `getRelativeLocaleUrl()`, use the `path` value (e.g., `"french"`) as the `locale` argument. Your content folder for this path would be `src/pages/french/`.

## Browser Language Detection

Astro provides properties to detect and use a visitor's preferred language, especially useful for pages rendered on demand (SSR). These combine the browser's `Accept-Language` header with your configured `locales` (strings or `codes`).

*   [`Astro.currentLocale`](/en/reference/api-reference/#currentlocale): The locale determined from the current URL. If the URL has no locale prefix, it defaults to `i18n.defaultLocale`. Available on all pages.
*   [`Astro.preferredLocale`](/en/reference/api-reference/#preferredlocale): The visitor's preferred language if it matches one of your site's supported `locales` or `codes`. `undefined` if no match. Available in SSR.
*   [`Astro.preferredLocaleList`](/en/reference/api-reference/#preferredlocalelist): An array of all locales that are both requested by the browser and supported by your site. `[]` if no overlap. If the browser sends no preference, this will be your full `i18n.locales` list. Available in SSR.

Ensure your `codes` (if using custom locale paths) match the [browser's language tag syntax](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language#syntax) for successful matching.

<ReadMore>
For implementing UI translations, language switchers, and managing translated content using Content Collections, see our [**Add i18n features recipe**](/en/recipes/i18n/).
</ReadMore>