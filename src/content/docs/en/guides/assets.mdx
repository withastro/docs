---
title: Assets (Experimental)
description: Learn how to enable experimental asset support in Astro.
i18nReady: false
---
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';


Astro provides several ways for you to use images on your site, whether they are stored locally inside your project, linked to remotely, or stored in a CMS or CDN!

## Where to store images

### `src/` vs `public/`

We recommend that local images are kept in `src/` when possible so that Astro can transform, optimize and bundle them. Files in the `/public` directory are always served or copied into the build folder as-is, with no processing. 

In Astro v3.0, your local images stored in `src/` can be used by all files in your project: `.astro`, `.md`, `.mdx`, `.mdoc` and other UI frameworks. Store your images in the `public/` folder only if you want to avoid any processing.


### `src/assets/`

We recommend storing all local images to be optimized in the `src/assets/` directory to make use of our official `~/assets` alias, although this location is optional. 

If you don't know where to put your images, or if you're building a product around Astro (e.g. a CMS), this folder ensures the greatest stability as we continue to build more asset features. But, images can be stored anywhere, including alongside your content, if you prefer.

### Remote images

You can also choose to store your images remotely, in a content management system (CMS) or digital asset management (DAM) platform. 

Astro can fetch your data remotely using APIs or display images from their full URL path. See our [CMS guides](/en/guides/cms/) for examples of integrating common services.


## Images in `.astro` files

In `.astro` files, import and use the `<Image />` component for your images. Alternatively, Astro syntax supports writing an HTML `<img>` tag directly.

```astro title="src/pages/blog/MyImages.astro"
---
import { Image } from 'astro:assets';
import localBirdImage from '~/assets/localBirdImage.png';
import localCarImage from '../../images/subfolder/localCar.jpg';
---
<Image src={localBirdImage} alt="A bird sitting on a nest of eggs."/>
<Image src={localCarImage} alt="A car driving over a bridge."/>
<Image src="/bird-public-folder.jpg" alt="A bird." width="50" height="50"/>
<Image src="https://example.com/remote-bird.jpg" alt="A bird." width="50" height="50"/>

<img src={localBirdImage.src} alt="A bird sitting on a nest of eggs.">
<img src={localCarImage.src} alt="A car driving over a bridge.">
<img src="/images/bird-in-public-folder.jpg" alt="A bird.">
<img src="https://example.com/remote-bird.jpg" alt="A bird.">
```

### `<Image />` (`astro:assets`)

Use the built-in `<Image />` Astro component to display optimized versions of your local images. Remote images and images in the `public/` folder can also be used, but will not be processed.

`<Image />` can transform a local image's dimensions, file type, and quality to produce an optimized `<img>` tag to avoid **Cumulative Layout Shift (CLS)**.

:::tip[What is Cumulative Layout Shift?]
[Cumulative Layout Shift (CLS)](https://web.dev/cls/) is a Core Web Vital metric for measuring how much content shifted on your page during loading. The `<Image />` component optimizes for CLS by automatically selecting the correct `width` and `height` for your local images.
:::

```astro title="src/components/MyComponent.astro"
---
// import the Image component and the image
import { Image } from 'astro:assets';
import myImage from "~/assets/my_image.png"; // Image is 1600x900
---

<!-- `alt` is mandatory on the Image component -->
<Image src={myImage} alt="A description of my image." />
```

```html
<!-- Output -->
<!-- Image is optimized, proper attributes are enforced -->
<img
  src="/_astro/my_image.hash.webp"
  width="1600"
  height="900"
  decoding="async"
  loading="lazy"
  alt="A description of my image."
/>
```

#### Properties

##### src (required)

The format of the `src` value of your image file depends on where your image file is located:

- **Local images in `src/`** - you must **also import the image** using a relative file path or [import alias](/en/guides/aliases/) such as the included `~/assets/` alias. Then use the import name as the `src` value:

```astro "myImportedImage" "{myImportedImage}"
---
import { Image } from 'astro:assets';
import myImportedImage from `~/assets/my-local-image.png`
---
<Image src={myImportedImage}  alt="descriptive text" />
```

- **Images in the `public/` folder** -  use the image's **file path relative to the public folder**:

```astro '"/images/my-public-image.png"'
---
import { Image } from 'astro:assets';
---
<Image 
  src="/images/my-public-image.png"
  alt="descriptive text"
  width="200"
  height="150" />
```

- **Remote images** - use the image's **full URL** as the property value:

```astro '"https://example.com/remote-image.jpg"'
---
import { Image } from 'astro:assets';
---
<Image 
  src="https://example.com/remote-image.jpg"
  alt="descriptive text"
  width="200"
  height="150" />
```

##### alt (required)

Use the required `alt` attribute to provide a string of [descriptive alt text](https://www.w3.org/WAI/tutorials/images/) for images.

If an image is merely decorative (i.e. doesn't contribute to the understanding of the page), set `alt=""` so that screen readers and other assistive technologies know to ignore the image.

##### width and height (required for `public/` and remote images)

These properties define the dimensions to use for the image.

When using local images in their original aspect ratio, the `width` and `height` can be automatically inferred from the source file and are optional.

However, both of these properties are required for remote images and images stored in your `public/` folder as Astro is unable to analyze these files to determine them. These images will not be optimized.

##### format 

You can optionally state the [image file type](https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Image_types#common_image_file_types) output to be used.

By default, the `<Image />` component will produce a `webp` file.

##### quality

`quality` is an optional property that can either be:
- a preset (`low`, `mid`, `high`, `max`) that is automatically normalized between formats.
- a number from `0` to `100` (interpreted differently between formats).

We don't know what they mean, either.

##### Additional properties

In addition to the properties above, the `<Image />` component accepts all properties accepted by the HTML `<img>` tag.

For example, you can provide a `class` to the final `<img>` element.

```astro
---
import { Image } from 'astro:assets';
import myImage from "../assets/my_image.png";
---

<!-- `alt` is mandatory on the Image component -->
<Image src={myImage} alt="" class="my-class" />
```

```astro
<!-- Output -->
<img
  src="/_astro/my_image.hash.webp"
  width="1600"
  height="900"
  decoding="async"
  loading="lazy"
  class="my-class"
  alt=""
/>
```

#### Setting Default Values

Currently, there is no way to specify default values for all `<Image />` components. Required attributes should be set on each individual component.

As an alternative, you can wrap these components in another Astro component for reuse. For example, you could create a component for your blog post images:

```astro title="src/components/BlogPostImage.astro"
---
import { Image } from 'astro:assets';

const {src, ...attrs} = Astro.props;
---
<Image src={src} {...attrs} />

<style>
  img :global(img), svg {
    margin-block: 2.5rem;
    border-radius: 0.75rem;
  }
</style>
```

### `<img>`

The [Astro template syntax](/en/core-concepts/astro-syntax/) also supports writing an `<img>` tag directly, with full control over its final output. Local images will be optimized.

It accepts all HTML `<img>` tag properties, and the only required property is `src`.

#### Local images in `src/`

Local images must be **imported from the relative path** from the existing `.astro` file, or use an [import alias](/en/guides/aliases/), such as the included `~/assets/` alias. Then, you can access the image's `src` and other properties to use in the `<img>` tag.

```astro ".src" "img"
---
// import local images
import myCat from `~/assets/local-cat.png`
import myDog from `../../images/pets/local-dog.jpg`
---
// access the image properties
<img src={myCat.src} alt="descriptive text" />
<img src={myDog.src} alt="descriptive text" />
```

Imported image assets match the following signature:

```ts
interface ImageMetadata {
  src: string;
  width: number;
  height: number;
  format: string;
}
```

#### Images in `public/`
For images located within `public/` use the image's **file path relative to the public folder** as the `src` value:

```astro '"/images/public-cat.jpg"'
<img src="/images/public-cat.jpg" alt="a sleeping cat">
```

#### Remote images

For remote images, use the image's **full URL** as the `src` value:

```astro '"https://example.com/remote-cat.jpg"'
<img
  src="https://example.com/remote-cat.jpg"
  alt="a sleeping cat"
  width="200"
  height="150"
  loading="lazy"
  class="my-class"
/>
```

### Choosing `<Image />` vs `<img>`

The `<Image />` component optimizes your image and infers width and height (of local images) based on the original aspect ratio to avoid CLS. But, it only works with certain formats and does not provide a `<picture>` element, nor does it support `srcset`.

Use the HTML `<img>` element when you cannot use the `<Image />` component, for example:
  - for unsupported image formats, like `.svg`
  - when you do not want your image optimized by Astro
  - to access and change the `src` attribute dynamically client-side


## Images in Markdown files

Use standard Markdown `![alt](src)` syntax in your `.md` files. This syntax works with Astro's Image Services API to optimize your local images.

```md
<!-- src/pages/post-1.md -->

# My Markdown Page

<!-- Local image stored in src/assets/ -->
<!-- Use a relative file path or import alias -->
![A starry night sky.](~/assets/stars.png)

<!-- Image stored in public/images/ -->
<!-- Use the file path relative to public/ -->
![A starry night sky.](/images/stars.png)

<!-- Remote image on another server -->
<!-- Use the full URL of the image -->
![Astro](https://example.com/images/remote-image.png)
```

The `<img>` tag is not supported, nor is the `<Image />` component.

If you require more control over your image attributes, we recommend using the `.mdx` file format, which allows you to include Astro's `<Image />` component or a JSX `<img />` tag in addition to the Markdown syntax. Use the [MDX integration](/en/guides/integrations-guide/mdx/) to add support for MDX to Astro.

## Images in MDX files

You can use Astro's `<Image />` component and JSX `<img />` tags in your `.mdx` files by importing both the component and your image. Use them just as they are [used in `.astro` files](#images-in-astro-files).

Additionally, there is support for [standard Markdown `![alt](src)` syntax](#images-in-markdown-files) with no import required.

```mdx title="src/pages/post-1.mdx"
---
title: My Page title
---
import { Image } from 'astro:assets';
import rocket from '~/assets/rocket.png';

# My MDX Page

// Local image stored in src/assets/
<Image src={rocket} alt="A rocketship in space."/>
<img src={rocket.src} alt="A rocketship in space." />
![A rocketship in space](~/assets/rocket.png)

// Image stored in public/images/
<Image src="/images/stars.png" alt="A starry night sky." />
<img src="/images/stars.png" alt="A starry night sky." />
![A starry night sky.](/images/stars.png)


// Remote image on another server
<Image src="https://example.com/images/remote-image.png" />
<img src="https://example.com/images/remote-image.png" />
![Astro](https://example.com/images/remote-image.png)

```

## Images in UI framework components

When adding images in a UI framework component, use the framework's own image syntax to render an image (e.g. `<img />` in JSX, `<img>` in Svelte).

Local images must **first be imported** to access their properties, just as when [using the `<img>` tag in `.astro` files](#img).

```jsx title="src/components/ReactImage.jsx"
import stars from "~/assets/stars.png"

export default function ReactImgage () {

  return (
    <img src={stars.src} alt="A starry night sky." />
  )
}
```

```svelte title="src/components/SvelteImage.svelte"
<script>
  import stars from '~/assets/stars.png'
</script>

<img src={stars.src} alt="A starry night sky." />

```

### Passing the Image component

The `<Image />` component, like any other Astro component, is unavailable to UI framework components.

But, you can pass the static content generated by `<Image />` to a framework component inside a `.astro` file as children or using a [named `<slot/>`](/en/core-concepts/framework-components/#can-i-use-astro-components-inside-my-framework-components):


```astro title="ImageWrapper.astro"
---
import ReactComponent from './ReactComponent.jsx';
import { Image } from "astro:assets"
import stars from "~/stars/docline.png";
---

<ReactComponent>
  <Image src={stars} alt="A starry night sky." />
</ReactComponent>
```

## Generating images with `getImage()`

:::caution
`getImage()` relies on server-only APIs and breaks the build when used on the client.
:::

The `getImage()` function is intended for generating images destined to be used somewhere else than directly in HTML, for example in an [API Route](/en/core-concepts/endpoints/#server-endpoints-api-routes). It also allows you to create your own custom `<Image />` component.

`getImage()` takes an options object with the same properties as the Image component (except `alt`).

```astro
---
import { getImage } from "astro:assets";
import myBackground from "../background.png"

const optimizedBackground = await getImage({src: myBackground, format: 'avif'})
---

<div style={`background-image: url(${optimizedBackground.src});`}></div>
```

It returns an object with the following properties:

```js
{
  options: {...} // Original parameters passed,
  src: "https//..." // Path to the generated image,
  attributes: {...} // Additional HTML attributes needed to render the image (width, height, style, etc..)
}
```

## Using sharp - STILL WORKS LIKE THIS??

By default, Astro uses [Squoosh](https://github.com/GoogleChromeLabs/squoosh) to transform your images. This supports all JavaScript environments.

If you're deploying to a Node environment, you may want to use [sharp](https://github.com/lovell/sharp), which offers faster performance but requires Node. To use sharp, first install it:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm install sharp
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm install sharp
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn add sharp
  ```
  </Fragment>
</PackageManagerTabs>

Then, enable Astro's sharp image service in your config:

```js title="astro.config.mjs"
import { defineConfig, sharpImageService } from "astro/config";

export default defineConfig({
	experimental: {
		assets: true,
	},
	image: {
		service: sharpImageService(),
	},
});
```

## v3 update guide stuff

Assets may cause some breaking changes when you upgrade your Astro project to v3.


### Update Config

Remove the experimental flag if you previously had it

```js title="astro.config.mjs" del={4-6}
import { defineConfig } from 'astro/config';

export default defineConfig({
  experimental: {
   assets: true
  }
});
```

When you next run Astro, it will update your `src/env.d.ts` file to configure types for you. To do this manually, replace the `astro/client` reference with `astro/client-image`:

```ts title="src/env.d.ts" del={1} ins={2}
/// <reference types="astro/client" />
/// <reference types="astro/client-image" />
```

### Move your images to `src/assets/`

Create `src/assets/`, which Astro will recognize as your new assets folder.

We recommend storing all images to be optimized in the `src/assets/` directory to make use of our official `~/assets` alias, although this location is optional. If you don't know where to put your images, or if you're building a product around Astro (e.g. a CMS), you can put your images there and we promise we won't break them! But, images can be stored anywhere, including alongside your content, if you prefer.

Your images can be used by components (`.astro`, `.mdx`, and other UI frameworks) and in Markdown files.

### Update existing `<img>` tags

Previously, importing an image would return a simple `string` with the path of the image. With the new `image` features enabled, imported image assets now match the following signature:

```ts
interface ImageMetadata {
  src: string;
  width: number;
  height: number;
  format: string;
}
```

You must update the `src` attribute of any existing `<img>` tags, and you may also update other attributes that are now available to you from the imported image.

```astro title="src/components/MyComponent.astro" ".src" ".width" ".height" del={2,5} ins={3,6}
---
import rocket from '../images/rocket.svg';
import rocket from '../assets/images/rocket.svg'
---
<img src={rocket} width="250" height="250" alt="A rocketship in space." />
<img src={rocket.src} width={rocket.width} height={rocket.height} alt="A rocketship in space." />
```

### Update your Markdown, MDX, and Markdoc files

Relative images can now be referenced in Markdown, MDX, and Markdoc files. These will automatically be optimized and hashed by Astro's build process.

This allows you to move your images from the `public/` directory to the new, reserved `src/assets/` directory or move them near your Markdown, MDX, or Markdoc files. (See the URL path of these built images in the example below.)

Your existing images in `public/` and remote images are still valid but are not automatically optimized by Astro's build process.

```md title="src/pages/posts/post-1.md" "/_astro" ".hash" "../../assets/"
# My Markdown Page

<!-- Local image stored at src/assets/stars.png -->
![A starry night sky.](../../assets/stars.png)
<img src="/_astro/stars.hash.png" alt="A starry night sky.">

<!-- Image stored at public/images/stars.png -->
![A starry night sky.](/images/stars.png)
<img src="/images/stars.png" alt="A starry night sky.">

<!-- Remote image on another server -->
![Astro logo](https://docs.astro.build/assets/logomark-light.png)
<img src="https://docs.astro.build/assets/logomark-light.png" width="25" alt="Astro logo">
```

### Remove `@astrojs/image`

**Built-in asset support is incompatible with the `@astrojs/image` integration.**

:::note[cropping images]
The Assets API does not support image cropping. The current behaviour is to resize images to fit.

Use the `@astrojs/image` integration if you need support for cropping images. Alternatively, you can use the [`object-fit` CSS property](https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit) to achieve a similar result. 
:::

To avoid errors in your project, complete the following steps:

1. Remove the `@astrojs/image` integration.

    You must [remove the integration](/en/guides/integrations-guide/#removing-an-integration) by uninstalling and then removing it from your `astro.config.mjs` file.

2. Migrate any existing `<Image />` components.

    Change all `import` statements from `@astrojs/image/components` to `astro:assets` to use the new built-in `<Image />` component.

    Remove any component attributes that are not [currently supported image asset properties](#properties).

    For example `aspectRatio` is no longer supported, as it is now automatically inferred from the `width` and `height` attributes.

      ```astro title="src/components/MyComponent.astro" del= {2,11} ins={3}
      ---
      import { Image } from '@astrojs/image/components';
      import { Image } from 'astro:assets'
      import localImage from "../assets/logo.png";
      const localAlt = "The Astro Logo";
      ---

      <Image
        src={localImage}
        width={300}
        aspectRatio="16:9"
        alt={localAlt}
      />
      ```


3. Remove any existing `<Picture />` components

    Currently, the built-in assets feature does not include a `<Picture />` component.

    Instead, you can use the HTML image attributes `srcset` and `sizes` or the `<picture>` tag [for art direction or to create responsive images](https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images#art_direction).


### Update content collections schemas

You can now declare images in your frontmatter as their paths relative to the current folder.

```md title="src/content/blog/my-post.md"
---
title: "My first blog post"
cover: "./firstpostcover.jpeg" # will resolve to "src/content/blog/firstblogcover.jpeg"
coverAlt: "A photograph of a sunset behind a mountain range"
---

This is a blog post
```

A new `image` helper for content collections lets you validate the image metadata using Zod.

```ts title="src/content/config.ts"
import { defineCollection, z } from "astro:content";

const blogCollection = defineCollection({
	schema: ({ image }) => z.object({
		title: z.string(),
		cover: image().refine((img) => img.width >= 1080, {
			message: "Cover image must be at least 1080 pixels wide!",
		}),
		coverAlt: z.string(),
	}),
});

export const collections = {
	blog: blogCollection,
};
```

The image will be imported and transformed into metadata that matches the signature of imported images, allowing you to pass it as a `src` to `<Image/>` or `getImage()`. A blog index page might render the cover photo and title of each blog post:

```astro title="src/pages/blog.astro" {10}
---
import { Image } from "astro:assets";
import { getCollection } from "astro:content";
const allBlogPosts = await getCollection("blog");
---

{
	allBlogPosts.map((post) => (
		<div>
			<Image src={post.data.cover} alt={post.data.coverAlt} />
			<h2>
				<a href={"/blog/" + post.slug}>{post.data.title}</a>
			</h2>
		</div>
	))
}
```

## Add reference content somewhere??

### `astro:assets` module

Enabling asset support allows you to access the `astro:assets` module. This module exposes the following features:

- `<Image />` (available in `.astro` and `.mdx` files)
- `getImage()` (available in `.astro`, `.mdx`, `.ts`, `.js` on the server)

:::caution
`<Image />` is an Astro component and [can't be used in framework components](/en/core-concepts/framework-components/#can-i-use-astro-components-inside-my-framework-components).

`getImage()` relies on server-only APIs and breaks the build when used on the client.
:::

### `<Image />` (`astro:assets`)

The `<Image />` component generates an `<img>` tag.

This component can transform an image's dimensions, file type, and quality to produce an optimized image. The resulting `<img>` tag will include the correct `width` and `height` attributes to avoid Cumulative Layout Shift **(CLS)**.

:::tip[What is Cumulative Layout Shift?]
CLS is a score that reflects how much content shifted on your page during loading. The ideal number for CLS is as close to zero as possible, which the `Image` component enforces by automatically selecting the correct `width` and `height` for local images.
:::

Import images from a **relative file path** or [import alias](/en/guides/aliases/) in any component file and then use the import as the `<Image />` component's `src` attribute.

```astro
---
import { Image } from 'astro:assets';
import myImage from "../assets/my_image.png"; // Image is 1600x900
---

<!-- `alt` is mandatory on the Image component -->
<Image src={myImage} alt="A description of my image." />
```

```astro
<!-- Output -->
<!-- Image is optimized, proper attributes are enforced -->
<img
  src="/_astro/my_image.hash.webp"
  width="1600"
  height="900"
  decoding="async"
  loading="lazy"
  alt="A description of my image."
/>
```

#### Properties

##### width and height

These properties define the dimensions to use for the image.

When using local images in their original aspect ratio, the `width` and `height` can be automatically inferred from the source file and are optional. However, both of these properties are required for remote images.

##### format

You can optionally state the [image file type](https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Image_types#common_image_file_types) to be used. The default file format used is `webp`.

##### quality

`quality` is an optional property that can either be:
- a preset (`low`, `mid`, `high`, `max`) that is automatically normalized between formats.
- a number from `0` to `100` (interpreted differently between formats).

##### alt (required)

Use the `alt` attribute to provide [descriptive alt text](https://www.w3.org/WAI/tutorials/images/) for images.

This attribute is required for the `<Image />` component. This component will throw an error if no alt text is provided.

If the image is merely decorative (i.e. doesn't contribute to the understanding of the page), set `alt=""` so that screen readers know to ignore the image.

##### Additional properties

In addition to the properties above, the `<Image />` component accepts all properties accepted by the HTML `<img>` tag.

For example, you can provide a `class` to the final `img` element.

```astro
---
import { Image } from 'astro:assets';
import myImage from "../assets/my_image.png";
---

<!-- `alt` is mandatory on the Image component -->
<Image src={myImage} alt="" class="my-class" />
```

```astro
<!-- Output -->
<img
  src="/_astro/my_image.hash.webp"
  width="1600"
  height="900"
  decoding="async"
  loading="lazy"
  class="my-class"
  alt=""
/>
```

### `getImage()` (`astro:assets`)

This function is intended for generating images destined to be used somewhere else than directly in HTML, for example in an [API Route](/en/core-concepts/endpoints/#server-endpoints-api-routes). It also allows you to create your own custom `<Image />` component.

`getImage()` takes an options object with the same properties as the Image component (except `alt`).

```astro
---
import { getImage } from "astro:assets";
import myBackground from "../background.png"

const optimizedBackground = await getImage({src: myBackground, format: 'avif'})
---

<div style={`background-image: url(${optimizedBackground.src});`}></div>
```

It returns an object with the following properties:

```js
{
  options: {...} // Original parameters passed,
  src: "https//..." // Path to the generated image,
  attributes: {...} // Additional HTML attributes needed to render the image (width, height, style, etc..)
}
```
