---
title: Deploy your Astro Site to Zerops
description: How to deploy your Astro site to the web using Zerops.
type: deploy
i18nReady: true
---
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'

[Zerops](https://zerops.io/) is a dev-first cloud platform that can be used to deploy an SSR Astro site.

This guide will walk you through deploying an Astro project using the Node.js adapter to Zerops.

## Prerequisites

- **An Astro project using the [`@astrojs/node` SSR adapter](/en/guides/integrations-guide/node/)** 
- **A Zerops account** - If you donâ€™t already have one, you can [create a Zerops account](https://zerops.io/) for free.

:::tip[Start from a template]
The [Zerops x Astro - Node.js example app](https://github.com/zeropsio/recipe-astro-nodejs) can be imported directly into your [Zerops Dashboard](https://app.zerops.io/dashboard/projects), and deployed in one click!

```yaml
project:
  name: astro
services:
  - hostname: astronode
    type: nodejs@20
    buildFromGit: https://github.com/zeropsio/recipe-astro-nodejs
    ports:
      - port: 4321
        httpSupport: true
    enableSubdomainAccess: true
    minContainers: 1
```
:::

## Creating a Zerops Node.js project

You can either add project and your first Node.js service through the [project add](https://app.zerops.io/dashboard/project-add) wizard in Zerops app, or quickly by importing it using a yaml structure.

```yaml
project:
  name: my-astro-sites
services:
  - hostname: hellothere
    type: nodejs@20
    ports:
      - port: 4321
        httpSupport: true
    minContainers: 1
```

This will setup a project called `my-astro-sites`, with a Node.js v20 service called `hellothere`, which will be ready for you to deploy your Astro app into. One Zerops project can contain many Astro apps.

### Setting Up Node.js SSR in your app
Zerops is using [`@astrojs/node`](/en/guides/integrations-guide/node/) package to run the app. Add it to your deps, if you haven't already, and modify your Astro config to utilize it.

Here are the necessary lines in your `astro.config.mjs` file:
```js title="astro.config.mjs"
  import { defineConfig } from 'astro/config';
  import node from "@astrojs/node";

  export default defineConfig({
    output: 'server',
    adapter: node({
      mode: "standalone"
    }),
  });
```

## Building and deploying your app to Zerops

Now that you you've set up your app and prepared a Node.js service on Zerops, we can trigger the build and deploy pipeline on Zerops.

Start by describing how to build and run your app through `zerops.yml` file placed at the root of your codebase. `setup:` part should match the hostname your chose for your service, in case of our example - `hellothere`.

  <PackageManagerTabs>
    <Fragment slot="npm">
    ```yaml
      zerops:
        - setup: hellothere
          build:
            base: nodejs@20
            buildCommands:
              - npm i
              - npm run build
            deploy:
              - dist
              - package.json
              - node_modules
            cache:
              - node_modules
              - package-lock.json
          run:
            start: node dist/server/entry.mjs
          envVariables:
            HOST: 0.0.0.0
            NODE_ENV: production
    ```
    </Fragment>
    <Fragment slot="pnpm">
    ```yaml
      zerops:
        - setup: hellothere
          build:
            base: nodejs@20
            buildCommands:
              - pnpm i
              - pnpm run build
            deploy:
              - dist
              - package.json
              - node_modules
            cache:
              - node_modules
              - pnpm-lock.json
          run:
            start: node dist/server/entry.mjs
          envVariables:
            HOST: 0.0.0.0
            NODE_ENV: production
    ```
    </Fragment>
    <Fragment slot="yarn">
    ```yaml
      zerops:
        - setup: astronode
          build:
            base: nodejs@20
            buildCommands:
              - yarn
              - yarn build
            deploy:
              - dist
              - package.json
              - node_modules
            cache:
              - node_modules
              - yarn.lock
          run:
            start: node dist/server/entry.mjs
          envVariables:
            HOST: 0.0.0.0
            NODE_ENV: production
    ```
    </Fragment>
  </PackageManagerTabs>

### Trigger the pipeline by connecting the service to GitHub / GitLab
To setup continuous deployment on either push to branch or a new release, go to your Node.js service detail and connect your Zerops service with either GitHub or GitLab repository.


### Trigger the pipeline Using Zerops CLI (zcli)

1. Install Zerops CLI
```shell
# To download the zcli binary directly,
# use https://github.com/zeropsio/zcli/releases
npm i -g @zerops/zcli
```

2. Open [`Settigs > Access Token Management`](https://app.zerops.io/settings/token-management) in Zerops app, generate a new access token

3. Login
```shell
zcli login <token>
```

4. Navigate to your apps root (where zerops.yml is also placed)
```shell
zcli push
```

## Resources

- [Deploying Astro to Zerops in 3 mins](https://medium.com/@arjun.js/how-to-deploy-astro-to-zerops-4230816a62b4)
- [Detailed guide to create a Node.js service](https://docs.zerops.io/nodejs/how-to/create)
- [Managing Environment Variables](https://docs.zerops.io/nodejs/how-to/env-variables)
- [Updating Internal Ports](https://docs.zerops.io/nodejs/how-to/ports)
