---
title: Add i18n features
description: Use dynamic routing, content collections, and Astro's i18n capabilities to add internationalization support to your Astro site.
type: recipe
i18nReady: true
---
import { FileTree } from '@astrojs/starlight/components';
import ReadMore from '~/components/ReadMore.astro';
import { Steps } from '@astrojs/starlight/components';
import StaticSsrTabs from '~/components/tabs/StaticSsrTabs.astro';
import { Aside } from '@astrojs/starlight/components';

In this recipe, you will learn how to build a comprehensive internationalization (i18n) setup for your Astro site. This includes managing translated content with Content Collections, translating UI strings, and implementing a language switcher. This recipe shows how to leverage Astro's built-in i18n features, such as `Astro.currentLocale` for detecting the current language and `astro:i18n` helper functions for generating localized URLs.

:::tip[Prerequisites]
For this recipe, it's highly recommended to have your basic i18n settings (at least `locales` and `defaultLocale`) configured in your `astro.config.mjs` file. This allows `Astro.currentLocale` and `astro:i18n` helpers to function correctly.

See the main [Internationalization (i18n) Routing guide](/en/guides/internationalization/) to learn about these core features. This recipe builds upon them to provide a more complete solution.
:::

This example serves each language at its own subpath by default, e.g. `example.com/en/blog` for English and `example.com/fr/blog` for French, if your `i18n.routing.prefixDefaultLocale` Astro config is `true`.

If you prefer the default language to not be visible in the URL (e.g., `example.com/blog` for English if it's the default), there are [instructions to hide the default language prefix](/en/recipes/i18n/#hide-default-language-in-the-url) below. This section will show you how to create utility functions that respect Astro's `prefixDefaultLocale: false` behavior.

<ReadMore>See the [resources section](#resources) for external links to related topics such as right-to-left (RTL) styling and choosing language tags.</ReadMore>

## Recipe

### Set up pages for each language

This recipe assumes a page structure where content for each language resides in its own directory within `src/pages/`, or you use dynamic routes like `src/pages/[lang]/...`. Astro's i18n routing, configured in `astro.config.mjs`, will use these directories based on your `locales` and `defaultLocale` settings.

<Steps>
1. If you are creating pages directly, organize your `src/pages/` directory. For example, if `en` is your `defaultLocale` and `prefixDefaultLocale: false` (Astro's i18n default), your structure might be:

    <FileTree>
    - src/
      - pages/
        - about.astro
        - index.astro
        - fr/
          - about.astro
          - index.astro
    </FileTree>

    If `prefixDefaultLocale: true`, all languages, including the default, would be in a subfolder:
    <FileTree>
    - src/
      - pages/
        - **en/**
          - about.astro
          - index.astro
        - **fr/**
          - about.astro
          - index.astro
        - index.astro
    </FileTree>
</Steps>

### Use collections for translated content

<Steps>
1. Create a folder in `src/content/` for each type of content and add subdirectories for each supported language. For example, for English and French blog posts:

    <FileTree>
    - src/
      - content/
          - blog/
            - **en/** Blog posts in English
                - post-1.md
                - post-2.md
            - **fr/** Blog posts in French
              - post-1.md
              - post-2.md
    </FileTree>

2. Create a `src/content.config.ts` file and export a collection for each type of content.

    ```ts
    //src/content.config.ts
    import { defineCollection, z } from "astro:content";

    import { glob } from "astro/loaders";

    const blogCollection = defineCollection({
      loader: glob({ pattern: "**/*.md", base: ".src/content/blog" }),
      schema: z.object({
        title: z.string(),
        author: z.string(),
        date: z.date(),
      }),
    });

    export const collections = {
      blog: blogCollection,
    };
    ```
    
    <ReadMore>Read more about [Content Collections](/en/guides/content-collections/).</ReadMore>

3. Use [dynamic routes](/en/guides/routing/#dynamic-routes) to fetch and render content. The `lang` parameter will be automatically available via `Astro.params.lang` if your route is `src/pages/[lang]/blog/[...slug].astro`. This `lang` parameter will also match `Astro.currentLocale`.

    <StaticSsrTabs>
      <Fragment slot="static">
        In static rendering mode, use `getStaticPaths`:
        ```astro
        //src/pages/[lang]/blog/[...slug].astro
        ---
        import { getCollection, render } from "astro:content";

        export async function getStaticPaths() {
          const pages = await getCollection("blog");

          const paths = pages.map((page) => {
            const [lang, ...slugParts] = page.id.split("/");
            const slug = slugParts.join("/").replace(/\.md$/, "");
            return {
              params: { lang, slug },
              props: page,
            };
          });

          return paths;
        }

        const page = Astro.props;
        const formattedDate = page.data.date.toLocaleString(Astro.currentLocale);
        const { Content } = await render(page);
        ---

        <h1>{page.data.title}</h1>
        <p>by {page.data.author} - {formattedDate}</p>
        <Content />
        ```
      </Fragment>

      <Fragment slot="ssr">
        In [SSR mode](/en/guides/on-demand-rendering/), fetch the requested entry:
        ```astro
        //src/pages/[lang]/blog/[...slug].astro
        ---
        import { getEntry, render } from 'astro:content';

        // Astro.currentLocale will also be available and match Astro.params.lang here
        const { lang, slug } = Astro.params;
        const page = await getEntry('blog', `${lang}/${slug}`);

        if (!page) {
          // Consider using Astro's i18n notFound() or redirectToFallback() for more robust handling
          return Astro.redirect('/404'); 
        }

        const formattedDate = page.data.date.toLocaleString(Astro.currentLocale ?? lang);
        const { Content } = await render(page);
        ---
        <h1>{page.data.title}</h1>
        <p>by {page.data.author} • {formattedDate}</p>
        <Content/>
        ```
      </Fragment>
    </StaticSsrTabs>

    <ReadMore>Read more about [dynamic routing](/en/guides/routing/#dynamic-routes).</ReadMore>

    :::tip[Date formatting]
    The example above uses the built-in [`toLocaleString()` date-formatting method](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleString) to create a human-readable string from the frontmatter date.
    This ensures the date and time are formatted to match the user’s language.
    :::
</Steps>

### Translate UI strings

Create dictionaries for UI element labels.

<Steps>
1. Create `src/i18n/ui.ts` to store translation strings. `defaultLang` should match `i18n.defaultLocale` in `astro.config.mjs`.

    ```ts
    // src/i18n/ui.ts
    export const languages = {
      en: 'English',
      fr: 'Français',
    };

    export const defaultLang = 'en';
    
    export const ui = {
      en: {
        'nav.home': 'Home',
        'nav.about': 'About',
        'nav.twitter': 'Twitter',
      },
      fr: {
        'nav.home': 'Accueil',
        'nav.about': 'À propos',
      },
    } as const;
    ```
    
2. Create a helper function in `src/i18n/utils.ts` to get translation strings.

    ```ts
    // src/i18n/utils.ts
    import { ui, defaultLang } from "./ui";

    export type UiLang = keyof typeof ui;
    export type UiKey =
      | keyof (typeof ui)[UiLang]
      | keyof (typeof ui)[typeof defaultLang];

    export function useTranslations(lang: UiLang | undefined) {
      const effectiveLang = lang && lang in ui ? lang : defaultLang;
      return function t(key: UiKey): string {
        return (
          (ui[effectiveLang] as Record<UiKey, string>)[key] || ui[defaultLang][key]
        );
      };
    }
    ```


    
3. Import and use the helper. `Astro.currentLocale` provides the current language.

    ```astro 
    ---
    // src/components/Nav.astro
    ---
    import { useTranslations } from "../i18n/utils";
    import { getRelativeLocaleUrl } from "astro:i18n";

    const lang =
      (Astro.currentLocale as keyof typeof import("../i18n/ui").ui) ||
      (await import("../i18n/ui")).defaultLang;
    const t = useTranslations(lang);

    const homeLink = getRelativeLocaleUrl(lang, "");
    const aboutLink = getRelativeLocaleUrl(lang, "about");
    ---

    <ul>
      <li>
        <a href={homeLink}>
          {t("nav.home")}
        </a>
      </li>
      <li>
        <a href={aboutLink}>
          {t("nav.about")}
        </a>
      </li>
      <li>
        <a href="https://twitter.com/astrodotbuild">
          {t("nav.twitter")}
        </a>
      </li>
    </ul>
    ```

4. Ensure each page has a `lang` attribute on the `<html>` element. `Astro.currentLocale` is perfect for this.

    ```astro
    ---
    // src/layouts/Layout.astro
    ---
    import Nav from "../components/Nav.astro";

    const lang = Astro.currentLocale || (await import("../i18n/ui")).defaultLang;
    ---

    <!doctype html>
    <html lang={lang}>
      <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="generator" content={Astro.generator} />
        <title>Astro i18n Recipe</title>
      </head>
      <body>
        <Nav lang={lang} />
        <slot />
      </body>
    </html>
    ```

    Apply this layout to your pages:
    ```astro
    ---
    // src/pages/en/about.astro (or src/pages/about.astro if 'en' is default & no prefix)
    import Layout from '../../layouts/Layout.astro'; // Adjust path as needed
    ---
    <Layout>
        <h1>About me</h1>
        ...
    </Layout>
    ```

    <Aside type="note" title="Did you notice?">
    The `nav.twitter` string was not translated to French. The `useTranslations` helper returns the default language’s value if a key is not translated. French users will also see “Twitter”.
    </Aside>
</Steps>

### Let users switch between languages

Create links for users to select their preferred language.

<Steps>
1. Create a `<LanguagePicker />` component. Use `getRelativeLocaleUrl(targetLang, currentPath)` from `astro:i18n` to generate correct links to the same page in other languages.

    ```astro
    ---
    // src/components/LanguagePicker.astro
    import { languages } from "../i18n/ui";
    import { getRelativeLocaleUrl } from "astro:i18n";

    const rawPath = Astro.url.pathname;
    const currentLocale = Astro.currentLocale;
    const currentPath = currentLocale
      ? rawPath.replace(new RegExp(`^/${currentLocale}`), "") || "/"
      : rawPath;
    ---

    <ul>
      {
        Object.entries(languages).map(([lang, label]) => {
          const url = getRelativeLocaleUrl(lang, currentPath);
          return (
            <li>
              <a href={url}>{label}</a>
            </li>
          );
        })
      }
    </ul>
    ```

2. Add `<LanguagePicker />` to your site, e.g., in a shared layout:

    ```astro
    // src/layouts/Layout.astro
    ---
    import LanguagePicker from "../components/LanguagePicker.astro";

    const lang = Astro.currentLocale || (await import("../i18n/ui")).defaultLang;
    ---

    <!doctype html>
    <html lang={lang}>
      <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="generator" content={Astro.generator} />
        <title>Astro i18n Recipe</title>
      </head>
      <body>
        <LanguagePicker />
        <slot />
      </body>
    </html>
    ```
</Steps>

### Hide default language in the URL

This section shows how to manage URL paths if your `astro.config.mjs` has `i18n.routing.prefixDefaultLocale: false` (Astro's default). All of the code above automatically works for this case. You just need to move and modify a few things to complete the transition to this configuration.

<Steps>
1. Set `prefixDefaultLocaleprefixDefaultLocale` to `false`.

    ```js title="astro.config.mjs"
    i18n: {
      locales: ["en", "fr"],
      defaultLocale: "en",
      routing: { prefixDefaultLocale: false },
    },
    ```

2. Move the pages from the folder that represent the default language you put in the config to the root of your `src/pages/` directory and delete the folder of the default language.

    <FileTree>
    - src/
      - pages/
        - about.astro
        - index.astro
        - fr/
          - about.astro
          - index.astro
    </FileTree>

3. Update the imports in the moved pages

    ```astro
    ---
    // src/pages/about.astro
    import Layout from "../layouts/Layout.astro"; // Adjust path as needed
    ---

    <Layout>
      <h1>Hi there</h1>
    </Layout>
    ```

</Steps>

### Translating URLs (Slugs)

TODO

### Dynamic Language Routing with [locale]

TODO

## Resources
- [Choosing a Language Tag](https://www.w3.org/International/questions/qa-choosing-language-tags)
- [Right-to-left (RTL) Styling 101](https://rtlstyling.com/)

## Community libraries
- [astro-i18next](https://github.com/yassinedoghri/astro-i18next) — An Astro integration for i18next including some utility components.
- [astro-i18n](https://github.com/alexandre-fernandez/astro-i18n) — A TypeScript-first internationalization library for Astro.
- [astro-i18n-aut](https://github.com/jlarmstrongiv/astro-i18n-aut) — An Astro integration for i18n that supports the `defaultLocale` without page generation. The integration is adapter agnostic and UI framework agnostic.
- [astro-react-i18next](https://github.com/jeremyxgo/astro-react-i18next) — An Astro integration that seamlessly enables the use of i18next and react-i18next in React components on Astro websites.
- [paraglide](https://inlang.com/c/astro) — A fully type-safe i18n library specifically designed for partial hydration patterns like Astro islands.
- [astro-loader-i18n](https://github.com/openscript/astro-loader-i18n) — An Astro glob content loader for i18n files and folder structures supporting the translation of routes.
