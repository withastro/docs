---
title: Experimental Markdown heading ID compatibility
sidebar:
  label: Markdown heading ID compatibility
---

import Since from '~/components/Since.astro'

<p>

**Type:** `boolean`<br />
**Default:** `false`<br />
<Since v="5.5.0" />
</p>

The `experimental.headingIdCompat` flag makes the IDs generated by Astro for Markdown headings compatible with common platforms like GitHub and npm.

To enable heading ID compatibility, set the flag to `true` in your Astro configuration:

```js title="astro.config.mjs" ins={4-6}
import { defineConfig } from "astro/config"

export default defineConfig({
  experimental: {
    headingIdCompat: true,
  }
})
```

## Background

Astro uses the popular [`github-slugger`](https://github.com/Flet/github-slugger) package to convert the text content of a Markdown heading to a slug to use in IDs.
However, Astro additionally strips a trailing hyphen from the end of IDs for headings ending in special characters by default.
This means that Astroâ€™s generated IDs can be different from those generated by many other common platforms.

For example, the following Markdown heading:

```md
## `<Picture />`
```

will generate the following HTML in Astro by default:

```html "picture"
<h2 id="picture"><code>&lt;Picture /&gt;</h2>
```

but the same Markdown will generate the following HTML on platforms such as GitHub:

```html "picture-"
<h2 id="picture-"><code>&lt;Picture /&gt;</h2>
```

In a future major version, Astro will switch to use the compatible ID style by default, but you can opt in to the future behavior early using the `experimental.headingIdCompat` flag.

## Usage with `rehypeHeadingIds` plugin

If you are [using the `rehypeHeadingIds` plugin](/en/guides/markdown-content/#heading-ids-and-plugins) directly, opt in to the compatibility mode when passing the plugin in your Astro configuration:


```js title="astro.config.mjs" {8}
import { defineConfig } from 'astro/config';
import { rehypeHeadingIds } from '@astrojs/markdown-remark';
import { otherPluginThatReliesOnHeadingIDs } from 'some/plugin/source';

export default defineConfig({
  markdown: {
    rehypePlugins: [
      [rehypeHeadingIds, { headingIdCompat: true }],
      otherPluginThatReliesOnHeadingIDs,
    ],
  },
});
```
