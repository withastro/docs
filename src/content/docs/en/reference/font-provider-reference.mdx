---
title: Astro Font Provider API
sidebar:
  label: Font Provider API
i18nReady: true
---
import Since from '~/components/Since.astro';
import ReadMore from '~/components/ReadMore.astro';
import { Tabs, TabItem } from '@astrojs/starlight/components';

<p>
<Since v="6.0.0" />
</p>

The [Fonts API](/en/guides/fonts/) allows you to access fonts in a unified way. Each family requires the use of an Astro Font Provider, which either downloads font files from a remote service or loads local font files from disk.

## Built-in providers

Astro exports built-in font providers from `astro/config`:

```js
import { fontProviders } from 'astro/config'
```

To use a built-in font provider, set [`provider`](/en/reference/configuration-reference/#fontprovider) with the appropriate value for your chosen font provider:

- [Adobe](#adobe)
- [Bunny](#bunny)
- [Fontshare](#fontshare)
- [Fontsource](#fontsource)
- [Google](#google)
- [Google Icons](#google-icons)
- [Local](#local)

### Adobe

Retrieves fonts from [Adobe](https://fonts.adobe.com/):

```js
provider: fontProviders.adobe({ id: "your-id" })
```

Pass the Adobe font provider an ID loaded as an [environment variable in your Astro config file](/en/guides/environment-variables/#in-the-astro-config-file).

### Bunny

Retrieves fonts from [Bunny](https://fonts.bunny.net/):

```js
provider: fontProviders.bunny()
```

### Fontshare

Retrieves fonts from [Fontshare](https://www.fontshare.com/):

```js
provider: fontProviders.fontshare()
```

### Fontsource

Retrieves fonts from [Fontsource](https://fontsource.org/):

```js
provider: fontProviders.fontsource()
```

### Google

Retrieves fonts from [Google](https://fonts.google.com/):

```js
provider: fontProviders.google()
```

The provider comes with the following family-specific options that can be added in the [`font.options` object](/en/reference/configuration-reference/#fontoptions).

#### `experimental.glyphs`

<p>

**Type:** `string[]`
</p>

Allows specifying a list of glyphs to be included in the font for each font family. This can reduce the size of the font file:

```js
{
  // ...
  provider: fontProviders.google(),
  options: {
    experimental: {
      glyphs: ["a"]
    }
  }
}
```

#### `experimental.variableAxis`

<p>

**Type:** `Partial<Record<VariableAxis, ([string, string] | string)[]>>`
</p>

Allows setting variable axis configuration:

```js
{
  // ...
  provider: fontProviders.google(),
  options: {
    experimental: {
      variableAxis: {
        slnt: [["-15", "0"]],
        CASL: [["0", "1"]],
        CRSV: ["1"],
        MONO: [["0", "1"]],
      }
    }
  }
}
```

### Google Icons

Retrieves fonts from [Google Icons](https://fonts.google.com/icons):

```js
provider: fontProviders.googleicons()
```

The provider comes with the following family-specific options that can be added in the [`font.options` object](/en/reference/configuration-reference/#fontoptions).

#### `experimental.glyphs`

<p>

**Type:** `string[]`
</p>

When resolving the new Material Symbols icons, allows specifying a list of glyphs to be included in the font for each font family. This can reduce the size of the font file:

```js
{
  // ...
  provider: fontProviders.googleicons(),
  options: {
    experimental: {
      glyphs: ["a"]
    }
  }
}
```

### Local

Retrieves fonts from disk:

```js
provider: fontProviders.local()
```

The provider requires that [`variants`](#variants) be defined in the [`font.options` object](/en/reference/configuration-reference/#fontoptions).

#### `variants`

<p>

**Type:** `LocalFontFamily["variants"]`
</p>

The `options.variants` property is required. Each variant represents a [`@font-face` declaration](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/) and requires a [`src`](#src).

Additionally, [some other properties](#other-properties) may be specified within each variant.

```js title="astro.config.mjs"
import { defineConfig, fontProviders } from "astro/config";

export default defineConfig({
  fonts: [{
    provider: fontProviders.local(),
    name: "Custom",
    cssVariable: "--font-custom",
    options: {
      variants: [
        {
          weight: 400,
          style: "normal",
          src: ["./src/assets/fonts/custom-400.woff2"]
        },
        {
          weight: 700,
          style: "normal",
          src: ["./src/assets/fonts/custom-700.woff2"]
        }
        // ...
      ]
    }
  }]
});
```

##### `weight`

<p>

**Type:** `number | string`<br />
**Default:** `undefined`
</p>

A [font weight](https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight):

```js
weight: 200
```

If the associated font is a [variable font](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_fonts/Variable_fonts_guide), you can specify a range of weights:

```js
weight: "100 900"
```

When the value is not set, by default Astro will try to infer the value based on the first [`source`](#src).

##### `style`

<p>

**Type:** `"normal" | "italic" | "oblique"`<br />
**Default:** `undefined`
</p>

A [font style](https://developer.mozilla.org/en-US/docs/Web/CSS/font-style):

```js
style: "normal"
```

When the value is not set, by default Astro will try to infer the value based on the first [`source`](#src).

##### `src`

<p>

**Type:** `(string | URL | { url: string | URL; tech?: string })[]`
</p>

Font [sources](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/src). It can be a path relative to the root, a package import or a URL. URLs are particularly useful if you inject local fonts through an integration:

<Tabs>

<TabItem label="Relative path">

```js
src: ["./src/assets/fonts/MyFont.woff2", "./src/assets/fonts/MyFont.woff"]
```

</TabItem>

<TabItem label="URL">

```js
src: [new URL("./custom.ttf", import.meta.url)]
```

</TabItem>

<TabItem label="Package import">

```js
src: ["my-package/SomeFont.ttf"]
```

</TabItem>

</Tabs>

:::caution
We recommend not putting your font files in [the `public/` directory](/en/reference/configuration-reference/#publicdir). Since Astro will copy these files into that folder at build time, this will result in duplicated files in your build output. Instead, store them somewhere else in your project, such as in [`src/`](/en/reference/configuration-reference/#srcdir).
:::

You can also specify a [tech](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/src#tech) by providing objects:

```js
src: [{ url:"./src/assets/fonts/MyFont.woff2", tech: "color-COLRv1" }]
```

##### Other properties

The following options from font families are also available for local font families within variants:

- [display](/en/reference/configuration-reference/#fontdisplay)
- [unicodeRange](/en/reference/configuration-reference/#fontunicoderange)
- [stretch](/en/reference/configuration-reference/#fontstretch)
- [featureSettings](/en/reference/configuration-reference/#fontfeaturesettings)
- [variationSettings](/en/reference/configuration-reference/#fontvariationsettings)

```js title="astro.config.mjs" {14}
import { defineConfig, fontProviders } from "astro/config";

export default defineConfig({
  fonts: [{
    provider: fontProviders.local(),
    name: "Custom",
    cssVariable: "--font-custom",
    options: {
      variants: [
        {
          weight: 400,
          style: "normal",
          src: ["./src/assets/fonts/custom-400.woff2"],
          display: "block"
        }
      ]
    }
  }]
});
```

## Building a font provider

If you do not wish to use one of the [built-in providers](#built-in-providers) (e.g. you want to use a [3rd-party unifont provider](#supporting-a-3rd-party-unifont-provider) or [build something for a private registry](#supporting-a-private-registry)), you can build your own.

The preferred method for implementing a custom font provider is to export a function that returns [the `FontProvider` object](#the-font-provider-object) and takes the [configuration](#config) as a parameter.

### The font provider object

A `FontProvider` is an object containing required [`name`](#name) and [`resolveFont()`](#resolvefont) properties. It also has optional [`config`](#config), [`init()`](#init) and [`listFonts()`](#listfonts) properties available.

The `FontProvider` type accepts a generic for family [options](/en/reference/configuration-reference/#fontoptions).

#### `name`

<p>

**Type:** `string`
</p>

A unique name for the provider, used in logs and for identification.

#### `resolveFont()`

<p>

**Type:** `(options: ResolveFontOptions) => Awaitable<{ fonts: FontFaceData[] } | undefined>`<br />
</p>

Used to retrieve and return font face data based on the given options.

#### `config`

<p>

**Type:** `Record<string, any>`<br />
**Default:** `undefined`
</p>

A serializable object, used for identification.

#### `init()`

<p>

**Type:** `(context: FontProviderInitContext) => Awaitable<void>`<br />
**Default:** `undefined`
</p>

Optional callback, used to perform any initialization logic.

##### `context.storage`

<p>

**Type:** `Storage`
</p>

Useful for caching.

##### `context.root`

<p>

**Type:** `URL`
</p>

The project root, useful for resolving local files paths.

#### `listFonts()`

<p>

**Type:** `() => Awaitable<string[] | undefined>`<br />
**Default:** `undefined`
</p>

Optional callback, used to return the list of available font names.

### Supporting a private registry

The following example defines a font provider for a private registry:

<Tabs syncKey="font-provider">

<TabItem label="Simple">

```ts title="font-provider.ts"
import type { FontProvider } from "astro";
import { retrieveFonts, type Fonts } from "./utils.js",

export function registryFontProvider(): FontProvider {
  let data: Fonts = {}

  return {
    name: "registry",
    init: async () => {
      data = await retrieveFonts(token);
    },
    listFonts: () => {
      return Object.keys(data);
    },
    resolveFont: ({ familyName, ...rest }) => {
      const fonts = data[familyName];
      if (fonts) {
        return { fonts };
      }
      return undefined;
    },
  };
}
```

</TabItem>

<TabItem label="Provider options">

```ts title="font-provider.ts" {4-6,8,13}
import type { FontProvider } from "astro";
import { retrieveFonts, type Fonts } from "./utils.js",

interface Config {
  token: string;
}

export function registryFontProvider(config: Config): FontProvider {
  let data: Fonts = {}

  return {
    name: "registry",
    config,
    init: async () => {
      data = await retrieveFonts(token);
    },
    listFonts: () => {
      return Object.keys(data);
    },
    resolveFont: ({ familyName, ...rest }) => {
      const fonts = data[familyName];
      if (fonts) {
        return { fonts };
      }
      return undefined;
    },
  };
}
```

</TabItem>

<TabItem label="Family options">

```ts title="font-provider.ts" {4-6,8,20}
import type { FontProvider } from "astro";
import { retrieveFonts, type Fonts } from "./utils.js",

interface FamilyOptions {
  minimal?: boolean;
}

export function registryFontProvider(): FontProvider<FamilyOptions | undefined> {
  let data: Fonts = {}

  return {
    name: "registry",
    init: async () => {
      data = await retrieveFonts(token);
    },
    listFonts: () => {
      return Object.keys(data);
    },
    // options is typed as FamilyOptions | undefined
    resolveFont: ({ familyName, options, ...rest }) => {
      const fonts = data[familyName];
      if (fonts) {
        return { fonts };
      }
      return undefined;
    },
  };
}
```

</TabItem>

</Tabs>

You can then register this font provider in the Astro config:

<Tabs syncKey="font-provider">

<TabItem label="Simple">

```ts title="astro.config.ts"
import { defineConfig } from "astro/config";
import { registryFontProvider } from "./font-provider";

export default defineConfig({
  fonts: [{
    provider: registryFontProvider(),
    name: "Custom",
    cssVariable: "--font-custom"
  }]
});
```

</TabItem>

<TabItem label="Provider options">

```ts title="astro.config.ts" {8}
import { defineConfig } from "astro/config";
import { registryFontProvider } from "./font-provider";

export default defineConfig({
  fonts: [{
    provider: registryFontProvider({
      token: "..."
    }),
    name: "Custom",
    cssVariable: "--font-custom"
  }]
});
```

</TabItem>

<TabItem label="Family options">

```ts title="astro.config.ts" {8-10}
import { defineConfig } from "astro/config";
import { registryFontProvider } from "./font-provider";

export default defineConfig({
  fonts: [{
    provider: registryFontProvider(),
    options: {
      minimal: true
    },
    name: "Custom",
    cssVariable: "--font-custom"
  }]
});
```

</TabItem>

</Tabs>

### Supporting a 3rd-party unifont provider

You can define an Astro font provider using a unifont provider under the hood:

<Tabs syncKey="font-provider">

<TabItem label="Simple">

```ts title="font-provider.ts" {3,5,6}
import type { FontProvider } from "astro";
import type { InitializedProvider } from "unifont";
import { acmeProvider } from "@acme/unifont-provider"

export function acmeFontProvider(): FontProvider {
	const provider = acmeProvider();
	let initializedProvider: InitializedProvider | undefined;
	return {
		name: provider._name,
		async init(context) {
			initializedProvider = await provider(context);
		},
		async resolveFont({ familyName, ...rest }) {
			return await initializedProvider?.resolveFont(familyName, rest);
		},
		async listFonts() {
			return await initializedProvider?.listFonts?.();
		},
	};
}
```

</TabItem>

<TabItem label="Provider options">

```ts title="font-provider.ts" {3,5,6}
import type { FontProvider } from "astro";
import type { InitializedProvider } from "unifont";
import { acmeProvider, type AcmeOptions } from "@acme/unifont-provider"

export function acmeFontProvider(config?: AcmeOptions): FontProvider {
	const provider = acmeProvider(config);
	let initializedProvider: InitializedProvider | undefined;
	return {
		name: provider._name,
		config,
		async init(context) {
			initializedProvider = await provider(context);
		},
		async resolveFont({ familyName, ...rest }) {
			return await initializedProvider?.resolveFont(familyName, rest);
		},
		async listFonts() {
			return await initializedProvider?.listFonts?.();
		},
	};
}
```

</TabItem>

<TabItem label="Family options">

```ts title="font-provider.ts" {3,5,6-7}
import type { FontProvider } from "astro";
import type { InitializedProvider } from "unifont";
import { acmeProvider, type AcmeFamilyOptions } from "@acme/unifont-provider"

export function acmeFontProvider(): FontProvider<AcmeFamilyOptions | undefined> {
	const provider = acmeProvider();
	let initializedProvider: InitializedProvider<AcmeFamilyOptions> | undefined;
	return {
		name: provider._name,
		async init(context) {
			initializedProvider = await provider(context);
		},
		async resolveFont({ familyName, ...rest }) {
			return await initializedProvider?.resolveFont(familyName, rest);
		},
		async listFonts() {
			return await initializedProvider?.listFonts?.();
		},
	};
}
```

</TabItem>

</Tabs>

You can then register this font provider in the Astro config:

<Tabs syncKey="font-provider">

<TabItem label="Simple">

```ts title="astro.config.ts"
import { defineConfig } from "astro/config";
import { acmeFontProvider } from "./font-provider";

export default defineConfig({
  fonts: [{
    provider: acmeFontProvider(),
    name: "Custom",
    cssVariable: "--font-custom"
  }]
});
```

</TabItem>

<TabItem label="Provider options">

```ts title="astro.config.ts" {8}
import { defineConfig } from "astro/config";
import { acmeFontProvider } from "./font-provider";

export default defineConfig({
  fonts: [{
    provider: acmeFontProvider({
      token: "..."
    }),
    name: "Custom",
    cssVariable: "--font-custom"
  }]
});
```

</TabItem>

<TabItem label="Family options">

```ts title="astro.config.ts" {8-10}
import { defineConfig } from "astro/config";
import { acmeFontProvider } from "./font-provider";

export default defineConfig({
  fonts: [{
    provider: acmeFontProvider(),
    options: {
      minimal: true
    },
    name: "Custom",
    cssVariable: "--font-custom"
  }]
});
```

</TabItem>

</Tabs>
