---
type: integration
title: '@astrojs/react'
description: "Apprenez √† utiliser l'int√©gration du framework @astrojs/react pour √©tendre la prise en charge des composants dans votre projet Astro."
sidebar:
  label: React
githubIntegrationURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/react/'
category: renderer
i18nReady: true
---
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'

Cette **[int√©gration Astro][astro-integration]** permet le rendu et l'hydratation c√¥t√© client pour vos composants [React](https://react.dev/).

## Installation

Astro inclut une commande `astro add` pour automatiser l'installation des int√©grations officielles. Si vous pr√©f√©rez, vous pouvez [installer les int√©grations manuellement](#installation-manuelle) √† la place.

Pour installer `@astrojs/react`, ex√©cutez ce qui suit depuis le r√©pertoire de votre projet et suivez les instructions :

<PackageManagerTabs>
  <Fragment slot="npm">
    ```sh
    npx astro add react
    ```
  </Fragment>
  <Fragment slot="pnpm">
    ```sh
    pnpm astro add react
    ```
  </Fragment>
  <Fragment slot="yarn">
    ```sh
    yarn astro add react
    ```
  </Fragment>
</PackageManagerTabs>

Si vous rencontrez des probl√®mes, [n'h√©sitez pas √† nous les signaler sur GitHub](https://github.com/withastro/astro/issues) et essayez les √©tapes d'installation manuelle ci-dessous.

### Installation manuelle

Tout d'abord, installez le paquet `@astrojs/react` :

<PackageManagerTabs>
  <Fragment slot="npm">
    ```sh
    npm install @astrojs/react
    ```
  </Fragment>
  <Fragment slot="pnpm">
    ```sh
    pnpm add @astrojs/react
    ```
  </Fragment>
  <Fragment slot="yarn">
    ```sh
    yarn add @astrojs/react
    ```
  </Fragment>
</PackageManagerTabs>

La plupart des gestionnaires de paquets installent √©galement les d√©pendances associ√©es. Si vous voyez un avertissement `Cannot find package 'react'` (ou similaire) lorsque vous d√©marrez Astro, vous devrez installer `react` et `react-dom` avec ses d√©finitions de type :

<PackageManagerTabs>
  <Fragment slot="npm">
    ```sh
    npm install react react-dom @types/react @types/react-dom
    ```
  </Fragment>
  <Fragment slot="pnpm">
    ```sh
    pnpm add react react-dom @types/react @types/react-dom
    ```
  </Fragment>
  <Fragment slot="yarn">
    ```sh
    yarn add react react-dom @types/react @types/react-dom
    ```
  </Fragment>
</PackageManagerTabs>

Ensuite, appliquez l'int√©gration √† votre fichier `astro.config.*` en utilisant la propri√©t√© `integrations` :

```js ins="react()" ins={2} title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import react from '@astrojs/react';

export default defineConfig({
  // ...
  integrations: [react()],
});
```

Et ajoutez le code suivant au fichier `tsconfig.json`.

```json title="tsconfig.json" ins={5-8}
{
  "extends": "astro/tsconfigs/strict",
  "include": [".astro/types.d.ts", "**/*"],
  "exclude": ["dist"],
  "compilerOptions": {
    "jsx": "react-jsx",
    "jsxImportSource": "react"
  }
}
```

## D√©marrage

Pour utiliser votre premier composant React dans Astro, dirigez-vous vers notre [documentation sur les frameworks UI][astro-ui-frameworks]. Vous y d√©couvrirez :

* üì¶ comment les composants du cadre sont charg√©s,
* üíß les options d'hydratation c√¥t√© client, et
* ü§ù les possibilit√©s de m√©langer et d'imbriquer les cadres.

## Options

### Combinaison de plusieurs frameworks JSX

Lorsque vous utilisez plusieurs frameworks JSX (React, Preact, Solid) dans le m√™me projet, Astro doit d√©terminer quelles transformations sp√©cifiques au framework JSX doivent √™tre utilis√©es pour chacun de vos composants. Si vous n'avez ajout√© qu'une seule int√©gration de framework JSX √† votre projet, aucune configuration suppl√©mentaire n'est n√©cessaire.

Utilisez les options de configuration `include` (obligatoire) et `exclude` (optionnelle) pour sp√©cifier quels fichiers appartiennent √† quel framework. Fournissez un tableau de fichiers et/ou de dossiers √† `inclure` pour chaque framework que vous utilisez. Des caract√®res joker peuvent √™tre utilis√©s pour inclure plusieurs chemins de fichiers.

Nous recommandons de placer les composants communs du framework dans le m√™me dossier (par exemple `/composants/react/` et `/composants/solid/`) pour faciliter la sp√©cification de vos inclusions, mais ce n'est pas obligatoire :

```js title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';
import react from '@astrojs/react';
import svelte from '@astrojs/svelte';
import vue from '@astrojs/vue';
import solid from '@astrojs/solid-js';

export default defineConfig({
  // Permettre √† de nombreux frameworks de prendre en charge tous les diff√©rents types de composants.
  // Aucun `include` n'est n√©cessaire si vous n'utilisez qu'un seul framework JSX !
  integrations: [
    preact({
      include: ['**/preact/*'],
    }),
    react({
      include: ['**/react/*'],
    }),
    solid({
      include: ['**/solid/*'],
    }),
  ],
});
```

### Traitement des √©l√©ments enfants (Children parsing)

Les enfants pass√©s dans un composant React depuis un composant Astro sont analys√©s comme des cha√Ænes simples, et non comme des n≈ìuds React.

Par exemple, le `<ReactComponent />` ci-dessous ne recevra qu'un seul √©l√©ment enfant :

```astro
---
import ReactComponent from './ReactComponent';
---

<ReactComponent>
  <div>un</div>
  <div>deux</div>
</ReactComponent>
```

Si vous utilisez une biblioth√®que qui *attend* que plus d'un √©l√©ment enfant soit pass√©, par exemple pour qu'elle puisse placer certains √©l√©ments √† diff√©rents endroits, vous pourriez trouver cela bloquant.

Vous pouvez d√©finir le drapeau exp√©rimental `experimentalReactChildren` pour dire √† Astro de toujours passer les enfants √† React en tant que n≈ìuds DOM virtuels React. Il y a un co√ªt d'ex√©cution √† cela, mais cela peut aider √† la compatibilit√©.

Vous pouvez activer cette option dans la configuration de l'int√©gration de React :

```js title="astro.config.mjs" ins={8}
import { defineConfig } from 'astro/config';
import react from '@astrojs/react';

export default defineConfig({
  // ...
  integrations: [
    react({
      experimentalReactChildren: true,
    }),
  ],
});
```

[astro-integration]: /fr/guides/integrations-guide/

[astro-ui-frameworks]: /fr/guides/framework-components/#utilisation-des-composants-de-framework
