---
type: integration
title: '@astrojs/preact'
description: "Apprenez √† utiliser l'int√©gration du framework @astrojs/preact pour √©tendre la prise en charge des composants dans votre projet Astro."
sidebar:
  label: Preact
githubIntegrationURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/preact/'
category: renderer
i18nReady: true
---

import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'
import Since from '~/components/Since.astro';

Cette **[int√©gration Astro][astro-integration]** permet le rendu et l'hydratation c√¥t√© client pour vos composants [Preact](https://preactjs.com/).

## Pourquoi Preact ?

Preact est une biblioth√®que qui vous permet de cr√©er des composants d'interface utilisateur interactifs pour le web. Si vous souhaitez cr√©er des fonctionnalit√©s interactives sur votre site √† l'aide de JavaScript, vous pr√©f√©rerez peut-√™tre utiliser son format de composant plut√¥t que d'utiliser directement les API du navigateur.

Preact est √©galement un excellent choix si vous avez d√©j√† utilis√© React. Preact fournit la m√™me API que React, mais dans un format beaucoup plus petit de 3 Ko. Il supporte m√™me le rendu de nombreux composants React en utilisant l'option de configuration `compat` (voir ci-dessous).

**Vous souhaitez en savoir plus sur Preact avant d'utiliser cette int√©gration ?**
Consultez ["Learn Preact" (EN)](https://preactjs.com/tutorial), un tutoriel interactif sur leur site web.

## Installation

Astro inclut une commande `astro add` pour automatiser l'installation des int√©grations officielles. Si vous pr√©f√©rez, vous pouvez [installer les int√©grations manuellement](#installation-manuelle) √† la place.

Pour installer `@astrojs/preact`, ex√©cutez ce qui suit depuis le r√©pertoire de votre projet et suivez les instructions :

<PackageManagerTabs>
  <Fragment slot="npm">
    ```sh
    npx astro add preact
    ```
  </Fragment>
  <Fragment slot="pnpm">
    ```sh
    pnpm astro add preact
    ```
  </Fragment>
  <Fragment slot="yarn">
    ```sh
    yarn astro add preact
    ```
  </Fragment>
</PackageManagerTabs>

Si vous rencontrez des probl√®mes, [n'h√©sitez pas √† nous les signaler sur GitHub](https://github.com/withastro/astro/issues) et essayez les √©tapes d'installation manuelle ci-dessous.

### Installation manuelle

Tout d'abord, installez le paquet `@astrojs/preact` :

<PackageManagerTabs>
  <Fragment slot="npm">
    ```sh
    npm install @astrojs/preact
    ```
  </Fragment>
  <Fragment slot="pnpm">
    ```sh
    pnpm add @astrojs/preact
    ```
  </Fragment>
  <Fragment slot="yarn">
    ```sh
    yarn add @astrojs/preact
    ```
  </Fragment>
</PackageManagerTabs>

La plupart des gestionnaires de paquets installent √©galement les d√©pendances associ√©es. Si vous voyez un avertissement `Cannot find package 'preact'` (ou similaire) lorsque vous d√©marrez Astro, vous devez installer Preact :

<PackageManagerTabs>
  <Fragment slot="npm">
    ```sh
    npm install preact
    ```
  </Fragment>
  <Fragment slot="pnpm">
    ```sh
    pnpm add preact
    ```
  </Fragment>
  <Fragment slot="yarn">
    ```sh
    yarn add preact
    ```
  </Fragment>
</PackageManagerTabs>

Ensuite, appliquez l'int√©gration √† votre fichier `astro.config.*` en utilisant la propri√©t√© `integrations` :

```js title="astro.config.mjs" ins={2} ins="preact()"
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';

export default defineConfig({
  // ...
  integrations: [preact()],
});
```

Et ajoutez le code suivant au fichier `tsconfig.json`.

```json title="tsconfig.json" ins={5-8}
{
  "extends": "astro/tsconfigs/strict",
  "include": [".astro/types.d.ts", "**/*"],
  "exclude": ["dist"],
  "compilerOptions": {
    "jsx": "react-jsx",
    "jsxImportSource": "preact"
  }
}
```

## Utilisation

Pour utiliser votre premier composant Preact dans Astro, consultez notre [documentation sur les frameworks d'interface utilisateur][astro-ui-frameworks]. Vous y d√©couvrirez :

* üì¶ comment les composants du framework sont charg√©s,
* üíß les options d'hydratation c√¥t√© client, et
* ü§ù les possibilit√©s de m√©langer et d'imbriquer les frameworks.

Consultez √©galement notre [Documentation sur l'int√©gration Astro][astro-integration] pour en savoir plus sur les int√©grations.

## Configuration

L'int√©gration Astro Preact g√®re le rendu des composants Preact et poss√®de ses propres options. Modifiez ces options dans le fichier `astro.config.mjs` qui est l'endroit o√π se trouvent les param√®tres d'int√©gration de votre projet.

Pour une utilisation basique, vous n'avez pas besoin de configurer l'int√©gration Preact.

### compat

Vous pouvez activer `preact/compat`, la couche de compatibilit√© de Preact pour rendre les composants React sans avoir besoin d'installer ou de livrer les grandes biblioth√®ques de React aux navigateurs web de vos utilisateurs.

Pour ce faire, passez un objet √† l'int√©gration Preact et mettez `compat : true`.

```js title="astro.config.mjs" "compat: true"
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';

export default defineConfig({
  integrations: [preact({ compat: true })],
});
```

Avec l'option `compat` activ√©e, l'int√©gration Preact rendra les composants React ainsi que les composants Preact dans votre projet et vous permettra √©galement d'importer des composants React √† l'int√©rieur des composants Preact. Pour en savoir plus, consultez ["Switching to Preact (from React)"](https://preactjs.com/guide/v10/switching-to-preact) sur le site web de Preact.

Lorsque vous importez des biblioth√®ques de composants React, afin de remplacer les d√©pendances `react` et `react-dom` par `preact/compat`, vous pouvez utiliser [`overrides`](https://docs.npmjs.com/cli/v8/configuring-npm/package-json#overrides) pour le faire.

```json title="package.json"
{
  "overrides": {
    "react": "npm:@preact/compat@latest",
    "react-dom": "npm:@preact/compat@latest"
  }
}
```

Consultez les documents [`pnpm` overrides](https://pnpm.io/package_json#pnpmoverrides) et [`yarn` resolutions](https://yarnpkg.com/configuration/manifest#resolutions) pour leurs fonctionnalit√©s respectives.

:::note
Actuellement, l'option `compat` ne fonctionne que pour les biblioth√®ques React qui exportent du code en tant qu'ESM. Si une erreur survient lors de la compilation, essayez d'ajouter la biblioth√®que √† `vite.ssr.noExternal : ['the-react-library']` dans votre fichier `astro.config.mjs`.
:::

### devtools

<p><Since pkg="@astrojs/preact" v="3.3.0" /></p>

Vous pouvez activer [Preact devtools](https://preactjs.github.io/preact-devtools/) durant le d√©veloppement en passant un objet avec `devtools : true` √† votre configuration d'int√©gration `preact()` :

```js title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';

export default defineConfig({
  // ...
  integrations: [preact({ devtools: true })],
});
```

## Options

### Combinaison de plusieurs frameworks JSX

Lorsque vous utilisez plusieurs frameworks JSX (React, Preact, Solid) dans le m√™me projet, Astro doit d√©terminer quelles transformations sp√©cifiques au framework JSX doivent √™tre utilis√©es pour chacun de vos composants. Si vous n'avez ajout√© qu'une seule int√©gration de framework JSX √† votre projet, aucune configuration suppl√©mentaire n'est n√©cessaire.

Utilisez les options de configuration `include` (obligatoire) et `exclude` (optionnelle) pour sp√©cifier quels fichiers appartiennent √† quel framework. Fournissez un tableau de fichiers et/ou de dossiers √† `inclure` pour chaque framework que vous utilisez. Des caract√®res joker peuvent √™tre utilis√©s pour inclure plusieurs chemins de fichiers.

Nous recommandons de placer les composants communs du framework dans le m√™me dossier (par exemple `/composants/react/` et `/composants/solid/`) pour faciliter la sp√©cification de vos inclusions, mais ce n'est pas obligatoire :

```js title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';
import react from '@astrojs/react';
import svelte from '@astrojs/svelte';
import vue from '@astrojs/vue';
import solid from '@astrojs/solid-js';

export default defineConfig({
  // Permettre √† de nombreux frameworks de prendre en charge tous les diff√©rents types de composants.
  // Aucun `include` n'est n√©cessaire si vous n'utilisez qu'un seul framework JSX !
  integrations: [
    preact({
      include: ['**/preact/*'],
    }),
    react({
      include: ['**/react/*'],
    }),
    solid({
      include: ['**/solid/*'],
    }),
  ],
});
```

## Exemples

* L'exemple [Astro Preact](https://github.com/withastro/astro/tree/latest/examples/framework-preact) montre comment utiliser un composant Preact interactif dans un projet Astro.
* L'exemple [Astro Nanostores](https://github.com/withastro/astro/tree/latest/examples/with-nanostores) montre comment partager l'√©tat entre diff√©rents composants ‚Äî et m√™me diff√©rents frameworks ! ‚Äî dans un projet Astro.

[astro-integration]: /fr/guides/integrations-guide/

[astro-ui-frameworks]: /fr/guides/framework-components/#utilisation-des-composants-de-framework
