---
title: Migration depuis Create React App (CRA)
description: Astuces pour migrer un projet Create React App existant vers Astro
type: migration
stub: true
framework: Create React App
i18nReady: true
---
import AstroJSXTabs from '~/components/tabs/AstroJSXTabs.astro';
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';
import { FileTree } from '@astrojs/starlight/components';
import ReadMore from '~/components/ReadMore.astro';
import Badge from "~/components/Badge.astro"

L'[intÃ©gration React](/fr/guides/integrations-guide/react/) d'Astro apporte le support nÃ©cessaire pour [utiliser les composants React dans les composants Astro](/fr/guides/framework-components/), y compris des applications React complÃ¨tes comme Create React App (CRA)Â !

```astro title="src/pages/index.astro"
---
// Importez votre composant racine App
import App from '../cra-project/App.jsx';
---
<!-- Utilisez une directive client pour charger votre application -->
<App client:load />
```

<ReadMore>DÃ©couvrez comment [constuire une application d'une seule page (SPA) avec Astro](https://logsnag.com/blog/react-spa-with-astro) <Badge text="Externe" /> en utilisant React Router.</ReadMore>

De nombreuses applications Â«Â fonctionneront simplementÂ Â» comme des applications React complÃ¨tes lorsque vous les ajouterez directement Ã  votre projet Astro avec l'intÃ©gration React installÃ©e. Il s'agit d'un excellent moyen de lancer votre projet immÃ©diatement et de maintenir votre application fonctionnelle pendant que vous migrez vers Astro.

Au fil du temps, vous pouvez convertir votre structure piÃ¨ce par piÃ¨ce en une combinaison de composants `.astro` et `.jsx`. Vous dÃ©couvrirez probablement que vous avez besoin de moins de composants React que vous ne le pensezÂ !

Voici quelques concepts clÃ©s et stratÃ©gies de migration pour vous aider Ã  dÃ©marrer. Utilisez le reste de notre documentation et notre [communautÃ© Discord](https://astro.build/chat) pour continuerÂ !

## Principales similitudes entre CRA et Astro

- La [syntaxe des fichiers `.astro` est similaire Ã  JSX](/fr/basics/astro-syntax/#diffÃ©rences-entre-astro-et-jsx). Ã‰crire pour Astro devrait sembler familier.

- Astro utilise le routage basÃ© sur des fichiers et [permet Ã  des pages spÃ©cifiquement nommÃ©es de crÃ©er des itinÃ©raires dynamiques](/fr/guides/routing/#routes-dynamiques).

- Astro est [basÃ© sur les composants](/fr/basics/astro-components/) et votre structure de balisage sera similaire avant et aprÃ¨s votre migration.

- Astro a des [intÃ©grations officiellles pour React, Preact, et Solid](/fr/guides/integrations-guide/react/) afin que vous puissiez utiliser vos composants JSX existants. Notez que dans Astro, ces fichiers **doivent** utilisez un extension `.jsx` ou `.tsx`.

- Astro supporte l'[installation de paquets NPM](/fr/guides/imports/#paquets-npm), y compris les bibliothÃ¨ques React. Un grand nombre de vos dÃ©pendances existantes fonctionneront dans Astro.

## Principales diffÃ©rences entre CRA et Astro

Lorsque vous reconstruisez votre site CRA dans Astro, vous remarquerez quelques diffÃ©rences importantesÂ :

- CRA est une application d'une seule page qui utilise `index.js` comme racine de votre projet. Astro est un site multipage et `index.astro` est votre page d'accueil.

- Les [composants `.astro`](/fr/basics/astro-components/) ne sont pas Ã©crits sous forme de fonctions exportÃ©es renvoyant des modÃ¨les de page. Au lieu de cela, vous diviserez votre code en une Â«Â barriÃ¨re de codeÂ Â» pour votre JavaScript et un corps exclusivement pour le HTML que vous gÃ©nÃ©rez.

- [axÃ© sur le contenu](/fr/concepts/why-astro/#axÃ©-sur-le-contenu)Â : Astro a Ã©tÃ© conÃ§u pour prÃ©senter votre contenu et pour vous permettre d'opter pour l'interactivitÃ© uniquement en cas de besoin. Une application CRA existante peut Ãªtre conÃ§ue pour une interactivitÃ© Ã©levÃ©e cÃ´tÃ© client et peut nÃ©cessiter des techniques avancÃ©es d'Astro pour inclure des Ã©lÃ©ments plus difficiles Ã  reproduire en utilisant des composants `.astro`, comme les tableaux de bord.

## Ajouter votre application CRA dans Astro

Votre application existante peut Ãªtre gÃ©nÃ©rÃ©e directement dans un nouveau projet Astro, la plupart du temps sans modification du code de votre application.

### CrÃ©er un nouveau projet Astro

Utilisez la commande `create astro` de votre gestionnaire de paquets pour lancer l'assistant CLI d'Astro et sÃ©lectionnez un nouveau projet Astro Â«Â videÂ Â».

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm create astro@latest
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm create astro@latest
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn create astro@latest
  ```
  </Fragment>
</PackageManagerTabs>

### Ajouter des intÃ©grations et des dÃ©pendances

Ajoutez l'intÃ©gration React en utilisant la commande `astro add` de votre gestionnaire de paquets. Si votre application utilise Tailwind ou MDX, vous pouvez ajouter plusieurs intÃ©grations Astro en utilisant la mÃªme commandeÂ :

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npx astro add react
  npx astro add react tailwind mdx
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm astro add react
  pnpm astro add react tailwind mdx
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn astro add react
  yarn astro add react tailwind mdx
  ```
  </Fragment>
</PackageManagerTabs>

Si votre application CRA nÃ©cessite des dÃ©pendances (par exemple des paquets NPM), installez-les individuellement en utilisant la ligne de commande ou en les ajoutant manuellement au fichier `package.json` de votre nouveau projet Astro puis exÃ©cuter la commande d'installation. Notez que de nombreuses dÃ©pendances React, mais pas toutes, fonctionneront dans Astro. 

### Ajoutez vos fichiers d'application existants

Copiez les fichiers et dossiers sources de votre projet Create React App (CRA) existant (par exemple `components`, `hooks`, `styles`, etc.) dans un nouveau dossier Ã  l'intÃ©rieur de `src/`, en conservant sa structure de fichiers pour que votre application continue de fonctionner. Notez que toutes les extensions de fichier `.js` doivent Ãªtre renommÃ©es en `.jsx` ou `.tsx`.

N'incluez aucun fichier de configuration. Vous utiliserez les fichiers `astro.config.mjs`, `package.json`, et `tsconfig.json` d'Astro.

DÃ©placez le contenu du dossier `public/` de votre application (par exemple, les ressources statiques) vers le dossier `public/` d'Astro.

<FileTree>
- public/
  - logo.png
  - favicon.ico
  - ...
- src/
  - cra-project/
    - App.jsx
    - ...
  - pages/
    - index.astro
- astro.config.mjs
- package.json
- tsconfig.json
</FileTree>

### GÃ©nÃ©rer votre application

Importez le composant racine de votre application dans la section frontmatter du fichier `index.astro` puis restituez le composant `<App />` dans votre modÃ¨le de pageÂ :

```astro title="src/pages/index.astro"
---
import App from '../cra-project/App.jsx';
---
<App client:load />
```

:::note[Directives client]
Votre application nÃ©cessite une [directive client](/fr/reference/directives-reference/#directives-client) pour l'interactivitÃ©. Astro gÃ©nÃ©rera votre application React en HTML statique jusqu'Ã  ce que vous acceptiez le JavaScript cÃ´tÃ© client.

Utilisez `client:load` pour garantir que votre application se charge immÃ©diatement Ã  partir du serveur, ou `client:only="react"` pour ignorer le rendu cÃ´tÃ© serveur et exÃ©cuter votre application entiÃ¨rement cÃ´tÃ© client.
:::

Consultez notre guide pour [configurer Astro](/fr/guides/configuring-astro/) pour obtenir plus de dÃ©tails et les options disponibles.

## Convertir votre application CRA en application Astro

AprÃ¨s avoir [ajouter votre application existante dans Astro](#ajouter-votre-application-cra-dans-astro), vous souhaiterez probablement convertir votre application elle-mÃªme en application AstroÂ !

Vous reproduirez une conception similaire basÃ©e sur des composants [en utilisant des composants Astro de mise en page en HTML pour votre structure de base](/fr/basics/astro-components/) tout en important et en incluant des composants React individuels (qui peuvent eux-mÃªmes Ãªtre des applications entiÃ¨resÂ !) pour des Ã®les d'interactivitÃ©.

Chaque migration sera diffÃ©rente et pourra Ãªtre effectuÃ©e de maniÃ¨re incrÃ©mentielle sans perturber votre application opÃ©rationnelle. Convertissez des Ã©lÃ©ments individuels Ã  votre propre rythme afin qu'une part croissante de votre application soit alimentÃ©e par des composants Astro au fil du temps.

Au fur et Ã  mesure que vous convertissez votre application React, vous dÃ©ciderez quels composants React vous allez [rÃ©Ã©crire en tant que composant Astro](#convertir-les-fichiers-jsx-en-fichiers-astro). Votre seule restriction est que les composants Astro peuvent importer des composants React, mais les composants React ne doivent importer que d'autres composants ReactÂ :

```astro title="src/pages/static-components.astro" ins={2,7}
---
import MyReactComponent from '../components/MyReactComponent.jsx';
---
<html>
  <body>
    <h1>Utilisez des composants React directement dans AstroÂ !</h1>
    <MyReactComponent />
  </body>
</html>
```

Ã€ la place d'importer des composants Astro dans des composants React, vous pouvez imbriquer des composants React dans un seul composant AstroÂ :

```astro title="src/pages/nested-components.astro" {2,3,5,8,10}
---
import MyReactSidebar from '../components/MyReactSidebar.jsx';
import MyReactButton from '../components/MyReactButton.jsx';
---
<MyReactSidebar>
  <p>Voici une barre latÃ©rale avec du texte et un bouton.</p>
  <div slot="actions">
    <MyReactButton client:idle />
  </div>
</MyReactSidebar>
```


Il vous sera peut-Ãªtre utile d'en apprendre davantage sur [les Ã®les Astro](/fr/concepts/islands/) et les [composants Astro](/fr/basics/astro-components/) avant de restructurer votre application CRA en projet Astro.


### ComparaisonÂ : JSX vs Astro

Comparez le composant CRA suivant et un composant Astro correspondantÂ :

<AstroJSXTabs>
  <Fragment slot="jsx">
    ```jsx title="StarCount.jsx"
    import React, { useState, useEffect } from 'react';
import Header from './Header';
import Footer from './Footer';

const Component = () => {
    const [stars, setStars] = useState(0);
    const [message, setMessage] = useState('');

    useEffect(() => {
        const fetchData = async () => {
            const res = await fetch('https://api.github.com/repos/withastro/astro');
            const json = await res.json();

            setStars(json.stargazers_count || 0);
            setMessage(json.message);
        };

        fetchData();
    }, []);

    return (
        <>
            <Header />
            <p style={{
                backgroundColor: `#f4f4f4`,
                padding: `1em 1.5em`,
                textAlign: `center`,
                marginBottom: `1em`
            }}>Astro has {stars} ğŸ§‘â€ğŸš€</p>
            <Footer />
        </>
    )
};

export default Component;
    ```
  </Fragment>
  <Fragment slot="astro">
    ```astro title="StarCount.astro"
    ---
    import Header from './Header.astro';
    import Footer from './Footer.astro';
    import './layout.css';
    const res = await fetch('https://api.github.com/repos/withastro/astro')
    const json = await res.json();
    const message = json.message;
    const stars = json.stargazers_count || 0;
    ---
    <Header />
    <p class="banner">Astro has {stars} ğŸ§‘â€ğŸš€</p>
    <Footer />
    <style>
      .banner {
        background-color: #f4f4f4; 
        padding: 1em 1.5em;
        text-align: center;
        margin-bottom: 1em;
      }
    <style>
    ```
  </Fragment>
</AstroJSXTabs>


### Convertir les fichiers JSX en fichiers `.astro`

Voici quelques astuces pour convertir un composant `.js` en un composant `.astro`Â :

1. Utilisez le JSX renvoyÃ© par la fonction du composant CRA existant comme base pour votre modÃ¨le HTML.

2. Modifiez [toute syntaxe CRA ou JSX en syntaxe Astro](#rÃ©fÃ©rence-convertir-la-syntaxe-cra-en-syntaxe-astro) ou en normes web HTML. Cela comprend `{children}` et `className`, par exemple.

3. DÃ©placez tout le JavaScript nÃ©cessaire, y compris les instructions d'importation, dans une [Â«Â barriÃ¨re de codeÂ Â» (`---`)](/fr/basics/astro-components/#le-script-du-composant). RemarqueÂ : le JavaScript utilisÃ© pour l'[affichage conditionnel du contenu](/fr/basics/astro-syntax/#html-dynamique) est souvent Ã©crit directement Ã  l'intÃ©rieur du modÃ¨le HTML dans Astro.

4. Utilisez [`Astro.props`](/fr/reference/api-reference/#astroprops) pour accÃ©der Ã  toutes les propriÃ©tÃ©s supplÃ©mentaires qui ont Ã©tÃ© prÃ©cÃ©demment transmises Ã  votre fonction CRA.

5. DÃ©cidez si les composants importÃ©s doivent Ã©galement Ãªtre convertis en syntaxe Astro. Vous pouvez les conserver en tant que composants React pour le moment ou pour toujours. Mais vous souhaiterez peut-Ãªtre Ã©ventuellement les convertir en composants `.astro`, surtout s'ils n'ont pas besoin d'Ãªtre interactifsÂ !

6. Remplacez `useEffect()` par des instructions d'importation ou par [`Astro.glob()`](/fr/reference/api-reference/#astroglob) pour interroger vos fichiers locaux. Utilisez `fetch()` pour rÃ©cupÃ©rer des donnÃ©es externes.

### Migration des tests

Comme Astro gÃ©nÃ¨re du HTML brut, il est possible d'Ã©crire des tests de bout en bout en utilisant la sortie de l'Ã©tape de construction. Tous les tests de bout en bout rÃ©digÃ©s prÃ©cÃ©demment peuvent fonctionner immÃ©diatement si vous avez rÃ©ussi Ã  faire correspondre le balisage de votre site CRA. Les bibliothÃ¨ques de tests telles que Jest et React Testing Library peuvent Ãªtre importÃ©es et utilisÃ©es dans Astro pour tester vos composants React.

Consultez le [guide de test](/fr/guides/testing/) d'Astro pour plus d'informations.

## RÃ©fÃ©renceÂ : Convertir la syntaxe CRA en syntaxe Astro

### Importations CRA vers Astro

Mettez Ã  jour toutes les [importations de fichiers](/fr/guides/imports/) pour rÃ©fÃ©rencer exactement les chemins de fichiers relatifs. Cela peut Ãªtre fait en utilisant des [alias d'importation](/fr/guides/typescript/#alias-dimportation), ou en Ã©crivant un chemin relatif dans son intÃ©gralitÃ©. 

Notez que `.astro` et plusieurs autres types de fichiers doivent Ãªtre importÃ©s avec leur extension de fichier complÃ¨te.

```astro title="src/pages/authors/Fred.astro"
---
import Card from '../../components/Card.astro';
---
<Card />
```

### PropriÃ©tÃ©s `children` de CRA vers Astro

Convertissez toutes les instances de `{children}` en `<slot />` Astro. Ce dernier n'a pas besoin de recevoir `{children}` comme propriÃ©tÃ© de fonction et restituera automatiquement le contenu enfant dans un `<slot />`.

```astro title="src/components/MyComponent.astro" del={3-9} ins={11-13}
---
---
export default function MyComponent(props) { 
    return (
      <div>
        {props.children}
      </div>
    );  
}

<div>
  <slot />
</div>
```

Les composants React qui transmettent plusieurs ensembles d'enfants peuvent Ãªtre convertis en composant Astro en utilisant des [emplacements nommÃ©s](/fr/basics/astro-components/#les-emplacements-slots-nommÃ©s).

En savoir plus sur l'[utilisation spÃ©cifique de `<slot />` dans Astro](/fr/basics/astro-components/#les-emplacements-slots).

### RÃ©cupÃ©ration de donnÃ©es CRA vers Astro

La rÃ©cupÃ©ration de donnÃ©es dans un composant Create React App se fait de maniÃ¨re similaire dans Astro, avec quelques lÃ©gÃ¨res diffÃ©rences.

Vous devrez supprimer toutes les instances de hook d'effet secondaire (`useEffect`) et utiliser `Astro.glob()` ou `getCollection()`/`getEntryBySlug()` pour accÃ©der aux donnÃ©es d'autres fichiers dans la source de votre projet.

Pour [rÃ©cupÃ©rer des donnÃ©es distantes](/fr/guides/data-fetching/), utilisez `fetch()`.

Ces demandes de donnÃ©es sont effectuÃ©es dans le frontmatter du composant Astro et utilisent l'opÃ©rateur `await` de niveau supÃ©rieur (Â«Â top-level awaitÂ Â»).

```astro title="src/pages/index.astro"
---
import { getCollection } from 'astro:content';

// Obtenir toutes les entrÃ©es de `src/content/blog/`
const allBlogPosts = await getCollection('blog');

// Obtenir toutes les entrÃ©es de `src/pages/posts/`
const allPosts = await Astro.glob('../pages/posts/*.md');

// RÃ©cupÃ©rer des donnÃ©es distantes
const response = await fetch('https://randomuser.me/api/');
const data = await response.json();
const randomUser = data.results[0];
---
```

En savoir plus sur les [importations de fichiers locaux avec `Astro.glob()`](/fr/guides/imports/#astroglob), l'[interrogation Ã  l'aide de l'API Collections](/fr/guides/content-collections/#interroger-les-collections) ou la [rÃ©cupÃ©ration de donnÃ©es distantes](/fr/guides/data-fetching/).

### Styles CRA vers Astro

Vous devrez peut-Ãªtre remplacer les [bibliothÃ¨ques CSS-in-JS](https://github.com/withastro/astro/issues/4432) (par exemple, styled-components) avec d'autres options CSS disponibles dans Astro.

Si nÃ©cessaire, convertissez tous les objets de style en ligne (`style={{ fontWeight: "bold" }}`) en attributs de style HTML en ligne (`style="font-weight:bold;"`). Ou, utilisez la [balise `<style>` d'Astro](/fr/guides/styling/#styliser-avec-astro) pour limiter la portÃ©e des styles CSS.

```astro title="src/components/Card.astro" del={1} ins={2}
<div style={{backgroundColor: `#f4f4f4`, padding: `1em`}}>{message}</div>
<div style="background-color: #f4f4f4; padding: 1em;">{message}</div>
```

Tailwind est pris en charge aprÃ¨s l'installation de l'[intÃ©gration Tailwind](/fr/guides/integrations-guide/tailwind/). Aucune modification de votre code Tailwind existant n'est requiseÂ !

En savoir plus sur [les styles dans Astro](/fr/guides/styling/).


## DÃ©pannage

Votre application CRA pourrait Â«Â simplement fonctionnerÂ Â» dans AstroÂ ! Mais vous devrez probablement apporter des ajustements mineurs pour dupliquer les fonctionnalitÃ©s et/ou les styles de votre application existante.

Si vous ne trouvez pas vos rÃ©ponses dans cette documentation, veuillez visiter la [communautÃ© Discord d'Astro](https://astro.build/chat) et posez des questions sur notre forum d'assistanceÂ !
