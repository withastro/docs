---
title: Migration depuis Gatsby
description: Astuces pour migrer un projet Gatsby existant vers Astro
sidebar:
  label: Gatsby
type: migration
stub: false
framework: Gatsby
i18nReady: true
---
import { Steps, LinkCard, CardGrid } from '@astrojs/starlight/components';
import AstroJSXTabs from '~/components/tabs/AstroJSXTabs.astro';
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';

Voici quelques concepts clÃ©s et stratÃ©gies de migration pour vous aider Ã  dÃ©marrer. Utilisez le reste de notre documentation et notre [communautÃ© sur Discord](https://astro.build/chat) pour continuerÂ !

## Principales similitudes entre Gatsby et Astro

Gatsby et Astro partagent certaines similitudes qui vous aideront Ã  migrer votre projetÂ :

- La [syntaxe des fichiers `.astro` est similaire Ã  celle de JSX](/fr/reference/astro-syntax/#diffÃ©rences-entre-astro-et-jsx). DÃ©velopper avec Astro devrait vous sembler familier.

- Astro possÃ¨de une prise en charge intÃ©grÃ©e pour [Markdown](/fr/guides/markdown-content/) et une intÃ©gration pour utiliser les fichiers MDX. En outre, vous pouvez configurer et continuer Ã  utiliser plusieurs de vos modules d'extension Markdown existants.

- Astro possÃ¨de Ã©galement une [intÃ©gration officielle pour utiliser des composants React](/fr/guides/integrations-guide/react/). Notez que dans Astro, les fichiers React **doivent** utiliser une extension `.jsx` ou `.tsx`.

- Astro prend en charge [l'installation de paquets NPM](/fr/guides/imports/#paquets-npm), y compris les bibliothÃ¨ques React. Beaucoup de vos dÃ©pendances existantes fonctionneront dans Astro.

- Comme Gatsby, les projets Astro peuvent Ãªtre de type SSG ou [SSR avec prÃ©rendu au niveau de la page](/fr/guides/on-demand-rendering/).

## Principales diffÃ©rences entre Gatsby et Astro

Lorsque vous recrÃ©ez votre site Gatsby dans Astro, vous remarquerez quelques diffÃ©rences importantesÂ :

- Les projets Gatsby sont des applications React d'une seule page et utilisent `index.js` comme racine de votre projet. Les projets Astro sont des sites de plusieurs pages et `index.astro` est votre page d'accueil.

- [Les composants `.astro`](/fr/basics/astro-components/) ne sont pas Ã©crits sous forme de fonctions exportÃ©es renvoyant des modÃ¨les de page. Au lieu de cela, vous diviserez votre code en un Â«Â dÃ©limitateur de codeÂ Â» pour votre JavaScript et en un corps dÃ©diÃ© au HTML que vous gÃ©nÃ©rez.

- [DonnÃ©es de fichiers locaux](/fr/guides/imports/): Gatsby utilise GraphQL pour rÃ©cupÃ©rer des donnÃ©es Ã  partir de vos fichiers de projet. Astro utilise les importations ESM et les fonctions d'attente de niveau supÃ©rieur (par exemple, [`import.meta.glob()`](/fr/guides/imports/#importmetaglob), [`getCollection()`](/fr/guides/content-collections/#interroger-les-collections)) pour importer des donnÃ©es Ã  partir de vos fichiers de projet. Vous pouvez ajouter manuellement GraphQL Ã  votre projet Astro mais il n'est pas inclus par dÃ©faut.

## Convertir votre projet Gatsby

Chaque migration de projet sera diffÃ©rente, mais vous effectuerez certaines actions courantes lors de la conversion de Gatsby vers Astro.

### CrÃ©er un nouveau projet Astro
Utilisez la commande `create astro` de votre gestionnaire de paquets pour lancer l'assistant CLI d'Astro ou choisissez un thÃ¨me de communautÃ© dans la [vitrine de thÃ¨mes d'Astro](https://astro.build/themes).

Vous pouvez utiliser un argument `--template` avec la commande `create astro` pour dÃ©marrer un nouveau projet Astro avec l'un de nos modÃ¨les de dÃ©marrage officiels (par exemple `docs`, `blog`, `portfolio`). Vous pouvez Ã©galement [dÃ©marrer un nouveau projet Ã  partir de n'importe quel dÃ©pÃ´t Astro existant sur GitHub](/fr/install-and-setup/#utiliser-un-thÃ¨me-ou-un-modÃ¨le-de-dÃ©marrage).

  <PackageManagerTabs>
    <Fragment slot="npm">
    ```shell
    # exÃ©cuter l'assistant CLI d'Astro
    npm create astro@latest

    # crÃ©er un nouveau projet en utilisant un exemple officiel
    npm create astro@latest -- --template <example-name>
    ```
    </Fragment>
    <Fragment slot="pnpm">
    ```shell
    # exÃ©cuter l'assistant CLI d'Astro
    pnpm create astro@latest

    # crÃ©er un nouveau projet en utilisant un exemple officiel
    pnpm create astro@latest --template <example-name>
    ```
    </Fragment>
    <Fragment slot="yarn">
    ```shell
    # exÃ©cuter l'assistant CLI d'Astro
    yarn create astro@latest

    # crÃ©er un nouveau projet en utilisant un exemple officiel
    yarn create astro@latest --template <example-name>
    ```
    </Fragment>
  </PackageManagerTabs>

Ensuite, copiez les fichiers existants de votre projet Gatsby vers votre nouveau projet Astro dans un dossier sÃ©parÃ© en dehors de `src`.

:::tip
Consultez https://astro.new pour la liste complÃ¨te des modÃ¨les de dÃ©marrage officiels et des liens pour ouvrir un nouveau projet dans IDX, StackBlitz, CodeSandbox ou Gitpod.
:::

### Installer des intÃ©grations (facultatif)

Vous trouverez peut-Ãªtre utile d'installer certaines des [intÃ©grations facultatives d'Astro](/fr/guides/integrations-guide/) Ã  utiliser lors de la conversion de votre projet Gatsby en AstroÂ :

- **@astrojs/react**Â : pour rÃ©utiliser certains de vos composants d'interface utilisateur React dans votre nouveau site Astro ou pour continuer Ã  coder avec des composants React.

- **@astrojs/mdx**Â : pour importer des fichiers MDX existants de votre projet Gatsby ou pour utiliser MDX dans votre nouveau site Astro.

### Placer votre code dans `src`

En suivant la [structure de projet d'Astro](/fr/basics/project-structure/):

<Steps>
1. **Supprimez** le dossier `public/` de Gatsby. 
    
    Gatsby utilise le rÃ©pertoire `public/` pour sa sortie de compilation, vous pouvez donc supprimer ce dossier en toute sÃ©curitÃ©. Vous n'aurez plus besoin d'une version compilÃ©e de votre site Gatsby. (Astro utilise `dist/` par dÃ©faut pour la sortie de compilation.)

2. **Renommez** le dossier `static/` de Gatsby en `public/`, et utilisez-le comme dossier `public/` d'Astro. 

    Astro utilise un dossier nommÃ© `public/` pour les ressources statiques. Vous pouvez Ã©galement copier le contenu de `static/` dans le dossier `public/` existant d'Astro.

3. **Copiez ou dÃ©placez** les autres fichiers et dossiers de Gatsby (par exemple, `components`, `pages`, etc.) selon vos besoins dans le dossier `src/` d'Astro pendant que vous recrÃ©ez votre site, en suivant la [structure de projet d'Astro](/fr/basics/project-structure/).

    Le dossier `src/pages/` d'Astro est un dossier spÃ©cial utilisÃ© pour le routage basÃ© sur des fichiers afin de crÃ©er les pages et les articles de votre site Ã  partir de fichiers `.astro`, `.md` et `.mdx`. Vous n'aurez pas Ã  configurer de comportement de routage pour vos fichiers Astro, Markdown et MDX.

    Tous les autres dossiers sont optionnels et vous pouvez organiser le contenu de votre dossier `src/` comme vous le souhaitez. Les autres dossiers courants dans les projets Astro sont `src/layouts/`, `src/components`, `src/styles` et `src/scripts`.
</Steps>

### AstucesÂ : Convertir les fichiers JSX en fichiers `.astro`

Voici quelques conseils pour convertir un composant Gatsby `.js` en un composant `.astro`Â :

1. Utilisez uniquement l'instruction `return()` de la fonction du composant Gatsby existant comme modÃ¨le HTML.

2. Remplacez toute [syntaxe Gatsby ou JSX par une syntaxe Astro](#rÃ©fÃ©rence-conversion-en-syntaxe-astro) ou par des normes web HTML. Ceci comprend `<Link to="">`, `{children}` et `className` par exemple.

3. DÃ©placez tout le JavaScript nÃ©cessaire, y compris les instructions d'importation, dans un [Â«Â dÃ©limitateur de codeÂ Â» (`---`)](/fr/basics/astro-components/#le-script-du-composant). RemarqueÂ : le JavaScript utilisÃ© pour [afficher le contenu de maniÃ¨re conditionnelle](/fr/reference/astro-syntax/#html-dynamique) est souvent Ã©crit directement dans le modÃ¨le HTML dans Astro.

4. Utilisez [`Astro.props`](/fr/reference/api-reference/#props) pour accÃ©der Ã  toutes les props supplÃ©mentaires prÃ©cÃ©demment transmises Ã  votre fonction Gatsby.

5. DÃ©cidez si les composants importÃ©s doivent Ã©galement Ãªtre convertis en syntaxe Astro. Avec l'intÃ©gration officielle installÃ©e, vous pouvez [utiliser les composants React existants dans votre fichier Astro](/fr/guides/framework-components/). Mais vous souhaiterez peut-Ãªtre les convertir en composants `.astro`, surtout s'ils n'ont pas besoin d'Ãªtre interactifsÂ !

6. Supprimez toutes les requÃªtes GraphQL. Utilisez plutÃ´t les instructions d'importation et [`import.meta.glob()`](/fr/guides/imports/#importmetaglob) pour interroger vos fichiers locaux.

Voir [un exemple de modÃ¨le de dÃ©marrage de blog Gatsby converti Ã©tape par Ã©tape](#exemple-guidÃ©-mise-en-page-de-gatsby-Ã -astro)

#### ComparaisonÂ : `.jsx` vs `.astro`

Comparez le composant Gatsby suivant et un composant Astro correspondantÂ :

<AstroJSXTabs>
  <Fragment slot="jsx">
    ```jsx title="component.jsx"
    import * as React from "react"
    import { useStaticQuery, graphql } from "gatsby"
    import Header from "./header"
    import Footer from "./footer"
    import "./layout.css"

    const Component = ({ message, children }) => {
      const data = useStaticQuery(graphql`
        query SiteTitleQuery {
          site {
            siteMetadata {
              title
            }
          }
        }
      `)
      return (
        <>
          <Header siteTitle={data.site.siteMetadata.title} />
          <div style={{ margin: `0`, maxWidth: `960`}}>{message}</div>
          <main>{children}</main>
          <Footer siteTitle={data.site.siteMetadata} />
        </>
      )
    }

    export default Component
    ```
  </Fragment>

  <Fragment slot="astro">
    ```astro title="component.astro"
    ---
    import Header from "./Header.astro"
    import Footer from "./Footer.astro"
    import "../styles/stylesheet.css"
    import { site } from "../data/siteMetaData.js"
    const { message } = Astro.props
    ---
    <Header siteTitle={site.title} />
      <div style="margin: 0; max-width: 960;">{message}</div>
      <main>
        <slot />
      </main>
    <Footer siteTitle={site.title} />
    ```
  </Fragment>
</AstroJSXTabs>

### Migration des fichiers de mise en page

Vous trouverez peut-Ãªtre utile de commencer par convertir vos mises en page et modÃ¨les Gatsby en [composants Astro de mise en page](/fr/basics/layouts/).

Chaque page Astro nÃ©cessite explicitement la prÃ©sence des balises `<html>`, `<head>` et `<body>`, il est donc courant de rÃ©utiliser un fichier de mise en page sur plusieurs pages. Astro utilise un [`<slot />`](/fr/basics/astro-components/#les-slots) Ã  la place de la propriÃ©tÃ© `{children}` de React pour le contenu des pages sans aucune dÃ©claration d'importation requise. Votre mise en page (`layout.js`) et vos modÃ¨les Gatsby ne les incluront pas.

Notez le modÃ¨le HTML standard et l'accÃ¨s direct Ã  `<head>`Â :  

```astro title="src/layouts/Layout.astro" "slot"
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <title>Astro</title>
  </head>
  <body>
    <!-- Enveloppez l'Ã©lÃ©ment slot avec votre modÃ¨le de mise en page existant -->
    <slot />
  </body>
</html>
```

Vous souhaiterez peut-Ãªtre Ã©galement rÃ©utiliser le code prÃ©sent dans le fichier `src/components/seo.js` de Gatsby pour ajouter des mÃ©tadonnÃ©es au site. Notez qu'Astro n'utilise ni `<Helmet>` ni `<Header>` mais crÃ©e directement `<head>`. Vous pouvez importer et utiliser des composants, mÃªme dans `<head>`, pour sÃ©parer et organiser le contenu de votre page.

### Migration des pages et des articles

Dans Gatsby, vos [pages et articles](/fr/basics/astro-pages/) peuvent rÃ©sider dans `src/pages/` ou dans un autre dossier Ã  l'extÃ©rieur de `src`, comme `content`. Dans Astro, tout le contenu de votre page doit vivre Ã  l'intÃ©rieur de `src/` sauf si vous utilisez les [collections de contenu](/fr/guides/content-collections/).

#### Pages React

Vos pages Gatsby JSX (`.js`) existantes devront Ãªtre [converties des fichiers JSX en pages `.astro`](#astuces-convertir-les-fichiers-jsx-en-fichiers-astro). Vous ne pouvez pas rÃ©utiliser un fichier JSX de page dans Astro.

Ces [pages `.astro`](/fr/basics/astro-pages/) doivent Ãªtre situÃ©es dans `src/pages/` et les routes des pages seront gÃ©nÃ©rÃ©es automatiquement en fonction de leur chemin de fichier.

#### Pages Markdown et MDX

Astro dispose d'une prise en charge intÃ©grÃ©e pour Markdown et d'une intÃ©gration facultative pour les fichiers MDX. Vous pouvez rÃ©utiliser tous les [fichiers Markdown et MDX existants](/fr/guides/markdown-content/), mais ils peuvent nÃ©cessiter quelques ajustements dans leur frontmatter, comme l'ajout de [la propriÃ©tÃ© spÃ©ciale `layout` d'Astro](/fr/basics/layouts/#mises-en-page-markdown). Ces fichiers peuvent Ã©galement Ãªtre placÃ©s dans `src/pages/` pour profiter du routage automatique basÃ© sur les fichiers.

Alternativement, vous pouvez utiliser les [collections de contenu](/fr/guides/content-collections/) dans Astro pour stocker et gÃ©rer votre contenu. Vous rÃ©cupÃ©rerez vous-mÃªme le contenu et [gÃ©nÃ©rerez ces pages de maniÃ¨re dynamique](/fr/guides/content-collections/#gÃ©nÃ©rer-des-routes-Ã -partir-du-contenu).

### Migration des tests

Comme Astro gÃ©nÃ¨re du HTML brut, il est possible d'Ã©crire des tests de bout en bout en utilisant la sortie de l'Ã©tape de compilation. Tous les tests de bout en bout Ã©crits prÃ©cÃ©demment peuvent fonctionner immÃ©diatement si vous avez rÃ©ussi Ã  faire correspondre le balisage de votre ancien site Gatsby. Les bibliothÃ¨ques de tests telles que Jest et React Testing Library peuvent Ãªtre importÃ©es et utilisÃ©es dans Astro pour tester vos composants React.

Voir le [guide de test](/fr/guides/testing/) d'Astro pour en savoir plus.

### RÃ©utiliser les fichiers de configuration

Gatsby dispose de plusieurs fichiers de configuration de niveau supÃ©rieur qui incluent Ã©galement des mÃ©tadonnÃ©es de site et de page et qui sont utilisÃ©s pour le routage. Vous n'utiliserez aucun de ces fichiers `gatsby-*.js` dans votre projet Astro mais il se peut que vous puissiez rÃ©utiliser certains contenus au fur et Ã  mesure que vous le construisezÂ :

- `gatsby-config.js`Â : DÃ©placez votre `siteMetadata: {}` dans `src/data/siteMetadata.js` (ou `siteMetadata.json`) pour importer des donnÃ©es Ã  propos de votre site (titre, description, comptes sociaux, etc.) dans les mises en page.

- `gatsby-browser.js`Â : Pensez Ã  ajouter tout ce qui est utilisÃ© ici directement dans la balise `<head>` de votre [mise en page principale](#migration-des-fichiers-de-mise-en-page).

- `gatsby-node.js`Â : Vous n'aurez pas besoin de crÃ©er vos propres nÅ“uds dans Astro, mais la consultation du schÃ©ma prÃ©sent dans ce fichier peut vous aider Ã  dÃ©finir les types dans votre projet Astro.

- `gatsby-ssr.js`Â : Si vous choisissez d'utiliser SSR dans Astro, vous [ajouterez et configurerez l'adaptateur SSR](/fr/guides/on-demand-rendering/) de votre choix directement dans `astro.config.mjs`.

## RÃ©fÃ©renceÂ : Conversion en syntaxe Astro

Voici quelques exemples de syntaxe spÃ©cifique Ã  Gatsby que vous devrez convertir en syntaxe Astro. DÃ©couvrez davantage de [diffÃ©rences entre Astro et JSX](/fr/reference/astro-syntax/#diffÃ©rences-entre-astro-et-jsx) dans le guide pour Ã©crire des composants Astro.

### Les liensÂ : de Gatsby Ã  Astro

Convertissez tous les composants (`<Link to="">`, `<NavLink>` etc.) de Gatsby en balises HTML `<a href="">`. 

```astro del={1} ins={2}
<Link to="/blog">Blog</Link>
<a href="/blog">Blog</a>
```

Astro n'utilise aucun composant spÃ©cial pour les liens, bien que vous puissiez crÃ©er votre propre composant `<Link>`. Vous pouvez ensuite importer et utiliser ce `<Link>` comme vous le feriez pour n'importe quel autre composant.

```astro title="src/components/Link.astro"
---
const { to } = Astro.props
---
<a href={to}><slot /></a>
```

### Les importationsÂ : de Gatsby Ã  Astro

Si nÃ©cessaire, mettez Ã  jour toutes les [importations de fichiers](/fr/guides/imports/) pour rÃ©fÃ©rencer exactement les chemins de fichiers relatifs. Cela peut Ãªtre fait en utilisant des [alias d'importation](/fr/guides/typescript/#alias-dimportation) ou en Ã©crivant un chemin relatif dans son intÃ©gralitÃ©.

Notez que `.astro` et plusieurs autres types de fichiers doivent Ãªtre importÃ©s avec leur extension de fichier complÃ¨te.

```astro title="src/pages/authors/Fred.astro" ".astro"
---
import Card from `../../components/Card.astro`;
---
<Card />
```

### La propriÃ©tÃ© ChildrenÂ : de Gatsby Ã  Astro

Convertissez toutes les instances de `{children}` en `<slot />` Astro. Ce dernier n'a pas besoin de recevoir `{children}` comme propriÃ©tÃ© de fonction et restituera automatiquement le contenu enfant dans un `<slot />`.

```astro title="src/components/MyComponent" del={3-9} ins={11-13}
---
---
export default function MyComponent(props) { 
    return (
      <div>
        {props.children}
      </div>
    );  
}

<div>
  <slot />
</div>
```

Les composants React qui transmettent plusieurs ensembles d'enfants peuvent Ãªtre migrÃ©s vers un composant Astro Ã  l'aide des [slots nommÃ©s](/fr/basics/astro-components/#les-slots-nommÃ©s).

En savoir plus sur [l'utilisation spÃ©cifique de `<slot />` dans Astro](/fr/basics/astro-components/#les-slots).

### Les stylesÂ : de Gatsby Ã  Astro

Vous devrez peut-Ãªtre remplacer les [bibliothÃ¨ques CSS-in-JS](https://github.com/withastro/astro/issues/4432) (par exemple, `styled-components`) avec d'autres options CSS disponibles dans Astro.

Si nÃ©cessaire, convertissez tous les objets de style en ligne (`style={{ fontWeight: "bold" }}`) en attributs de style HTML en ligne (`style="font-weight:bold;"`). Ou utilisez la [balise `<style>` d'Astro](/fr/guides/styling/#styliser-avec-astro) pour limiter la portÃ©e des styles CSS.

```astro title="src/components/Card.astro" del={1} ins={2}
<div style={{backgroundColor: `#f4f4f4`, padding: `1em`}}>{message}</div>
<div style="background-color: #f4f4f4; padding: 1em;">{message}</div>
```

Tailwind est pris en charge aprÃ¨s l'installation du [module d'extension Tailwind pour Vite](/fr/guides/styling/#tailwind). Aucune modification de votre code Tailwind existant n'est requiseÂ !

L'ajout de styles globaux est obtenu dans Gatsby Ã  l'aide des importations CSS dans `gatsby-browser.js`. Dans Astro, vous importerez des fichiers `.css` directement dans un composant de mise en page principal pour obtenir des styles globaux.

En savoir plus sur les [styles dans Astro](/fr/guides/styling/).

### Les componsants d'image de Gatsby vers Astro

Convertissez tous les composants `<StaticImage />` et `<GatsbyImage />` de Gatsby en [composant d'image propre Ã  Astro](/fr/guides/images/) ou en code [HTML/JSX standard avec la balise `<img />`](/fr/guides/images/#images-dans-les-composants-framework-ui) selon les besoins dans vos composants React.

```astro title="src/pages/index.astro"
---
import { Image } from 'astro:assets';
import rocket from '../assets/rocket.png';
---
<Image src={rocket} alt="Une fusÃ©e dans l'espace." />
<img src={rocket.src} alt="Une fusÃ©e dans l'espace.">
```

Le composant `<Image />` d'Astro fonctionne uniquement dans les fichiers `.astro` et `.mdx`. Consultez la [liste complÃ¨te de ses attributs de composants](/fr/reference/modules/astro-assets/#propriÃ©tÃ©s-dimage) et notez que plusieurs diffÃ©reront des attributs de Gatsby.

Pour continuer Ã  utiliser des [images dans les fichiers Markdown (`.md`)](/fr/guides/images/#images-dans-les-fichiers-markdown) en utilisant la syntaxe Markdown standard (`![]()`), vous devrez peut-Ãªtre mettre Ã  jour le lien. L'utilisation directe de la balise HTML `<img>` n'est pas prise en charge dans les fichiers `.md` pour les images locales et doit Ãªtre convertie en syntaxe Markdown.

```md
<!-- src/pages/post-1.md -->

# Ma Page Markdown

<!-- Image locale ayant pour chemin src/assets/stars.png -->
![Un ciel nocturne Ã©toilÃ©.](../assets/stars.png)

```

Dans les composants React (`.jsx`), utilisez la syntaxe d'image JSX standard (`<img />`). Astro n'optimisera pas ces images, mais vous pouvez installer et utiliser des paquets NPM pour plus de flexibilitÃ©.

Vous pouvez en apprendre davantage sur [l'utilisation d'images dans Astro](/fr/guides/images/) dans le guide Images.

### GraphQLÂ : de Gatsby Ã  Astro

Supprimez toutes les rÃ©fÃ©rences aux requÃªtes GraphQL et utilisez Ã  la place [`import.meta.glob()`](/fr/guides/imports/#importmetaglob) pour accÃ©der aux donnÃ©es de vos fichiers locaux. 

Ou, si vous utilisez des collections de contenu, interrogez vos fichiers Markdown et MDX dans `src/content/` en utilisant [`getEntry()` et `getCollection()`](/fr/guides/content-collections/#interroger-les-collections). 

Ces demandes de donnÃ©es sont rÃ©alisÃ©es dans le frontmatter du composant Astro utilisant ces donnÃ©es.

```astro title="src/pages/index.astro" del={2,12-28}
---
import { graphql } from "gatsby"
import { getCollection } from 'astro:content';

// RÃ©cupÃ©rer toutes les entrÃ©es dans `src/content/blog/`
const allBlogPosts = await getCollection('blog');

// RÃ©cupÃ©rer toutes les entrÃ©es dans `src/pages/posts/`
const allPosts = Object.values(import.meta.glob('../pages/post/*.md', { eager: true }));
---

export const pageQuery = graphql`
  {
    allMarkdownRemark(sort: { frontmatter: { date: DESC } }) {
      nodes {
        excerpt
        fields {
          slug
        }
        frontmatter {
          date(formatString: "MMMM DD, YYYY")
          title
          description
        }
      }
    }
  }
`
```

## Exemple guidÃ©Â : Mise en page, de Gatsby Ã  Astro

Cet exemple convertit la mise en page principale du projet (`layout.js`) du modÃ¨le de dÃ©marrage de blog de Gatsby en `src/layouts/Layout.astro`.

Cette mise en page affiche un en-tÃªte lors de la visite de la page d'accueil et un en-tÃªte diffÃ©rent avec un lien vers l'accueil pour toutes les autres pages.

<Steps>
1. Identifiez la dÃ©claration `return()` dans le JSX.

    ```jsx {21-29} title="layout.js"
    import * as React from "react"
    import { Link } from "gatsby"
    const Layout = ({ location, title, children }) => {
      const rootPath = `${__PATH_PREFIX__}/`
      const isRootPath = location.pathname === rootPath
      let header
      if (isRootPath) {
        header = (
          <h1 className="main-heading">
            <Link to="/">{title}</Link>
          </h1>
        )
      } else {
        header = (
          <Link className="header-link-home" to="/">
            Accueil
          </Link>
        )
      }
      return (
        <div className="global-wrapper" data-is-root-path={isRootPath}>
          <header className="global-header">{header}</header>
          <main>{children}</main>
          <footer>
            Â© {new Date().getFullYear()}, CrÃ©Ã© avec
            {` `}
            <a href="https://www.gatsbyjs.com">Gatsby</a>
          </footer>
        </div>
      )
    }
    export default Layout
    ```

2. CrÃ©ez `Layout.astro` et ajoutez le contenu de la dÃ©claration `return`, [converti en syntaxe Astro](#rÃ©fÃ©rence-conversion-en-syntaxe-astro). 

    Remarquez queÂ :

    - `{new Date().getFullYear()}` fonctionne tout simplement ğŸ‰
    - `{children}` devient `<slot />` ğŸ¦¥
    - `className` devient `class` ğŸ“›
    - `Gatsby` devient `Astro` ğŸš€

    ```astro title="src/layouts/Layout.astro" "<slot />" "class" "Astro" "astro.build"
    ---
    ---
    <div class="global-wrapper" data-is-root-path={isRootPath}>
      <header class="global-header">{header}</header>
      <main><slot /></main>
      <footer>
        Â© {new Date().getFullYear()}, CrÃ©Ã© avec
        {` `}
        <a href="https://www.astro.build">Astro</a>
      </footer>
    </div>
    ```

3. Ajoutez une enveloppe de page afin que votre mise en page fournisse Ã  chaque page les parties nÃ©cessaires d'un document HTMLÂ :

    ```astro title="src/layouts/Layout.astro" ins={3-10,22-23}
    ---
    ---
    <html>
      <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="viewport" content="width=device-width" />
        <title>Astro</title>
      </head>
      <body>
        <div class="global-wrapper" data-is-root-path={isRootPath}>
          <header class="global-header">{header}</header>
          <main>
            <slot />
          </main>
          <footer>
            &#169; {new Date().getFullYear()}, CrÃ©Ã© avec
            {` `}
            <a href="https://www.astro.build">Astro</a>
          </footer>
        </div>
      </body>
    </html>
    ```

4. Ajoutez les importations, les props et le JavaScript nÃ©cessaires
  
    Pour afficher de maniÃ¨re conditionnelle un en-tÃªte basÃ© sur la route et le titre de la page dans AstroÂ :

    - Fournissez les props via `Astro.props`. (RappelÂ : votre modÃ¨le Astro accÃ¨de aux props Ã  partir de son frontmatter, et non en les transmettant Ã  une fonction.) 
    - Utilisez un opÃ©rateur ternaire pour afficher un en-tÃªte s'il s'agit de la page d'accueil, et un en-tÃªte diffÃ©rent dans le cas contraire. 
    - Supprimez les variables pour `{header}` et `{isRootPath}` puisqu'elles ne sont plus nÃ©cessaires.
    - Remplacez les balises `<Link/>` de Gatsby par des balises d'ancrage `<a>`.
    - Utilisez `class` Ã  la place de `className`. 
    - Importez une feuille de style locale Ã  partir de votre projet pour que les noms de classe prennent effet.

    ```astro title="src/layouts/Layout.astro" ins={2-3, 15, 16, 20, 24} "class" "<a" "</a>"
    ---
    import '../styles/style.css';
    const { title, pathname } = Astro.props
    ---
    <html>
      <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="viewport" content="width=device-width" />
        <title>Astro</title>
      </head>
      <body>
        <div class="global-wrapper">
          <header class="global-header">
            { pathname === "/" 
            ? 
              <h1 class="main-heading">
              <a href="/">{title}</a>
              </h1>
            : 
              <h1 class="main-heading">
              <a class="header-link-home" href="/">Accueil</a>
              </h1>
            }  
          </header>
          <main>
            <slot />
          </main>
          <footer>
            &#169; {new Date().getFullYear()}, CrÃ©Ã© avec
            {` `}
            <a href="https://www.astro.build">Astro</a>
          </footer>
        </div>
      </body>
    </html>
    ```

5. Mettez Ã  jour `index.astro` pour utiliser cette nouvelle mise en page et lui transmettre les props `title` et `pathname` nÃ©cessairesÂ :

    ```astro title="src/pages/index.astro"
    ---
    import Layout from '../layouts/Layout.astro';
    const pagePathname = Astro.url.pathname
    ---
    <Layout title="Page d'accueil" pathname={pagePathname}>
        <p>Astro</p>
    </Layout>
    ```
    :::tip
    Vous pouvez [rÃ©cupÃ©rer le chemin de la page actuelle en utilisant `Astro.url`](/fr/reference/api-reference/#url).
    :::

6. Pour tester l'en-tÃªte conditionnel, crÃ©ez une deuxiÃ¨me page, `about.astro` en utilisant le mÃªme modÃ¨leÂ :

    ```astro title="src/pages/about.astro"
    ---
    import Layout from '../layouts/Layout.astro';
    const pagePathname = Astro.url.pathname
    ---
    <Layout title="Ã€ propos" pathname={pagePathname}>
        <p>Ã€ propos</p>
    </Layout>
    ```

    Vous devriez voir un lien vers Â« Accueil Â» uniquement lorsque vous visitez la page Ã€ propos.
</Steps>

## Ressources communautaires

<CardGrid>
<LinkCard title="Migration de Gatsby Ã  Astro (Anglais)" href="https://loige.co/migrating-from-gatsby-to-astro/" 
description="Comment et pourquoi j'ai migrÃ© ce blog de Gatsby vers Astro et ce que j'ai appris au cours du processus." />

<LinkCard title="La migration vers Astro Ã©tait facile (Anglais)" href="https://joelhooks.com/migrating-to-astro-was-ez" 
description="Il sâ€™agit du processus de migration de Gatsby vers Astro et pourquoi jâ€™ai choisi Astro." />

<LinkCard title="Mon passage de Gatsby Ã  Astro (Anglais)" href="https://www.joshfinnie.com/blog/my-switch-from-gatsby-to-astro/" 
description="Le passage Ã  Astro mÃ©rite vraiment un article de blog ! Il rÃ©volutionne le monde du dÃ©veloppement web statique pour le meilleur."/>

<LinkCard title="Pourquoi je suis passÃ© de Gatsby Ã  Astro (Anglais)" href="https://dev.to/askrodney/why-i-moved-to-astro-from-gatsby-3fck" 
description="Jetons un coup dâ€™Å“il rapide sur ce qui mâ€™a donnÃ© envie de changer et pourquoi Astro Ã©tait un bon choix." />

<LinkCard title="Une autre migrationÂ : de Gatsby Ã  Astro (Anglais)" href="https://logarithmicspirals.com/blog/migrating-from-gatsby-to-astro/" 
description="DÃ©couvrez comment j'ai transfÃ©rÃ© mon site web personnel de Gatsby vers Astro en partageant mes idÃ©es et mes expÃ©riences du processus de migration."/>

<LinkCard title="De lâ€™impasse Gatsby au bonheur AstroÂ : la refonte de mon site personnel (Anglais)" href="https://jwn.gr/posts/migrating-from-gatsby-to-astro/" 
description="Gatsby a montrÃ© son Ã¢ge et je me suis retrouvÃ© Ã  chercher une alternative moderne. C'est lÃ  qu'est arrivÃ© Astro, un framework qui a insufflÃ© une nouvelle vie Ã  ce site."/>

<LinkCard title="Pourquoi et comment j'ai dÃ©placÃ© mon blog de Gatsby et React vers Astro et Preact (Anglais)" href="https://www.helmerdavila.com/blog/en/why-and-how-i-moved-my-blog-away-from-gatsby-and-react-to-astro-js-and-preact" 
description="Tout est question de simplicitÃ© et de puissance Ã  la fois." />

<LinkCard title="Comment j'ai rÃ©Ã©crit mon Ã©norme site Gatsby de plus de 100 Go dans Astro et appris Ã  l'aimer au passage (Anglais)" href="https://dunedinsound.com/blog/how_i_rewrote_my_huge_gatsby_site_in_astro_and_learned_to_love_it_in_the_process/" 
description="Tout est plus rapide. Plus heureux. Plus productif."/>

<LinkCard title="Comment je suis passÃ© de Gatsby Ã  Astro (tout en gardant Drupal dans le mix) (Anglais)" href="https://albert.skibinski.nl/en/blog/how-i-switched-gatsby-astro-while-keeping-drupal-mix/" 
description="Je suis tombÃ© sur lâ€™Astro relativement nouveau, qui rÃ©pondait Ã  toutes les attentes."/>

<LinkCard title="Migrer mon site web de Gatsby vers Astro (Anglais)" href="https://dev.to/flashblaze/migrating-my-website-from-gatsby-to-astro-2ej5" 
description="Astro est soudainement apparu." />

<LinkCard title="De Gatsby Ã  Astro (Anglais)" href="https://alvin.codes/writing/gatsby-to-astro" 
description="Pourquoi et comment j'ai migrÃ© ce site web Gatsby vers Astro."/>

</CardGrid>

:::note[Vous avez une ressource Ã  partagerâ€¯?]
Si vous avez trouvÃ© (ou crÃ©Ã©Â !) une vidÃ©o ou un article de blog utile sur la conversion d'un site Gatsby en site Astro, [ajoutez-le Ã  cette liste](https://github.com/withastro/docs/edit/main/src/content/docs/en/guides/migrate-to-astro/from-gatsby.mdx)â€¯!
:::
