---
title: Headless WordPress et Astro
description: Ajoutez du contenu √† votre projet Astro en utilisant WordPress comme CMS
sidebar:
  label: WordPress
type: cms
stub: false
service: WordPress
i18nReady: true
---
import { FileTree } from '@astrojs/starlight/components';
import Grid from '~/components/FluidGrid.astro'
import Card from '~/components/ShowcaseCard.astro'
import { LinkCard, CardGrid } from '@astrojs/starlight/components';

[WordPress](https://wordpress.org/) est un syst√®me de gestion de contenu qui comprend son propre frontend, mais qui peut √©galement √™tre utilis√© comme un CMS sans t√™te pour fournir du contenu √† votre projet Astro.

## Int√©gration avec Astro

WordPress est dot√© d'un syst√®me int√©gr√© de l'[API REST WordPress](https://developer.wordpress.org/rest-api/) pour connecter vos donn√©es WordPress √† Astro. Vous pouvez √©ventuellement installer [WPGraphQL](https://wordpress.org/plugins/wp-graphql/) ou [Gato GraphQL](https://wordpress.org/plugins/gatographql/) sur votre site pour utiliser GraphQL.

### Pr√©-requis

Pour commencer, vous devez disposer des √©l√©ments suivants :

1. **Un projet Astro** - Si vous n'avez pas encore de projet Astro, notre [Guide d'installation](/fr/install-and-setup/) vous permettra d'√™tre op√©rationnel en un rien de temps.
2. **Un site WordPress** - L'API REST de votre site est `[VOTRE_SITE]/wp-json/wp/v2/` et est disponible par d√©faut avec tout site WordPress. Il est √©galement possible de [configurer WordPress dans un environnement local](https://wordpress.org/support/article/installing-wordpress-on-your-own-computer/).

### Mise en place des informations d'identification

Par d√©faut, votre API WordPress REST est disponible pour des requ√™tes externes afin de r√©cup√©rer des donn√©es sans authentification. Cela ne permet pas aux utilisateurs de modifier vos donn√©es ou les param√®tres de votre site et vous permet d'utiliser vos donn√©es dans votre projet Astro sans aucune authentification.

Vous pouvez choisir de [demander une authentification](https://developer.wordpress.org/rest-api/frequently-asked-questions/#require-authentication-for-all-requests) si n√©cessaire.

### R√©cup√©ration de donn√©es

R√©cup√©rez vos donn√©es WordPress via l'URL unique de l'API REST de votre site et la route de votre contenu (pour un blog, il s'agira g√©n√©ralement de `posts`). Ensuite, vous pouvez rendre les propri√©t√©s de vos donn√©es en utilisant la directive `set:html={}` d'Astro.

Par exemple, pour afficher une liste de titres d'articles et leur contenu :

```astro title="src/pages/index.astro"
---
const res = await fetch("https://[YOUR-SITE]/wp-json/wp/v2/posts");
const posts = await res.json();
---
<h1>Astro + WordPress üöÄ</h1>
{
  posts.map((post) => (
      <h2 set:html={post.title.rendered} />
      <p set:html={post.content.rendered} />
  ))
}
```

L'API REST de WordPress inclut des [param√®tres globaux](https://developer.wordpress.org/rest-api/using-the-rest-api/global-parameters/) tels que `_fields` et `embed`.

Une grande quantit√© de donn√©es est disponible via cette API, vous pouvez donc souhaiter ne r√©cup√©rer que certains champs. Vous pouvez restreindre votre r√©ponse en ajoutant le param√®tre [`_fields`](https://developer.wordpress.org/rest-api/using-the-rest-api/global-parameters/#_fields) √† l'URL de l'API, par exemple : `[VOTRE-SITE]/wp/v2/posts?_fields=author,id,excerpt,title,link`

L'API peut √©galement renvoyer du contenu li√© √† votre article, tel qu'un lien vers l'article parent ou vers les commentaires sur l'article. Vous pouvez ajouter le param√®tre [`_embed`](https://developer.wordpress.org/rest-api/using-the-rest-api/global-parameters/#_embed) √† l'URL de l'API (par exemple, `[VOTRE-SITE]/wp/v2/posts?_embed`) pour indiquer au serveur que la r√©ponse doit inclure ces ressources int√©gr√©es.

## Cr√©er un blog avec WordPress et Astro

Cet exemple r√©cup√®re des donn√©es de l'API WordPress publique de [https://norian.studio/dinosaurs/](https://norian.studio/dinosaurs/). Ce site WordPress stocke des informations sur des dinosaures individuels sous la route `dinos`, de la m√™me mani√®re qu'un blog stockerait des articles individuels sous la route `posts`.

Cet exemple montre comment reproduire cette structure de site dans Astro : une page d'index qui r√©pertorie les dinosaures avec des liens vers des pages individuelles de dinosaures g√©n√©r√©es dynamiquement.

:::note
Pour utiliser les [Custom Post Types (CPT)](https://learn.wordpress.org/lesson-plan/custom-post-types/) dans votre API WordPress (pas seulement `post` et `page`), vous devrez [les configurer dans votre tableau de bord WordPress](https://stackoverflow.com/questions/48536646/how-can-i-get-data-from-custom-post-type-using-wp-rest-api) ou [ajouter le support de l'API REST pour les types de contenu personnalis√©s](https://developer.wordpress.org/rest-api/extending-the-rest-api/adding-rest-api-support-for-custom-content-types/) dans WordPress.

Cet exemple r√©cup√®re les donn√©es d'un site WordPress dont les types de contenu ont d√©j√† √©t√© configur√©s et expos√©s √† l'API REST.
:::

### Affichage d'une liste d'articles WordPress

La page `src/pages/index.astro` r√©pertorie chaque dinosaure, avec une description et un lien vers sa propre page.

<FileTree title="Structure de Projet">
- src/
  - pages/
    - **index.astro**
    - dinos/
      - [slug].astro
- astro.config.mjs
- package.json
</FileTree>

La r√©cup√©ration via l'API renvoie un objet qui comprend les propri√©t√©s suivantes :

- `title.rendered` - Contient le rendu HTML du titre de l'article.
- `content.rendered` - Contient le rendu HTML du contenu de l'article.
- `slug` - Contient le nom de l'article. (Il s'agit du lien vers les pages individuelles de dinosaures g√©n√©r√©es dynamiquement).

```astro title="/src/pages/index.astro"
---
import Layout from "../layouts/Layout.astro";

let res = await fetch("https://norian.studio/wp-json/wp/v2/dinos");
let posts = await res.json();
---
<Layout title="Dinos!">
  <section>
    <h1>Liste des Dinosaures</h1>
    {
      posts.map((post) => (
        <article>
          <h2>
            <a href={`/dinos/${post.slug}/`} set:html={post.title.rendered} />
          </h2>
          <Fragment set:html={post.content.rendered} />
        </article>
      ))
    }
  </section>
</Layout>
```

### Utiliser l'API de WordPress pour g√©n√©rer des pages

La page `src/pages/dinos/[slug].astro` [g√©n√®re dynamiquement une page](/fr/guides/routing/#routes-dynamiques) pour chaque dinosaure.

```astro title="/src/pages/dinos/[slug].astro"
---
import Layout from '../../layouts/Layout.astro';

const { slug } = Astro.params;

let res = await fetch(`https://norian.studio/wp-json/wp/v2/dinos?slug=${slug}`);
let [post] = await res.json();

// La fonction getStaticPaths() est n√©cessaire pour les sites Astro statiques.
// Si vous utilisez SSR, vous n'aurez pas besoin de cette fonction.
export async function getStaticPaths() {
  let data = await fetch("https://norian.studio/wp-json/wp/v2/dinos");
  let posts = await data.json();

  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post: post },
  }));
}
---
<Layout title={post.title.rendered}>
  <article>
    <h1 set:html={post.title.rendered} />
    <Fragment set:html={post.content.rendered} />
  </article>
</Layout>
```

### Retour des ressources int√©gr√©es

Le param√®tre de requ√™te `_embed` demande au serveur de renvoyer des ressources connexes (int√©gr√©es).

```astro title="src/pages/dinos/[slug].astro" /&_embed/
---
const { slug } = Astro.params;

let res = await fetch(`https://norian.studio/wp-json/wp/v2/dinos?slug=${slug}&_embed`);
let [post] = await res.json();
---
```

La propri√©t√© `_embedded['wp:featuredmedia']['0'].media_details.sizes.medium.source_url` est renvoy√©e, et peut √™tre utilis√©e pour afficher l'image vedette sur chaque page de dinosaures. (Remplacez `medium` par la taille d'image souhait√©e).

```astro title="/src/pages/dinos/[slug].astro" {3}
<Layout title={post.title.rendered}>
  <article>
    <img src={post._embedded['wp:featuredmedia']['0'].media_details.sizes.medium.source_url} />
    <h1 set:html={post.title.rendered} />
    <Fragment set:html={post.content.rendered} />
  </article>
</Layout>
```

### Publier votre site web

Pour d√©ployer votre site web, consultez nos [guides de d√©ploiement](/fr/guides/deploy/) et suivez les instructions de votre h√©bergeur pr√©f√©r√©.

## Ressources communautaires

- [Construire un site Astro avec WordPress comme CMS sans t√™te](https://blog.openreplay.com/building-an-astro-website-with-wordpress-as-a-headless-cms/) par Chris Bongers.
- [Construire avec Astro x WordPress](https://www.youtube.com/watch?v=Jstqgklvfnc) sur le flux de Ben Holmes.
- [Construire un site WordPress sans t√™te avec Astro](https://developers.wpengine.com/blog/building-a-headless-wordpress-site-with-astro) par Jeff Everhart.
- [Astro et WordPress en tant qu'API](https://darko.io/posts/wp-as-an-api/) par Darko Bozhinovski.

## Sites web en production

Les sites suivants utilisent Astro + WordPress en production :

- [Dinos !](https://wc-dinos.netlify.app/) par Anindo Neel Dutta - [code source sur GitHub](https://github.com/leen-neel/astro-wordpress)

## Th√®mes

<Grid>
  <Card title="Astro WordPress Starter" href="https://astro.build/themes/details/astro-wordpress-starter/" thumbnail="astro-wordpress-starter.png"/>
</Grid>

## Ressources communautaires

<CardGrid>

  <LinkCard href="https://dev.to/bngmnn/leveraging-wordpress-as-a-headless-cms-for-your-astro-website-a-comprehensive-guide-a4d" title="Introduction √† Astro + WordPress (en)"/>
  <LinkCard title="Astro + WPGraphQL pour des sites WordPress plus s√©curis√©s (en)" href="https://www.youtube.com/watch?v=fWxn-r83ygQ" />
  <LinkCard title="R√©duire les temps de construction de WordPress en mode sans t√™te gr√¢ce √† l'API Content Layer d'Astro (en)" href="https://andrewkepson.com/blog/headless-wordpress/build-time-astro-content-layer-api/"/>
  <LinkCard title="Comment configurer un site WordPress sans t√™te avec Astro (en)" href="https://dev.to/mathiasahlgren/how-to-set-up-a-headless-wordpress-site-with-astro-3a2h" />
  <LinkCard title="Cr√©er un site statique avec WordPress et Astro (en)" href="https://kinsta.com/blog/wordpress-astro/" />
  <LinkCard title="Passer √† WordPress headless avec Astro (en)" href="https://www.youtube.com/watch?v=MP2TR6Z_YTc" />
  <LinkCard title="Tirer parti de WordPress comme CMS sans t√™te pour votre site Web Astro¬†: configuration de l'API et r√©cup√©ration de donn√©es (en)" href="https://medium.com/@bangemann.dev/configure-wordpress-rest-api-setup-data-fetching-4af5161095f6" />
  <LinkCard title="WordPress headless avec Astro¬†: Installation d'Astro et r√©cup√©ration d'articles avec WP-GraphQL (en)" href="https://www.youtube.com/watch?v=2PSqABrME28" />
  <LinkCard title="Cr√©er un site WordPress sans t√™te avec Astro (en)" href="https://www.youtube.com/watch?v=54U7dVmhyxE" />
  <LinkCard title="D√©mo de d√©marrage de WordPress sans t√™te avec Astro par WPEngine (en)" href="https://www.youtube.com/watch?v=BcoxZZIfESI" />
  <LinkCard title="WordPress headless avec Astro ‚Äì Cr√©ez un blog simple √† partir de z√©ro avec Tailwind CSS (en)" href="https://fullstackdigital.io/blog/headless-wordpress-with-astro-build-a-simple-blog/" />
  <LinkCard title="Cr√©er un site e-commerce avec WordPress Headless et Astro (en)" href="https://shaxadd.medium.com/building-an-e-commerce-website-with-headless-wordpress-and-astro-2712d8c8b735" />
   <LinkCard title="Cr√©er un site WordPress sans t√™te avec Astro (en)" href="https://wpengine.com/builders/building-headless-wordpress-site-astro/" />
  <LinkCard title="Cr√©er un site web Astro avec WordPress en tant que CMS headless (en)" href="https://blog.openreplay.com/building-an-astro-website-with-wordpress-as-a-headless-cms/" />
 

</CardGrid>

:::note[Vous avez une ressource √† partager‚ÄØ?]
Si vous avez trouv√© (ou cr√©√©¬†!) une vid√©o ou un article de blog utile sur l'utilisation de WordPress avec Astro, [ajoutez-le √† cette liste](https://github.com/withastro/docs/edit/main/src/content/docs/en/guides/cms/wordpress.mdx)‚ÄØ!
:::
