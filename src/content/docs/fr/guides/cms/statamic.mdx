---
title: Statamic & Astro
description: Ajouter du contenu √† votre projet Astro en utilisant Statamic comme CMS
sidebar:
  label: Statamic
type: cms
stub: false
service: Statamic
i18nReady: true
---
import Grid from '~/components/FluidGrid.astro'
import Card from '~/components/ShowcaseCard.astro'

[Statamic](https://statamic.com/) est un CMS moderne √† fichiers plats. Il permet aux d√©veloppeurs de cr√©er facilement des sites web et des applications dynamiques tout en offrant aux √©diteurs de contenu une interface intuitive et conviviale pour la gestion du contenu.

## Int√©gration avec Astro

Statamic est livr√© avec une [API REST](https://statamic.dev/rest-api) et une [API GraphQL](https://statamic.dev/graphql) int√©gr√©es pour connecter vos donn√©es √† Astro.

### Pr√©requis

Pour commencer, vous devez disposer des √©l√©ments suivants :

1. Les API REST et GraphQL ne sont disponibles que dans la version pro de Statamic. Vous pouvez essayer la version Pro gratuitement sur votre [machine locale](https://statamic.dev/tips/how-to-enable-statamic-pro#trial-mode).
2. **Un projet Astro** - Si vous avez besoin d'un projet Astro, notre [guide d'installation](/fr/install-and-setup/) vous permettra d'√™tre rapidement op√©rationnel.
3. **Un site Statamic** - Si vous avez besoin d'un site Statamic, [ce guide](https://statamic.dev/quick-start-guide) vous aidera √† d√©marrer.
N'oubliez pas d'activer l'[API REST](https://statamic.dev/rest-api#enable-the-api) ou l'[API GraphQL](https://statamic.dev/graphql#enable-graphql) en ajoutant `STATAMIC_API_ENABLED=true` ou `STATAMIC_GRAPHQL_ENABLED=true` dans le fichier `.env` et d'activer les ressources n√©cessaires dans le fichier de configuration de l'API.

:::caution
Tous les exemples supposent que votre site web a une collection appel√©e `posts`, qui a un plan appel√© `post`, et que ce plan a un champ titre (champs de type texte) et un contenu (champ de type Markdown).
:::

### R√©cup√©ration de donn√©es
:::caution
Si vous utilisez Statamic et Astro sur votre machine locale, n'oubliez pas d'utiliser `127.0.0.1` au lieu de `localhost` lorsque vous r√©cup√©rez l'API.

Lors d'une requ√™te sur le serveur Astro, `localhost` n'est pas r√©solu correctement comme il l'est dans le navigateur, et toute r√©cup√©ration vers l'une ou l'autre API √©chouera.
:::

#### API REST

R√©cup√©rez vos donn√©es Statamic √† partir de l'URL de l'API REST de votre site. Par d√©faut, c'est `https://[VOTRE-SITE]/api/`. Ensuite, vous pouvez restituer les propri√©t√©s de vos donn√©es en utilisant la directive Astro `set:html={}`. 

Par exemple, pour afficher une liste de titres et leur contenu √† partir d'une [collection s√©lectionn√©e](https://statamic.dev/collections) :

```astro title="src/pages/index.astro"
---
const res = await fetch("https://[VOTRE-SITE]/api/collections/posts/entries?sort=-date")
const posts = await res.json()
---
<h1>Astro + Statamic üöÄ</h1>
{
  posts.map((post) => (
      <h2 set:html={post.title} />
      <p set:html={post.content} />
  ))
}
```

#### GraphQL

R√©cup√©rez vos donn√©es Statamic avec l'URL de l'API GraphQL de votre site. Par d√©faut, c'est `https://[VOTRE-SITE]/graphql/`. Ensuite, vous pouvez restituer les propri√©t√©s de vos donn√©es en utilisant la directive Astro `set:html={}`. 

Par exemple, pour afficher une liste de titres et leur contenu √† partir d'une [collection s√©lectionn√©e](https://statamic.dev/collections) :

```astro title="src/pages/index.astro"
---
const graphqlQuery = {
  query: `
    query Entries($page: Int, $locale: String) {
      entries(
        collection: "posts"
        sort: "date asc"
        limit: 20
        page: $page
        filter: { locale: $locale }
      ) {
        current_page
        has_more_pages
        data {
          title
          ... on Entry_Posts_Post {
              content
            }
        }
      }
    }
  `,
  variables: {
    page: page,
    locale: locale,
  },
};

const res = await fetch("https://[YOUR-SITE]/graphql", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify(graphqlQuery),
})

const { data } = await res.json();
const entries = data?.entries;
---
<h1>Astro + Statamic üöÄ</h1>
{
  entries.data.map((post) => (
      <h2 set:html={post.title} />
      <p set:html={post.content} />
  ))
}
```

### Publier votre site

Pour d√©ployer votre site Astro, consultez nos [guides de d√©ploiement](/fr/guides/deploy/) et suivez les instructions de votre h√©bergeur pr√©f√©r√©.

## Ressources communautaires 

- [Comment construire un site statique en utilisant Statamic comme CMS headless](https://buddy.works/guides/statamic-rest-api) (Anglais)
- [Mise en ≈ìuvre des aper√ßus en direct Astro avec Statamic](https://maciekpalmowski.dev/implementing-live-previews-in-headless-statamic-when-using-astro/) (Anglais)

## Th√®mes

<Grid>
  <Card title="Creek" href="https://astro.build/themes/details/creek/" thumbnail="creek.png"/>
</Grid>
