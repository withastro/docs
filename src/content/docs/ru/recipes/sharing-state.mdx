---
title: Общее состояние между компонентами Astro
description: Узнайте, как организовать общее состояние между компонентами Astro с помощью Nano Stores.
i18nReady: true
type: recipe
---
import { Steps } from '@astrojs/starlight/components';
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';

:::tip
Используете компоненты фреймворков? Посмотрите, [как делиться состоянием между Островками](/ru/recipes/sharing-state-islands/)!
:::

При создании сайта на Astro вам может потребоваться передавать данные или состояние между разными компонентами. Astro рекомендует использовать [Nano Stores](https://github.com/nanostores/nanostores) для хранения общего состояния на стороне клиента.

## Инструкция

<Steps>
1. Установите Nano Stores:

    <PackageManagerTabs>
      <Fragment slot="npm">```shell npm install nanostores ```</Fragment>
      <Fragment slot="pnpm">```shell pnpm add nanostores ```</Fragment>
      <Fragment slot="yarn">```shell yarn add nanostores ```</Fragment>
    </PackageManagerTabs>

2. Создайте хранилище (store). В этом примере мы будем отслеживать, открыто ли диалоговое окно:

    ```ts title="src/store.js"
    import { atom } from 'nanostores';

    export const isOpen = atom(false);
    ```

3. Импортируйте и используйте хранилище в тегах `<script>` ваших компонентов.

    Компоненты `Button` и `Dialog` используют общее состояние `isOpen` для управления отображением элемента:

    ```astro title="src/components/Button.astro"
    <button id="openDialog">Открыть</button>

    <script>
      import { isOpen } from '../store.js';
      
      function openDialog() {
        isOpen.set(true);
      }

      document.getElementById('openDialog').addEventListener('click', openDialog);
    </script>
    ```

    ```astro title="src/components/Dialog.astro"
    <div id="dialog" style="display: none">Привет, мир!</div>

    <script>
      import { isOpen } from '../store.js';

      isOpen.subscribe(open => {
        const dialog = document.getElementById('dialog');
        dialog.style.display = open ? 'block' : 'none';
      })
    </script>
    ```
</Steps>
