---
title: Изображения
description: Узнайте, как работать с изображениями в Astro.
i18nReady: true
---
import Since from '~/components/Since.astro';
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';
import RecipeLinks from "~/components/RecipeLinks.astro";
import { Steps } from '@astrojs/starlight/components'
import ReadMore from '~/components/ReadMore.astro';

Astro предоставляет несколько способов использования изображений на сайте, независимо от того, хранятся ли они локально в проекте, доступны по внешней ссылке или управляются через CMS или CDN.

В Astro встроены компоненты [`<Image />`](#image-) и [`<Picture />`](#picture-), поддержка [Markdown-синтаксиса](#изображения-в-файлах-markdown) (`![]()`), [SVG-компоненты](#svg-компоненты) и [функция генерации изображений](#генерация-изображений-с-помощью-getimage) для оптимизации и трансформации ваших файлов. Кроме того, вы можете настроить [автоматическое создание адаптивных изображений](#адаптивные-изображения) по умолчанию.

Вы всегда можете использовать обычные HTML-теги `<img>` или `<svg>` в файлах `.astro` или Markdown. Однако в этом случае Astro не будет выполнять никакой оптимизации или обработки этих изображений.

В Astro нет нативной поддержки видео; мы рекомендуем использовать [сторонние хостинги видео](/ru/guides/media/) для стриминга и оптимизации видеоконтента.

<ReadMore>См. полный справочник API для компонентов [`<Image />`](/ru/reference/modules/astro-assets/#image-) и [`<Picture />`](/ru/reference/modules/astro-assets/#picture-).</ReadMore>

## Где хранить изображения

### `src/` против `public/`

Мы рекомендуем хранить локальные изображения в папке `src/`, чтобы Astro мог их трансформировать, оптимизировать и включать в общую сборку. Файлы в папке `public/` всегда отдаются браузеру «как есть» без какой-либо обработки.

Изображения в `src/` могут использоваться во всех файлах проекта: `.astro`, `.md`, `.mdx` и компонентах других фреймворков через обычный импорт.

Используйте папку `public/`, если хотите избежать обработки. Такие изображения доступны через URL-пути относительно вашего домена. Например, фавикон (favicon) сайта обычно размещают в корне этой папки.

### Удаленные изображения

Вы можете хранить изображения удаленно в [CMS](/ru/guides/cms/) или на платформе [управления цифровыми активами (DAM)](/ru/guides/media/). Astro может получать эти данные через API или отображать изображения по прямым ссылкам.

Для обеспечения безопасности Astro будет оптимизировать изображения только из [доверенных источников, указанных в вашей конфигурации](#авторизация-удаленных-изображений). Изображения из других источников будут отображаться без обработки.

## Изображения в файлах `.astro`

<p>
**Варианты:** `<Image />`, `<Picture />`, `<img>`, `<svg>`, SVG-компоненты
</p>

В шаблонах Astro вы можете использовать компонент [`<Image />`](/ru/reference/modules/astro-assets/#image-) для рендеринга оптимизированных изображений и компонент [`<Picture />`](/ru/reference/modules/astro-assets/#picture-) для генерации различных форматов и размеров. Оба компонента поддерживают [свойства адаптивности](#адаптивные-изображения).

Также вы можете импортировать и использовать [SVG-файлы как компоненты](#svg-компоненты).

Обычные HTML-теги `<img>` и `<svg>` также доступны. [Изображения в теге `<img>`](#отображение-необработанных-изображений-через-img) не обрабатываются и копируются в папку сборки без изменений.

Значение атрибута `src` зависит от места хранения файла:

- Для локальных изображений в `src/` используйте относительный путь при импорте.
  Компоненты `<Image />` и `<Picture />` используют сам импорт (например, `src={rocket}`), а тег `<img>` — свойство `.src` этого импорта (например, `src={rocket.src}`).

- Для удаленных изображений и файлов из `public/` используйте строковый URL-путь.
  Указывайте полный URL для внешних ссылок или относительный путь для папки `public/` (например, `src="/images/my-image.jpg"` для файла в `public/images/my-image.jpg`).

```astro title="src/pages/blog/my-images.astro"
---
import { Image } from 'astro:assets';
import localBirdImage from '../../images/localBirdImage.png';
---
<Image src={localBirdImage} alt="Птица в гнезде." />
<Image src="/images/public-bird.jpg" alt="Птица." width="50" height="50" />
<Image src="https://example.com/remote-bird.jpg" alt="Птица." width="50" height="50" />

<img src={localBirdImage.src} alt="Птица в гнезде.">
```

## Изображения в файлах Markdown

<p>
**Варианты:** `![]()`, `<img>` (только для public или удаленных изображений)
</p>

Используйте стандартный синтаксис Markdown `![alt](src)`. Локальные изображения в `src/` и удаленные изображения будут оптимизированы. Если настроено [глобальное поведение адаптивности](/ru/reference/configuration-reference/#imagelayout), эти изображения также станут [адаптивными](#адаптивные-изображения).

Файлы из папки `public/` никогда не оптимизируются.

```md
<!-- src/pages/post-1.md -->
# Моя страница Markdown

<!-- Локальное изображение в src/assets/ -->
![Звездное небо.](../assets/stars.png)

<!-- Изображение в public/images/ -->
![Звездное небо.](/images/stars.png)

<!-- Удаленное изображение -->
![Astro](https://example.com/images/remote-image.png)
```

Тег `<img>` можно использовать для `public` или удаленных изображений без оптимизации. Локальные файлы из `src` в теге `<img>` в Markdown не поддерживаются.

Компоненты `<Image />` и `<Picture />` недоступны в `.md` файлах. Если вам нужно больше контроля над атрибутами, используйте [интеграцию MDX](/ru/guides/integrations-guide/mdx/).

## Изображения в компонентах UI-фреймворков

<p>
**Варианты:** стандартный синтаксис фреймворка (например, `<img />` в JSX)
</p>

[Локальные изображения должны быть сначала импортированы](#отображение-необработанных-изображений-через-img). Затем их можно использовать в привычном для фреймворка синтаксисе:

```jsx title="src/components/ReactImage.jsx"
import stars from "../assets/stars.png";

export default function ReactImage() {
  return <img src={stars.src} alt="Звездное небо." />;
}
```

Компоненты Astro (например, `<Image />`) недоступны внутри компонентов фреймворков. Однако вы можете передать их как дочерние элементы [внутри `.astro` файла](/ru/guides/framework-components/#передача-дочерних-элементов-children).

## Компоненты Astro для изображений

### `<Image />`

Используйте компонент `<Image />` для отображения оптимизированных версий локальных и разрешенных удаленных изображений.

Компонент позволяет изменять размеры, тип файла и качество. Трансформация происходит во время сборки (для статичных страниц) или «на лету» (для страниц по запросу). Итоговый тег `<img>` включает атрибуты `alt`, `loading`, `decoding` и автоматически вычисляет размеры для предотвращения Cumulative Layout Shift (CLS).

:::note[Что такое CLS?]
[Cumulative Layout Shift (CLS)](https://web.dev/cls/) — это метрика Core Web Vitals, измеряющая смещение контента при загрузке страницы. `<Image />` оптимизирует CLS, автоматически устанавливая правильные `width` и `height`.
:::

```astro
---
import { Image } from 'astro:assets';
import myImage from '../assets/my_image.png'; // 1600x900
---
<Image src={myImage} alt="Описание изображения." />
```

### `<Picture />`

<p><Since v="3.3.0" /></p>

Используйте компонент `<Picture />` для генерации тега `<picture>` с поддержкой нескольких форматов и размеров. Это позволяет браузеру выбирать оптимальный формат (например, AVIF или WebP), оставляя стандартный формат (PNG/JPG) в качестве запасного.

```astro
---
import { Picture } from 'astro:assets';
import myImage from '../assets/my_image.png';
---
<Picture src={myImage} formats={['avif', 'webp']} alt="Описание." />
```

## Адаптивные изображения

<p><Since v="5.10.0" /></p>

Адаптивные изображения подстраиваются под размер экрана и разрешение устройства пользователя. Astro может автоматически генерировать атрибуты `srcset` и `sizes`, а также применять необходимые [стили](#стили-адаптивных-изображений).

При настройке [глобального параметра `image.layout`](/ru/reference/configuration-reference/#imagelayout) это поведение применится ко всем компонентам и даже к изображениям в Markdown.

:::note
Генерация адаптивного изображения создает несколько копий файла разного размера. Это может увеличить время сборки проекта.
:::

## SVG-компоненты

<p><Since v="5.7.0" /></p>

Astro позволяет импортировать SVG-файлы и использовать их как обычные компоненты. Содержимое SVG будет встроено (inline) прямо в HTML-код.

```astro
---
import Logo from './logo.svg';
---
<Logo width={64} height={64} fill="currentColor" />
```

## Отображение необработанных изображений через `<img>`

Вы можете писать тег `<img>` напрямую. В этом случае Astro не будет оптимизировать файл.

### Изображения в `src/`

Для использования локального изображения в теге `<img>` его нужно импортировать. Импортированный объект соответствует типу `ImageMetadata`:

```ts
interface ImageMetadata {
  src: string;
  width: number;
  height: number;
  format: string;
}
```

```astro
---
import myDog from '../../images/dog.jpg';
---
<img src={myDog.src} width={myDog.width} height={myDog.height} alt="Собака." />
```

## Авторизация удаленных изображений

Настройте списки разрешенных доменов для оптимизации через [`image.domains`](/ru/reference/configuration-reference/#imagedomains) или [`image.remotePatterns`](/ru/reference/configuration-reference/#imageremotepatterns). Это защищает ваш сайт от нежелательного использования ресурсов внешними сервисами.

```ts
// astro.config.mjs
export default defineConfig({
  image: {
    domains: ["astro.build"],
    remotePatterns: [{ protocol: "https" }],
  }
});
```

## Изображения в коллекциях контента

Вы можете объявить изображение в метаданных (frontmatter) записи коллекции:

```md title="src/content/blog/my-post.md"
---
title: "Мой пост"
cover: "./cover.jpeg"
coverAlt: "Закат в горах."
---
```

И используйте хелпер `image()` в схеме для валидации:

```ts
const blogCollection = defineCollection({
  schema: ({ image }) => z.object({
    title: z.string(),
    cover: image(),
    coverAlt: z.string(),
  }),
});
```

## Alt-текст

Доступность (A11y) крайне важна. Всегда используйте атрибут `alt` для описания изображений. Для декоративных элементов, не несущих смысловой нагрузки, устанавливайте `alt=""`, чтобы экранные дикторы игнорировали их.
