---
title: –°–µ—Å—Å–∏–∏
description: –û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü, —Ä–µ–Ω–¥–µ—Ä—è—â–∏—Ö—Å—è –ø–æ –∑–∞–ø—Ä–æ—Å—É.
i18nReady: true
---

import Since from '~/components/Since.astro';
import ReadMore from '~/components/ReadMore.astro';

<p>
<Since v="5.7.0" />
</p>

**–°–µ—Å—Å–∏–∏** –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –Ω–∞ [—Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö, —Ä–µ–Ω–¥–µ—Ä—è—â–∏—Ö—Å—è –ø–æ –∑–∞–ø—Ä–æ—Å—É (on-demand rendering)](/ru/guides/on-demand-rendering/).

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç [`–∫—É–∫ (cookies)`](/ru/guides/on-demand-rendering/#–∫—É–∫–∏), –¥–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–π —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –±–æ–ª—å—à–∏–µ –æ–±—ä–µ–º—ã –¥–∞–Ω–Ω—ã—Ö, –Ω–µ –±–µ—Å–ø–æ–∫–æ—è—Å—å –æ–± –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö —Ä–∞–∑–º–µ—Ä–∞ –∏–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –°–µ—Å—Å–∏–∏ —É–¥–æ–±–Ω—ã –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∫–æ—Ä–∑–∏–Ω—ã –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ñ–æ—Ä–º, –∏ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ JavaScript –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞.

```astro title="src/components/CartButton.astro" {3}
---
export const prerender = false;
const cart = await Astro.session?.get('cart');
---

<a href="/checkout">üõí {cart?.length ?? 0} —Ç–æ–≤–∞—Ä–æ–≤</a>
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Å—Å–∏–π

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å–µ—Å—Å–∏–π —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥—Ä–∞–π–≤–µ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –ê–¥–∞–ø—Ç–µ—Ä—ã [Node](/ru/guides/integrations-guide/node/#sessions), [Cloudflare](/ru/guides/integrations-guide/cloudflare/#sessions) –∏ [Netlify](/ru/guides/integrations-guide/netlify/#sessions) –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –î–ª—è –¥—Ä—É–≥–∏—Ö –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è [—É–∫–∞–∑–∞—Ç—å –¥—Ä–∞–π–≤–µ—Ä –≤—Ä—É—á–Ω—É—é](/ru/reference/configuration-reference/#sessiondriver).

```js title="astro.config.mjs"
{
  adapter: vercel(),
  session: {
    driver: "redis",
  },
}
```

<ReadMore>–°–º. [—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Å–µ—Å—Å–∏–π](/ru/reference/configuration-reference/#–æ–ø—Ü–∏–∏-—Å–µ—Å—Å–∏–π) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.</ReadMore>

## –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ —Å–µ—Å—Å–∏–∏

–û–±—ä–µ–∫—Ç [`session`](/ru/reference/api-reference/#session) –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ ID —Å–µ—Å—Å–∏–∏. –û–Ω –¥–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∫ `Astro.session` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö Astro, –∏ –∫–∞–∫ `context.session` –≤ —ç–Ω–¥–ø–æ–π–Ω—Ç–∞—Ö, –º–∏–¥–ª–≤–∞—Ä–∞—Ö –∏ –¥–µ–π—Å—Ç–≤–∏—è—Ö.

–°–µ—Å—Å–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏. –ï—ë –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å –ø–æ–º–æ—â—å—é `session.regenerate()` –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å —á–µ—Ä–µ–∑ `session.destroy()`.

–í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –º–µ—Ç–æ–¥—ã `session.get()` –∏ `session.set()`.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

```astro title="src/components/CartButton.astro"
---
export const prerender = false;
const cart = await Astro.session?.get('cart');
---
<a href="/checkout">üõí {cart?.length ?? 0} —Ç–æ–≤–∞—Ä–æ–≤</a>
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ API —ç–Ω–¥–ø–æ–π–Ω—Ç–∞—Ö

```ts title="src/pages/api/addToCart.ts"
export async function POST(context: APIContext) {
  const cart = await context.session?.get('cart') || [];
  const data = await context.request.json();
  
  cart.push(data.item);
  await context.session?.set('cart', cart);
  
  return Response.json(cart);
}
```

## –¢–∏–ø–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–∏

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –Ω–µ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã. –í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã –≤ —Ñ–∞–π–ª–µ `src/env.d.ts`, –æ–ø–∏—Å–∞–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `App.SessionData`:

```ts title="src/env.d.ts"
declare namespace App {
  interface SessionData {
    user: { id: string; name: string };
    cart: string[];
  }
}
```

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `Astro.session.get()`.
