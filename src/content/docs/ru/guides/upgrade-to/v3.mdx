---
title: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Astro –¥–æ 3 –≤–µ—Ä—Å–∏–∏
description: –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –≤–∞—à –ø—Ä–æ–µ–∫—Ç –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ Astro(3.0).
i18nReady: true
---
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'
import FileTree from '~/components/FileTree.astro'


–î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø–µ—Ä–µ–π—Ç–∏ —Å Astro v2 –Ω–∞ Astro v3.

–ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–π –ø—Ä–æ–µ–∫—Ç –¥–æ –≤–µ—Ä—Å–∏–∏ 2? –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞—à–µ [—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ v2.0](/ru/guides/upgrade-to/v2/).

## –û–±–Ω–æ–≤–∏—Ç–µ Astro

–û–±–Ω–æ–≤–∏—Ç–µ –≤–µ—Ä—Å–∏—é Astro –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∏—Å–ø–æ–ª—å–∑—É—è –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä. –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Astro, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ –∏ –∏—Ö —Ç–æ–∂–µ.

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ Astro v3.x
  npm install astro@latest
  
  # –ü—Ä–∏–º–µ—Ä: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ React –∏ Tailwind –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
  npm install @astrojs/react@latest @astrojs/tailwind@latest
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ Astro v3.x
  pnpm install astro@latest

  # –ü—Ä–∏–º–µ—Ä: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ React –∏ Tailwind –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
  pnpm install @astrojs/react@latest @astrojs/tailwind@latest
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ Astro v3.x
  yarn add astro@latest
  
  # –ü—Ä–∏–º–µ—Ä: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ React –∏ Tailwind –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
  yarn add @astrojs/react@latest @astrojs/tailwind@latest
  ```
  </Fragment>
</PackageManagerTabs>

:::note[–ù—É–∂–Ω–æ –ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å?]
–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Astro –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ –≤–∞–º, –≤–æ–∑–º–æ–∂–Ω–æ, –≤–æ–æ–±—â–µ –Ω–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–Ω–æ—Å–∏—Ç—å –∫–∞–∫–∏–µ-–ª–∏–±–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç!

–û–¥–Ω–∞–∫–æ –µ—Å–ª–∏ –≤—ã –∑–∞–º–µ—Ç–∏–ª–∏ –æ—à–∏–±–∫–∏ –∏–ª–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∏–∂–µ, —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –∏ —á—Ç–æ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ.
:::

## Astro v3.0 –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –§–ª–∞–≥–∏ –£–¥–∞–ª–µ–Ω—ã

–£–¥–∞–ª–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ –∏–∑ `astro.config.mjs`:

```js del={5-8}
// astro.config.mjs
import { defineConfig } from 'astro/config';

export default defineConfig({
  experimental: {
    assets: true,
    viewTransitions: true,
  },
})
```

–≠—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

- View Transitions –¥–ª—è –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö Astro "–æ—Å—Ç—Ä–æ–≤–æ–≤". [–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ transitions API –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é](/ru/guides/view-transitions/#upgrade-to-v30-from-v2x) –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —ç—Ç–æ—Ç —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ñ–ª–∞–≥.
- –ù–æ–≤—ã–µ API —Å–µ—Ä–≤–∏—Å—ã `astro:assets` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ Astro, –≤–∫–ª—é—á–∞—è –Ω–æ–≤—ã–π `<Image />` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ `getImage()` —Ñ—É–Ω–∫—Ü–∏—é. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ—á–∏—Ç–∞–π –Ω–∞—à–µ [—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π](/ru/guides/images/#upgrade-to-v30-from-v2x) **–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –≤—ã —ç—Ç–æ—Ç —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ñ–ª–∞–≥ –∏–ª–∏ –Ω–µ—Ç**, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫ —ç—Ç–æ –º–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –≤–∞—à –ø—Ä–æ–µ–∫—Ç.

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–∏—Ö –¥–≤—É—Ö –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö –∏ –º–Ω–æ–≥–æ–º –¥—Ä—É–≥–æ–º —á–∏—Ç–∞–π—Ç–µ –≤ [–∞–Ω–æ–Ω—Å–µ –≤–µ—Ä—Å–∏–∏ 3.0](https://astro.build/blog/astro-3/)!


## Astro v3.0 –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

Astro v3.0 –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å –ø—Ä–æ—à–ª—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ —É–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π. –ï—Å–ª–∏ –≤–∞—à –ø—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ 3 –≤–µ—Ä—Å–∏–∏, –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ —ç—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –æ–±—â–µ–≥–æ –æ–±–∑–æ—Ä–∞ –≤—Å–µ—Ö –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –≤–∞—à–µ–π –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã.

–°–º–æ—Ç—Ä–∏—Ç–µ [–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ –Ω–∞—à–µ–º –≥–∏—Ç—Ö–∞–±–µ](https://github.com/withastro/astro/blob/main/packages/astro/CHANGELOG.md).

### –£–¥–∞–ª–µ–Ω–æ: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Node 16

Node 16 –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –∑–∞–∫–æ–Ω—á–∏—Ç—å —Å–≤–æ—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤ —Å–µ–Ω—Ç—è–±—Ä–µ 2023. 

Astro v3.0 —É–±–∏—Ä–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É Node 16 –ø–æ–ª–Ω–æ—Å—Ç—å—é, —á—Ç–æ–±—ã –ø–æ–∑–≤–æ–ª–∏—Ç—å –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ Node.

#### –ß—Ç–æ –º–Ω–µ –¥–µ–ª–∞—Ç—å?

 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–∞—à–∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏ —Ä–µ–ª–∏–∑–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç **Node `18.14.1` –∏–ª–∏ –≤—ã—à–µ**.

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é Node —Å –ø–æ–º–æ—â—å—é:

    ```sh
    node -v
    ```



2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤–∞—à–µ–≥–æ [—Ä–µ–ª–∏–∑–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è](/ru/guides/deploy/), —á—Ç–æ–±—ã —É–¥–æ—Å—Ç–æ–≤–µ—Ä–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç 18 –≤–µ—Ä—Å–∏—é Node. 

    –í—ã –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Å–∏—é Node `18.14.1` –¥–ª—è —Å–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ Astro –ª–∏–±–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–∞—à–±–æ–∞—Ä–¥–∞, –ª–∏–±–æ –≤ —Ñ–∞–π–ª–µ `.nvmrc`.

```bash title=".nvmrc"
18.14.1
```
### –£–¥–∞–ª–µ–Ω–æ: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ TypeScript 4

–í Astro v2.x, `tsconfig.json` —à–∞–±–ª–æ–Ω—ã –≤–∫–ª—é—á–∞—é—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É TypeScript –≤–µ—Ä—Å–∏–π 4.x –∏ 5.x.

Astro v3.0 –æ–±–Ω–æ–≤–ª—è–µ—Ç `tsconfig.json` —à–∞–±–ª–æ–Ω—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ TypeScript 5.x. Astro —Ç–µ–ø–µ—Ä—å –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ TypeScript 5.0 (–º–∞—Ä—Ç 2023), –∏–ª–∏ —Ç–æ, —á—Ç–æ –≤–∞—à —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ç–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä VS Code 1.77).

#### –ß—Ç–æ –º–Ω–µ –¥–µ–ª–∞—Ç—å?

–ï—Å–ª–∏ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Typescript –ª–æ–∫–∞–ª—å–Ω–æ, –æ–±–Ω–æ–≤–∏—Ç–µ—Å—å –∫–∞–∫ –º–∏–Ω–∏–º—É–º –¥–æ –≤–µ—Ä—Å–∏–∏ v5.0.

```bash
npm install typescript@latest --save-dev
```

### –£–¥–∞–ª–µ–Ω–æ: `@astrojs/image`

–í Astro v2.x, Astro –ø—Ä–µ–¥–ª–∞–≥–∞–ª –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –æ–±–µ—Ä—Ç–∫—É –Ω–∞–¥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏, –∫–æ—Ç–æ—Ä–∞—è –≤–∫–ª—é—á–∞–ª–∞ Astro `<Image />` –∏ `<Picture />` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

Astro v3.0 –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è–µ—Ç —ç—Ç—É –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –∏–∑ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã. –ù–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ Astro –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -- —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ API –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: `astro:assets`.

#### –ß—Ç–æ –º–Ω–µ –¥–µ–ª–∞—Ç—å?

–£–¥–∞–ª–∏—Ç–µ `@astrojs/image` –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –∏–∑ —Å–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. –í–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ —É–¥–∞–ª–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é, –Ω–æ –∏ –æ–±–Ω–æ–≤–∏—Ç—å –∏–ª–∏ —É–±—Ä–∞—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ `<Image />` –∏ `<Picture />` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã. –¢–∞–∫–∂–µ –≤–∞–º –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π —Å–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ [–ø–æ–ª–Ω—ã–µ, –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](/ru/guides/images/#remove-astrojsimage) –≤ –Ω–∞—à–∏—Ö —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞—Ö –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏.

–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ `astro:assets` —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–∏—Ç –Ω–æ–≤—ã–µ –æ–ø—Ü–∏–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞—Ö–æ—Ç–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ—á–∏—Ç–∞–π [–Ω–∞—à —Å–æ–≤–µ—Ç –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –¥–æ —Å–µ—Ä–≤–∏—Å–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π Astro v3.0](/ru/guides/images/#upgrade-to-v30-from-v2x)!

```js del={3,7}
// astro.config.mjs
import { defineConfig } from 'astro/config';
import image from '@astrojs/image';

export default defineConfig({
  integrations: [
    image(),
  ]
})
```

### –£–¥–∞–ª–µ–Ω–æ: `<Markdown />` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

–í Astro v1.x, Astro –ø–µ—Ä–µ—Å—Ç–∞–ª–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å `<Markdown />` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ –ø–µ—Ä–µ—à–ª–æ –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –ø–∞–∫–µ—Ç.

Astro v3.0 –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è–µ—Ç –ø–∞–∫–µ—Ç `@astrojs/markdown-component`. `<Markdown />` Astro –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –≤ –≤–∞—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

#### –ß—Ç–æ –º–Ω–µ –¥–µ–ª–∞—Ç—å?

–£–±–µ—Ä–∏—Ç–µ –≤—Å–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã `@astrojs/markdown-component`.

```astro del={2} title="src/components/MyAstroComponent.astro"
---
import Markdown from '@astrojs/markdown-component';
---
```

–ß—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ö–æ–∂–∏–π `<Markdown />` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –≤–∞—à–µ–º –∫–æ–¥–µ, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ [–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π —Å–æ–æ–±—â–µ—Å—Ç–≤–∞](https://astro.build/integrations/). –ù–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫–∏—Ö –∫–∞–∫ [`astro-remote`](https://github.com/natemoo-re/astro-remote). –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –æ–±–Ω–æ–≤–∏–ª–∏ –∞—Ç—Ä–∏–±—É—Ç—ã –∏ –∏–º–ø–æ—Ä—Ç—ã –≤–∞—à–µ–≥–æ `<Markdown />` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, —á—Ç–æ –≤—ã –≤—ã–±—Ä–∞–ª–∏. 

–í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, —É–¥–∞–ª–∏—Ç–µ –≤—Å–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–º–ø–æ—Ä—Ç—ã Astro `<Markdown />` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ —Å–∞–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –≤–∞—à–∏—Ö —Ñ–∞–π–ª–∞—Ö `.astro`. –í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—É–¥–µ—Ç –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–∞ HTML –∏–ª–∏ [–∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å Markdown](/ru/guides/markdown-content/#importing-markdown) –∏–∑ `.md` —Ñ–∞–π–ª–∞.

### –£–¥–∞–ª–µ–Ω–æ: —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ 1.x APIs

–í Astro v1.x, Astro –æ—Ç–∫–∞–∑–∞–ª–æ—Å—å –æ—Ç –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∞ —Ç–∞–∫–∂–µ –æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `<style global>` –∏ `<script hoist>`. –û–¥–Ω–∞–∫–æ –æ–Ω–∏ –≤—Å–µ –µ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–∏—Å—å –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

Astro v3.0 —É–¥–∞–ª—è–µ—Ç —ç—Ç–∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ API –ø–æ–ª–Ω–æ—Å—Ç—å—é. –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ [–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](/ru/reference/configuration-reference/) –∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—ã `<style is:global>` –∏ `<script>` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã.

#### –ß—Ç–æ –º–Ω–µ –¥–µ–ª–∞—Ç—å?

–ï—Å–ª–∏ –≤—ã –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å v1.x APIs, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—ã–µ API –¥–ª—è –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:

- –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –æ–ø—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: –°–º–æ—Ç—Ä–∏—Ç–µ [—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –≤–µ—Ä—Å–∏—é 0.26](/ru/guides/upgrade-to/v1/#new-configuration-api)
- –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ script/style —Ç–∏–ø—ã –∞—Ç—Ä–∏–±—É—Ç–æ–≤: –°–º–æ—Ç—Ä–∏—Ç–µ [—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –≤–µ—Ä—Å–∏—é 0.26](/ru/guides/upgrade-to/v1/#new-default-script-behavior)

### –£–¥–∞–ª–µ–Ω–æ: –ß–∞—Å—Ç–∏—á–Ω—ã–µ –ø—Ä–æ—Å–ª–æ–π–∫–∏ –¥–ª—è Web API –≤ —Å–µ—Ä–≤–µ—Ä–Ω–æ–º –∫–æ–¥–µ

–í Astro v2.x –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–ª–∏—Å—å —á–∞—Å—Ç–∏—á–Ω—ã–µ –ø—Ä–æ—Å–ª–æ–π–∫–∏ –¥–ª—è Web API, –Ω–∞–ø—Ä–∏–º–µ—Ä `document` –∏–ª–∏ `localStorage` –≤ –∫–æ–¥–µ, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª–Ω—è–ª—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
–ó–∞—á–∞—Å—Ç—É—é —ç—Ç–∏ –ø—Ä–æ—Å–ª–æ–π–∫–∏ –±—ã–ª–∏ –Ω–µ–ø–æ–ª–Ω—ã–º–∏ –∏ –Ω–µ–Ω–∞–¥–µ–∂–Ω—ã–º–∏.

Astro v3.0 —É–±–∏—Ä–∞–µ—Ç —ç—Ç–∏ –ø—Ä–æ—Å–ª–æ–π–∫–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é. Web API –±–æ–ª—å—à–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –≤ —Å–µ—Ä–≤–µ—Ä–Ω–æ–º –∫–æ–¥–µ.

#### –ß—Ç–æ –º–Ω–µ –¥–µ–ª–∞—Ç—å?

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Web API –≤ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö, –≤–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ API –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Å–ª–æ–≤–∏–π –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [–∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –¥–∏—Ä–µ–∫—Ç–∏–≤—É `client:only`](/ru/reference/directives-reference/#clientonly).

### –£–¥–∞–ª–µ–Ω–æ: `image` –∏–∑ `astro:content` –≤ —Å—Ö–µ–º–µ –∫–æ–ª–ª–µ–∫—Ü–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

–í Astro v2.x, API –∫–æ–ª–ª–µ–∫—Ü–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–µ—Ä–µ—Å—Ç–∞–ª –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç `image` –∏–∑ `astro:content` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –≤–∞—à–∏—Ö —Å—Ö–µ–º–∞–º –∫–æ–ª–ª–µ–∫—Ü–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

Astro v3.0 —É–±–∏—Ä–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —ç—Ç–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞.

#### –ß—Ç–æ –º–Ω–µ –¥–µ–ª–∞—Ç—å?

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π—Å—è `image()` –∏–∑ `astro:content`, —É–¥–∞–ª–∏—Ç–µ –µ–≥–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –±–æ–ª—å—à–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —Ä–æ–≤–µ—Ä—è–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ [—Ö–µ–ª–ø–µ—Ä `image` –∏–∑ `schema`](/ru/guides/images/#update-content-collections-schemas):

 ```ts title="astro.config.mjs" del={1} ins={2} "({ image })"
import { defineCollection, z, image } from "astro:content";
import { defineCollection, z } from "astro:content";
 
 defineCollection({
   schema: ({ image }) =>
     z.object({
       image: image(),
    }),
});
```

### –£–¥–∞–ª–µ–Ω–æ: pre-0.14 –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ–º Shiki

–í Astro v2.x, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ–º Shiki –±—ã–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã, –Ω–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –±—ã–ª–∏ –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

Astro v3.0 —É–±–∏—Ä–∞–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ.

#### –ß—Ç–æ –º–Ω–µ –¥–µ–ª–∞—Ç—å?

–ï—Å–ª–∏ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–¥–Ω—É –∏–∑ —Ç–µ–º –Ω–∏–∂–µ, –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –∏—Ö –Ω–∞ –Ω–æ–≤—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è:

- `material-darker` -> `material-theme-darker`
- `material-default` -> `material-theme`
- `material-lighter` -> `material-theme-lighter`
- `material-ocean` -> `material-theme-ocean`
- `material-palenight` -> `material-theme-palenight`

### –£–¥–∞–ª–µ–Ω–æ: `class:list` –¥–∏—Ä–µ–∫—Ç–∏–≤–∞

–í Astro v2.x, [`class:list` –¥–∏—Ä–µ–∫—Ç–∏–≤–∞](/ru/reference/directives-reference/#classlist) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ —Å–∞–º–æ–ø–∏—Å–Ω—É—é –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—é, –≤–¥–æ—Ö–Ω–æ–≤–ª–µ–Ω–Ω—É—é [`clsx`](https://github.com/lukeed/clsx) —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –Ω–æ–≤—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∫–∞–∫ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `Set`.

Astro v3.0 —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `clsx` –¥–ª—è –¥–∏—Ä–µ–∫—Ç–∏–≤—ã `class:list`, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–ø–µ—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é –∏–ª–∏ `Set`.

#### –ß—Ç–æ –º–Ω–µ –¥–µ–ª–∞—Ç—å?

–ó–∞–º–µ–Ω–∏—Ç–µ `Set`, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –≤ `class:list` –¥–∏—Ä–µ–∫—Ç–∏–≤—É –Ω–∞ –æ–±—ã—á–Ω—ã–π `Array`.

```astro title="src/components/MyAstroComponent.astro" del={4} ins={5}
<Component class:list={[
  'a',
  'b',
  new Set(['c', 'd'])
  ['c', 'd'] 
]} />
```

### –£–¥–∞–ª–µ–Ω–æ: –ø–µ—Ä–µ–¥–∞—á–∞ `class:list` –∫–∞–∫ –∞—Ç—Ä–∏–±—É—Ç (–ø—Ä–æ–ø—Å)

–í Astro v2.x, [–∑–Ω–∞—á–µ–Ω–∏—è `class:list`](/ru/reference/directives-reference/#classlist) –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —á–µ—Ä–µ–∑ [`Astro.props['class:list']`](/ru/reference/api-reference/#astroprops).

Astro v3.0 –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è `class:list` –≤ —Å—Ç—Ä–æ–∫—É –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —á–µ—Ä–µ–∑ `Astro.props['class']`

### –£–¥–∞–ª–µ–Ω–æ: kebab-case —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è camelCase CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–í Astro v2.x, camelCase [CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ](/ru/guides/styling/#css-variables) –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –≤ `style` –∞—Ç—Ä–∏–±—É—Ç—ã –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –∫–∞–∫ camelCase (–∫–∞–∫ –∏ –Ω–∞–ø–∏—Å–∞–Ω—ã) –∏ –∫–∞–∫ kebab-case (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏).

Astro v3.0 —É–¥–∞–ª—è–µ—Ç kebab-case —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è camelCase CSS –Ω–∞–∑–≤–∞–Ω–∏–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π(camelCase).

```astro "my-value"
---
// src/components/MyAstroComponent.astro
const myValue = "red"
---
<!-- input -->
<div style={{ "--myValue": myValue }}></div>

<!-- output (Astro 2.x) -->
<div style="--my-value:var(--myValue);--myValue:red"></div>
<!-- output (Astro 3.0) -->
<div style="--myValue:red"></div>
```

#### –ß—Ç–æ –º–Ω–µ –¥–µ–ª–∞—Ç—å?

–ï—Å–ª–∏ –≤–∞—à –∫–æ–¥ –æ–ø–∏—Ä–∞–ª—Å—è –Ω–∞ —Ç–æ, —á—Ç–æ Astro –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç kebab-case –≤ –≤–∞—à–∏—Ö —Å—Ç–∏–ª—è—Ö, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∏–ª–∏ –Ω–∞ camelCase –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ—Ç–µ—Ä–∏ —Å—Ç–∏–ª–µ–π. –ù–∞–ø—Ä–∏–º–µ—Ä:

```astro del={3} ins={4} title="src/components/MyAstroComponent.astro"
<style>
  div {
   color: var(--my-value);
   color: var(--myValue);
  }
</style>
```

### –£–¥–∞–ª–µ–Ω–æ: automatic flattening of `getStaticPaths()`'s return value

In Astro v2.x, the return value of [`getStaticPaths()`](/en/reference/api-reference/#getstaticpaths) was automatically flattened to allow you to return an array of arrays without errors.

Astro v3.0 removes automatic flattening of `getStaticPaths()`'s result.

#### What should I do?

If you're returning an array of arrays instead of an array of _objects_ (as is expected), `.flatMap` and `.flat` should now be used to ensure that you are returning a flat array.

An [error message indicating that `getStaticPath()`'s return value must be an array of objects](/en/reference/errors/invalid-get-static-paths-entry/#what-went-wrong) will be provided if you need to update your code.

### Moved: `astro check` now requires an external package

In Astro v2.x, [`astro check`](/en/reference/cli-reference/#astro-check) was included in Astro by default, and its dependencies were bundled in Astro. This meant a larger package whether or not you ever used `astro check`. This also prevented you from having control over the version of TypeScript and the Astro Language Server to use.


Astro v3.0 moves the `astro check` command out of Astro core and now requires an external package `@astrojs/check`. Additionally, you must install `typescript` in your project to use the `astro check` command.

#### What should I do?

Run the `astro check` command after upgrading to Astro v3.0 and follow the prompts to install the required dependencies, or manually install `@astrojs/check` and `typescript` into your project.

### Deprecated: `build.excludeMiddleware` and `build.split`

In Astro v2.x, `build.excludeMiddleware` and `build.split` were used to change how specific files were emitted when using an adapter in SSR mode.

Astro v3.0 replaces these build config options with new [SSR adapter configuration options](/en/guides/integrations-guide/#official-integrations) to perform the same tasks: `edgeMiddleware` and `functionPerRoute`.

#### What should I do?

Update the Astro config file to now use the new options **in the adapter configuration** directly.

```js title="astro.config.mjs" del={5-7} ins={9}
import { defineConfig } from "astro/config";
import vercel from "@astrojs/vercel/serverless";

export default defineConfig({
    build: {
      excludeMiddleware: true
    },
    adapter: vercel({
      edgeMiddleware: true
    }),
});
```

```js title="astro.config.mjs" del={5-7} ins={9}
import { defineConfig } from "astro/config";
import netlify from "@astrojs/netlify/functions";

export default defineConfig({
     build: {
        split: true
     },
     adapter: netlify({
        functionPerRoute: true
     }),
});
```

### Deprecated: `markdown.drafts`

In Astro v2.x, the `markdown.drafts` configuration allowed you to have draft pages that were available in when running the dev server, but not built in production.

Astro v3.0 deprecates this feature in favor of the content collections method of handling draft pages by filtering manually instead, which gives more control over the feature.

#### What should I do?

To continue to mark some pages in your project as drafts, [migrate to content collections](/en/guides/content-collections/#migrating-from-file-based-routing) and [manually filter out pages](/en/guides/content-collections/#filtering-collection-queries) with the `draft: true` frontmatter property instead.

### Deprecated: returning simple object in endpoints

In Astro v2.x, endpoints could return a simple object, which would be converted to a JSON response.

Astro v3.0 deprecates this behavior in favor of returning a `Response` object directly.

#### What should I do?

Update your endpoints to return a `Response` object directly.

```ts title="endpoint.json.ts" del={2} ins={3}
export async function GET() {
  return { body: { "title": "Bob's blog" }};
  return new Response(JSON.stringify({ "title": "Bob's blog" }));
}
```

If you really need to keep the previous format, you can use the `ResponseWithEncoding` object but will be deprecated in the future.

```ts title="endpoint.json.ts" del={2} ins={3}
export async function GET() {
  return { body: { "title": "Bob's blog" } };
  return new ResponseWithEncoding({ body: { "title": "Bob's blog" }});
}
```

### Changed default: `verbatimModuleSyntax` in tsconfig.json presets

In Astro v2.x, the [`verbatimModuleSyntax`](https://www.typescriptlang.org/tsconfig#verbatimModuleSyntax) setting was off by default, with its TypeScript 4.x equivalent `importsNotUsedAsValues` being enabled in the `strict` preset.

In Astro v3.0, `verbatimModuleSyntax` is enabled in every preset.

#### What should I do?

This option requires that types are imported using the `import type` syntax.

```astro title="src/components/MyAstroComponent.astro" "type"
---
import { type CollectionEntry, getEntry } from "astro:content";
---
```

While we recommend keeping it on and properly making your type imports with `type` (as shown above), you can disable it by setting `verbatimModuleSyntax: false` in your `tsconfig.json` file if it causes any issues.

```json title="tsconfig.json" "false"
{
  "compilerOptions": {
    "verbatimModuleSyntax": false
  }
}
```

### Changed default: port `3000`

In Astro v2.x, Astro ran on port `3000` by default.

Astro v3.0 changes the [default port](/en/reference/cli-reference/#--port-number) to `4321`. üöÄ

#### What should I do?

Update any existing references to `localhost:3000`, for example in tests or in your `README`, to reflect the new port `localhost:4321`.


### Changed default: import.meta.env.BASE_URL `trailingSlash`

In Astro v2.x, `import.meta.env.BASE_URL` appended your [`base`](/en/reference/configuration-reference/#base) setting with a [trailingSlash](/en/reference/configuration-reference/#trailingslash) by default. `trailingSlash: "ignore"` also appended a trailing slash.

Astro v3.0 no longer appends `import.meta.env.BASE_URL` with a trailing slash by default, nor when `trailingSlash: "ignore"` is set. (The existing behavior of `base` in combination with `trailingSlash: "always"` or `trailingSlash: "never"` is unchanged.)

#### What should I do?

If your `base` already has a trailing slash, no change is needed.

If your `base` does not have a trailing slash, add one if you wish to preserve the previous default (or `trailingSlash: "ignore"`) behavior:

```js title="astro.config.mjs" del={4} ins={5}
import { defineConfig } from "astro/config";

export default defineConfig({
  base: 'my-base',
  base: 'my-base/',
});
```

### Changed default: `compressHTML`

In Astro v2.x, Astro only compressed your emitted HTML when [`compressHTML`](/en/reference/configuration-reference/#compresshtml) was explicitly set to `true`. The default value was `false`.

Astro v3.0 now compresses emitted HTML by default.

#### What should I do?

You can now remove `compressHTML: true` from your configuration as this is the new default behavior.

```js title="astro.config.mjs" del={4}
import { defineConfig } from "astro/config";

export default defineConfig({
  compressHTML: true
})
```

You must now set `compressHTML: false` to opt out of HTML compression.

### Changed default: `scopedStyleStrategy`

In Astro v2.x, the default value of [`scopedStyleStrategy`](/en/reference/configuration-reference/#scopedstylestrategy) was `"where"`.

Astro v3.0 introduces a new, default value: `"attribute"`. By default, styles are now applied using `data-*` attributes.

#### What should I do?

To retain your project's current [style scoping](/en/guides/styling/#scoped-styles), update the configuration file to the previous default value: 


```js title="astro.config.mjs" ins={4}
import { defineConfig } from "astro/config";

export default defineConfig({
  scopedStyleStrategy: "where"
})
```

### Changed default: `inlineStyleSheets`

In Astro v2.x, all project stylesheets were sent as link tags by default. You could opt in to inlining them into `<style>` tags every time with `"always"`, or to inlining only stylesheets below a certain size with `"auto"` by setting the [`build.inlineStylesheets`](/en/reference/configuration-reference/#buildinlinestylesheets) configuration. The default setting was `"never"`.

Astro v3.0 changes the default value of `inlineStylesheets` to `"auto"`. Stylesheets smaller than `ViteConfig.build.assetsInlineLimit` (default: 4kb) are inlined by default. Otherwise, project styles are sent in external stylesheets.

#### What should I do?
If you want to keep your project's current behavior, set `build.inlineStylesheets` to the previous default, `"never"`:


```js title="astro.config.mjs" ins={4-6}
import { defineConfig } from "astro/config";

export default defineConfig({
	 build: {
    inlineStylesheets: "never"
  }
})
```

### Changed default: image service

In Astro v2.x, Squoosh was the [default image processing service](/en/guides/images/#default-image-service).

Astro v3.0 now includes Sharp as the default image processing service and instead provides a configuration option to use Squoosh.

#### What should I do?

If you would prefer to continue to use Squoosh to transform your images, update your config with the following: 

```ts title="astro.config.mjs" ins={4-6}
import { defineConfig, squooshImageService } from "astro/config";

export default defineConfig({
  image: {
    service: squooshImageService(),
  }
})
```

### Changed: HTTP request methods case

In Astro v2.x, [HTTP request methods](/en/core-concepts/endpoints/#http-methods) were written using lowercase function names: `get`, `post`, `put`, `all`, and `del`.

Astro v3.0 uses uppercase function names, including `DELETE` instead of `del`.

#### What should I do?

Rename all functions to their uppercase equivalent:

- `get` to `GET`
- `post` to `POST`
- `put` to `PUT`
- `all` to `ALL`
- `del` to `DELETE`

```js title="endpoint.ts" del={1} ins={2}
export function get() {
export function GET() {
    return new Response(JSON.stringify({ "title": "Bob's blog" }));
}
```

### Changed: Multiple JSX framework configuration

In Astro v2.x, you could use [multiple JSX framework integrations](/en/guides/integrations-guide/#official-integrations) (React, Solid, Preact) in the same project without needing to identify which files belonged to which framework.

Astro v3.0 now requires you to specify which framework to use for your files with new `include` and `exclude` integration config options when you have multiple JSX framework integrations installed. This allows Astro to better support single-framework usage, as well as advanced features like React Fast Refresh.

#### What should I do?

If you are using multiple JSX frameworks in the same project, set `include` (and optionally `exclude`) to an array of files and/or folders. Wildcards may be used to include multiple file paths.

We recommend placing common framework components in the same folder (e.g. `/components/react/` and `/components/solid/`) to make specifying your includes easier, but this is not required:

```js ins={13,16,19}
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';
import react from '@astrojs/react';
import svelte from '@astrojs/svelte';
import vue from '@astrojs/vue';
import solid from '@astrojs/solid-js';

export default defineConfig({
  // Enable many frameworks to support all different kinds of components.
  // No `include` is needed if you are only using a single framework!
  integrations: [
    preact({
      include: ['**/preact/*']
    }),
    react({
      include: ['**/react/*']
    }),
    solid({
      include: ['**/solid/*'],
    }),
  ]
});
```

### Changed: `Astro.cookies.get(key)` can return `undefined`

In Astro v2.x, [`Astro.cookies.get(key)`](/en/reference/api-reference/#astrocookies) would always return an [`AstroCookie` object](/en/reference/api-reference/#astrocookie), even if the cookie did not exist. To check for its existence, you needed to use `Astro.cookies.has(key)`.

Astro v3.0 returns `undefined` for `Astro.cookies.get(key)` if the cookie does not exist.

#### What should I do?

This change will not break any code that checks for the existence of the `Astro.cookie` object before using `Astro.cookies.get(key)`, but is now no longer required.

You can safely remove any code that uses `has()` to check if the value of `Astro.cookies` is `undefined`:

```js del={1-3} ins={5-7}
if (Astro.cookies.has(id)) {
  const id = Astro.cookies.get(id)!;
}

const id = Astro.cookies.get(id);
if (id) {
}
```

### Changed: running the Astro CLI programmatically

In Astro v2.x, the `"astro"` package entrypoint exported and ran the Astro CLI directly. It is not recommended to run Astro this way in practice.

Astro v3.0 removes the CLI from the entrypoint, and exports a new set of experimental JavaScript APIs, including `dev()`, `build()`, `preview()`, and `sync()`.

#### What should I do?

To [run the Astro CLI programatically](/en/reference/cli-reference/#advanced-apis-experimental), use the new experimental JavaScript APIs:

```js
import { dev, build } from "astro";

// Start the Astro dev server
const devServer = await dev();
await devServer.stop();

// Build your Astro project
await build();
```


### Changed: internal Astro API entry point export paths

In Astro v2.x, you could import internal Astro APIs from `astro/internal/*` and `astro/runtime/server/*`.

Astro v3.0 removes the two entry points in favor of the existing `astro/runtime/*` entrypoint. Additionally, a new `astro/compiler-runtime` export has been added for compiler-specific runtime code.

#### What should I do?

These are entry points for Astro's internal API and should not affect your project. But if you do use these entrypoints, update as shown below:

```js del={1,4,10} ins={2,5,11}
import 'astro/internal/index.js';
import 'astro/runtime/server/index.js';

import 'astro/server/index.js';
import 'astro/runtime/server/index.js';
```

```js ins={5} del={4}
import { transform } from '@astrojs/compiler';

const result = await transform(source, {
  internalURL: 'astro/runtime/server/index.js',
  internalURL: 'astro/compiler-runtime',
  // ...
});
```



## Known Issues

There are currently no known issues.
