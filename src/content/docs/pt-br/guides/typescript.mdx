---
title: TypeScript
description: Aprenda como utilizar o suporte integrado a TypeScript do Astro.
i18nReady: true
---
import Since from '~/components/Since.astro'
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'
import Tabs from '~/components/tabs/Tabs'


Astro vem com suporte integrado para [TypeScript](https://www.typescriptlang.org/). Voc√™ pode importar arquivos `.ts` e `.tsx` em seu projeto Astro, escrever c√≥digo TypeScript dentro de seu [componente Astro](/pt-br/core-concepts/astro-components/#o-script-do-componente), e at√© mesmo utilizar um arquivo [`astro.config.ts`](/pt-br/guides/configuring-astro/#o-arquivo-de-configura√ß√£o-astro) se voc√™ quiser.

Usando TypeScript, voc√™ pode evitar erros em tempo de execu√ß√£o ao definir os formatos dos objetos e componentes no seu c√≥digo. Por exemplo, se voc√™ usa TypeScript para definir o [tipo das props do seu componente](#props-de-componentes), voc√™ vai receber um erro no seu editor se voc√™ definir uma prop que seu componente n√£o aceita.

Voc√™ n√£o precisa escrever c√≥digo TypeScript nos seus projetos com Astro para se beneficiar dele. O Astro sempre trata seu c√≥digo do componente como TypeScript, e a [extens√£o para VSCode do Astro](/pt-br/editor-setup/) vai inferir o tanto quanto pode para fornecer preenchimento autom√°tico, dicas e erros no seu editor.

O servidor de desenvolvimento do Astro n√£o executar√° nenhuma checagem de tipo, mas voc√™ pode usar um [script separado](#type-checking) para checar erros de tipo pela linha de comando.

## Configura√ß√£o
Projetos iniciais do Astro incluem um arquivo `tsconfig.json` no seu projeto. Mesmo que voc√™ n√£o escreva c√≥digo TypeScript, esse arquivo √© importante para que ferramentas como o Astro e o VS Code saibam como entender o seu projeto. Algumas funcionalidades (como importa√ß√£o de pacotes do npm) n√£o s√£o completamente suportadas em nosso editor sem um arquivo `tsconfig.json`. Se voc√™ instalar Astro manualmente, certifique-se de criar esse arquivo.

Tr√™s templates extens√≠veis de `tsconfig.json` s√£o inclusos no Astro: `base`, `strict` e `strictest`. O template `base` habilita suporte para funcionalidades modernas do JavaScript e tamb√©m √© usado como uma base para os outros templates. N√≥s recomendamos usar `strict` (estrito) ou `strictest` (mais estrito) se voc√™ planeja escrever TypeScript em seu projeto. Voc√™ pode ver e comparar a configura√ß√£o dos tr√™s templates em [astro/tsconfigs/](https://github.com/withastro/astro/blob/main/packages/astro/tsconfigs/).


Para herdar de um dos templates, utilize [a op√ß√£o `extends`](https://www.typescriptlang.org/tsconfig#extends):

```json title="tsconfig.json"
{
  "extends": "astro/tsconfigs/base"
}
```

Adicionalmente, nossos templates incluem um arquivo `env.d.ts` dentro do diret√≥rio `src` para providenciar [tipos de cliente do Vite](https://vitejs.dev/guide/features.html#client-types) para seu projeto:

```typescript title="env.d.ts"
/// <reference types="astro/client" />
```

Se voc√™ n√£o est√° usando VSCode, voc√™ pode instalar o [plugin Astro TypeScript](https://www.npmjs.com/package/@astrojs/ts-plugin) para suportar a importa√ß√£o de arquivos `.astro` de arquivos `.ts` (que pode ser √∫til para reexporta√ß√£o).

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm install @astrojs/ts-plugin
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm install @astrojs/ts-plugin
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn add @astrojs/ts-plugin
  ```
  </Fragment>
</PackageManagerTabs>

Ent√£o, adicione o seguinte no seu `tsconfig.json`:

```json title="tsconfig.json"
  "compilerOptions": {
    "plugins": [
      {
        "name": "@astrojs/ts-plugin"
      },
    ],
```

Para checar que o plugin est√° funcionando, crie um arquivo `.ts` e importe um componente do Astro nele. Voc√™e nao deve ter nenhuma mensagen de aviso do seu editor.


### Frameworks de UI

Se o seu projeto utiliza um [framework de UI](/pt-br/core-concepts/framework-components/), configura√ß√µes adicionais dependendo do framework podem ser necess√°rias. Por favor veja a documenta√ß√£o do TypeScript do seu framework para mais informa√ß√µes. ([Vue](https://vuejs.org/guide/typescript/overview.html#using-vue-with-typescript), [React](https://react-typescript-cheatsheet.netlify.app/docs/basic/setup), [Preact](https://preactjs.com/guide/v10/typescript), [Solid](https://www.solidjs.com/guides/typescript))

## Importa√ß√µes de Tipos

Utilize importa√ß√µes e exporta√ß√µes expl√≠citas de tipos sempre que poss√≠vel.

```js del={1} ins={2} ins="type"
import { AlgumTipo } from './script';
import type { AlgumTipo } from './script';
```

Dessa forma, voc√™ evita casos extremos onde o bundler do Astro pode tentar incorretamente fazer bundle do seus tipos importados como se fossem JavaScript.

Voc√™ pode configurar o TypeScript para refor√ßar importa√ß√µes de tipos no seu arquivo `.tsconfig`.

<Tabs client:visible sharedStore="typescript-version">
	<Fragment slot="tab.4.9">TypeScript ‚â§4.9</Fragment>
	<Fragment slot="tab.5.0">TypeScript ‚â•5.0</Fragment>

	<Fragment slot="panel.4.9">
		Defina a [`importsNotUsedAsValues`](https://www.typescriptlang.org/tsconfig#importsNotUsedAsValues) para `"error"`. O TypeScript vai checar suas importa√ß√µes e dizer pra voc√™ quanto `import type` deve ser usado. Essa defini√ß√£o √© inclu√≠da por padr√£o em nossos modelos `strict` e `strictest`.

    ```json title="tsconfig.json" ins={3}
    {
      "compilerOptions": {
        "importsNotUsedAsValues": "error",
      }
    }
    ```
	</Fragment>
	<Fragment slot="panel.5.0">
		Defina a [`verbatimModuleSyntax`](https://www.typescriptlang.org/tsconfig#verbatimModuleSyntax) para `true`. O TypeScript vai checar suas importa√ß√µes e dizer pra voc√™ quando `import type` deve ser usado.

    ```json title="tsconfig.json" ins={3}
    {
      "compilerOptions": {
        "verbatimModuleSyntax": true,
      }
    }
    ```
	</Fragment>
</Tabs>

## Aliases de Importa√ß√£o

Astro suporta [aliases de importa√ß√£o](/pt-br/guides/aliases/) que voc√™ define na configura√ß√£o `paths` do seu `tsconfig.json` e `jsconfig.json`. [Leia nosso guia](/pt-br/guides/aliases/) para aprender mais.

```astro title="src/pages/sobre/nate.astro" "@components" "@layouts"
---
import OlaMundo from '@components/OlaMundo.astro';
import Layout from '@layouts/Layout.astro';
---
```

```json title="tsconfig.json" {5-6}
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@components/*": ["src/components/*"],
      "@layouts/*": ["src/layouts/*"]
    }
  }
}
```

## Props de Componentes

Astro suporta a tipagem das props dos seus componentes via TypeScript. Para habilitar, exporte uma interface TypeScript `Props` de seu componente Astro. A [extens√£o para VSCode do Astro](/pt-br/editor-setup/) ir√° automaticamente procurar pela exporta√ß√£o de `Props` e te dar suporte a TypeScript quando voc√™ utilizar aquele componente dentro de outro template. 

```astro title="src/components/OlaProps.astro" ins={2-5}
---
export interface Props {
  nome: string;
  saudacao?: string;
}
const { saudacao = 'Ol√°', nome } = Astro.props;
---
<h2>{saudacao}, {nome}!</h2>
```

### Tipos de atributos integrados

Astro providencia defini√ß√µes de tipo JSX para verificar se sua marca√ß√£o est√° utilizando atributos HTML v√°lidos. Voc√™ pode utilizar esses tipos para auxiliar na constru√ß√£o de props de componentes. Por exemplo, se voc√™ estivesse utilizando um componente `<Link>`, voc√™ poderia fazer o seguinte para espelhar os atributos HTML padr√µes na tipagem das props do seu componente.

```astro title="src/components/Link.astro" ins={2}
---
export type Props = astroHTML.JSX.AnchorHTMLAttributes;
const { href, ...attrs } = Astro.props;
---
<a href={href} {...attrs}>
  <slot />
</a>
```

Tamb√©m √© poss√≠vel estender as defini√ß√µes JSX padr√µes para adicionar atributos que n√£o s√£o padr√µes redeclarando o namespace `astroHTML.JSX` em um arquivo `d.ts`.

```ts
// src/atributos-customizados.d.ts
declare namespace astroHTML.JSX {
  interface HTMLAttributes {
    'data-count'?: number;
    'data-label'?: string;
  }
}
```

:::note
`astroHTML` √© injetado globalmente dentro de componentes `.astro`. Para utiliz√°-lo em arquivos TypeScript, utilize uma [diretiva de barra tripla](https://www.typescriptlang.org/pt/docs/handbook/triple-slash-directives.html):

```ts
/// <reference types="astro/astro-jsx" />

type MeusAtributos = astroHTML.JSX.ImgHTMLAttributes;
```
:::

### Inferir os tipos do `getStaticPaths()`

<Since v="2.1.0" />

O Astro inclui utilit√°rios para trabalhar com os tipos retornados pelas suas fun√ß√µes [`getStaticPaths()`](/pt-br/reference/api-reference/#getstaticpaths) para rotas din√¢micas.

Voc√™ pode obter o tipo de [`Astro.params`](/pt-br/reference/api-reference/#astroparams) com `InferGetStaticParamsType` e o tipo de [`Astro.props`](/pt-br/reference/api-reference/#astroprops) com `InferGetStaticPropsType`:

```astro title="src/pages/postagens/[...slug].astro" {2,14-15}
---
import { InferGetStaticParamsType, InferGetStaticPropsType } from 'astro';
export async function getStaticPaths() {
  const postagens = await getCollection('blog');
  return postagens.map((postagem) => {
    return {
      params: { slug: postagem.slug },
      props: { rascunho: postagem.data.rascunho, titulo: postagem.data.titulo },
    };
  });
}
type Params = InferGetStaticParamsType<typeof getStaticPaths>;
type Props = InferGetStaticPropsType<typeof getStaticPaths>;
const { slug } = Astro.params as Params;
//                     ^? { slug: string; }
const { titulo } = Astro.props;
//                       ^? { rascunho: boolean; titulo: string; }
---
```

## Checagem de Tipos

Para ver erros de tipagem no seu editor, por favor certifique-se de que voc√™ tem a [extens√£o Astro para VS Code](/pt-br/editor-setup/) instalada. Por favor note de que os comandos `astro start` e `astro build` ir√£o transpilar o c√≥digo com esbuild, por√©m voc√™ n√£o ir√° executar nenhuma checagem de tipos. Para prevenir o seu c√≥digo de fazer build quando conter erros de TypeScript, mude o seu script "build" no `package.json` para o seguinte:

```json title="package.json" del={2} ins={3} ins="astro check && tsc --noEmit && "
  "scripts": {
    "build": "astro build",
    "build": "astro check && tsc --noEmit && astro build",
  },
```

:::note
`astro check` apenas checa a tipagem em arquivos `.astro`, e `tsc --noEmit` apenas checa a tipagem em arquivos `.ts` e `.tsx`.
:::

üìö Leia mais sobre [a importa√ß√£o de arquivos `.ts`](/pt-br/guides/imports/#typescript) no Astro.
üìö Leia mais sobre [a configura√ß√£o do TypeScript](https://www.typescriptlang.org/tsconfig/).

## Solu√ß√£o de Problemas

### Erros ao fazer a tipagem de m√∫ltiplos frameworks JSX ao mesmo tempo

Um problema pode ocorrer ao se utilizar m√∫ltiplos frameworks JSX no mesmo projeto, j√° que cada framework requer configura√ß√µes diferentes, as vezes at√© conflitantes, dentro de `tsconfig.json`.

**Solu√ß√£o**: Defina a [op√ß√£o `jsxImportSource`](https://www.typescriptlang.org/tsconfig#jsxImportSource) para `react` (padr√£o), `preact` ou `solid-js` dependendo do seu framework mais utilizado. Ent√£o, utilize um [coment√°rio pragma](https://www.typescriptlang.org/docs/handbook/jsx.html#configuring-jsx) dentro de quaisquer arquivos conflitantes de outro framework.

Para a op√ß√£o padr√£o de `jsxImportSource: react`, voc√™ usaria:

```jsx
// Para Preact
/** @jsxImportSource preact */
// Para Solid
/** @jsxImportSource solid-js */
```
