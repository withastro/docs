---
title: Atualize para o Astro v3
description: Como atualizar seu projeto para a vers√£o mais recente do Astro (v3.0).
i18nReady: true
---
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'
import FileTree from '~/components/FileTree.astro'

Este guia vai te ajudar a migrar do Astro v2 para o Astro v3.

Precisa atualizar um projeto antigo para a v2? Veja nosso [antigo guia de migra√ß√£o](/pt-br/guides/upgrade-to/v2/).

## Atualize Astro

Atualize a vers√£o do Astro de seu projeto para a vers√£o mais recente utilizando seu gerenciador de pacotes. Se voc√™ est√° utilizando integra√ß√µes Astro, por favor tamb√©m as atualize para a vers√£o mais recente.

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  # Atualize para Astro v3.x
  npm install astro@latest
  
  # Exemplo: atualize as integra√ß√µes React e Tailwind
  npm install @astrojs/react@latest @astrojs/tailwind@latest
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  # Atualize para v3.x
  pnpm install astro@latest

  # Exemplo: atualize as integra√ß√µes React e Tailwind
  pnpm install @astrojs/react@latest @astrojs/tailwind@latest
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  # Atualize para v3.x
  yarn add astro@latest
  
  # Exemplo: atualize as integra√ß√µes React e Tailwind
  yarn add @astrojs/react@latest @astrojs/tailwind@latest
  ```
  </Fragment>
</PackageManagerTabs>

:::note[√â necess√°rio continuar?]
Ap√≥s atualizar Astro para a vers√£o mais recente, voc√™ pode n√£o precisar fazer quaisquer mudan√ßas ao seu projeto afinal!
Por√©m, se voc√™ notar erros ou comportamentos inesperados, por favor veja abaixo o que mudou que pode precisar ser atualizado em seu projeto.
:::

## Flags Experimentais Removidas do Astro v3.0

Remova as seguintes flags experimentais de `astro.config.mjs`:

```js del={5-8}
// astro.config.mjs
import { defineConfig } from 'astro/config';

export default defineConfig({
  experimental: {
    assets: true,
    viewTransitions: true,
  },
})
```

Essas funcionalidades agora est√£o dispon√≠veis por padr√£o:

- Transi√ß√µes de Visualiza√ß√£o para transi√ß√µes de p√°gina animadas e ilhas persistentes. Veja as [mudan√ßas radicais da API de transi√ß√µes de visualiza√ß√£o e dicas para atualiza√ß√£o](/pt-br/guides/view-transitions/#atualize-para-v30-da-v2x) se voc√™ estava utilizando essa flag experimental.
- Uma nova API de servi√ßo de imagem `astro:assets` para utilizar imagens no Astro, incluindo um novo componente `<Image />` e a fun√ß√£o `getImage()`. Por favor leia as detalhadas [dicas de atualiza√ß√£o para imagens](/pt-br/guides/images/#atualize-para-v30-da-v2x) **se voc√™ estava ou n√£o utilizando essa flag experimental** para ver como isso pode afetar seu projeto.

Leia mais sobre essas duas funcionalidades eletrizantes e mais na postagem do blog sobre a 3.0!


## Mudan√ßas Radicais do Astro v3.0

Astro v3.0 inclui algumas mudan√ßas radicais, assim como a remo√ß√£o de algumas funcionalidades anteriormente depreciadas. Se o seu projeto n√£o funciona como esperado ap√≥s atualizar para a v3.0, veja este guia para uma vis√£o geral sobre todas as mudan√ßas radicais e instru√ß√µes em como atualizar sua base de c√≥digo.

Veja o [registro de mudan√ßas](https://github.com/withastro/astro/blob/main/packages/astro/CHANGELOG.md) para as notas completas do lan√ßamento.

### Removido: Suporte para o Node 16

Node 16 est√° marcado para chegar seu Fim de Vida em setembro de 2023.

Astro v3.0 tira o suporte para Node 16 completamente para que todos os usu√°rios do Astro se aproveitem das funcionalidades mais modernas do Node.

#### O que devo fazer?

 Verifique eu tanto seu ambiente de desenvolvimento quanto seu ambiente de deployment est√£o utilizando **Node `18.14.1` ou superior**.

1. Verifique sua vers√£o local do Node utilizando:

    ```sh
    node -v
    ```



2. Verifique a pr√≥pria documenta√ß√£o do seu [ambiente de deployment](/pt-br/guides/deploy/) para verificar que ele suporta Node 18. 

    Voc√™ pode especificar Node `18.14.1` para seu projeto Astro tanto em uma op√ß√£o da configura√ß√£o do painel de controle ou em um arquivo `.nvmrc`.

```bash title=".nvmrc"
18.14.1
```
### Removido: Suporte para TypeScript 4

Na Astro v2.x, as predefini√ß√µes de `tsconfig.json` incluiam suporte para ambos TypeScript 4.x e 5.x.

Astro v3.0 atualiza as predefini√ß√µes de `tsconfig.json` para apenas suportar TypeScript 5.x. Astro agora assume que voc√™ utiliza TypeScript 5.0 (Mar√ßo de 2023), ou que seu editor o inclui (e.x. VS Code 1.77).

#### O que devo fazer?

Se voc√™ tem o TypeScript instalado localmente, atualize pelo menos para a v5.0.

```bash
npm install typescript@latest --save-dev
```

### Removido: `@astrojs/image`

No Astro v2.x, Astro oferecia uma integra√ß√£o de imagens oficial que incluia os componentes Astro `<Image />` e `<Picture />`.

Astro v3.0 remove essa integra√ß√£o da base de c√≥digo completamente. A nova solu√ß√£o para imagens do Astro √© uma API integrada de servi√ßos de imagem: `astro:assets`.

#### O que devo fazer?

Remova a integra√ß√£o `@astrojs/image` do seu projeto. Voc√™ ir√° precisar n√£o s√≥ desinstalar a integra√ß√£o mas tamb√©m atualizar ou remover quaisquer declara√ß√µes de importa√ß√£o e quaisquer componentes `<Image />` e `<Picture />` existentes. Voc√™ tamb√©m vai precisar configurar um servi√ßo de processamento de imagem padr√£o de sua prefer√™ncia.

Voc√™ ir√° encontrar [instru√ß√µes passo a passo completas para remover a integra√ß√£o de imagens antiga](/pt-br/guides/images/#remova-astrojsimage) em nosso guia de Imagens.

Migrar para `astro:assets` tamb√©m ir√° trazer algumas novas op√ß√µes de imagem e funcionalidades que voc√™ pode desejar utilizar agora. Por favor veja as [dicas de atualiza√ß√£o para imagens da v3.0](/pt-br/guides/images/#atualize-para-v30-da-v2x) para mais detalhes!

```js del={3,7}
// astro.config.mjs
import { defineConfig } from 'astro/config';
import image from '@astrojs/image';

export default defineConfig({
  integrations: [
    image(),
  ]
})
```

### Removido: Componente `<Markdown />`

No Astro v1.x, Astro depreciou o componente `<Markdown />` e o moveu para um pacote externo.

Astro v3.0 remove completamente o pacote `@astrojs/markdown-component`. O componente `<Markdown />` do Astro n√£o ir√° mais funcionar no seu projeto.

#### O que devo fazer?

Remova todas as inst√¢ncias de `@astrojs/markdown-component`.

```astro del={2} title="src/components/MeuComponenteAstro.astro"
---
import Markdown from '@astrojs/markdown-component';
---
```

Para continuar utilizando um componente `<Markdown />` similar no seu c√≥digo, considere utilizar [integra√ß√µes da comunidade](https://astro.build/integrations/) assim como [`astro-remote`](https://github.com/natemoo-re/astro-remote). Certifique-se de atualizar as importa√ß√µes e atributos do seu componente `<Markdown />` conforme necess√°rio, de acordo com a documenta√ß√£o da pr√≥pria integra√ß√£o. 

Como alternativa, delete todas as refer√™ncias importando o componente `<Markdown />` do Astro e o pr√≥prio componente em seus arquivos `.astro`. Voc√™ vai precisar escrever novamente seu conte√∫do como HTML diretamente ou [importar Markdown](/pt-br/guides/markdown-content/#importando-markdown) de um arquivo `.md`.

### Removido: APIs depreciadas da 1.x

No Astro v1.x, Astro depreciou op√ß√µes da configura√ß√£o assim como os tipos de atributo de script/style `global` e `hoist`. Esses foram mantidos por compatibilidade com vers√µes anteriores.

Astro v3.0 remove essas APIs depreciadas completamente. Elas n√£o podem mais ser usadas no seu projeto Astro.

#### O que devo fazer?

Se voc√™ continua utilizando APIs da v1.x, utilize as novas APIs para cada uma das funcionalidades no lugar:

- Op√ß√µes depreciadas da configura√ß√£o: Veja [o guia de migra√ß√£o da 0.26](/pt-br/guides/upgrade-to/v1/#new-configuration-api)
- Tipos de atributo de script/style depreciados: Veja [o guia de migra√ß√£o da 0.26](/pt-br/guides/upgrade-to/v1/#new-default-script-behavior)

### Removido: `image` do `astro:content` no esquema de cole√ß√µes de conte√∫do

No Astro v2.x, a API de cole√ß√µes de conte√∫do depreciou a exporta√ß√£o `image` do `astro:content` utilizada no esquema de suas cole√ß√µes de conte√∫do.

Astro v3.0 remove essa exporta√ß√£o completamente.

#### O que devo fazer?

Se voc√™ est√° utilizando o `image()` depreciado do `astro:content`, o remova, j√° que ele n√£o existe mais. Valide imagens atrav√©s do [utilit√°rio `image` de `schema`](/pt-br/guides/images/#atualize-esquemas-de-cole√ß√µes-de-conte√∫do) no lugar:

 ```ts title="astro.config.mjs" del={1} ins={2} "({ image })"
import { defineCollection, z, image } from "astro:content";
import { defineCollection, z } from "astro:content";

 defineCollection({
   schema: ({ image }) =>
     z.object({
       image: image(),
    }),
});
```

### Removido: nomes de temas do Shiki pr√©-0.14

No Astro v2.x, alguns nomes de tema do Shiki foram renomeados, mas os nomes originais foram mantidos por compatibilidade com vers√µes anteriores.

Astro v3.0 remove os nomes originais em favor dos nomes de tema renomeados.

#### O que devo fazer?

Se o seu projeto utiliza qualquer um dos temas abaixo, os renomeie para seu nome atualizado:

- `material-darker` -> `material-theme-darker`
- `material-default` -> `material-theme`
- `material-lighter` -> `material-theme-lighter`
- `material-ocean` -> `material-theme-ocean`
- `material-palenight` -> `material-theme-palenight`

### Removido: Funcionalidades do `class:list`

No Astro v2.x, a [diretiva `class:list`](/pt-br/reference/directives-reference/#classlist) utilizava uma implementa√ß√£o customizada, inspirada por [`clsx`](https://github.com/lukeed/clsx) com algumas funcionalidades extras como desduplica√ß√£o e suporte para `Set`.

Astro v3.0 agora utiliza `clsx` diretamente para `class:list`, que n√£o suporta desduplica√ß√£o ou valores `Set`.

#### O que devo fazer?

Substitua quaisquer elementos `Set` passados para a diretiva `class:list` com um `Array` plano.

```astro title="src/components/MeuComponenteAstro.astro" del={4} ins={5}
<Componente class:list={[
  'a',
  'b',
  new Set(['c', 'd'])
  ['c', 'd'] 
]} />
```

### Removido: passar `class:list` como uma prop

No Astro v2.x, [valores de `class:list`](/pt-br/reference/directives-reference/#classlist) eram passados para componentes atrav√©s de [`Astro.props['class:list']`](/pt-br/reference/api-reference/#astroprops).

Astro v3.0 normaliza valores de `class:list` em uma string antes de os enviar para componentes atrav√©s de `Astro.props['class']`

#### O que devo fazer?

Remova qualquer c√≥digo que espera receber a prop `class:list`.

```astro title="src/components/MeuComponenteAstro.astro" del={2,3,7} ins={4,8} "classList" "'class:list': classList"
---
import { clsx } from 'clsx';
const { class: className, 'class:list': classList } = Astro.props;
const { class: className } = Astro.props;
---
<div
  class:list={[className, classList]}
  class:list={[className]}
/>
```

### Removido: transforma√ß√£o de vari√°veis CSS de camelCase para kebab-case

No Astro v2.x, [vari√°veis CSS](/pt-br/guides/styling/#vari√°veis-no-css) camelCase passadoas para o atributo `style` eram renderizadas tanto como camelCase (assim como foi escrito) como em kebab-case (mantido por compatibilidade com vers√µes anteriores).

Astro v3.0 remove a transforma√ß√£o para kebab-case de nomes de vari√°veis CSS em camelCase, e apenas a vari√°vel CSS original em camelCase √© renderizada.

```astro "meu-valor"
---
// src/components/MeuComponenteAstro.astro
const meuValor = "red"
---
<!-- input -->
<div style={{ "--meuValor": meuValor }}></div>

<!-- resultado (Astro 2.x) -->
<div style="--meu-valor:var(--meuValor);--meuValor:red"></div>
<!-- resultado (Astro 3.0) -->
<div style="--meuValor:red"></div>
```

#### O que devo fazer?

Se voc√™ dependia no Astro para transformar em kebab-case em seus estilos, atualize seus estilos existentes para camelCase para prevenir estilos faltando. Por exemplo:

```astro del={3} ins={4} title="src/components/MeuComponenteAstro.astro"
<style>
  div {
   color: var(--meu-valor);
   color: var(--meuValor);
  }
</style>
```

### Removido: Planifica√ß√£o autom√°tica do valor de retorno de `getStaticPaths()`

No Astro v2.x, o valor de retorno de [`getStaticPaths()`](/pt-br/reference/api-reference/#getstaticpaths) era automaticamente planificado para te permitir retornar um array sem nenhum erro.

Astro v3.0 remove a planifica√ß√£o autom√°tica do resultado de `getStaticPaths()`.

#### O que devo fazer?

Se voc√™ est√° retornando um array de arrays no lugar de um array de _objetos_ (como √© esperado), `.flatMap` e `.flat` agora devem ser usados para garantir que voc√™ est√° retornando um array plano.

Uma [mensagem de erro indicando que o valor de retorno de `getStaticPath()` deve ser um array de objetos](/pt-br/reference/errors/invalid-get-static-paths-entry/#what-went-wrong) ser√° providenciado se voc√™ precisa atualizar seu c√≥digo.

### Movido: `astro check` agora requer um pacote externo

No Astro v2.x, [`astro check`](/pt-br/reference/cli-reference/#astro-check) era incluso com o Astro por padr√£o, e suas depend√™ncias eram embutidas no Astro. Isso significava em um pacote maior, independente se voc√™ usava ou n√£o `astro check`. Isso tamb√©m te prevenia de ter controle sobre a vers√£o do TypeScript e o Servidor de Linguagem do Astro a se utilizar.


Astro v3.0 move o comando `astro check` para fora do n√∫cleo do Astro e agora requer o pacote externo `@astrojs/check`. Adicionalmente, voc√™ deve instalar `typescript` em seu projeto para utilizar o comando `astro check`.

#### O que devo fazer?

Execute o comando `astro check` ap√≥s atualizar para o Astro v3.0 e siga as instru√ß√µes para instalar as depend√™ncias necess√°rias, ou manualmente instale `@astrojs/check` e `typescript` em seu projeto.

### Depreciado: `build.excludeMiddleware` e `build.split`

No Astro v2.x, `build.excludeMiddleware` e `build.split` eram utilizados para mudar como arquivos espec√≠ficos eram emitidos ao utilizar um adaptador no modo SSR.

Astro v3.0 substitui essas op√ß√µes de configura√ß√£o da build com novas [op√ß√µes de configura√ß√£o de adaptadores SSR](/pt-br/guides/integrations-guide/#integra√ß√µes-oficiais) para realizar as mesmas tarefas: `edgeMiddleware` e `functionPerRoute`.

#### O que devo fazer?

Atualize o arquivo de configura√ß√£o do Astro para agora utilizar as novas op√ß√µes **na configura√ß√£o do adaptador** diretamente.

```js title="astro.config.mjs" del={5-7} ins={9}
import { defineConfig } from "astro/config";
import vercel from "@astrojs/vercel/serverless";

export default defineConfig({
    build: {
      excludeMiddleware: true
    },
    adapter: vercel({
      edgeMiddleware: true
    }),
});
```

```js title="astro.config.mjs" del={5-7} ins={9}
import { defineConfig } from "astro/config";
import netlify from "@astrojs/netlify/functions";

export default defineConfig({
     build: {
        split: true
     },
     adapter: netlify({
        functionPerRoute: true
     }),
});
```

### Depreciado: `markdown.drafts`

No Astro v2.x, a configura√ß√£o `markdown.drafts` te permitia ter p√°ginas de rascunho que eram disponibilizadas ao executar o servidor de desenvolvimento, mas n√£o na build para produ√ß√£o.

Astro v3.0 deprecia essa funcionalidade em favor do m√©todo de cole√ß√µes de conte√∫do de manipular p√°ginas de rascunho filtrando manualmente no lugar, o que te d√° mais controle sobre a funcionalidade.

#### O que devo fazer?

Para continuar a marcar algumas p√°ginas em seu projeto como rascunhos, [migue para cole√ß√µes de conte√∫do](/pt-br/guides/content-collections/#migrando-do-roteamento-baseado-em-arquivos) e [filtre p√°ginas manualmente](/pt-br/guides/content-collections/#filtrando-consultas-de-cole√ß√£o) com a propriedade do frontmatter `draft: true` no lugar.

### Depreciado: retornar um objeto simples de endpoints

No Astro v2.x, endpoints podiam retornar um objeto simples, que seria convertido para uma resposta JSON.

Astro v3.0 deprecia esse comportamento em favor de retornar um objeto `Response` diretamente.

#### O que devo fazer?

Atualize seus endpoints para reotrnar um objeto `Response` diretamente.

```ts title="endpoint.json.ts" del={2} ins={3}
export async function GET() {
  return { body: { "titulo": "Blog do Bob" }};
  return new Response(JSON.stringify({ "titulo": "Blog do Bob" }));
}
```

Se voc√™ realmente precisar manter o formato anterior, voc√™ pode utilizar o objeto `ResponseWithEncoding`, mas isso ser√° depreciado no futuro.

```ts title="endpoint.json.ts" del={2} ins={3}
export async function GET() {
  return { body: { "titulo": "Blog do Bob" } };
  return new ResponseWithEncoding({ body: { "titulo": "Blog do Bob" }});
}
```


### Padr√£o modificado: porta `3000`

No Astro v2.x, Astro era executado na porta `3000` por padr√£o.

Astro v3.0 muda a [porta padr√£o](/pt-br/reference/cli-reference/#--port) para `4321`. üöÄ

#### O que devo fazer?

Atualize quaisquer refer√™ncias a `localhost:3000`, por exemplo em testes ou em seu `README`, para refletir a nova porta `localhost:4321`.


### Padr√£o modificado: import.meta.env.BASE_URL `trailingSlash`

No Astro v2.x, `import.meta.env.BASE_URL` anexava sua op√ß√£o [`base`](/pt-br/reference/configuration-reference/#base) com [`trailingSlash`](/pt-br/reference/configuration-reference/#trailingslash) por padr√£o. `trailingSlash: "ignore"` tamb√©m anexava com uma barra final.

Astro v3.0 n√£o mais anexa `import.meta.env.BASE_URL` com uma barra final por padr√£o, nem quando `trailingSlash: "ignore"` √© definido. (O comportamento existente de `base` em combina√ß√£o com `trailingSlash: "always"` ou `trailingSlash: "never"` n√£o mudou.)

#### O que devo fazer?

Se sua `base` j√° tem uma barra final, nenhuma mudan√ßa √© necess√°ria.

Se sua `base` n√£o tem uma barra final, adicione uma se voc√™ deseja preservar o comportamento padr√£o anterior (ou `trailingSlash: "ignore"`):

```js title="astro.config.mjs" del={4} ins={5}
import { defineConfig } from "astro/config";

export default defineConfig({
  base: 'minha-base',
  base: 'minha-base/',
});
```

### Padr√£o modificado: `compressHTML`

No Astro v2.x, Astro apenas comprimia seu HTML emitido quando [`compressHTML`](/pt-br/reference/configuration-reference/#compresshtml) era explicitamente definido como `true`. O valor padr√£o era `false`.

Astro v3.0 agora comprime HTML emitido por padr√£o.

#### O que devo fazer?

Agora voc√™ pode remover `compressHTML: true` de sua configura√ß√£o j√° que esse √© o novo comportamento padr√£o.

```js title="astro.config.mjs" del={4}
import { defineConfig } from "astro/config";

export default defineConfig({
  compressHTML: true
})
```

Agora voc√™ deve definir `compressHTML: false` para optar por sair da compress√£o de HTML.

### Padr√£o modificado: `scopedStyleStrategy`

No Astro v2.x, o valor padr√£o de [`scopedStyleStrategy`](/pt-br/reference/configuration-reference/#scopedstylestrategy) era `"where"`.

Astro v3.0 introduz um novo valor padr√£o: `"attribute"`. Por padr√£o, estilos agora s√£o aplicados utilizando atributos `data-*`.

#### O que devo fazer?

Para manter o [escopo dos estilos](/pt-br/guides/styling/#estilos-com-escopo), atualize o arquivo de configura√ß√£o para o valor padr√£o anterior: 


```js title="astro.config.mjs" ins={4}
import { defineConfig } from "astro/config";

export default defineConfig({
  scopedStyleStrategy: "where"
})
```

### Padr√£o modificado: `inlineStyleSheets`

No Astro v2.x, todas as folhas de estilo foram enviadas como tags link por padr√£o. Voc√™ poderia optar por adicion√°-las inline em tags `<style>` toda vez com `"always"`, ou adicionar inline apenas folhas de estilo abaixo de um certo tamanho com `"auto"` definindo a configura√ß√£o [`build.inlineStylesheets`](/pt-br/reference/configuration-reference/#buildinlinestylesheets). A op√ß√£o padr√£o era `"never"`.

Astro v3.0 modifica o valor padr√£o de `inlineStylesheets` para `"auto"`. Folhas de estilo menores que `ViteConfig.build.assetsInlineLimit` (padr√£o: 4kb) s√£o adicionadas inline por padr√£o. Caso contr√°rio, estilos do projeto eram enviados como folhas de estilo externas.

#### O que devo fazer?

Se voc√™ quer manter o comportamento atual do seu projeto, defina `build.inlineStylesheets` para o padr√£o anterior, `"never"`:


```js title="astro.config.mjs" ins={4-6}
import { defineConfig } from "astro/config";

export default defineConfig({
	 build: {
    inlineStylesheets: "never"
  }
})
```

### Padr√£o modificado: servi√ßo de imagem

No Astro v2.x, Squoosh era o [servi√ßo padr√£o de processamento de imagem](/pt-br/guides/images/#servi√ßo-de-imagem-padr√£o).

Astro v3.0 agora inclui Sharp como o novo servi√ßo de processamento de imagem padr√£o e fornece uma op√ß√£o da configura√ß√£o para utilizar Squoosh no lugar.

#### O que devo fazer?

Se voc√™ preferir continuar a usar Squoosh para transformar suas imagens, atualize sua configura√ß√£o com o seguinte: 

```ts title="astro.config.mjs" ins={4-6}
import { defineConfig, squooshImageService } from "astro/config";

export default defineConfig({
  image: {
    service: squooshImageService(),
  }
})
```

### Modificado: Capitaliza√ß√£o dos m√©todos de requisi√ß√£o HTTP

No Astro v2.x, [m√©todos de requisi√ß√£o HTTP](/pt-br/core-concepts/endpoints/#m√©todos-http) eram escritos usando nomes de fun√ß√£o em letras min√∫sculas: `get`, `post`, `put`, `all` e `del`.

Astro v3.0 utiliza nomes de fun√ß√£o em letras mai√∫sculas, incluindo `DELETE` ao inv√©s de `del`.

#### O que devo fazer?

Renomeie todas as fun√ß√µes para seus equivalentes em letras mai√∫sculas:

- `get` para `GET`
- `post` para `POST`
- `put` para `PUT`
- `all` para `ALL`
- `del` para `DELETE`

```js title="endpoint.ts" del={1} ins={2}
export function get() {
export function GET() {
    return new Response(JSON.stringify({ "titulo": "Blog do Bob" }));
}
```

### Modificado: Configura√ß√£o de m√∫ltiplos frameworks JSX

No Astro v2.x, voc√™ poderia utilizar [m√∫ltiplas integra√ß√µes de frameworks JSX](/pt-br/guides/integrations-guide/#integra√ß√µes-oficiais) (React, Solid, Preact) no mesmo projeto sem precisar identificar quais arquivos pertenciam a qual framework.

Astro v3.0 agora requer que voc√™ especifique qual framework utilizar para seus arquivos com as novas op√ß√µes `include` e `exclude` da configura√ß√£o de integra√ß√µes quando voc√™ tiver integra√ß√µes de frameworks JSX instaladas. Isso permite Astro suportar melhor o uso de um √∫nico framework, assim como funcionalidades avan√ßadas como Fast Refresh do React.

#### O que devo fazer?

Se voc√™ estiver utilizando m√∫ltiplos frameworks JSX no mesmo projeto, defina `include` (e opcionalmente `exclude`) como um array de arquivos e/ou pastas. Coringas podem ser utilizados para incluir o caminho de m√∫ltiplos arquivos.

N√≥s recomendamos colocar componentes de frameworks em comum na mesma pasta (e.x. `/components/react/` e `/components/solid/`) para fazer especificar suas inclus√µes mais f√°cil, mas isso n√£o √© necess√°rio:

```js ins={13,16,19}
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';
import react from '@astrojs/react';
import svelte from '@astrojs/svelte';
import vue from '@astrojs/vue';
import solid from '@astrojs/solid-js';

export default defineConfig({
  // Habilite m√∫ltiplos frameworks a suportarem todos os tipos de componentes.
  // Nenhum `include` √© necess√°rio se voc√™ est√° usando apenas um √∫nico framework!
  integrations: [
    preact({
      include: ['**/preact/*']
    }),
    react({
      include: ['**/react/*']
    }),
    solid({
      include: ['**/solid/*'],
    }),
  ]
});
```

### Modificado: `Astro.cookies.get(key)` pode retornar `undefined`

No Astro v2.x, [`Astro.cookies.get(key)`](/pt-br/reference/api-reference/#astrocookies) sempre retornaria um [objeto `AstroCookie`](/pt-br/reference/api-reference/#astrocookie), mesmo se o cookie n√£o existisse. Para verificar sua exist√™ncia, voc√™ precisava utilizar `Astro.cookies.has(key)`.

Astro v3.0 retorna `undefined` em `Astro.cookies.get(key)` se o cookie n√£o existir.

#### O que devo fazer?

Esta mudan√ßa n√£o ir√° quebrar nenhum c√≥digo que verifica pela exist√™ncia do objeto `Astro.cookie` antes de utilizar `Astro.cookies.get(key)`, mas n√£o √© mais necess√°rio.

Voc√™ pode com seguran√ßa remover qualquer c√≥digo que utiliza `has()` para verificar se o valor de `Astro.cookies` √© `undefined`:

```js del={1-3} ins={5-7}
if (Astro.cookies.has(id)) {
  const id = Astro.cookies.get(id)!;
}

const id = Astro.cookies.get(id);
if (id) {
}
```

### Modificado: executando a CLI do Astro programaticamente

No Astro v2.x, o entrypoint do pacote `"astro"` exportava e executava a CLI do Astro diretamente. N√£o √© recomendado executar Astro dessa forma na pr√°tica.

Astro v3.0 remove a CLI do entrypoint, e exporta um novo conjunto de APIs experimentais JavaScript, incluindo `dev()`, `build()`, `preview()` e `sync()`.

#### O que devo fazer?

Para [executar a CLI do Astro programaticamente](/pt-br/reference/cli-reference/#apis-avan√ßadas-experimental), utilize as novas APIs JavaScript experimentais:

```js
import { dev, build } from "astro";

// Inicie o servidor de desenvolvimento do Astro
const devServer = await dev();
await devServer.stop();

// Fa√ßa a build do seu projeto Astro
await build();
```


### Modificado: caminhos de exporta√ß√£o do entrypoint interno da API do Astro

No Astro v2.x, voc√™ poderia importar APIs internas do Astro a partir de `astro/internal/*` e `astro/runtime/server/*`.

Astro v3.0 remove os dois entrypoints em favor do entrypoint existente `astro/runtime/*`. Adicionalmente, uma nova exporta√ß√£o `astro/compiler-runtime` foi adicionada para c√≥digo em runtime espec√≠fico do compilador.

#### O que devo fazer?

Esses entrypoints s√£o para APIs internas do Astro e n√£o devem afetar seu projeto. Mas se voc√™ utiliza esses entrypoints, atualize como mostrado abaixo:

```js del={1,4,10} ins={2,5,11}
import 'astro/internal/index.js';
import 'astro/runtime/server/index.js';

import 'astro/server/index.js';
import 'astro/runtime/server/index.js';
```

```js ins={5} del={4}
import { transform } from '@astrojs/compiler';

const resultado = await transform(source, {
  internalURL: 'astro/runtime/server/index.js',
  internalURL: 'astro/compiler-runtime',
  // ...
});
```



## Problemas Conhecidos

Atualmente, n√£o h√° problemas conhecidos.

