---
title: Hygraph & Astro
description: Tambahkan konten ke proyek Astro Anda menggunakan Hygraph sebagai CMS
sidebar:
  label: Hygraph
type: cms
service: Hygraph
i18nReady: true
---
import { Steps } from '@astrojs/starlight/components';
import { FileTree } from '@astrojs/starlight/components';

[Hygraph](https://hygraph.com/) adalah platform manajemen konten terfederasi. Hygraph menyediakan endpoint GraphQL untuk mengambil konten.

## Mengintegrasikan dengan Astro

Di bagian ini, Anda akan membuat endpoint GraphQL [Hygraph](https://hygraph.com/) untuk di-*fetch* dengan Astro.

### Prasyarat

Untuk memulai, Anda perlu menyiapkan hal berikut:

1. **Akun dan proyek Hygraph**. Jika Anda belum memiliki akun, Anda dapat [mendaftar gratis](https://app.hygraph.com/signup) dan membuat proyek baru. 

2. **Izin akses Hygraph** - Pada `Project Settings > API Access`, konfigurasikan izin *Public Content API* agar mengizinkan permintaan baca tanpa autentikasi. Jika Anda belum menyiapkan izin apa pun, Anda dapat klik **Yes, initialize defaults** untuk menambahkan izin yang diperlukan guna menggunakan "High Performance Content API".

### Menyiapkan endpoint

Untuk menambahkan endpoint Hygraph ke Astro, buat file `.env` di *root* proyek Anda dengan variabel berikut:

```ini title=".env"
HYGRAPH_ENDPOINT=YOUR_HIGH_PERFORMANCE_API
```

Sekarang, Anda dapat menggunakan variabel lingkungan ini di proyek Anda. 

Jika Anda ingin mendapatkan IntelliSense untuk variabel lingkungan, buat file `env.d.ts` di direktori `src/` dan konfigurasikan `ImportMetaEnv` seperti ini:

```ts title="src/env.d.ts"
interface ImportMetaEnv {
  readonly HYGRAPH_ENDPOINT: string;
}
```

:::note
Pelajari lebih lanjut tentang [menggunakan variabel lingkungan](/id/guides/environment-variables/) dan file `.env` di Astro.
:::

Direktori root Anda sekarang seharusnya berisi file-file baru ini:

<FileTree title="Struktur Proyek">
- src/
  - **env.d.ts**
- **.env**
- astro.config.mjs
- package.json
</FileTree>

### Mengambil data

Ambil data dari proyek Hygraph Anda menggunakan `HYGRAPH_ENDPOINT`. 

Sebagai contoh, untuk mengambil entri dari tipe konten `blogPosts` yang memiliki field string `title`, buat kueri GraphQL untuk mengambil konten tersebut. Lalu, definisikan tipe kontennya, dan jadikan sebagai tipe *response*.

```astro title="src/pages/index.astro"
---
interface Post {
	title: string;
}

const query = {
	method: "POST",
	headers: { "Content-Type": "application/json" },
	body: JSON.stringify({
		query: `
      {
        blogPosts {
          title
        }
      }`,
	}),
};

const response = await fetch(import.meta.env.HYGRAPH_ENDPOINT, query);
const json = await response.json();
const posts: Post[] = json.data.blogPosts;
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Astro</title>
	</head>
	<body>
		<h1>Astro</h1>
		{
			posts.map((post) => (
				<div>
					<h2>{post.title}</h2>
				</div>
			))
		}
	</body>
</html>
```

## Deploy

### Mengonfigurasi Netlify Webhook

Untuk menyiapkan webhook di Netlify:

<Steps>
1. *Deploy* situs Anda ke Netlify dengan [panduan ini](/id/guides/deploy/netlify/). Ingat untuk menambahkan `HYGRAPH_ENDPOINT` ke variabel lingkungan Anda.

2. Lalu buka dasbor proyek Hygraph Anda dan klik **Apps**. 

3. Buka *marketplace* dan cari Netlify kemudian ikuti instruksi yang disediakan.

4. Jika semuanya sudah benar, sekarang Anda dapat *deploy* situs hanya dengan satu klik dari antarmuka Hygraph.
</Steps>

## Sumber Daya Komunitas

- [Contoh Hygraph + Astro dengan `marked` untuk *markdown parsing*](https://github.com/camunoz2/example-astrowithhygraph)