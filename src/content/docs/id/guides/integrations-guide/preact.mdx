---
type: integration
title: '@astrojs/preact'
description: Pelajari cara menggunakan integrasi framework @astrojs/preact untuk memperluas dukungan komponen di proyek Astro Anda.
sidebar:
  label: Preact
githubIntegrationURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/preact/'
category: renderer
i18nReady: true
---

import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'
import Since from '~/components/Since.astro';

Integrasi **[Astro][astro-integration]** ini mengaktifkan rendering dan hydrasi sisi klien untuk komponen [Preact](https://preactjs.com/) Anda.

## Mengapa Preact?

Preact adalah pustaka untuk membangun komponen UI interaktif di web. Jika Anda ingin membuat fitur interaktif menggunakan JavaScript, Anda mungkin lebih suka format komponennya dibanding langsung memakai API browser.

Preact juga pilihan yang tepat bila Anda sebelumnya memakai React. Preact menyediakan API yang sama seperti React, tetapi dalam paket yang jauh lebih kecil (~3kB). Preact bahkan dapat merender banyak komponen React dengan opsi konfigurasi `compat` (lihat di bawah).

**Ingin mempelajari Preact sebelum memakai integrasi ini?**Lihat [‚ÄúLearn Preact‚Äù](https://preactjs.com/tutorial), tutorial interaktif di situs mereka.

## Instalasi

Astro menyertakan perintah `astro add` untuk mengotomatisasi penyiapan integrasi resmi. Jika Anda mau, Anda juga bisa [menginstal secara manual](#manual-install) sebagai alternatif.

Untuk memasang `@astrojs/preact`, jalankan salah satu perintah berikut dari direktori proyek Anda dan ikuti petunjuknya:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npx astro add preact
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm astro add preact
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn astro add preact
  ```
  </Fragment>
</PackageManagerTabs>

Jika Anda mengalami masalah, [laporkan di GitHub](https://github.com/withastro/astro/issues) dan coba langkah instalasi manual di bawah.

### Manual Install

Pertama, instal paket `@astrojs/preact`:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npm install @astrojs/preact
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm add @astrojs/preact
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn add @astrojs/preact
  ```
  </Fragment>
</PackageManagerTabs>

Sebagian besar package manager juga akan memasang peer dependency terkait. Jika saat menjalankan Astro Anda melihat peringatan `Cannot find package 'preact'` (atau serupa), Anda perlu memasang Preact:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npm install preact
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm add preact
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn add preact
  ```
  </Fragment>
</PackageManagerTabs>

Lalu, terapkan integrasi ini pada berkas `astro.config.*` menggunakan properti `integrations`:

```js title="astro.config.mjs" ins={2} ins="preact()"
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';

export default defineConfig({
  // ...
  integrations: [preact()],
});
```

Dan tambahkan konfigurasi berikut pada `tsconfig.json`:

```json title="tsconfig.json" ins={5-8}
{
  "extends": "astro/tsconfigs/strict",
  "include": [".astro/types.d.ts", "**/*"],
  "exclude": ["dist"],
  "compilerOptions": {
    "jsx": "react-jsx",
    "jsxImportSource": "preact"
  }
}
```

## Penggunaan

Untuk memakai komponen Preact pertama Anda di Astro, kunjungi dokumentasi [komponen UI framework][astro-ui-frameworks]. Anda akan mempelajari:

* üì¶ cara memuat komponen framework,
* üíß opsi hydrasi sisi klien, dan
* ü§ù bagaimana mencampur serta menyarang berbagai framework

Jangan lupa cek juga dokumentasi [Integrasi Astro][astro-integration] untuk info lebih lanjut.

## Konfigurasi

Integrasi Preact untuk Astro menangani cara komponen Preact dirender dan memiliki opsi sendiri. Ubah opsi ini di `astro.config.mjs`, tempat pengaturan integrasi proyek Anda.

Untuk penggunaan dasar, Anda tidak perlu mengonfigurasi apa pun.

### `compat`

<p>

**Type:** `boolean`<br />
<Since pkg="@astrojs/preact" v="0.3.0" />
</p>

Anda dapat mengaktifkan `preact/compat`, lapisan kompatibilitas Preact untuk merender komponen React tanpa perlu memasang atau mengirimkan pustaka React yang berukuran lebih besar ke browser pengguna.

Aktifkan dengan memberikan objek pada integrasi Preact dan set `compat: true`.

```js title="astro.config.mjs" "compat: true"
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';

export default defineConfig({
  integrations: [preact({ compat: true })],
});
```

Dengan opsi `compat`, integrasi Preact akan merender komponen React maupun Preact di proyek Anda dan juga memungkinkan impor komponen React di dalam komponen Preact. Baca selengkapnya di [‚ÄúSwitching to Preact (from React)‚Äù](https://preactjs.com/guide/v10/switching-to-preact).

Saat mengimpor pustaka komponen React, untuk menukar dependensi `react` dan `react-dom` menjadi `preact/compat`, Anda dapat menggunakan [`overrides`](https://docs.npmjs.com/cli/v8/configuring-npm/package-json#overrides).

```json title="package.json"
{
  "overrides": {
    "react": "npm:@preact/compat@latest",
    "react-dom": "npm:@preact/compat@latest"
  }
}
```

Lihat dokumentasi [`pnpm` overrides](https://pnpm.io/package_json#pnpmoverrides) dan [`yarn` resolutions](https://yarnpkg.com/configuration/manifest#resolutions) untuk fitur serupa.

:::note
Saat ini, opsi `compat` hanya bekerja untuk pustaka React yang mengekspor kode sebagai ESM. Jika terjadi galat saat build, coba tambahkan pustaka tersebut ke `vite.ssr.noExternal: ['the-react-library']` di `astro.config.mjs` Anda.
:::

### `devtools`

<p>

**Type:** `boolean`<br />
<Since pkg="@astrojs/preact" v="3.3.0" />
</p>

Anda dapat mengaktifkan [Preact devtools](https://preactjs.github.io/preact-devtools/) di mode pengembangan dengan memberikan objek `{ devtools: true }` pada konfigurasi `preact()`:

```js title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';

export default defineConfig({
  // ...
  integrations: [preact({ devtools: true })],
});
```

## Opsi

### Menggabungkan banyak framework JSX

Jika Anda memakai beberapa framework JSX (React, Preact, Solid) dalam satu proyek, Astro harus menentukan transformasi spesifik framework mana yang dipakai untuk setiap komponen Anda. Jika hanya satu framework JSX yang dipasang, Anda tidak perlu konfigurasi tambahan.

Gunakan opsi konfigurasi `include` (wajib) dan `exclude` (opsional) untuk menentukan berkas mana yang termasuk ke framework tertentu. Berikan larik (array) berisi berkas dan/atau folder. Wildcard dapat digunakan untuk mencakup banyak jalur berkas.

Kami menyarankan menempatkan komponen tiap framework pada folder berbeda (mis. `/components/react/` dan `/components/solid/`) agar penentuan include lebih mudah, meski tidak wajib:

```js title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';
import react from '@astrojs/react';
import svelte from '@astrojs/svelte';
import vue from '@astrojs/vue';
import solid from '@astrojs/solid-js';

export default defineConfig({
  // Aktifkan banyak framework untuk mendukung berbagai jenis komponen.
  // Tidak perlu `include` jika hanya memakai satu framework JSX!
  integrations: [
    preact({
      include: ['**/preact/*'],
    }),
    react({
      include: ['**/react/*'],
    }),
    solid({
      include: ['**/solid/*'],
    }),
  ],
});
```

## Contoh

* [Contoh Astro + Preact](https://github.com/withastro/astro/tree/latest/examples/framework-preact) menunjukkan cara memakai komponen Preact interaktif di proyek Astro.
* [Contoh Astro + Nanostores](https://github.com/withastro/astro/tree/latest/examples/with-nanostores) memperlihatkan cara berbagi state antar komponen ‚Äî bahkan antar framework! ‚Äî di proyek Astro.

[astro-integration]: /id/guides/integrations-guide/

[astro-ui-frameworks]: /id/guides/framework-components/#using-framework-components
