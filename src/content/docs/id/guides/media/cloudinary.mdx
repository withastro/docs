---
title: Cloudinary & Astro
description: Tambahkan gambar dan video ke proyek Astro Anda menggunakan Cloudinary
sidebar:
  label: Cloudinary
type: media
stub: true
service: Cloudinary
i18nReady: true
---
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';

[Cloudinary](https://cloudinary.com) adalah platform gambar & video sekaligus headless Digital Asset Manager (DAM) yang memungkinkan Anda meng-host aset dan mengantarkannya melalui content delivery network (CDN) mereka.

Saat mengantarkan dari Cloudinary, Anda juga mendapatkan akses ke Transformation API mereka, yang memberi Anda kemampuan mengedit aset dengan alat seperti penghapus latar belakang, pemangkasan serta pengubahan ukuran dinamis, dan AI generatif.

## Menggunakan Cloudinary di Astro

Cloudinary mendukung beragam SDK yang bisa digunakan sesuai lingkungan Astro Anda.

[Cloudinary Astro SDK](https://astro.cloudinary.dev/) menyediakan komponen Astro native, termasuk komponen gambar, video, dan unggah, serta content loader yang dapat digunakan bersama content collections Astro.

Sebagai alternatif, baik [Node.js SDK](https://cloudinary.com/documentation/node_integration) maupun [JavaScript SDK](https://cloudinary.com/documentation/javascript_integration) Cloudinary dapat digunakan untuk menghasilkan URL gambar Anda. Node.js SDK juga bisa melakukan permintaan ke API Cloudinary termasuk mengunggah aset, meminta resource, dan menjalankan analisis konten.

## Prasyarat

- Proyek Astro yang sudah ada
- Akun Cloudinary

## Memasang Astro Cloudinary

Pasang Cloudinary Astro SDK dengan menjalankan perintah sesuai manajer paket Anda:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm install astro-cloudinary
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm add astro-cloudinary
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn add astro-cloudinary
  ```
  </Fragment>
</PackageManagerTabs>

## Mengonfigurasi akun Anda

Buat file `.env` baru di root proyek Anda dan tambahkan kredensial Cloudinary Anda:

```shell title=".env"
PUBLIC_CLOUDINARY_CLOUD_NAME="<Your Cloud Name>"

// Hanya diperlukan jika menggunakan CldUploadWidget atau cldAssetsLoader
PUBLIC_CLOUDINARY_API_KEY="<Your API Key>"
CLOUDINARY_API_SECRET="<Your API Secret>"
```

## Menggunakan gambar Cloudinary

Tambahkan gambar di komponen `.astro` dengan meneruskan data gambar (mis. `src`, `width`, `alt`) ke komponen `<CldImage>`. Ini akan otomatis mengoptimalkan gambar Anda dan memberi akses ke Transformations API.

```jsx title="Component.astro"
---
import { CldImage } from 'astro-cloudinary';
---
<CldImage
  src="<Public ID>"
  width="<Width>"
  height="<Height>"
  alt="<Description>"
/>
```

Lihat [dokumentasi `<CldImage>` Cloudinary](https://astro.cloudinary.dev/cldimage/basic-usage) untuk informasi lebih lanjut.

## Menggunakan video Cloudinary

Untuk menambahkan video ke komponen `.astro`, tambahkan `<CldVideoPlayer>` dan teruskan properti yang sesuai. Komponen ini akan otomatis mengoptimalkan dan menyematkan video Anda menggunakan [Cloudinary Video Player](https://cloudinary.com/documentation/cloudinary_video_player).

```jsx title="Component.astro"
---
import { CldVideoPlayer } from 'astro-cloudinary';
---
<CldVideoPlayer
  src="<Public ID>"
  width="<Width>"
  height="<Height>"
/>
```

Lihat [dokumentasi `<CldVideoPlayer>` Cloudinary](https://astro.cloudinary.dev/cldvideoplayer/basic-usage) untuk informasi lebih lanjut.

## Mengaktifkan unggahan Cloudinary

Untuk mengaktifkan unggah file di UI situs atau aplikasi Anda, tambahkan `<CldUploadWidget>` yang akan menyematkan [Cloudinary Upload Widget](https://cloudinary.com/documentation/upload_widget).

Contoh berikut membuat widget untuk mengizinkan unggahan unsigned dengan meneruskan [Upload Preset](https://cloudinary.com/documentation/upload_presets) unsigned:

```jsx title="Component.astro"
---
import { CldUploadWidget } from 'astro-cloudinary';
---
<CldUploadWidget uploadPreset="<Upload Preset>">
  <button>Upload</button>
</CldUploadWidget>
```

Untuk unggahan bertanda tangan (signed), Anda dapat menemukan [panduan dan contoh](https://astro.cloudinary.dev/clduploadwidget/signed-uploads) di dokumentasi Astro Cloudinary.

Lihat [dokumentasi `<CldUploadWidget>` Cloudinary](https://astro.cloudinary.dev/clduploadwidget/basic-usage) untuk informasi lebih lanjut.

## Cloudinary content loader

Cloudinary Astro SDK menyediakan content loader `cldAssetsLoader` untuk memuat aset Cloudinary ke dalam content collections.

Untuk memuat koleksi gambar atau video, set `loader: cldAssetsLoader ({})` dengan `folder` jika diperlukan:

```jsx title="config.ts"
import { defineCollection } from 'astro:content';
import { cldAssetsLoader } from 'astro-cloudinary/loaders';

export const collections = {
  assets: defineCollection({
    loader: cldAssetsLoader({
      folder: '<Folder>' // Opsional, tanpa ini akan memuat direktori root
    })
  }),
}
```

Kemudian Anda dapat menggunakan [fungsi kueri `getCollection()` atau `getEntry()`](/id/guides/content-collections/#querying-collections) untuk memilih satu atau banyak gambar atau video dari koleksi Anda.

Lihat [dokumentasi `cldAssetsLoader` Cloudinary](https://astro.cloudinary.dev/cldassetsloader/basic-usage) untuk informasi lebih lanjut.

## Menghasilkan URL gambar Cloudinary

Astro Cloudinary SDK menyediakan helper `getCldOgImageUrl()` untuk menghasilkan dan menggunakan URL untuk gambar Anda. Gunakan ini saat Anda memerlukan URL alih-alih komponen untuk menampilkan gambar.

Salah satu penggunaan umum untuk URL adalah gambar Open Graph di tag `<meta>` untuk kartu media sosial. Helper ini, seperti komponen, memberi Anda akses ke transformasi Cloudinary untuk membuat kartu sosial yang dinamis dan unik untuk halaman mana pun.

Contoh berikut menunjukkan tag `<meta>` yang diperlukan untuk kartu media sosial, menggunakan `getCldOgImageUrl()` untuk menghasilkan gambar Open Graph:

```jsx title="Layout.astro"
---
import { getCldOgImageUrl } from 'astro-cloudinary/helpers';
const ogImageUrl = getCldOgImageUrl({ src: '<Public ID>' });
---
<meta property="og:image" content={ogImageUrl} />
<meta property="og:image:secure_url" content={ogImageUrl} />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="twitter:title" content="<Twitter Title>" />
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content={ogImageUrl} />
```

Temukan [template Kartu Media Sosial Cloudinary](https://astro.cloudinary.dev/templates/social-media-cards) di dokumentasi Cloudinary.

Lihat [dokumentasi `getCldOgImageUrl()` Cloudinary](https://astro.cloudinary.dev/getcldogimageurl/basic-usage) untuk informasi lebih lanjut.

## Menggunakan Cloudinary di Node.js

Untuk manajemen aset, unggahan, atau analisis yang lebih kompleks, Anda dapat menggunakan Cloudinary Node.js SDK saat bekerja di lingkungan Node.js Astro.

Pasang Cloudinary Node.js SDK dengan menjalankan perintah sesuai manajer paket Anda:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm install cloudinary
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm add cloudinary
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn add cloudinary
  ```
  </Fragment>
</PackageManagerTabs>

Tambahkan variabel lingkungan berikut di file `.env` Anda:

```shell title=".env"
PUBLIC_CLOUDINARY_CLOUD_NAME="<Your Cloud Name>"
PUBLIC_CLOUDINARY_API_KEY="<Your API Key>"
CLOUDINARY_API_SECRET="<Your API Secret>"
```

Konfigurasikan akun Anda dengan instance Cloudinary baru dengan menambahkan kode berikut di antara fence komponen Astro Anda:

```js title="Component.astro"
---
import { v2 as cloudinary } from "cloudinary";

cloudinary.config({
  cloud_name: import.meta.env.PUBLIC_CLOUDINARY_CLOUD_NAME,
  api_key: import.meta.env.PUBLIC_CLOUDINARY_API_KEY,
  api_secret: import.meta.env.CLOUDINARY_API_SECRET,
});
---
```

Ini akan memberi Anda akses ke semua API Cloudinary untuk berinteraksi dengan gambar, video, dan berkas didukung lainnya.

```js title="Component.astro"
await cloudinary.uploader.upload('./path/to/file');
```

Pelajari cara [mengunggah berkas menggunakan Cloudinary Node.js SDK dengan Astro Forms](https://www.youtube.com/watch?v=DQUYMyT2MTM).


## Sumber Resmi

- [Cloudinary Astro SDK](https://astro.cloudinary.dev/)
- [Cloudinary Node.js SDK](https://cloudinary.com/documentation/node_integration)
- [Menggunakan Cloudinary dengan Astro (YouTube)](https://www.youtube.com/playlist?list=PL8dVGjLA2oMqnpf2tShn1exf5GkSWuu5-)
- [Contoh Kode menggunakan Cloudinary Astro SDK (GitHub)](https://github.com/cloudinary-community/cloudinary-examples/tree/main/examples/astro-cloudinary)
