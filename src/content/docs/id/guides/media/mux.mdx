---
title: Mux & Astro
description: Tambahkan video performa tinggi ke proyek Astro Anda menggunakan Mux
sidebar:
  label: Mux
type: media
service: Mux
stub: true
i18nReady: true
---

import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';
import ReadMore from '~/components/ReadMore.astro';

[Mux](https://www.mux.com?utm_campaign=21819274-Astro&utm_source=astro-docs) adalah layanan media ter-host yang menyediakan infrastruktur streaming video dan analitik performa untuk bisnis skala apa pun.

Saat Anda menggunakan Mux untuk menyimpan dan meng-host konten video, Anda akan memiliki akses ke komponen video Astro-native untuk [Mux Player](#mux-player), komponen siap-pakai untuk menambahkan video Mux di proyek Astro Anda, dan [Mux Uploader](#mux-uploader) untuk mengunggah video ke Mux dari situs Anda. Komponen-komponen ini terintegrasi mulus dengan [Mux Data](https://www.mux.com/docs/guides/data?utm_campaign=21819274-Astro&utm_source=astro-docs) untuk melacak keterlibatan dan performa video Anda.

Anda juga dapat berinteraksi dengan konten melalui [Mux Node SDK](#mux-node-sdk).

:::tip
Pelajari lebih lanjut fitur seperti menyematkan, menyimpan, streaming, dan kustomisasi video di [halaman khusus Mux untuk video di Astro](https://www.mux.com/video-for/astro?utm_campaign=21819274-Astro&utm_source=astro-docs)!
:::

## Menggunakan Mux di Astro

API dan web component Mux bekerja di Astro untuk mengompresi dan mengoptimalkan video serta stream Anda di web, menyesuaikan kualitas video dengan kondisi jaringan, dan mengintegrasikan fitur tambahan seperti caption, thumbnail, dan analitik. [Mux Node SDK](https://www.mux.com/docs/integrations/mux-node-sdk?utm_campaign=21819274-Astro&utm_source=astro-docs) mendukung Mux Data dan Mux Video API.

## Prasyarat

- Proyek Astro yang sudah ada. Beberapa fitur mungkin juga memerlukan adapter terpasang untuk [on-demand server rendering](/id/guides/on-demand-rendering/).
- Akun Mux. Jika Anda belum punya akun, Anda dapat [mendaftar di Mux](https://dashboard.mux.com/login?utm_campaign=21819274-Astro&utm_source=astro-docs) menggunakan kode `ASTRO` untuk menerima kredit $50.

## Mux Player

Di Astro, Anda dapat menggunakan [Mux Player](https://www.mux.com/docs/guides/mux-player-web?utm_campaign=21819274-Astro&utm_source=astro-docs) yang kaya fitur sebagai komponen Astro native untuk pemutaran video dan live stream yang optimal dan responsif. 

Mux Player menyediakan UI responsif berdasarkan dimensi pemutar dan jenis stream, pratinjau thumbnail dan poster otomatis, serta kemampuan pemutar video modern (mis. fullscreen, picture‑in‑picture, Chromecast, AirPlay).

```astro title="src/components/MyMuxVideoPlayer.astro"
---
import { MuxPlayer } from "@mux/mux-player-astro";
---
<MuxPlayer
  playbackId="DS00Spx1CV902MCtPj5WknGlR102V5HFkDe"
  metadata={{ video_title: 'My Astro Video' }}
/>

```

Mux Player memiliki dukungan bawaan untuk analitik Mux Data, dan secara otomatis akan menampilkan metrik keterlibatan pengunjung dan kualitas video di dashboard Anda setelah video ditonton di situs yang ter-deploy.

### Instalasi

Pasang versi Astro dari Mux Player menggunakan manajer paket pilihan Anda:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm install @mux/mux-player-astro
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm add @mux/mux-player-astro
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn add @mux/mux-player-astro
  ```
  </Fragment>
</PackageManagerTabs>

Mux Player juga dapat digunakan di proyek Astro Anda sebagai:
- web component (`<mux-player>` dari `@mux/mux-player`)
- komponen React (`<MuxPlayer />` dari `@mux/mux-player-react`)
- embed HTML web (`<iframe>`)

### Play a video from Mux

Impor dan gunakan komponen Astro `<MuxPlayer />` langsung di berkas `.astro` Anda seperti komponen Astro lainnya. 

Anda memerlukan `playbackId` untuk aset Anda, yang dapat ditemukan di dashboard Mux atau [retrieved from its `ASSET_ID`](#retrieve-asset-data). 

Semua [opsi untuk mengontrol Mux web player](https://www.mux.com/docs/guides/player-api-reference/?utm_campaign=21819274-Astro&utm_source=astro-docs) lainnya (mis. menyembunyikan atau menampilkan kontrol, menata elemen, menonaktifkan cookie) bersifat opsional:

```astro title="src/components/StarlightVideo.astro"
<MuxPlayer
  playbackId="FOTbeIxKeMPzyhrob722wytaTGI02Y3zbV00NeFQbTbK00"
  metadata={{
    video_title: 'Starlight by Astro',
  }}
  style={{
    display: 'block',
    aspectRatio: '16/9',
    backgroundColor: '#000',
    margin: '1rem 0 2rem',
  }}
  primaryColor="#f2ec3a"
  secondaryColor="#0caa09"
  accentColor="#6e1e99"
  defaultShowRemainingTime={true}
/>
```

Jika `playbackId` Anda milik live stream alih‑alih video on‑demand, maka Mux Player akan memungkinkan Anda melakukan kustomisasi lebih lanjut seperti mengaktifkan [mode DVR](https://www.mux.com/docs/guides/stream-recordings-of-live-streams#dvr-mode-vs-non-dvr-mode?utm_campaign=21819274-Astro&utm_source=astro-docs).

```astro
<MuxPlayer
  playbackId="FOTbeIxKeMPzyhrob722wytaTGI02Y3zbV00NeFQbTbK00"
  metadata={{
    video_title: 'Starlight stream with Astro',
  }}
  streamType="live:dvr"
/>

```

Setiap live stream direkam dan disimpan di Mux sebagai aset video untuk pemutaran on‑demand di kemudian hari.

## Mux video Element 

[Mux video element](https://www.mux.com/docs/guides/play-your-videos#mux-video-element?utm_campaign=21819274-Astro&utm_source=astro-docs) adalah pengganti langsung elemen HTML5 `<video>` yang menyediakan dukungan peramban untuk pemutaran HLS, serta Mux Data yang otomatis terkonfigurasi untuk menampilkan metrik pengunjung dan performa. Gunakan ini ketika Anda tidak memerlukan semua fitur [Mux Player](#mux-player).

Untuk menggunakan web component `<mux-video>`, terlebih dahulu pasang `mux-video` menggunakan manajer paket pilihan Anda:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm install @mux/mux-video
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm add @mux/mux-video
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn add @mux/mux-video
  ```
  </Fragment>
</PackageManagerTabs>

Lalu, Anda dapat mengimpor dan merender web component tersebut dalam tag `<script>` di berkas `.astro` Anda.

Anda memerlukan `playback-id` untuk aset video Anda, yang dapat ditemukan di dashboard Mux atau [retrieved from its `ASSET_ID`](#retrieve-asset-data).

Semua atribut untuk elemen HTML5 `<video>` (mis. `poster`, `controls`, `muted`) tersedia, serta kontrol tambahan pemutar video Mux (mis. menyediakan metadata, mengontrol resolusi, menonaktifkan cookie):

```astro title="src/components/StarlightVideo.astro"
<script>import '@mux/mux-video'</script>

<mux-video
  playback-id="FOTbeIxKeMPzyhrob722wytaTGI02Y3zbV00NeFQbTbK00"
  metadata-video-title="Starlight by Astro"
  controls
  disable-tracking
></mux-video>
```

## Mux Node SDK

[Mux Node SDK](https://www.mux.com/docs/integrations/mux-node-sdk?utm_campaign=21819274-Astro&utm_source=astro-docs) menyediakan akses terautentikasi ke Mux REST API dari TypeScript atau JavaScript sisi server. Ini memungkinkan Anda berinteraksi dengan aset dan data Mux di script komponen file `.astro` Anda.

Sementara Mux Player dan Mux Video tidak memerlukan autentikasi dan dapat memutar video publik apa pun dengan `playbackId`‑nya, menghubungkan data Mux ter-host melalui Node SDK memerlukan [Mux API access token](#mux-environment-api-access).

### Instalasi

Pasang Mux Node SDK menggunakan manajer paket pilihan Anda:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm install @mux/mux-node
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm add @mux/mux-node
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn add @mux/mux-node
  ```
  </Fragment>
</PackageManagerTabs>

### Mux Environment API access

Token API terkait ke sebuah Mux Environment, yang pada dasarnya adalah kontainer untuk video dan data terkait Anda. Saat Anda mendaftar di Mux, sebuah Environment dibuat otomatis. Jika Anda membuat Environment tambahan, pastikan memilih yang tepat sebelum membuat token. Dari sana, Anda dapat [mengambil token ID dan SECRET](https://www.mux.com/docs/core/stream-video-files#1-get-an-api-access-token) dan memberikannya ke Node SDK. Token‑token ini dapat diteruskan ke komponen Astro Anda sebagai variabel lingkungan yang disimpan di file `.env`.

Ini memungkinkan Anda membuat instance Mux Node SDK untuk mengambil informasi tentang video, membuat aset baru, mengakses metrik dan performa real‑time, dan banyak lagi:

```astro title="src/components/StarlightVideo.astro"
---
import Mux from "@mux/mux-node";

const mux = new Mux ({
  tokenId: import.meta.env.MUX_TOKEN_ID,
  tokenSecret: import.meta.env.MUX_TOKEN_SECRET,
})
---
```

<ReadMore>Baca selengkapnya tentang penggunaan [variabel lingkungan](/id/guides/environment-variables/) di proyek Astro Anda, termasuk membuat [skema type‑safe](/id/guides/environment-variables/#type-safe-environment-variables) untuk kredensial Mux Anda.</ReadMore>

### Retrieve asset data

Untuk mengambil informasi tentang video Anda untuk digunakan di proyek Astro, sediakan `ASSET_ID` video (tersedia di dashboard Mux) ke fungsi helper `retrieve()`. Ini memungkinkan Anda meneruskan nilai ke komponen Mux dan template HTML Anda, seperti judul atau durasi video:

```astro
---
import Mux from "@mux/mux-node";
import { MuxPlayer } from "@mux/mux-player-astro";

const mux = new Mux({
  tokenId: import.meta.env.MUX_TOKEN_ID,
  tokenSecret: import.meta.env.MUX_TOKEN_SECRET,
})

const ASSET_ID = "E01irAaN8c6dk1010153uC2mzst7RVbAdJJWtHECAHFvDo";
const asset = await mux.video.assets.retrieve(ASSET_ID);

const playbackId = asset.playback_ids?.find((id)=> id.policy=== "public")?.id;
const videoTitle = asset?.meta?.title;
const createdAt = Number(asset?.created_at);
const duration = Number(asset?.duration)

const date = new Date(createdAt * 1000).toDateString()
const time = new Date(Math.round(duration) * 1000).toISOString().substring(14, 19)
---
<h1>My Video Page</h1>
<p>Title: {videoTitle}</p>
<p>Upload Date: {date}</p>
<p>Length: {time}</p>

<MuxPlayer 
  playbackId={playbackId}
  metadata={{video_title: videoTitle}}
/>
```

Lihat semua properti aset di [dokumentasi Mux Asset API](https://www.mux.com/docs/api-reference/video/assets?utm_campaign=21819274-Astro&utm_source=astro-docs).


## Mux Uploader

[Mux Uploader](https://www.mux.com/docs/guides/mux-uploader?utm_campaign=21819274-Astro&utm_source=astro-docs) adalah UI unggah video yang lengkap dan dapat dikustomisasi untuk situs Astro Anda. Komponen Astro native `<MuxUpload />` memungkinkan Anda membangun fungsionalitas unggah video di aplikasi web Anda.

Mux Uploader mendukung pemilihan berkas manual dan drag‑and‑drop untuk unggahan, opsi jeda dan lanjutkan (pause/resume) unggahan, dan lainnya.

### Instalasi

Pasang versi Astro dari Mux Uploader menggunakan manajer paket pilihan Anda:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm install @mux/mux-uploader-astro
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm add @mux/mux-uploader-astro
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn add @mux/mux-uploader-astro
  ```
  </Fragment>
</PackageManagerTabs>

### Upload a video to Mux

Sebelum mengunggah video, pastikan Anda telah mengonfigurasi [Mux API access tokens](#mux-environment-api-access). Setelah siap, Anda dapat menggunakan fungsi `create()` dari Mux Node SDK untuk memulai unggahan video baru:

```astro
---
import Layout from '../../layouts/Layout.astro';
import Mux from "@mux/mux-node";
import { MuxUploader } from "@mux/mux-uploader-astro";

const mux = new Mux({
  tokenId: import.meta.env.MUX_TOKEN_ID,
  tokenSecret: import.meta.env.MUX_TOKEN_SECRET
});

const upload = await mux.video.uploads.create({
  new_asset_settings: {
    playback_policy: ['public'],
    video_quality: 'basic'
  },
  cors_origin: '*',
});
---
<Layout title="Upload a video to Mux">
  <MuxUploader endpoint={upload.url} />
</Layout>
```

### Sesuaikan uploader

Anda dapat menyesuaikan fungsi dan tampilan `<MuxUploader />` dengan atribut komponen tambahan. Selain menata elemen, ini memungkinkan Anda mengontrol opsi seperti kemampuan menjeda unduhan atau menetapkan ukuran berkas maksimum.

```astro
---
import { MuxUploader } from '@mux/mux-uploader-astro';
---

<MuxUploader
  endpoint="https://my-authenticated-url/storage?your-url-params"
  pausable
  maxFileSize={1000000000}
  chunkSize={8192}
  style={{
    '--progress-bar-fill-color': '#7e22ce',
    '--button-background-color': '#f0f0f0',
  }}
/>
```

Lihat [panduan kustomisasi Mux Uploader](https://www.mux.com/docs/guides/uploader-web-customize-look-and-feel?utm_campaign=21819274-Astro&utm_source=astro-docs) untuk opsi lainnya.

### Penanganan event untuk unggahan

Mux Uploader menyediakan UI kaya fitur yang dinamis dan berubah berdasarkan status unggahan media Anda. Perilaku uploader merespons event yang dipicu pengguna (mis. memilih berkas, mencoba lagi setelah error) dan event berbasis status (mis. unggahan berlangsung, unggahan selesai sukses).

Anda dapat mendengar event ini dan menanganinya di komponen Astro Anda dengan [script sisi klien](/id/guides/client-side-scripts/). Tipe `MuxUploaderElement` juga tersedia.

```astro
---
import { MuxUploader } from '@mux/mux-uploader-astro';
---

<MuxUploader
  id="my-uploader"
  endpoint="https://my-authenticated-url/storage?your-url-params"
  pausable
/>

<script>
  import type { MuxUploaderElement } from '@mux/mux-uploader-astro';
  
  const uploader = document.getElementById('my-uploader') as MuxUploaderElement;
  
  uploader.addEventListener('uploadstart', (event) => {
    console.log('Upload started!', event.detail);
  });
  
  uploader.addEventListener('success', (event) => {
    console.log('Upload successful!', event.detail);
  });
  
  uploader.addEventListener('uploaderror', (event) => {
    console.error('Upload error!', event.detail);
  });
  
  uploader.addEventListener('progress', (event) => {
    console.log('Upload progress: ', event.detail);
  });
</script>
```

## Sumber Resmi

Untuk referensi API dan webhook lengkap, panduan penggunaan, dan informasi tentang topik tambahan seperti integrasi dengan CMS, membangun alur kerja video kustom, dan lainnya, lihat:

- [Dokumentasi resmi Mux untuk Astro](https://www.mux.com/docs/integrations/astro?utm_campaign=21819274-Astro&utm_source=astro-docs)
- [Referensi API `@mux/mux-player-astro`](https://github.com/muxinc/elements/blob/main/packages/mux-player-astro/README.md)
- [Referensi API `@mux/mux-uploader-astro`](https://github.com/muxinc/elements/blob/main/packages/mux-uploader-astro/REFERENCE.md)
- [Membangun video uploader dengan Mux dan Astro (YouTube)](https://www.youtube.com/watch?v=aaL1k5FsWfE)
- [Contoh kode Astro uploader dan player (GitHub)](https://github.com/muxinc/examples/tree/main/astro-uploader-and-player) 
