---
type: tutorial
title: Crea la tua prima isola Astro
description: |-
  Tutorial: Crea il tuo primo blog Astro —
  Usa un componente Preact per salutare i tuoi visitatori con un messaggio selezionato casualmente
i18nReady: true
---
import Box from '~/components/tutorial/Box.astro';
import Checklist from '~/components/Checklist.astro';
import Spoiler from '~/components/Spoiler.astro';
import MultipleChoice from '~/components/tutorial/MultipleChoice.astro';
import Option from '~/components/tutorial/Option.astro';
import PreCheck from '~/components/tutorial/PreCheck.astro';
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';
import { Steps } from '@astrojs/starlight/components';

Usa un componente Preact per salutare i tuoi visitatori con un messaggio di benvenuto selezionato casualmente!

<PreCheck>
  - Aggiungi Preact al tuo progetto Astro
  - Includi isole Astro (componenti `.jsx` Preact) nella tua home page
  - Usa le direttive `client:` per rendere le isole interattive
</PreCheck>

## Aggiungi Preact al tuo progetto Astro

<Steps>
1. Se il server di sviluppo è attivo, interrompilo per avere accesso al terminale (scorciatoia da tastiera: <kbd>Ctrl + C</kbd>).

2. Aggiungi la possibilità di usare i componenti Preact nel tuo progetto Astro con un singolo comando:

    <PackageManagerTabs>
      <Fragment slot="npm">
        ```sh
        npx astro add preact
        ```
      </Fragment>
      <Fragment slot="pnpm">
        ```sh
        pnpm astro add preact
        ```
      </Fragment>
      <Fragment slot="yarn">
        ```sh
        yarn astro add preact
        ```
      </Fragment>
    </PackageManagerTabs>

3. Segui le istruzioni nella riga di comando per confermare l'aggiunta di Preact al tuo progetto.
</Steps>

## Includi un banner di saluto Preact

Questo componente prenderà un array di messaggi di saluto come prop e selezionerà casualmente uno di essi da mostrare come messaggio di benvenuto. L'utente può fare clic su un pulsante per ottenere un nuovo messaggio casuale.

<Steps>
1. Crea un nuovo file in `src/components/` chiamato `Greeting.jsx`

    Nota l'estensione `.jsx` del file. Questo file sarà scritto in Preact, non in Astro.

2. Aggiungi il seguente codice a `Greeting.jsx`:

    ```jsx title="src/components/Greeting.jsx"
    import { useState } from 'preact/hooks';

    export default function Greeting({messages}) {

      const randomMessage = () => messages[(Math.floor(Math.random() * messages.length))];
      
      const [greeting, setGreeting] = useState(messages[0]);

      return (
        <div> 
          <h3>{greeting}! Grazie per aver visitato!</h3>
          <button onClick={() => setGreeting(randomMessage())}>
            Nuovo saluto
          </button>
        </div>
      );
    }
    ```

3. Importa e usa questo componente sulla tua pagina principale `index.astro`.

    ```astro title="src/pages/index.astro" ins={3,8}
    ---
    import BaseLayout from '../layouts/BaseLayout.astro';
    import Greeting from '../components/Greeting';
    const pageTitle = "Home Page";
    ---
    <BaseLayout pageTitle={pageTitle}>
      <h2>Il mio fantastico sottotitolo del blog</h2>
      <Greeting messages={["Ciao", "Salve", "Ehi", "Ciao a tutti"]} />
    </BaseLayout>
    ```

    Controlla l'anteprima nel browser: dovresti vedere un saluto casuale, ma il pulsante non funzionerà!

4. Aggiungi un secondo componente `<Greeting />` con la direttiva `client:load`.

    ```astro title="src/pages/index.astro" ins={9} "client:load"
    ---
    import BaseLayout from '../layouts/BaseLayout.astro';
    import Greeting from '../components/Greeting';
    const pageTitle = "Home Page";
    ---
    <BaseLayout pageTitle={pageTitle}>
      <h2>Il mio fantastico sottotitolo del blog</h2>
      <Greeting messages={["Ciao", "Salve", "Ehi", "Ciao a tutti"]} />
      <Greeting client:load messages={["Hej", "Hallo", "Hola", "Habari"]} />
    </BaseLayout>
    ```

5. Rivedi la tua pagina e confronta i due componenti. Il secondo pulsante funziona perché la direttiva `client:load` dice ad Astro di inviare e rieseguire il suo JavaScript sul _client_ quando la pagina si _carica_, rendendo il componente interattivo. Questo è chiamato un componente **idratato**.

6. Una volta che la differenza è chiara, rimuovi il componente Greeting non idratato.

    ```astro title="src/pages/index.astro" del={8} "client:load"
    ---
    import BaseLayout from '../layouts/BaseLayout.astro';
    import Greeting from '../components/Greeting';
    const pageTitle = "Home Page";
    ---
    <BaseLayout pageTitle={pageTitle}>
      <h2>Il mio fantastico sottotitolo del blog</h2>
      <Greeting messages={["Ciao", "Salve", "Ehi", "Ciao a tutti"]} />
      <Greeting client:load messages={["Hej", "Hallo", "Hola", "Habari"]} />
    </BaseLayout>
    ```
</Steps>

<Box icon="question-mark">

### Analizza il pattern

Esistono altre direttive `client:` da esplorare. Ognuna invia il JavaScript al client in momenti diversi. Ad esempio, `client:visible` invierà il JavaScript del componente solo quando sarà visibile sulla pagina.

Considera un componente Astro con il seguente codice:

```astro
---
import BaseLayout from '../layouts/BaseLayout.astro';
import AstroBanner from '../components/AstroBanner.astro';
import PreactBanner from '../components/PreactBanner';
import SvelteCounter from '../components/SvelteCounter.svelte';
---
<BaseLayout>
  <AstroBanner />
  <PreactBanner />
  <PreactBanner client:load />
  <SvelteCounter />
  <SvelteCounter client:visible />
</BaseLayout>
```

1. Quali dei cinque componenti saranno isole **idratate**, inviando JavaScript al client?

    <p>
      <Spoiler>`<PreactBanner client:load />` e `<SvelteCounter client:visible />` saranno isole idratate.</Spoiler>
    </p>

2. In che modo i due componenti `<PreactBanner />` saranno uguali? In che modo saranno diversi?

    <p>
      <Spoiler>**Uguali**: Entrambi mostrano gli stessi elementi HTML e sembrano uguali inizialmente. **Diversi**: Il componente con la direttiva `client:load` verrà rieseguito dopo che la pagina è stata caricata, e qualsiasi elemento interattivo che contiene funzionerà.</Spoiler>
    </p>

3. Supponiamo che il componente `SvelteCounter` mostri un numero e abbia un pulsante per aumentarlo. Se non potessi vedere il codice del tuo sito web, ma solo la pagina pubblicata dal vivo, come capiresti quale dei due componenti `<SvelteCounter />` ha utilizzato `client:visible`?

    <p>
      <Spoiler>Prova a fare clic sul pulsante e vedi quale dei due è interattivo. Se risponde al tuo input, deve aver avuto una direttiva `client:`.</Spoiler>
    </p>
</Box>

<Box icon="question-mark">

### Metti alla prova le tue conoscenze

Per ciascuno dei seguenti componenti, identifica cosa verrà inviato al browser:

1. `<ReactCounter client:load />`

    <MultipleChoice>
      <Option>
        Solo HTML e CSS
      </Option>
      <Option isCorrect>
        HTML, CSS e JavaScript
      </Option>
    </MultipleChoice>

2. `<SvelteCard />`

    <MultipleChoice>
      <Option isCorrect>
        Solo HTML e CSS
      </Option>
      <Option>
        HTML, CSS e JavaScript
      </Option>
    </MultipleChoice>
</Box>

<Box icon="check-list">

## Lista di controllo

<Checklist>
- [ ] Posso installare un'integrazione Astro.
- [ ] Posso scrivere componenti di framework UI nel loro linguaggio specifico.
- [ ] Posso usare una direttiva `client:` per l'idratazione su un componente di framework UI.
</Checklist>
</Box>

### Risorse

- [Guida alle integrazioni di Astro](/en/guides/integrations-guide/)

- [Usare i componenti del framework in Astro](/en/guides/framework-components/#using-framework-components)

- [Riferimento delle direttive `client` di Astro](/en/reference/directives-reference/#client-directives)
