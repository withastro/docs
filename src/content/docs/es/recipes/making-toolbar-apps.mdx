---
title: Crear aplicaciones de barra de herramientas para desarrollo
description: Aprende como crear una aplicaci贸n de barra de herramientas para desarrollo para tu sitio
type: recipe
i18nReady: true
---

import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'
import { FileTree } from '@astrojs/starlight/components';
import { Steps } from '@astrojs/starlight/components';
import ReadMore from '~/components/ReadMore.astro';

Astro incluye una [barra de herramientas de desarrollo](/es/guides/dev-toolbar/) que puedes usar para inspeccionar tu sitio, comprobar la accesibilidad y problemas de rendimiento, y m谩s. Esta barra puede ser extendida con aplicaciones personalizadas.

## Construir una aplicaci贸n de barra de herramientas para desarrollo motivacional

En esta receta, aprender谩s como crear una barra de herramienta de desarrollo que te ayuda a estar motivado mientras est谩s trabajando en tu sitio. Esta aplicaci贸n mostrar谩 un mensaje motivacional cada vez que lo actives.

:::tip
驴Quieres comenzar r谩pidamente? Comienza tu aplicaci贸n creando un proyecto nuevo con Astro usando la plantilla `toolbar-app`.

<PackageManagerTabs>
  <Fragment slot="npm">
    ```shell
    npm create astro@latest -- --template toolbar-app
    ```
  </Fragment>
  <Fragment slot="pnpm">
    ```shell
    pnpm create astro -- --template toolbar-app
    ```
  </Fragment>
  <Fragment slot="yarn">
    ```shell
    yarn create astro -- --template toolbar-app
    ```
  </Fragment>
</PackageManagerTabs>

O, sigue leyendo para aprender como construir la aplicaci贸n desde cero.
:::

### Creando la integraci贸n con Astro

Las aplicaciones de barra de herramientas para desarrollo s贸lo pueden ser agregadas por [las integraciones de Astro](/es/guides/integrations-guide/) usando [el hook `astro:config:setup`](/es/reference/integrations-reference/#astroconfigsetup). Necesitar谩s crear la aplicaci贸n de barra de herramientas y la integraci贸n que agregar谩 la barra de herramientas a tu proyecto de Astro existente.

<Steps>

1. En la ra铆z de tu proyecto de Astro, crea un nuevo directorio llamado `my-toolbar-app/` para tu aplicaci贸n y archivos de integraci贸n. Crea dos nuevos archivos en este directorio: `app.ts` y `my-integration.ts`. 

    <FileTree>
    - **my-toolbar-app/**
      - **app.ts**
      - **my-integration.ts**
    - src/
      - pages/
      - ...
    - astro.config.mjs
    - package.json
    - tsconfig.json
    </FileTree>


2. En `my-integration.ts`, agrega el siguiente c贸digo para proveer el nombre de tu integraci贸n y la [funci贸n `addDevToolbarApp()`](/es/reference/dev-toolbar-app-reference/#agregando-apps) que a帽adir谩 tu aplicaci贸n de barra de herramientas con el hook `astro:config:setup`:

    ```ts title="my-toolbar-app/my-integration.ts" "'astro:config:setup'" "hooks" "addDevToolbarApp"
    import { fileURLToPath } from 'node:url';
    import type { AstroIntegration } from 'astro';

    export default {
      name: 'my-astro-integration',
      hooks: {
        'astro:config:setup': ({ addDevToolbarApp }) => {  
          addDevToolbarApp({
            id: "my-toolbar-app",
            name: "My Toolbar App",
            icon: "",
            entrypoint: fileURLToPath(new URL('./app.ts', import.meta.url))
          });
        },
      },
    } satisfies AstroIntegration;
    ```

    :::note[Usando rutas relativas en el entrypoint]
    El `entrypoint` es la ruta al archivo de tu aplicaci贸n de barra de herramientas, **relativo a la ra铆z de tu proyecto de Astro existente**, no al directorio de integraci贸n (`my-toolbar-app/`) por s铆 mismo.

3. Para usar esta integraci贸n en tu proyecto, agr茅gala al array `integrations` en tu archivo `astro.config.mjs`.

    ```js title="astro.config.mjs" ins={2,5}
    import { defineConfig } from 'astro/config';
    import myIntegration from './my-toolbar-app/my-integration.ts';

    export default defineConfig({
      integrations: [myIntegration],
    })
    ```
    
4. Si a煤n el servidor de desarrollo no est谩 corriendo, in铆cialo. Si la integraci贸n ha sido exitosamente a帽adida a tu proyecto, deber铆as ver una nueva aplicaci贸n "undefined" en la barra de herramientas de desarrollo.

     Pero, tambi茅n ver谩s un mensaje de error de que tu aplicaci贸n de barra de herramientas de desarrollo ha fallado al cargar. Esto es porque a煤n no has creado la aplicaci贸n. Lo haremos en la siguiente secci贸n.

</Steps>

<ReadMore> Mira la [documentaci贸n de la API de integraci贸n de Astro](/es/reference/integrations-reference/) para m谩s informaci贸n sobre como construir integraciones en Astro. </ReadMore>

### Creando la aplicaci贸n

Las aplicaciones de barra de herramientas para desarrollo son definidas usando la funci贸n `defineToolbarApp()` del m贸dulo `astro/toolbar`. Esta funci贸n toma un objeto con una funci贸n `init()` que ser谩 llamada cuando la aplicaci贸n de barra de herramientas para desarrollo es cargada.

Esta funci贸n `init()` contiene la l贸gica de tu aplicaci贸n para renderizar los elementos en la pantalla, enviar y recibir eventos del lado del cliente de la barra de desarrollo, y comunicarse con el servidor.

```ts title="app.ts"
import { defineToolbarApp } from "astro/toolbar";

export default defineToolbarApp({
    init(canvas, app, server) {
      // ...
    },
});
```

Para mostrar mensajes motivacionales en la pantalla, utilizar谩s la propiedad `canvas` para acceder a un [ShadowRoot](https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot) est谩ndar. Los elementos pueden ser creados y agregados al ShadowRoot utilizando las API est谩ndar del DOM.

<Steps>

1. Copia el siguiente c贸digo en `my-toolbar-app/app.ts`. Este c贸digo provee una lista de mensajes motivacionales, y la l贸gica para crear un nuevo elemento `<h1>` con un mensaje aleatorio.

    ```ts title="my-toolbar-app/app.ts" {3-8, 12-15}
    import { defineToolbarApp } from "astro/toolbar";

    const motivationalMessages = [
      "隆Lo est谩s haciendo genial!",
      "隆Sigue trabajando as铆!",
      "隆Eres incre铆ble!",
      "隆Eres una estrella!",
    ];

    export default defineToolbarApp({
        init(canvas) {
          const h1 = document.createElement('h1');
          h1.textContent = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];

          canvas.append(h1);
        },
    });
    ```

2. Inicia el servidor si a煤n no est谩 corriendo y activa la aplicaci贸n en la barra de herramientas de desarrollo. Si tu aplicaci贸n funciona correctamente, ver谩s un mensaje motivacional en la parte superior izquierda de tu pantalla. (Y, 隆tienen raz贸n!)

    Sin embargo, este mensaje no cambiar谩 cuando la aplicaci贸n se activa y desactiva consecutivamente, puesto que la funci贸n `init()` es llamada solamente cuando la aplicaci贸n es cargada.

3. Para agregar interactividad desde el lado del cliente a tu aplicaci贸n, agrega el argumento `app` y utiliza `onAppToggled()` para seleccionar un nuevo mensaje aleatorio cada vez que tu aplicaci贸n de barra de herramientas es activada.

    ```ts title="app.ts" ins=", app" ins={17-21}
    import { defineToolbarApp } from "astro/toolbar";

    const motivationalMessages = [
      "隆Lo est谩s haciendo genial!",
      "隆Sigue trabajando as铆!",
      "隆Eres incre铆ble!",
      "隆Eres una estrella!",
    ];

    export default defineToolbarApp({
        init(canvas, app) {
          const h1 = document.createElement('h1');
          h1.textContent = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];
          
          canvas.append(h1);

          // Mostrar un mensaje aleatorio cuando la aplicaci贸n es activada
          app.onToggled(({ state }) => {
            const newMessage = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];
            h1.textContent = newMessage;
          });
        },
    });
    ```

4. En la vista previa de tu navegador, activa y desactiva tu aplicaci贸n consecutivamente algunas veces. Con este cambio, un nuevo mensaje se seleccionar谩 cada vez que tu aplicaci贸n sea activada, d谩ndote una fuente infinita de motivaci贸n.

</Steps>

<ReadMore> Mira la [documentaci贸n de la API de aplicaciones de barra de herramientas para desarrollo](/es/reference/dev-toolbar-app-reference/) para m谩s informaci贸n sobre como construir aplicaciones de barra de herramientas para desarrollo. </ReadMore>

## Construyendo apps con un framework UI

Los frameworks UI como React, Vue, o Svelte pueden tambi茅n ser usados para crear aplicaciones de barra de herramientas para desarrollo. Estos frameworks proveen una manera m谩s declarativa para crear UIs y hacer que tu c贸digo sea m谩s mantenible y f谩cil de leer.

La misma aplicaci贸n de barra de herramientas para desarrollo motivacional construida en tu proyecto de Astro en esta p谩gina con JavaScript, puede ser construida con un framework UI (e.j Preact) en su lugar. Dependiendo en el framework de tu elecci贸n, puedes o no puedes requerir un paso de construcci贸n adicional.

:::note
Como tu hayas escogido crear tu aplicaci贸n de barra de herramientas para desarrollo, usando JavaScript o un framework UI, necesitar谩s [crear la integraci贸n](#creando-la-integraci贸n-con-astro) que agrega tu aplicaci贸n a la barra de herramientas de desarrollo.
:::

### Sin un paso de construcci贸n

Si tu framework lo soporta, puedes crear una aplicaci贸n de barra de herramientas para desarrollo sin un paso de build adicional. Por ejemplo, puedes usar la funci贸n de Preact `h` para crear elementos y renderizarlos directamente al ShadowRoot:

```ts title="app.ts"
import { defineToolbarApp } from "astro/toolbar";
import { render, h } from "preact";

const motivationalMessages = [
  "隆Lo est谩s haciendo genial!",
  "隆Sigue trabajando as铆!",
  "隆Eres incre铆ble!",
  "隆Eres una estrella!",
];

export default defineToolbarApp({
    init(canvas) {
      const message = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];
      render(h('h1', null, message), canvas);
    },
});
```

Alternativamente, el [paquete `htm`](https://github.com/developit/htm) es una buena elecci贸n para crear una aplicaci贸n de barra de herramientas para desarrollo sin un paso de build adicional, ofreciendo una integraci贸n nativa para React y Preact, adem谩s del soporte para otros frameworks:

```ts title="app.ts" ins={3, 15}
import { defineToolbarApp } from "astro/toolbar";
import { render } from "preact";
import { html } from 'htm/preact';

const motivationalMessages = [
  "隆Lo est谩s haciendo genial!",
  "隆Sigue trabajando as铆!",
  "隆Eres incre铆ble!",
  "隆Eres una estrella!",
];

export default defineToolbarApp({
    init(canvas) {
      const message = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];
      render(html`<h1>${message}</h1>`, canvas);
    },
});
```

En ambos casos, puedes iniciar el proyecto y ver el mensaje motivacional en la esquina superior izquierda de tu pantalla cuando la aplicaci贸n es activada.

### Con un paso de construcci贸n

Astro no preprocesa c贸digo JSX en las aplicaciones de barra de herramientas para desarrollo, por lo tanto un paso de construcci贸n adicional es requerido para usar componentes JSX en tu aplicaci贸n de barra de herramientas para desarrollo.

Los siguientes pasos usar谩n TypeScript para hacerlo, pero cualquier otra herramienta para compilar c贸digo JSX puede ser usada (e.j Babel, Rollup, ESBuild).

<Steps>
1. Instala TypeScript en tu proyecto:

    <PackageManagerTabs>
      <Fragment slot="npm">
        ```shell
        npm install --save-dev typescript
        ```
      </Fragment>
      <Fragment slot="pnpm">
        ```shell
        pnpm install --save-dev typescript
        ```
      </Fragment>
      <Fragment slot="yarn">
        ```shell
        yarn add --dev typescript
        ```
      </Fragment>
    </PackageManagerTabs>


2. Crea un archivo `tsconfig.json` en la ra铆z de tu directorio de aplicaci贸n de barra de herramientas con las configuraciones apropiadas para hacer un build y para el framework que est茅s usando ([React](https://react-typescript-cheatsheet.netlify.app/docs/basic/setup), [Preact](https://preactjs.com/guide/v10/typescript), [Solid](https://www.solidjs.com/guides/typescript)). Por ejemplo, para Preact:

    ```json title="my-toolbar-app/tsconfig.json"
    {
      "compilerOptions": {
        "skipLibCheck": true,
        "module": "NodeNext",
        "jsx": "react-jsx",
        "jsxImportSource": "preact",
      }
    }
    ```
3. Ajusta la propiedad `entrypoint` en tu integraci贸n para apuntar al archivo compilado, recordando que ese archivo es relativo a la ra铆z de tu proyecto de Astro.

    ```ts title="my-integration.ts" ins="app.js"
    addDevToolbarApp({
      id: "my-toolbar-app",
      name: "Mi aplicaci贸n de barra de herramientas",
      icon: "",
      entrypoint: join(__dirname, "./app.js"),
    });
    ```

4. Ejecuta `tsc` para hacer construir tu aplicaci贸n de barra de herramientas, o `tsc --watch` para autom谩ticamente hacer una reconstrucci贸n de tu aplicaci贸n cuando hagas cambios.

      Con estos cambios, puedes renombrar tu archivo `app.ts` a `app.tsx` (o `.jsx`) y usar la s铆ntaxis JSX para crear tu aplicaci贸n de barra de herramientas para desarrollo.

      ```tsx title="app.tsx"
      import { defineToolbarApp } from "astro/toolbar";
      import { render } from "preact";

      const motivationalMessages = [
        "隆Lo est谩s haciendo genial!",
        "隆Sigue trabajando as铆!",
        "隆Eres incre铆ble!",
        "隆Eres una estrella!",
      ];

      export default defineToolbarApp({
          init(canvas) {
            const message = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];
            render(<h1>{message}</h1>, canvas);
          },
      });
      ```
</Steps>

Ya deber铆as tener todas las herramientas que necesitas para crear una aplicaci贸n de barra de herramientas para desarrollo usando el framework UI de tu elecci贸n.