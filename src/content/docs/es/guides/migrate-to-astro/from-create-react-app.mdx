---
title: Migrando desde Create React App (CRA)
description: Consejos para migrar un proyecto existente de Create React App a Astro
type: migration
stub: true
framework: Create React App
i18nReady: true
---
import AstroJSXTabs from '~/components/tabs/AstroJSXTabs.astro'
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'
import FileTree from '~/components/FileTree.astro'

La [integraci贸n de React](/es/guides/integrations-guide/react/) en Astro proporciona soporte para [utilizar componentes de React dentro de los componentes de Astro](/es/core-concepts/framework-components/), 隆incluidas aplicaciones completas de React como Create React App (CRA)!

```astro title="src/pages/index.astro"
---
// Importa tu componente ra铆z App
import App from '../cra-project/App.jsx';
---
<!-- Utiliza una directiva del cliente para cargar tu aplicaci贸n -->
<App client:load />
```

Muchas aplicaciones "simplemente funcionar谩n" como aplicaciones completas de React cuando las agregues directamente a tu proyecto de Astro con la integraci贸n de React instalada. Esta es una excelente manera de poner en marcha tu proyecto de inmediato y mantener tu aplicaci贸n funcional mientras migras a Astro.

Con el tiempo, puedes convertir tu estructura pieza por pieza en una combinaci贸n de componentes `.astro` y `.jsx`. 隆Probablemente descubrir谩s que necesitas menos componentes de React de lo que crees!

Aqu铆 tienes algunos conceptos clave y estrategias de migraci贸n para ayudarte a comenzar. 隆Utiliza el resto de nuestra documentaci贸n y 煤nete a nuestra [comunidad de Discord](https://astro.build/chat) para continuar avanzando!

## Principales similitudes entre CRA y Astro

- La [sintaxis de los archivos `.astro` es similar a JSX](/es/core-concepts/astro-syntax/#diferencias-entre-astro-y-jsx). Escribir en Astro deber铆a sentirse familiar.

- Astro utiliza enrutamiento basado en archivos y [permite que las p谩ginas con nombres especiales creen rutas din谩micas](/es/core-concepts/routing/#rutas-din谩micas).

- Astro est谩 [basado en componentes](/es/core-concepts/astro-components/) y tu estructura de marcado ser谩 similar antes y despu茅s de tu migraci贸n.

- Astro tiene [integraciones oficiales para React, Preact y Solid](/es/guides/integrations-guide/react/), lo que te permite utilizar tus componentes JSX existentes. Ten en cuenta que en Astro, estos archivos **deben** tener una extensi贸n `.jsx` o `.tsx`.

- Astro tiene soporte para [instalar paquetes de NPM](/es/guides/imports/#paquetes-npm), incluidas bibliotecas de React. Muchas de tus dependencias existentes funcionar谩n en Astro.

## Principales diferencias entre CRA y Astro

Cuando reconstruyas tu sitio de CRA en Astro, notar谩s algunas diferencias importantes:

- CRA es una aplicaci贸n de una sola p谩gina que utiliza `index.js` como la ra铆z de tu proyecto. Astro es un sitio de m煤ltiples p谩ginas, y `index.astro` es tu p谩gina de inicio.

- Los [componentes `.astro`](/es/core-concepts/astro-components/) no se escriben como funciones exportadas que devuelven plantillas de p谩gina. En su lugar, dividir谩s tu c贸digo en una "valla de c贸digo" para tu JavaScript y un cuerpo exclusivo para el HTML que generas.

- [Orientado al contenido](/es/concepts/why-astro/#orientado-al-contenido): Astro fue dise帽ado para resaltar tu contenido y permitirte optar por la interactividad solo cuando sea necesario. Una aplicaci贸n existente de CRA puede estar dise帽ada para una alta interactividad del lado del cliente y puede requerir t茅cnicas avanzadas de Astro para incluir elementos que son m谩s desafiantes de replicar utilizando componentes `.astro`, como paneles de control.

## Agrega tu CRA a Astro

Tu aplicaci贸n existente puede ser renderizada directamente dentro de un nuevo proyecto de Astro, muchas veces sin cambios en el c贸digo de tu aplicaci贸n.

### Crear un nuevo proyecto de Astro

Utiliza el comando `create astro` en tu gestor de paquetes para lanzar la CLI de Astro y seleccionar un nuevo proyecto de Astro "empty".

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm create astro@latest
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm create astro@latest
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn create astro@latest
  ```
  </Fragment>
</PackageManagerTabs>

### Agregar integraciones y dependencias

Agrega la integraci贸n de React utilizando el comando `astro add` para tu gestor de paquetes. Si tu aplicaci贸n utiliza Tailwind o MDX, puedes agregar m煤ltiples integraciones de Astro usando el mismo comando.

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npx astro add react
  npx astro add react tailwind mdx
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm astro add react
  pnpm astro add react tailwind mdx
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn astro add react
  yarn astro add react tailwind mdx
  ```
  </Fragment>
</PackageManagerTabs>

Si tu CRA requiere cualquier dependencia (p. ej. paquetes de NPM), debes instalarlos individualmente utilizando la l铆nea de comandos o a帽adi茅ndolos manualmente al archivo `package.json` de tu nuevo proyecto de Astro, y luego ejecutando el comando de instalaci贸n. Ten en cuenta que muchas, pero no todas, las dependencias de React funcionar谩n en Astro.

### Agrega los archivos de tu aplicaci贸n existente

Copia los archivos y carpetas existentes de tu proyecto actual de Create React App (CRA) (p. ej. `components`, `hooks`, `styles`, etc.) en una nueva carpeta dentro de `src/`, manteniendo su estructura de archivos para que tu aplicaci贸n contin煤e funcionando. Ten en cuenta que todas las extensiones de archivo `.js` sean renombradas a `.jsx` o `.tsx`.

No incluyas archivos de configuraci贸n. Utilizar谩s los archivos `astro.config.mjs`, `package.json` y `tsconfig.json` propios de Astro.

Mueve el contenido de la carpeta `public/` de tu aplicaci贸n (p. ej. assets est谩ticos) dentro de la carpeta `public/` de Astro.

<FileTree>
- public/
  - logo.png
  - favicon.ico
  - ...
- src/
  - cra-project/
    - App.jsx
    - ...
  - pages/
    - index.astro
- astro.config.mjs
- package.json
- tsconfig.json
</FileTree>

### Renderizar tu app

Importa el componente ra铆z de tu aplicaci贸n en la secci贸n de frontmatter de `index.astro` y luego renderiza el componente `<App />` en la plantilla de tu p谩gina.

```astro title="src/pages/index.astro"
---
import App from '../cra-project/App.jsx';
---
<App client:load />
```

:::note[Directivas del cliente]
Tu aplicaci贸n necesita una [directiva del cliente](/es/reference/directives-reference/#directivas-del-cliente) para la interactividad. Astro renderizar谩 tu aplicaci贸n React como HTML est谩tico hasta que optes por utilizar JavaScript en el lado del cliente.

Utiliza `client:load` para asegurarte de que tu aplicaci贸n se cargue inmediatamente desde el servidor, o `client:only="react"` para omitir el renderizado en el lado del servidor y ejecutar completamente tu aplicaci贸n solo en el lado del cliente.
:::

Consulta nuestra gu铆a para [configurar Astro](/es/guides/configuring-astro/) para obtener m谩s detalles y opciones disponibles.

## Convierte tu CRA a Astro

Despu茅s de [agregar tu aplicaci贸n existente a Astro](#agrega-tu-cra-a-astro), 隆probablemente querr谩s convertir la propia aplicaci贸n a Astro!

Replicar谩s un dise帽o similar basado en componentes [utilizando componentes de plantillas HTML de Astro para tu estructura b谩sica](/es/core-concepts/astro-components/), mientras importas e incluyes componentes individuales de React (隆que pueden ser aplicaciones completas en s铆 mismas!) para islas de interactividad.

Cada migraci贸n ser谩 diferente y se puede realizar de manera incremental sin interrumpir tu aplicaci贸n en funcionamiento. Convierte piezas individuales a tu propio ritmo, de modo que cada vez m谩s de tu aplicaci贸n est茅 impulsada por componentes de Astro con el tiempo.

A medida que conviertas tu aplicaci贸n de React, decidir谩s qu茅 componentes de React r[eescribir谩s como componentes de Astro](#convirtiendo-archivos-jsx-a-archivos-astro). La 煤nica restricci贸n es que los componentes de Astro pueden importar componentes de React, pero los componentes de React solo pueden importar otros componentes de React.

```astro title="src/pages/static-components.astro" ins={2,7}
---
import MiComponenteDeReact from '../components/MiComponenteDeReact.jsx';
---
<html>
  <body>
    <h1>隆Utiliza componentes React directamente en Astro!</h1>
    <MiComponenteDeReact />
  </body>
</html>
```

En lugar de importar componentes de Astro dentro de componentes de React, puedes anidar componentes de React dentro de un 煤nico componente de Astro:

```astro title="src/pages/nested-components.astro" {2,3,5,8,10}
---
import MiSidebarDeReact from '../components/MiSidebarDeReact.jsx';
import MiBotonDeReact from '../components/MiBotonDeReact.jsx';
---
<MiSidebarDeReact>
  <p>Aqu铆 hay una sidebar con algo de texto y un bot贸n.</p>
  <div slot="actions">
    <MiBotonDeReact client:idle />
  </div>
</MiSidebarDeReact>
```

Puede ser 煤til que aprendas acerca de [las islas de Astro](/es/concepts/islands/) y [los componentes de Astro](/es/core-concepts/astro-components/) antes de reestructurar tu proyecto CRA como un proyecto Astro.

### Compara: JSX vs Astro

Compare el siguiente componente CRA y el componente Astro correspondiente:

<AstroJSXTabs>
  <Fragment slot="jsx">
    ```jsx title="StarCount.jsx"
    import React, { useState, useEffect } from 'react';
import Header from './Header';
import Footer from './Footer';

const Component = () => {
    const [stars, setStars] = useState(0);
    const [message, setMessage] = useState('');

    useEffect(() => {
        const fetchData = async () => {
            const res = await fetch('https://api.github.com/repos/withastro/astro');
            const json = await res.json();

            setStars(json.stargazers_count || 0);
            setMessage(json.message);
        };

        fetchData();
    }, []);

    return (
        <>
            <Header />
            <p style={{
                backgroundColor: `#f4f4f4`,
                padding: `1em 1.5em`,
                textAlign: `center`,
                marginBottom: `1em`
            }}>Astro tiene {stars} </p>
            <Footer />
        </>
    )
};

export default Component;
    ```
  </Fragment>
  <Fragment slot="astro">
    ```astro title="StarCount.astro"
    ---
    import Header from './Header.astro';
    import Footer from './Footer.astro';
    import './layout.css';
    const res = await fetch('https://api.github.com/repos/withastro/astro')
    const json = await res.json();
    const message = json.message;
    const stars = json.stargazers_count || 0;
    ---
    <Header />
    <p class="banner">Astro tiene {stars} </p>
    <Footer />
    <style>
      .banner {
        background-color: #f4f4f4; 
        padding: 1em 1.5em;
        text-align: center;
        margin-bottom: 1em;
      }
    <style>
    ```
  </Fragment>
</AstroJSXTabs>


### Convirtiendo archivos JSX a archivos `.astro`

Aqu铆 tienes algunos consejos para convertir un componente de CRA `.js` a un componente `.astro`:

1. Utiliza el JSX devuelto por la funci贸n del componente CRA existente como base para tu plantilla HTML.

2. Convierte cualquier [sintaxis CRA o JSX a Astro](#referencia-convertir-sintaxis-de-cra-a-astro) o a los est谩ndares web de HTML. Esto incluye `{children}` y `className`, por ejemplo.

3. Mueve cualquier JavaScript necesario, incluyendo declaraciones de importaci贸n, dentro de una ["valla de c贸digo" (`---`)](/es/core-concepts/astro-components/#script-de-un-componente). Nota: El JavaScript para [renderizar contenido condicional](/es/core-concepts/astro-syntax/#html-dinamico) a menudo se escribe directamente dentro de la plantilla HTML en Astro.

4. Utiliza [`Astro.props`](/es/reference/api-reference/#astroprops) para acceder a cualquier prop adicional que haya sido pasada previamente a tu funci贸n CRA.

5. Decide si tambi茅n es necesario convertir a Astro los componentes importados. Por el momento, puedes mantenerlos como componentes de React o hacerlo de forma permanente. Sin embargo, es posible que eventualmente desees convertirlos a componentes `.astro`, 隆especialmente si no necesitan ser interactivos!.

6. Reemplaza `useEffect()` con declaraciones de importaci贸n o [`Astro.glob()`](/es/reference/api-reference/#astroglob) para consultar tus archivos locales. Utiliza `fetch()` para obtener datos externos.

### Migrando Tests

Como Astro genera HTML directamente, es posible escribir tests end-to-end utilizando la salida del paso de compilaci贸n. Cualquier test end-to-end escrito anteriormente podr铆a funcionar de forma predeterminada si has podido igualar el marcado de tu sitio de CRA. Bibliotecas de pruebas como Jest y React Testing Library pueden ser importadas y utilizadas en Astro para probar tus componentes de React.

Consulta la [gu铆a de pruebas](/es/guides/testing/) de Astro para obtener m谩s informaci贸n.

## Referencia: Convertir Sintaxis de CRA a Astro

### Importaciones de CRA a Astro

Actualiza todas las [importaciones de archivos](/es/guides/imports/) para hacer referencia a rutas de archivos relativas exactas. Esto puede hacerse utilizando un [alias de importaci贸n](/es/guides/typescript/#alias-de-importaci贸n) o escribiendo la ruta relativa completa.

Ten en cuenta que los archivos `.astro` y varios otros tipos de archivos deben ser importados con su extensi贸n de archivo completa.

```astro title="src/pages/authors/Fred.astro"
---
import Card from '../../components/Card.astro';
---
<Card />
```

### Props Children de CRA a Astro

Convierte cualquier instancia de `{children}` a un Astro `<slot />`. Astro no necesita recibir `{children}` como una propiedad de funci贸n y autom谩ticamente renderizar谩 el contenido del hijo en un `<slot />`.

```astro title="src/components/MiComponent.astro" del={3-9} ins={11-13}
---
---
export default function MiComponent(props) { 
    return (
      <div>
        {props.children}
      </div>
    );  
}

<div>
  <slot />
</div>
```

Los componentes de React que pasan m煤ltiples conjuntos de hijos pueden migrarse a un componente de Astro utilizando [slots con nombre](/es/core-concepts/astro-components/#slots-con-nombre).

Para obtener m谩s informaci贸n sobre el uso espec铆fico de `<slot />` en Astro, consulta [Slots](/es/core-concepts/astro-components/#slots).

### Data Fetching de CRA a Astro

Obteniendo datos en un componente de Create React App es similar a Astro, con algunas peque帽as diferencias.

Deber谩s eliminar cualquier instancia de un hook de efecto secundario (`useEffect`) tanto para `Astro.glob()` como para `getCollection()`/`getEntryBySlug()` para acceder a datos desde otros archivos en la fuente de tu proyecto.

Para [obtener datos remotos](/es/guides/data-fetching/), utiliza `fetch()`.

Estas solicitudes de datos se realizan en el frontmatter del componente de Astro y utilizan el await de nivel superior.

```astro title="src/pages/index.astro"
---
import { getCollection } from 'astro:content';

// Obtener todas las entradas de `src/content/blog/`
const allBlogPosts = await getCollection('blog');

// Obtener todas las entradas de `src/pages/posts/`
const allPosts = await Astro.glob('../pages/posts/*.md');

// Obtener datos remotos
const response = await fetch('https://randomuser.me/api/');
const data = await response.json();
const randomUser = data.results[0];
---
```

Mira m谩s sobre [importaciones de archivos locales con `Astro.glob()`](/es/guides/imports/#astroglob), [consulta utilizando la API de Colecciones](/es/guides/content-collections/#consultando-colecciones) o [obtenci贸n de datos remotos](/es/guides/data-fetching/).

### Estilando CRA a Astro

Es posible que necesites reemplazar cualquier [biblioteca de CSS-in-JS](https://github.com/withastro/astro/issues/4432) (p. ej. styled-components) con otras opciones de CSS disponibles en Astro.

Si es necesario, convierte cualquier objeto de estilo en l铆nea (`style={{ fontWeight: "bold" }}`) en atributos de estilo HTML en l铆nea (`style="font-weight:bold;"`). O bien, utiliza una [etiqueta `<style>` de Astro](/es/guides/styling/#estilando-en-astro) para estilos CSS con alcance local.

```astro title="src/components/Card.astro" del={1} ins={2}
<div style={{backgroundColor: `#f4f4f4`, padding: `1em`}}>{message}</div>
<div style="background-color: #f4f4f4; padding: 1em;">{message}</div>
```

Tailwind es compatible despu茅s de instalar la [integraci贸n de Tailwind](/es/guides/integrations-guide/tailwind/). 隆No se requieren cambios en tu c贸digo existente de Tailwind!

Mira m谩s sobre [Estilando en Astro](/es/guides/styling/).

## Soluci贸n de problemas

隆Es posible que tu aplicaci贸n de Create React App funcione "tal cual"!, pero es probable que necesites hacer ajustes menores para duplicar la funcionalidad y/o estilos de tu aplicaci贸n existente.

Si no encuentras respuestas en esta documentaci贸n, por favor visita el [Discord de Astro](https://astro.build/chat) y haz preguntas en nuestro foro de soporte. 隆Estaremos encantados de ayudarte!
