---
title: Migrando desde Create React App (CRA)
description: Consejos para migrar un proyecto existente de Create React App a Astro
type: migration
stub: true
framework: Create React App
i18nReady: true
---
import AstroJSXTabs from '~/components/tabs/AstroJSXTabs.astro'
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'
import FileTree from '~/components/FileTree.astro'

La [integraci√≥n de React](/es/guides/integrations-guide/react/) en Astro proporciona soporte para [utilizar componentes de React dentro de los componentes de Astro](/es/core-concepts/framework-components/), ¬°incluidas aplicaciones completas de React como Create React App (CRA)!

```astro title="src/pages/index.astro"
---
// Importa tu componente ra√≠z App
import App from '../cra-project/App.jsx'
---
<!-- Utiliza una directiva del cliente para cargar tu aplicaci√≥n -->
<App client:load />
```

Muchas aplicaciones "simplemente funcionar√°n" como aplicaciones completas de React cuando las agregues directamente a tu proyecto de Astro con la integraci√≥n de React instalada. Esta es una excelente manera de poner en marcha tu proyecto de inmediato y mantener tu aplicaci√≥n funcional mientras migras a Astro.

Con el tiempo, puedes convertir tu estructura pieza por pieza en una combinaci√≥n de componentes `.astro` y `.jsx`. ¬°Probablemente descubrir√°s que necesitas menos componentes de React de lo que crees!

Aqu√≠ tienes algunos conceptos clave y estrategias de migraci√≥n para ayudarte a comenzar. ¬°Utiliza el resto de nuestra documentaci√≥n y √∫nete a nuestra [comunidad de Discord](https://astro.build/chat) para continuar avanzando!.

## Principales similitudes entre CRA y Astro

- La [sintaxis de los archivos `.astro` es similar a JSX](/es/core-concepts/astro-syntax/#diferencias-entre-astro-y-jsx). Escribir en Astro deber√≠a sentirse familiar.

- Astro utiliza enrutamiento basado en archivos y [permite que las p√°ginas con nombres especiales creen rutas din√°micas](/es/core-concepts/routing/#rutas-din√°micas).

- Astro es [basado en componentes](/es/core-concepts/astro-components/), y tu estructura de marcado ser√° similar antes y despu√©s de tu migraci√≥n.

- Astro tiene [integraciones oficiales para React, Preact y Solid](/es/guides/integrations-guide/react/), lo que te permite utilizar tus componentes JSX existentes. Ten en cuenta que en Astro, estos archivos **deben** tener una extensi√≥n `.jsx` o `.tsx`.

- Astro tiene soporte para [instalar paquetes de NPM](/es/guides/imports/#paquetes-npm), incluidas bibliotecas de React. Muchas de tus dependencias existentes funcionar√°n en Astro.

## Principales diferencias entre CRA y Astro

Cuando reconstruyas tu sitio de CRA en Astro, notar√°s algunas diferencias importantes:

- [MPA vs SPA](/es/concepts/mpa-vs-spa/): CRA es una aplicaci√≥n de una sola p√°gina que utiliza `index.js` como la ra√≠z de tu proyecto. Astro es un sitio de m√∫ltiples p√°ginas, y `index.astro` es tu p√°gina de inicio.

- Los [componentes `.astro`](/es/core-concepts/astro-components/) no se escriben como funciones exportadas que devuelven plantillas de p√°gina. En su lugar, dividir√°s tu c√≥digo en una "valla de c√≥digo" para tu JavaScript y un cuerpo exclusivo para el HTML que generas.

- [Contenido primero](/es/concepts/why-astro/): Astro fue dise√±ado para resaltar tu contenido y permitirte optar por la interactividad solo cuando sea necesario. Una aplicaci√≥n existente de CRA puede estar dise√±ada para una alta interactividad del lado del cliente y puede requerir t√©cnicas avanzadas de Astro para incluir elementos que son m√°s desafiantes de replicar utilizando componentes `.astro`, como paneles de control.

## Agrega tu CRA a Astro

Tu aplicaci√≥n existente puede ser renderizada directamente dentro de un nuevo proyecto de Astro, muchas veces sin cambios en el c√≥digo de tu aplicaci√≥n.

### Crear un nuevo proyecto de Astro

Utiliza el comando `create astro` en tu gestor de paquetes para lanzar la CLI de Astro y seleccionar un nuevo proyecto de Astro "empty".

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm create astro@latest
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm create astro@latest
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn create astro@latest
  ```
  </Fragment>
</PackageManagerTabs>

### Agregar integraciones y dependencias

Agrega la integraci√≥n de React utilizando el comando `astro add` para tu gestor de paquetes. Si tu aplicaci√≥n utiliza Tailwind o MDX, puedes agregar m√∫ltiples integraciones de Astro usando el mismo comando.

```sh
# Usando NPM
npx astro add react
npx astro add react tailwind mdx
# Usando Yarn
yarn astro add react
yarn astro add react tailwind mdx
# Usando PNPM
pnpm astro add react
yarn astro add react tailwind mdx
```

Si tu CRA requiere cualquier dependencia (p.ej. paquetes de NPM), debes instalarlos individualmente utilizando la l√≠nea de comandos o a√±adi√©ndolos manualmente al archivo `package.json` de tu nuevo proyecto de Astro, y luego ejecutando el comando de instalaci√≥n. Ten en cuenta que muchas, pero no todas, las dependencias de React funcionar√°n en Astro.

### Agrega los archivos de tu app existente

Copia los archivos y carpetas existentes de tu proyecto actual de Create React App (CRA) (p.ej. `components`, `hooks`, `styles`, etc.) en una nueva carpeta dentro de `src/`, manteniendo su estructura de archivos para que tu aplicaci√≥n contin√∫e funcionando. Ten en cuenta que todas las extensiones de archivo `.js` sean renombradas a `.jsx` o `.tsx`.

No incluyas archivos de configuraci√≥n. Utilizar√°s los archivos `astro.config.mjs`, `package.json` y `tsconfig.json` propios de Astro.

Mueve el contenido de la carpeta `public/` de tu aplicaci√≥n (p.ej. assets est√°ticos) dentro de la carpeta `public/` de Astro.

<FileTree>
- public/
  - logo.png
  - favicon.ico
  - ...
- src/
  - cra-project/
    - App.jsx
    - ...
  - pages/
    - index.astro
- astro.config.mjs
- package.json
- tsconfig.json
</FileTree>

### Renderizar tu app

Importa el componente ra√≠z de tu aplicaci√≥n en la secci√≥n de frontmatter de `index.astro` y luego renderiza el componente `<App />` en la plantilla de tu p√°gina.

```astro title="src/pages/index.astro"
---
import App from '../cra-project/App.jsx'
---
<App client:load/>
```

:::note[directivas del cliente]
Tu aplicaci√≥n necesita una [directiva del cliente](/es/reference/directives-reference/#directivas-del-cliente) para la interactividad. Astro renderizar√° tu aplicaci√≥n React como HTML est√°tico hasta que optes por utilizar JavaScript en el lado del cliente.

Utiliza `client:load` para asegurarte de que tu aplicaci√≥n se cargue inmediatamente desde el servidor, o `client:only="react"` para omitir el renderizado en el lado del servidor y ejecutar completamente tu aplicaci√≥n solo en el lado del cliente.
:::

Consulta nuestra gu√≠a para [configurar Astro](/es/guides/configuring-astro/) para obtener m√°s detalles y opciones disponibles.

## Convierte tu CRA a Astro

Despu√©s de [agregar tu aplicaci√≥n existente a Astro](#agrega-tu-cra-a-astro), ¬°probablemente querr√°s convertir la propia aplicaci√≥n a Astro!

Replicar√°s un dise√±o similar basado en componentes [utilizando componentes de plantillas HTML de Astro para tu estructura b√°sica](/es/core-concepts/astro-components/), mientras importas e incluyes componentes individuales de React (¬°que pueden ser aplicaciones completas en s√≠ mismas!) para islas de interactividad.

Cada migraci√≥n ser√° diferente y se puede realizar de manera incremental sin interrumpir tu aplicaci√≥n en funcionamiento. Convierte piezas individuales a tu propio ritmo, de modo que cada vez m√°s de tu aplicaci√≥n est√© impulsada por componentes de Astro con el tiempo.

A medida que conviertas tu aplicaci√≥n de React, decidir√°s qu√© componentes de React r[eescribir√°s como componentes de Astro](#converting-jsx-files-to-astro-files). La √∫nica restricci√≥n es que los componentes de Astro pueden importar componentes de React, pero los componentes de React solo pueden importar otros componentes de React.

```astro title="src/pages/static-components.astro" ins={2,7}
---
import MiComponenteDeReact from '../components/MiComponenteDeReact.jsx';
---
<html>
  <body>
    <h1>¬°Utiliza componentes React directamente en Astro!</h1>
    <MiComponenteDeReact />
  </body>
</html>
```

En lugar de importar componentes de Astro dentro de componentes de React, puedes anidar componentes de React dentro de un √∫nico componente de Astro:

```astro title="src/pages/nested-components.astro" {2,3,5,8,10}
---
import MiSidebarDeReact from '../components/MiSidebarDeReact.jsx';
import MiBotonDeReact from '../components/MiBotonDeReact.jsx';
---
<MiSidebarDeReact>
  <p>Aqu√≠ hay una sidebar con algo de texto y un bot√≥n.</p>
  <div slot="actions">
    <MiBotonDeReact client:idle />
  </div>
</MiSidebarDeReact>
```

Puede ser √∫til que aprendas acerca de [las islas de Astro](/es/concepts/islands/) y [los componentes de Astro](/es/core-concepts/astro-components/) antes de reestructurar tu proyecto CRA como un proyecto Astro.

### Compara: JSX vs Astro

Compare el siguiente componente CRA y el componente Astro correspondiente:

<AstroJSXTabs>
  <Fragment slot="jsx">
    ```jsx title="StarCount.jsx"
    import React, { useState, useEffect } from 'react';
import Header from './Header';
import Footer from './Footer';

const Component = () => {
    const [stars, setStars] = useState(0);
    const [message, setMessage] = useState('');

    useEffect(() => {
        const fetchData = async () => {
            const res = await fetch('https://api.github.com/repos/withastro/astro');
            const json = await res.json();

            setStars(json.stargazers_count || 0);
            setMessage(json.message);
        };

        fetchData();
    }, []);

    return (
        <>
            <Header />
            <p style={{
                backgroundColor: `#f4f4f4`,
                padding: `1em 1.5em`,
                textAlign: `center`,
                marginBottom: `1em`
            }}>Astro tiene {stars} üßë‚ÄçüöÄ</p>
            <Footer />
        </>
    )
};

export default Component;
    ```
  </Fragment>
  <Fragment slot="astro">
    ```astro title="StarCount.astro"
    ---
    import Header from "./Header.astro";
    import Footer from "./Footer.astro";
    import "./layout.css";
    const res = await fetch('https://api.github.com/repos/withastro/astro')
    const json = await res.json()
    const message = json.message;
    const stars = json.stargazers_count || 0;
    ---
    <Header />
    <p class="banner">Astro tiene {stars} üßë‚ÄçüöÄ</p>
    <Footer />
    <style>
      .banner {
        background-color: #f4f4f4; 
        padding: 1em 1.5em;
        text-align: center;
        margin-bottom: 1em;
      }
    <style>
    ```
  </Fragment>
</AstroJSXTabs>


### Convirtiendo archivos JSX a archivos `.astro`

Aqu√≠ tienes algunos consejos para convertir un componente de CRA `.js` a un componente `.astro`:

1. Utiliza el JSX devuelto por la funci√≥n del componente CRA existente como base para tu plantilla HTML.

2. Change any [CRA or JSX syntax to Astro]#reference-convert-cra-syntax-to-astro) or to HTML web standards. This includes `{children}` and `className`, for example.

3. Move any necessary JavaScript, including import statements, into a ["code fence" (`---`)](/en/core-concepts/astro-components/#the-component-script). Note: JavaScript to [conditionally render content](/en/core-concepts/astro-syntax/#dynamic-html) is often written inside the HTML template directly in Astro.

4. Use [`Astro.props`](/en/reference/api-reference/#astroprops) to access any additional props that were previously passed to your CRA function.

5. Decide whether any imported components also need to be converted to Astro. You can keep them as React components for now, or forever. But, you may eventually want to convert them to `.astro` components, especially if they do not need to be interactive!

6. Replace `useEffect()` with import statements or [`Astro.glob()`](/en/reference/api-reference/#astroglob) to query your local files. Use `fetch()` to fetch external data.

### Migrando Tests

As Astro outputs raw HTML, it is possible to write end-to-end tests using the output of the build step. Any end-to-end tests written previously might work out-of-the-box if you have been able to match the markup of your CRA site. Testing libraries such as Jest and React Testing Library can be imported and used in Astro to test your React components.

See Astro's [testing guide](/en/guides/testing/) for more.

## Referencia: Convert CRA Syntax to Astro

### CRA Imports to Astro

Update any [file imports](/en/guides/imports/) to reference relative file paths exactly. This can be done using [import aliases](/en/guides/typescript/#import-aliases), or by writing out a relative path in full. 

Note that `.astro` and several other file types must be imported with their full file extension.

```astro title="src/pages/authors/Fred.astro"
---
import Card from `../../components/Card.astro`
---
<Card />
```

### CRA Children Props to Astro

Convert any instances of `{children}` to an Astro `<slot />`. Astro does not need to receive `{children}` as a function prop and will automatically render child content in a `<slot />`.

```astro title="src/components/MiComponent" del={3-9} ins={11-13}
---
---
export default function MiComponent(props) { 
    return (
      <div>
        {props.children}
      </div>
    );  
}

<div>
  <slot />
</div>
```

React components that pass multiple sets of children can be migrated to an Astro component using [named slots](/en/core-concepts/astro-components/#named-slots).

See more about [specific `<slot />` usage in Astro](/en/core-concepts/astro-components/#slots).

### CRA Data Fetching to Astro

Fetching data in a Create React App component is similar to Astro, with some slight differences.

You will need to remove any instances of a side effect hook (`useEffect`) for either `Astro.glob()` or `getCollection()`/`getEntryBySlug()` to access data from other files in your project source.

To [fetch remote data](/en/guides/data-fetching/), use `fetch()`.

These data requests are made in the frontmatter of the Astro component and use top-level await.

```astro title="src/pages/index.astro"
---
import { getCollection } from 'astro:content';

// Get all `src/content/blog/` entries
const allBlogPosts = await getCollection('blog');

// Get all `src/pages/posts/` entries
const allPosts = await Astro.glob('../pages/posts/*.md');

// Fetch remote data
const response = await fetch('https://randomuser.me/api/');
const data = await response.json();
const randomUser = data.results[0];
---
```

See more about [local files imports with `Astro.glob()`](/en/guides/imports/#astroglob), [querying using the Collections API](/en/guides/content-collections/#querying-collections) or [fetching remote data](/en/guides/data-fetching/).

### CRA Styling to Astro

You may need to replace any [CSS-in-JS libraries](https://github.com/withastro/astro/issues/4432) (e.g. styled-components) with other available CSS options in Astro.

If necessary, convert any inline style objects (`style={{ fontWeight: "bold" }}`) to inline HTML style attributes (`style="font-weight:bold;"`). Or, use an [Astro `<style>` tag](/en/guides/styling/#styling-in-astro) for scoped CSS styles.

```astro title="src/components/Card.astro" del={1} ins={2}
<div style={{backgroundColor: `#f4f4f4`, padding: `1em`}}>{message}</div>
<div style="background-color: #f4f4f4; padding: 1em;">{message}</div>
```

Tailwind is supported after installing the [Tailwind integration](/en/guides/integrations-guide/tailwind/). No changes to your existing Tailwind code are required!

See more about [Styling in Astro](/en/guides/styling/).


## Soluci√≥n de problemas

Your CRA might "just work" in Astro! But, you may likely need to make minor adjustments to duplicate your existing app's functionality and/or styles.

If you cannot find your answers within these docs, please visit the [Astro Discord](https://astro.build/chat) and ask questions in our support forum!