---
title: Actualizar a Astro v3
description: C√≥mo actualizar tu proyecto a la √∫ltima versi√≥n de Astro (v3.0).
i18nReady: true
---
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'
import FileTree from '~/components/FileTree.astro'


Esta gu√≠a te ayudar√° a migrar de Astro v2 a Astro v3.

¬øNecesitas actualizar un proyecto m√°s antiguo a la versi√≥n v2? Consulta nuestra [gu√≠a de migraci√≥n anterior](/es/guides/upgrade-to/v2/) para obtener m√°s informaci√≥n.

## Actualizar Astro

Actualiza la versi√≥n de Astro en tu proyecto a la √∫ltima versi√≥n utilizando tu administrador de paquetes. Si est√°s utilizando integraciones de Astro, por favor tambi√©n actualiza esas integraciones a la √∫ltima versi√≥n.

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  # Actualizar a Astro v3.x
  npm install astro@latest
  
  # Ejemplo: actualizar las integraciones de React y Tailwind
  npm install @astrojs/react@latest @astrojs/tailwind@latest
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  # Actualizar a Astro v3.x
  pnpm install astro@latest

  # Ejemplo: actualizar las integraciones de React y Tailwind
  pnpm install @astrojs/react@latest @astrojs/tailwind@latest
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  # Actualizar a Astro v3.x
  yarn add astro@latest
  
  # Ejemplo: actualizar las integraciones de React y Tailwind
  yarn add @astrojs/react@latest @astrojs/tailwind@latest
  ```
  </Fragment>
</PackageManagerTabs>

:::note[¬øNecesitas continuar?]
¬°Despu√©s de actualizar Astro a la √∫ltima versi√≥n, es posible que no necesites realizar ning√∫n cambio en tu proyecto en absoluto!

Sin embargo, si notas errores o comportamientos inesperados, por favor revisa a continuaci√≥n los cambios que se han realizado y que podr√≠an requerir actualizaciones en tu proyecto.
:::

## Astro v3.0: Banderas Experimentales Eliminadas

Elimina las siguientes banderas experimentales de `astro.config.mjs`:

```js del={5-8}
// astro.config.mjs
import { defineConfig } from 'astro/config';

export default defineConfig({
  experimental: {
    assets: true,
    viewTransitions: true,
  },
})
```

Estas caracter√≠sticas ahora est√°n disponibles por defecto:

- View Transitions para transiciones de p√°gina animadas e islas persistentes. Consulta [cambios importantes en la API de View Transitions y consejos de actualizaci√≥n](/es/guides/view-transitions/#actualizar-a-la-v30-desde-la-v2x) si estabas utilizando esta bandera experimental.
- Una nueva API de servicios de imagen `astro:assets` para usar im√°genes en Astro, incluyendo un nuevo componente `<Image />` y la funci√≥n `getImage()`. Por favor, lee los detallados [consejos de actualizaci√≥n de im√°genes](/es/guides/images/#actualizar-a-v30-desde-v2x) **sin importar si estabas usando esta bandera experimental** para ver c√≥mo esto podr√≠a afectar tu proyecto.

¬°Lee m√°s sobre estas dos emocionantes caracter√≠sticas y m√°s en la publicaci√≥n del blog sobre la versi√≥n 3.0!

## Cambios importantes en Astro v3.0

Astro v3.0 incluye algunos cambios importantes, as√≠ como la eliminaci√≥n de algunas caracter√≠sticas previamente deprecadas. Si tu proyecto no funciona como se esperaba despu√©s de actualizar a v3.0, consulta esta gu√≠a para obtener una visi√≥n general de todos los cambios importantes e instrucciones sobre c√≥mo actualizar tu c√≥digo base.

Lee m√°s sobre estas dos emocionantes caracter√≠sticas y m√°s en la [publicaci√≥n del blog sobre la versi√≥n 3.0](https://astro.build/blog/astro-3/)!

### Eliminado: Soporte para Node 16

Node 16 tiene programado alcanzar su Fin de Vida en septiembre de 2023.

Astro v3.0 elimina por completo el soporte para Node 16 para que todos los usuarios de Astro puedan aprovechar las caracter√≠sticas m√°s modernas de Node.

#### ¬øQu√© debo hacer?

 Aseg√∫rate de que tanto tu entorno de desarrollo como tu entorno de implementaci√≥n est√©n utilizando **Node `18.14.1` o una versi√≥n superior**.

1. Verifica tu versi√≥n local de Node utilizando:

    ```sh
    node -v
    ```

2. Revisa la documentaci√≥n de tu [entorno de despliegue](/es/guides/deploy/) para verificar que admita Node 18.

    Puedes especificar Node `18.14.1` para tu proyecto de Astro ya sea en una configuraci√≥n en el panel de control o en un archivo `.nvmrc`.

```bash title=".nvmrc"
18.14.1
```

### Eliminado: Soporte para TypeScript 4

En Astro v2.x, los ajustes preestablecidos de `tsconfig.json` incluyen soporte tanto para TypeScript 4.x como para 5.x.

Astro v3.0 actualiza los ajustes preestablecidos de `tsconfig.json` para solo admitir TypeScript 5.x. Ahora Astro asume que est√°s utilizando TypeScript 5.0 (marzo de 2023) o que tu editor lo incluye (p. ej. VS Code 1.77).

#### ¬øQu√© debo hacer?

Si has instalado TypeScript localmente, actualiza al menos a la versi√≥n v5.0.

```bash
npm install typescript@latest --save-dev
```

### Eliminado: `@astrojs/image`

En Astro v2.x, Astro ofrec√≠a una integraci√≥n oficial de im√°genes que inclu√≠a los componentes `<Image />` y `<Picture />`.

Astro v3.0 elimina por completo esta integraci√≥n del c√≥digo base. La nueva soluci√≥n de Astro para im√°genes es una API de servicios de im√°genes integrada: `astro:assets`.

#### ¬øQu√© debo hacer?

Elimina la integraci√≥n `@astrojs/image` de tu proyecto. Deber√°s no solo desinstalar la integraci√≥n, sino tambi√©n actualizar o eliminar cualquier declaraci√≥n de importaci√≥n y los componentes existentes `<Image />` y `<Picture />`. Es posible que tambi√©n necesites configurar un servicio de procesamiento de im√°genes preferido por defecto.

Encontrar√°s [instrucciones completas y paso a paso para eliminar la antigua integraci√≥n de im√°genes](/es/guides/images/#elimina-astrojsimage) en nuestra gu√≠a de Im√°genes.

Migrar a `astro:assets` tambi√©n traer√° algunas nuevas opciones y caracter√≠sticas de im√°genes que es posible que desees utilizar. ¬°Por favor, consulta el [Consejo de Actualizaci√≥n de Im√°genes v3.0](/es/guides/images/#actualizar-a-v30-desde-v2x) completo para obtener todos los detalles!

```js del={3,7}
// astro.config.mjs
import { defineConfig } from 'astro/config';
import image from '@astrojs/image';

export default defineConfig({
  integrations: [
    image(),
  ]
})
```

### Eliminado: Componente `<Markdown />`

En Astro v1.x, Astro marc√≥ como obsoleto el componente `<Markdown />` y lo movi√≥ a un paquete externo.

Astro v3.0 elimina por completo el paquete `@astrojs/markdown-component`. El componente `<Markdown />` de Astro ya no funcionar√° en tu proyecto.

#### ¬øQu√© debo hacer?

Elimina todas las instancias de `@astrojs/markdown-component`.

```astro del={2} title="src/components/MyAstroComponent.astro"
---
import Markdown from '@astrojs/markdown-component';
---
```

Para seguir utilizando un componente similar a `<Markdown />` en tu c√≥digo, considera usar [integraciones de la comunidad](https://astro.build/integrations/) como [`astro-remote`](https://github.com/natemoo-re/astro-remote). Aseg√∫rate de actualizar las importaciones y atributos de tu componente `<Markdown />` seg√∫n sea necesario, de acuerdo con la documentaci√≥n propia de la integraci√≥n.

De lo contrario, elimina todas las referencias a la importaci√≥n del componente `<Markdown />` de Astro y el propio componente en tus archivos `.astro`. Tendr√°s que reescribir tu contenido directamente como HTML o [importar Markdown](/es/guides/markdown-content/#importando-markdown) desde un archivo `.md`.

### Eliminado: APIs obsoletas de la versi√≥n 1.x

En Astro v1.x, Astro marc√≥ como obsoletas las opciones de configuraci√≥n, as√≠ como los tipos de atributos `global` y `hoist` para script/estilos. Estos se mantuvieron para compatibilidad con versiones anteriores.

Astro v3.0 elimina por completo estas API obsoletas. Ya no se pueden utilizar en tu proyecto de Astro.

#### ¬øQu√© debo hacer?

Si contin√∫as utilizando las APIs de la versi√≥n v1.x, utiliza en su lugar las nuevas API para cada funcionalidad:

- Opciones de configuraci√≥n obsoletas: Consulta [la gu√≠a de migraci√≥n 0.26](/es/guides/upgrade-to/v1/#new-configuration-api)
- Tipos de atributos script/estilo obsoletos: Consulta [la gu√≠a de migraci√≥n 0.26](/es/guides/upgrade-to/v1/#new-default-script-behavior)

### Eliminado: Shims parciales para Web APIs en c√≥digo de servidor

En Astro v2.x, Astro proporcionaba shims parciales para las Web APIs como `document` o `localStorage` en el c√≥digo de servidor. Estos shims a menudo eran incompletos y poco confiables.

Astro v3.0 elimina por completo estos shims parciales. Las Web APIs ya no est√°n disponibles en el c√≥digo renderizado en el servidor.

#### ¬øQu√© debo hacer?

Si est√°s utilizando Web APIs en componentes renderizados en el servidor, deber√°s hacer que el uso de esas APIs sea condicional o utilizar [la directiva `client:only`](/es/reference/directives-reference/#clientonly).

### Eliminado: `image` de `astro:content` en el esquema de colecciones de contenido

En Astro v2.x, la API de colecciones de contenido marc√≥ como obsoleta la exportaci√≥n de `image` desde `astro:content` para su uso en los esquemas de colecciones de contenido.

Astro v3.0 elimina por completo esta exportaci√≥n.

#### ¬øQu√© debo hacer?

Si est√°s utilizando el `image()` obsoleto de `astro:content`, elim√≠nalo ya que ya no existe. Valida las im√°genes a trav√©s del [ayudante `image` del `esquema`](/es/guides/images/#actualiza-los-esquemas-de-colecciones-de-contenido) en su lugar:

 ```ts title="src/content/config.ts" del={1} ins={2} "({ image })"
import { defineCollection, z, image } from "astro:content";
import { defineCollection, z } from "astro:content";
 
 defineCollection({
   schema: ({ image }) =>
     z.object({
       image: image(),
    }),
});
```

### Eliminado: Nombres de temas de Shiki pre-0.14

En Astro v2.x, algunos nombres de temas de Shiki fueron cambiados, pero se mantuvieron los nombres originales para mantener la compatibilidad hacia atr√°s.

Astro v3.0 elimina los nombres originales a favor de los nombres de temas renombrados.

#### ¬øQu√© debo hacer?

Si tu proyecto utiliza alguno de los temas a continuaci√≥n, ren√≥mbralos con su nombre actualizado:

- `material-darker` -> `material-theme-darker`
- `material-default` -> `material-theme`
- `material-lighter` -> `material-theme-lighter`
- `material-ocean` -> `material-theme-ocean`
- `material-palenight` -> `material-theme-palenight`

### Eliminado: Caracter√≠sticas `class:list`

En Astro v2.x, la directiva [`class:list`](/es/reference/directives-reference/#classlist) utilizaba una implementaci√≥n personalizada inspirada en [`clsx`](https://github.com/lukeed/clsx), con algunas caracter√≠sticas adicionales como la eliminaci√≥n de duplicados y el soporte para `Set`.

Astro v3.0 ahora utiliza `clsx` directamente para `class:list`, lo cual no admite la eliminaci√≥n de duplicados ni valores de tipo `Set`.

#### ¬øQu√© debo hacer?

Reemplaza cualquier elemento de tipo `Set` pasado a la directiva `class:list` con un simple `Array`.

```astro title="src/components/MyAstroComponent.astro" del={4} ins={5}
<Component class:list={[
  'a',
  'b',
  new Set(['c', 'd'])
  ['c', 'd']
]} />
```

### Eliminado: pasando `class:list` como una propiedad

En Astro v2.x, los [valores de `class:list`](/es/reference/directives-reference/#classlist) se enviaban a los componentes a trav√©s de [`Astro.props['class:list']`](/es/reference/api-reference/#astroprops).

En Astro v3.0, los valores de `class:list` se normalizan a un string antes de ser enviados a los componentes a trav√©s de `Astro.props['class']`.

#### ¬øQu√© debo hacer?

Elimina cualquier c√≥digo que espere recibir la propiedad `class:list`.

```astro title="src/components/MyAstroComponent.astro" del={2,3,7} ins={4,8} "classList" "'class:list': classList"
---
import { clsx } from 'clsx';
const { class: className, 'class:list': classList } = Astro.props;
const { class: className } = Astro.props;
---
<div
  class:list={[className, classList]}
  class:list={[className]}
/>
```

### Eliminado: Transformaci√≥n de kebab-case para variables CSS en camelCase

En Astro v2.x, las [variables CSS](/es/guides/styling/#variables-de-css) en formato camelCase pasadas al atributo `style` eran representadas tanto en camelCase (como se escrib√≠an originalmente) como en kebab-case (mantenidas para compatibilidad hacia atr√°s).

Astro v3.0 elimina la transformaci√≥n a kebab-case para estos nombres de variables CSS en formato camelCase, y solo se representa la variable CSS camelCase original.

```astro "my-value"
---
// src/components/MyAstroComponent.astro
const myValue = "red"
---
<!-- entrada -->
<div style={{ "--myValue": myValue }}></div>

<!-- salida (Astro 2.x) -->
<div style="--my-value:var(--myValue);--myValue:red"></div>
<!-- salida (Astro 3.0) -->
<div style="--myValue:red"></div>
```

#### ¬øQu√© debo hacer?

Si estabas confiando en Astro para transformar kebab-case en tus estilos, actualiza tus estilos existentes a camelCase para evitar estilos faltantes. Por ejemplo:

```astro del={3} ins={4} title="src/components/MyAstroComponent.astro"
<style>
  div {
   color: var(--my-value);
   color: var(--myValue);
  }
</style>
```

### Eliminado: Aplanamiento autom√°tico del valor de retorno de `getStaticPaths()`

En Astro v2.x, el valor de retorno de [`getStaticPaths()`](/es/reference/api-reference/#getstaticpaths) se aplanaba autom√°ticamente para permitirte devolver un arreglo de arreglos sin errores.

Astro v3.0 elimina el aplanamiento autom√°tico del resultado de `getStaticPaths()`.

#### ¬øQu√© debo hacer?

Si est√°s devolviendo un arreglo de arreglos en lugar de un arreglo de _objetos_ (como se espera), ahora debes usar `.flatMap` y `.flat` para asegurarte de que est√°s devolviendo un array plano.

Se proporcionar√° un [mensaje de error indicando que el valor de retorno de `getStaticPath()` debe ser un arreglo de objetos](/es/reference/errors/invalid-get-static-paths-entry/#qu√©-sali√≥-mal) si necesitas actualizar tu c√≥digo.

### Movido: `astro check` ahora requiere un paquete externo

En Astro v2.x, [`astro check`](/es/reference/cli-reference/#astro-check) estaba incluido en Astro por defecto, y sus dependencias estaban empaquetadas en Astro. Esto resultaba en un paquete m√°s grande, independientemente de si usabas o no `astro check`. Tambi√©n evitaba que tuvieras control sobre la versi√≥n de TypeScript y el Servidor de Lenguaje de Astro que se utilizaba.

Astro v3.0 mueve el comando `astro check` fuera del n√∫cleo de Astro y ahora requiere un paquete externo `@astrojs/check`. Adem√°s, debes instalar `typescript` en tu proyecto para poder usar el comando `astro check`.

#### ¬øQu√© debo hacer?

Ejecuta el comando `astro check` despu√©s de actualizar a Astro v3.0 y sigue las indicaciones para instalar las dependencias requeridas, o bien, instala manualmente `@astrojs/check` y `typescript` en tu proyecto.

### Obsoleto: `build.excludeMiddleware` y `build.split`

En Astro v2.x, `build.excludeMiddleware` y `build.split` se utilizaban para cambiar la forma en que se emit√≠an archivos espec√≠ficos al usar un adaptador en modo SSR.

Astro v3.0 reemplaza estas opciones de configuraci√≥n de compilaci√≥n con nuevas opciones de configuraci√≥n [para adaptadores SSR](/es/guides/integrations-guide/#integraciones-oficiales) para realizar las mismas tareas: `edgeMiddleware` y `functionPerRoute`.

#### ¬øQu√© debo hacer?

Actualiza el archivo de configuraci√≥n de Astro para usar las nuevas opciones **en la configuraci√≥n del adaptador** directamente.

```js title="astro.config.mjs" del={5-7} ins={9}
import { defineConfig } from "astro/config";
import vercel from "@astrojs/vercel/serverless";

export default defineConfig({
    build: {
      excludeMiddleware: true
    },
    adapter: vercel({
      edgeMiddleware: true
    }),
});
```

```js title="astro.config.mjs" del={5-7} ins={9}
import { defineConfig } from "astro/config";
import netlify from "@astrojs/netlify/functions";

export default defineConfig({
     build: {
        split: true
     },
     adapter: netlify({
        functionPerRoute: true
     }),
});
```

### Obsoleto: `markdown.drafts`

En Astro v2.x, la configuraci√≥n `markdown.drafts` permit√≠a tener p√°ginas en borrador disponibles cuando se ejecutaba el servidor de desarrollo, pero que no se constru√≠an en producci√≥n.

Astro v3.0 desaconseja esta caracter√≠stica a favor del m√©todo de colecciones de contenido para manejar las p√°ginas en borrador mediante filtrado manual, lo que proporciona un mayor control sobre la funcionalidad.

#### ¬øQu√© debo hacer?

Para seguir marcando algunas p√°ginas en tu proyecto como borradores, [migra a las colecciones de contenido](/es/guides/content-collections/#migrando-desde-el-enrutamiento-basado-en-archivos) y [filtra manualmente las p√°ginas](/es/guides/content-collections/#filtrando-consultas-de-colecci√≥n) con la propiedad `draft: true` en el frontmatter en lugar de usar la configuraci√≥n `markdown.drafts`.

### Obsoleto: Retornando un objeto simple en los endpoints

En Astro v2.x, los endpoints pod√≠an devolver un objeto simple, que se convertir√≠a en una respuesta JSON.

Astro v3.0 desecha este comportamiento en favor de devolver directamente un objeto `Response`.

#### ¬øQu√© debo hacer?

Actualiza tus endpoints para devolver directamente un objeto `Response`.

```ts title="endpoint.json.ts" del={2} ins={3}
export async function GET() {
  return { body: { "title": "Blog de Bob" }};
  return new Response(JSON.stringify({ "title": "Blog de Bob" }));
}
```

Si realmente necesitas mantener el formato anterior, puedes usar el objeto `ResponseWithEncoding`, pero ser√° obsoleto en el futuro.

```ts title="endpoint.json.ts" del={2} ins={3}
export async function GET() {
  return { body: { "title": "Blog de Bob" } };
  return new ResponseWithEncoding({ body: { "title": "Blog de Bob" }});
}
```

### Cambiado por defecto: `verbatimModuleSyntax` en los ajustes preestablecidos de tsconfig.json

En Astro v2.x, la configuraci√≥n [`verbatimModuleSyntax`](https://www.typescriptlang.org/tsconfig#verbatimModuleSyntax) estaba desactivada de forma predeterminada, con su equivalente de TypeScript 4.x `importsNotUsedAsValues` habilitado en el ajuste preestablecido `strict`.

En Astro v3.0, `verbatimModuleSyntax` est√° habilitado en todos los ajustes preestablecidos.

#### ¬øQu√© debo hacer?

Esta opci√≥n requiere que los tipos se importen utilizando la sintaxis `import type`.

```astro title="src/components/MyAstroComponent.astro" "type"
---
import { type CollectionEntry, getEntry } from "astro:content";
---
```

Si bien recomendamos mantenerlo activado y hacer correctamente tus importaciones de tipo con `type` (como se muestra arriba), puedes desactivarlo estableciendo `verbatimModuleSyntax: false` en tu archivo `tsconfig.json` si causa alg√∫n problema.

```json title="tsconfig.json" "false"
{
  "compilerOptions": {
    "verbatimModuleSyntax": false
  }
}
```

### Cambiado por defecto: Puerto `3000`

En Astro v2.x, Astro se ejecutaba en el puerto `3000` por defecto.

Astro v3.0 cambia el [puerto por defecto](/es/reference/cli-reference/#--port-number) a `4321`. üöÄ

#### ¬øQu√© debo hacer?

Actualiza cualquier referencia existente a `localhost:3000`, por ejemplo en tests o en tu `README`, para reflejar el nuevo puerto `localhost:4321`.

### Cambiado por defecto: import.meta.env.BASE_URL `trailingSlash`

En Astro v2.x, `import.meta.env.BASE_URL` agregaba por defecto tu configuraci√≥n [`base`](/es/reference/configuration-reference/#base) con una barra diagonal al final, llamada [trailingSlash](/es/reference/configuration-reference/#trailingslash). `trailingSlash: "ignore"` tambi√©n agregaba una barra diagonal al final.

En Astro v3.0, ya no se agrega una barra diagonal al final a `import.meta.env.BASE_URL` de forma predeterminada, ni cuando se establece `trailingSlash: "ignore"`. (El comportamiento existente de `base` en combinaci√≥n con `trailingSlash: "always"` o `trailingSlash: "never"` no ha cambiado).

#### ¬øQu√© debo hacer?

Si tu configuraci√≥n `base` ya tiene una barra diagonal al final, no es necesario realizar ning√∫n cambio.

Si tu configuraci√≥n `base` no tiene una barra diagonal al final, agrega una si deseas preservar el comportamiento anterior por defecto (o `trailingSlash: "ignore"`):

```js title="astro.config.mjs" del={4} ins={5}
import { defineConfig } from "astro/config";

export default defineConfig({
  base: 'mi-base',
  base: 'mi-base/',
});
```

### Cambiado por defecto: `compressHTML`

En Astro v2.x, Astro solamente comprim√≠a tu HTML emitido cuando [`compressHTML`](/es/reference/configuration-reference/#compresshtml) se establec√≠a expl√≠citamente como `true`. El valor predeterminado era `false`.

Astro v3.0 ahora comprime autom√°ticamente el HTML emitido por defecto.

#### ¬øQu√© debo hacer?

Ahora puedes eliminar `compressHTML: true` de tu configuraci√≥n, ya que este es el nuevo comportamiento predeterminado.

```js title="astro.config.mjs" del={4}
import { defineConfig } from "astro/config";

export default defineConfig({
  compressHTML: true
})
```

Ahora debes establecer `compressHTML: false` para desactivar la compresi√≥n de HTML.

### Cambiado por defecto: `scopedStyleStrategy`

En Astro v2.x, el valor predeterminado de [`scopedStyleStrategy`](/es/reference/configuration-reference/#scopedstylestrategy) era `"where"`.

Astro v3.0 introduce un nuevo valor por defecto: `"attribute"`. De manera predeterminada, los estilos ahora se aplican utilizando atributos `data-*`.

#### ¬øQu√© debo hacer?

Para mantener el [√°mbito de estilo](/es/guides/styling/#estilos-locales) actual de tu proyecto, actualiza el archivo de configuraci√≥n al valor predeterminado anterior:

```js title="astro.config.mjs" ins={4}
import { defineConfig } from "astro/config";

export default defineConfig({
  scopedStyleStrategy: "where"
})
```

### Cambiado por defecto: `inlineStyleSheets`

En Astro v2.x, todas las hojas de estilo del proyecto se enviaban por defecto como etiquetas de enlace. Pod√≠as elegir insertarlas siempre en etiquetas `<style>` con la opci√≥n `"always"`, o insertar en l√≠nea solo las hojas de estilo por debajo de un cierto tama√±o con `"auto"`, configurando la propiedad [`build.inlineStylesheets`](/es/reference/configuration-reference/#buildinlinestylesheets). La configuraci√≥n predeterminada era `"never"`.

Astro v3.0 cambia el valor predeterminado de `inlineStylesheets` a `"auto"`. Las hojas de estilo con un tama√±o menor que `ViteConfig.build.assetsInlineLimit` (predeterminado: 4 KB) se incluyen en l√≠nea de manera predeterminada. De lo contrario, los estilos del proyecto se env√≠an en hojas de estilo externas.

#### ¬øQu√© debo hacer?

Si deseas mantener el comportamiento actual de tu proyecto, establece `build.inlineStylesheets` en el valor predeterminado anterior, que es `"never"`:

```js title="astro.config.mjs" ins={4-6}
import { defineConfig } from "astro/config";

export default defineConfig({
	 build: {
    inlineStylesheets: "never"
  }
})
```

### Cambiado por defecto: Servicio image

En Astro v2.x, Squoosh era el [servicio de procesamiento de im√°genes predeterminado](/es/guides/images/#servicio-de-im√°genes-por-defecto).

Ahora Astro v3.0 incluye Sharp como el servicio de procesamiento de im√°genes predeterminado y en su lugar se proporciona una opci√≥n de configuraci√≥n para usar Squoosh.

#### ¬øQu√© debo hacer?

:::note
Cuando uses un [administrador de paquetes estricto](https://pnpm.io/pnpm-vs-npm#npms-flat-tree) como `pnpm`, es posible que necesites instalar manualmente Sharp en tu proyecto, aunque sea una dependencia de Astro:

```bash
pnpm install sharp
```
:::

Si prefieres seguir utilizando Squoosh para transformar tus im√°genes, actualiza tu configuraci√≥n con lo siguiente:

```ts title="astro.config.mjs" ins={4-6}
import { defineConfig, squooshImageService } from "astro/config";

export default defineConfig({
  image: {
    service: squooshImageService(),
  }
})
```

### Cambiado: May√∫sculas en los m√©todos de solicitud HTTP

En Astro v2.x, los [m√©todos de solicitud HTTP](/es/core-concepts/endpoints/#m√©todos-http) se escrib√≠an utilizando nombres de funciones en min√∫sculas: `get`, `post`, `put`, `all` y `del`.

Astro v3.0 utiliza nombres de funciones en may√∫sculas, incluyendo `DELETE` en lugar de `del`.

#### ¬øQu√© debo hacer?

Cambia el nombre de todas las funciones a su equivalente en may√∫sculas:

- `get` a `GET`
- `post` a `POST`
- `put` a `PUT`
- `all` a `ALL`
- `del` a `DELETE`

```js title="endpoint.ts" del={1} ins={2}
export function get() {
export function GET() {
    return new Response(JSON.stringify({ "title": "Blog de Bob" }));
}
```

### Cambiado: Configuraci√≥n de m√∫ltiples frameworks JSX

En Astro v2.x, pod√≠as utilizar [varias integraciones de frameworks JSX](/es/guides/integrations-guide/#integraciones-oficiales) (React, Solid, Preact) en el mismo proyecto sin necesidad de identificar a qu√© framework pertenec√≠an los archivos.

Ahora en Astro v3.0, es necesario especificar qu√© framework utilizar para tus archivos mediante las nuevas opciones de configuraci√≥n de integraci√≥n `include` y `exclude` cuando tienes instaladas m√∫ltiples integraciones de framework JSX. Esto permite que Astro admita de manera m√°s eficiente el uso de un solo framework, as√≠ como caracter√≠sticas avanzadas como React Fast Refresh.

#### ¬øQu√© debo hacer?

Si est√°s utilizando m√∫ltiples frameworks JSX en el mismo proyecto, establece `include` (y opcionalmente `exclude`) en un arreglo de archivos y/o carpetas. Puedes utilizar comodines para incluir m√∫ltiples rutas de archivo.

Recomendamos colocar los componentes comunes del framework en la misma carpeta (por ejemplo, `/components/react/` y `/components/solid/`) para facilitar la especificaci√≥n de tus inclusiones, pero esto no es obligatorio:

```js ins={13,16,19}
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';
import react from '@astrojs/react';
import svelte from '@astrojs/svelte';
import vue from '@astrojs/vue';
import solid from '@astrojs/solid-js';

export default defineConfig({
  // Habilita varios frameworks para admitir todo tipo de componentes diferentes.
  // ¬°No se necesita `include` si solo est√°s utilizando un solo framework!
  integrations: [
    preact({
      include: ['**/preact/*']
    }),
    react({
      include: ['**/react/*']
    }),
    solid({
      include: ['**/solid/*'],
    }),
  ]
});
```

### Cambiado: `Astro.cookies.get(key)` puede retornar `undefined`

En Astro v2.x, [`Astro.cookies.get(key)`](/es/reference/api-reference/#astrocookies) siempre devolver√≠a un objeto [`AstroCookie`](/es/reference/api-reference/#astrocookie), incluso si la cookie no existiera. Para verificar su existencia, necesitabas usar `Astro.cookies.has(key)`.

En Astro v3.0, `Astro.cookies.get(key)` devuelve `undefined` si la cookie no existe.

#### ¬øQu√© debo hacer?

Este cambio no romper√° ning√∫n c√≥digo que verifique la existencia del objeto `Astro.cookie` antes de usar `Astro.cookies.get(key)`, pero ya no es necesario hacerlo.

Puedes eliminar de manera segura cualquier c√≥digo que utilice `has()` para verificar si el valor de `Astro.cookies` es `undefined`:

```js del={1-3} ins={5-7}
if (Astro.cookies.has(id)) {
  const id = Astro.cookies.get(id)!;
}

const id = Astro.cookies.get(id);
if (id) {
}
```

### Cambiado: Ejecutando la CLI de Astro de manera program√°tica.

En Astro v2.x, el punto de entrada del paquete `"astro"` exportaba y ejecutaba directamente la CLI de Astro. No se recomienda ejecutar Astro de esta manera en la pr√°ctica.

Astro v3.0 elimina la CLI del punto de entrada y exporta un nuevo conjunto de APIs experimentales en JavaScript, que incluyen `dev()`, `build()`, `preview()` y `sync()`.

#### ¬øQu√© debo hacer?

Para [ejecutar la CLI de Astro de manera program√°tica](/es/reference/cli-reference/#apis-avanzadas-experimental), utiliza las nuevas APIs experimentales en JavaScript:

```js
import { dev, build } from "astro";

// Inicia el servidor de desarrollo de Astro
const devServer = await dev();
await devServer.stop();

// Construye tu proyecto de Astro
await build();
```

### Cambiado: Rutas de exportaci√≥n de puntos de entrada de la API interna de Astro

En Astro v2.x, pod√≠as importar las APIs internas de Astro desde `astro/internal/*` y `astro/runtime/server/*`.

Astro v3.0 elimina los dos puntos de entrada a favor del punto de entrada existente `astro/runtime/*`. Adem√°s, se ha agregado una nueva exportaci√≥n `astro/compiler-runtime` para el c√≥digo de runtime espec√≠fico del compilador.

#### ¬øQu√© debo hacer?

Estos son puntos de entrada para la API interna de Astro y no deber√≠an afectar tu proyecto. Pero si utilizas estos puntos de entrada, actualiza como se muestra a continuaci√≥n:

```js del={1,4,10} ins={2,5,11}
import 'astro/internal/index.js';
import 'astro/runtime/server/index.js';

import 'astro/server/index.js';
import 'astro/runtime/server/index.js';
```

```js ins={5} del={4}
import { transform } from '@astrojs/compiler';

const result = await transform(source, {
  internalURL: 'astro/runtime/server/index.js',
  internalURL: 'astro/compiler-runtime',
  // ...
});
```

## Recursos de la comunidad

¬øConoces un buen recurso para Astro v3.0? ¬°[Edita esta p√°gina](https://github.com/withastro/docs/edit/main/src/content/docs/en/guides/upgrade-to/v3.mdx) y agrega un enlace a continuaci√≥n!

## Problemas conocidos

Actualmente no hay problemas conocidos.
