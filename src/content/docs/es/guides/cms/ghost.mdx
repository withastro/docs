---
title: Ghost y Astro
description: Agrega contenido a tu proyecto Astro usando Ghost como CMS
type: cms
stub: false
service: Ghost
i18nReady: true
---

import FileTree from '~/components/FileTree.astro'
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'

[Ghost](https://github.com/TryGhost/Ghost) es un sistema de gesti칩n de contenido de c칩digo abierto, headless y construido en Node.js.

## Integraci칩n con Astro
En esta secci칩n, usaremos la [API de contenido de Ghost](https://ghost.org/docs/content-api/) para traer tus datos a tu proyecto Astro.

### Prerrequisitos
Para comenzar, necesitar치s lo siguiente:

1. **Un proyecto Astro** - Si a칰n no tienes un proyecto Astro, nuestra [gu칤a de instalaci칩n](/es/install/auto/) te ayudar치 a comenzar en cuesti칩n de minutos.

2. **Un sitio Ghost** - Se supone que tienes un sitio configurado con Ghost. Si no, puedes configurar uno en un [entorno local.](https://ghost.org/docs/install/local/)

3. **Llave API de contenido** - Puedes crear una integraci칩n en la secci칩n `Configuraci칩n > Integraciones` de tu sitio. Desde all칤 puedes encontrar tu `Llave API de contenido`.


### Configuraci칩n de credenciales

Para agregar las credenciales de tu sitio a Astro, crea un archivo `.env` en la ra칤z de tu proyecto con la siguiente variable:


```ini title=".env"
CONTENT_API_KEY=TU_LLAVE_API
```

Ahora, deber칤as poder usar esta variable de entorno en tu proyecto.

Si quisieras tener IntelliSense para tu variable de entorno, puedes crear un archivo `env.d.ts` en el directorio `src/` y configurar `ImportMetaEnv` de la siguiente manera:

```ts title="src/env.d.ts"
interface ImportMetaEnv {
  readonly CONTENT_API_KEY: string;
}
```
:::tip
Lee m치s sobre [usar variables de entorno](/es/guides/environment-variables/) y archivos `.env` en Astro.
:::

Tu directorio ra칤z ahora deber칤a incluir estos nuevos archivos:

<FileTree title="Project Structure">
- src/
  - **env.d.ts**
- **.env**
- astro.config.mjs
- package.json
</FileTree>

### Instalaci칩n de dependencias

Para conectar con Ghost, instala el paquete oficial [`@tryghost/content-api`](https://www.npmjs.com/package/@tryghost/content-api) usando el comando de tu gestor de paquetes preferido:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm install @tryghost/content-api
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm install @tryghost/content-api
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn add @tryghost/content-api
  ```
  </Fragment>
</PackageManagerTabs>

## Creando un blog con Astro y Ghost

Con la configuaci칩n de arriba, ahora puedes crear un blog que use Ghost como CMS.

### Prerrequisitos

1. Un blog Ghost.
2. Un proyecto Astro integrado con la [API de contenido de Ghost](https://www.npmjs.com/package/@tryghost/content-api) - Consulta [integraci칩n con Astro](/es/guides/cms/ghost/#integraci칩n-con-astro) para obtener m치s detalles sobre c칩mo configurar un proyecto Astro con Ghost.

Este ejemplo crear치 una p치gina de 칤ndice que enumere las publicaciones con enlaces a p치ginas de publicaciones individuales generadas din치micamente.

### Obteniendo datos

Puedes obtener los datos de tu sitio con el paquete de la API de contenido de Ghost.

Primero, crea un archivo `ghost.ts` dentro de un directorio `lib`.

<FileTree title="Project Structure">
- src/
  - lib/
    - **ghost.ts**
  - pages/
    - index.astro
- astro.config.mjs
- package.json
</FileTree>

Inicializa una instancia de API con la API de Ghost usando la llave API de la p치gina de Integraciones del panel de control de Ghost.

```ts title="src/lib/ghost.ts"

import GhostContentAPI from '@tryghost/content-api';

// Crea una instancia de API con las credenciales del sitio
export const ghostClient = new GhostContentAPI({
    url: 'http://127.0.0.1:2368', // Esto es la URL predeterminada si tu sitio se est치 ejecutando en un entorno local
    key: import.meta.env.CONTENT_API_KEY,
    version: 'v5.0',
});

```


### Mostrando una lista de publicaciones

La p치gina `src/pages/index.astro` mostrar치 una lista de publicaciones, cada una con una descripci칩n y un enlace a su propia p치gina.


<FileTree title="Project Structure">
- src/
 - lib/
    - ghost.ts
  - pages/
    - **index.astro**
- astro.config.mjs
- package.json
</FileTree>

Impora `ghostClient()` en el frontmatter de Astro para usar el m칠todo `posts.browse()` para acceder a las publicaciones del blog de Ghost. Establece `limit: all` para recuperar todas las publicaciones.

```astro title="src/pages/index.astro"
---
import { ghostClient } from '../lib/ghost';
const posts = await ghostClient.posts
    .browse({
        limit: 'all',
    })
    .catch((err) => {
        console.error(err);
    });
---
```

Obteniendo los datos a trav칠s de la API de contenido devuelve un arreglo de objetos que contiene las [propiedades de cada publicaci칩n](https://ghost.org/docs/content-api/#posts) como:
- `title` - el t칤tulo de la publicaci칩n
- `html` - la representaci칩n HTML del contenido de la publicaci칩n
- `feature_image` - la URL de origen de la imagen destacada de la publicaci칩n
- `slug` - el slug de la publicaci칩n

Usa el arreglo `posts` devuelto de la petici칩n para mostrar una lista de publicaciones en la p치gina.


```astro title="src/pages/index.astro"
---
import { ghostClient } from '../lib/ghost';
const posts = await ghostClient.posts
    .browse({
        limit: 'all',
    })
    .catch((err) => {
        console.error(err);
    });
---

<html lang="en">
    <head>
        <title>Astro + Ghost 游놑</title>
    </head>
    <body>

        {
            posts.map((post) => (
                <a href={`/post/${post.slug}`}>
                    <h1> {post.title} </h1>
                </a>
            ))
        }
    </body>
</html>
```

### Generando p치ginas

La p치gina `src/pages/post/[slug].astro` [genera din치micamente una p치gina](/es/core-concepts/routing/#rutas-din치micas) para cada publicaci칩n.

<FileTree title="Project Structure">
- src/
 - lib/
    -  ghost.ts
  - pages/
    - index.astro
    - post/
      - **[slug].astro**
- astro.config.mjs
- package.json
</FileTree>

Importa `ghostClient()` para acceder a las publicaciones del blog usando `posts.browse()` y devuelve una publicaci칩n como props a cada una de tus rutas din치micas.

```astro title="src/pages/post/[slug].astro"
---
import { ghostClient } from '../../lib/ghost';

export async function getStaticPaths() {
    const posts = await ghostClient.posts
        .browse({
            limit: 'all',
        })
        .catch((err) => {
            console.error(err);
        });

    return posts.map((post) => {
        return {
            params: {
                slug: post.slug,
            },
            props: {
                post: post,
            },
        };
    });
}

const { post } = Astro.props;
---
```

Crea la plantilla para cada p치gina usando las propiedades de cada objeto `post`.

```astro title="src/pages/post/[slug].astro" ins={24-37}
---
import { ghostClient } from '../../lib/ghost';
export async function getStaticPaths() {
    const posts = await ghostClient.posts
        .browse({
            limit: 'all',
        })
        .catch((err) => {
            console.error(err);
        });
    return posts.map((post) => {
        return {
            params: {
                slug: post.slug,
            },
            props: {
                post: post,
            },
        };
    });
}
const { post } = Astro.props;
---
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>{post.title}</title>
    </head>
    <body>
        <img src={post.feature_image} alt={post.title} />

        <h1>{post.title}</h1>
        <p>{post.reading_time} min read</p>

        <Fragment set:html={post.html} />
    </body>
</html>
```
:::note
`<Fragment />` es un componente integrado de Astro que te permite evitar un elemento envoltorio innecesario. Esto puede ser especialmente 칰til al recuperar HTML de un CMS (por ejemplo, Ghost o [WordPress](/es/guides/cms/wordpress/)).
:::

### Publicando tu sitio
Para desplegar tu sitio visita nuestra [gu칤a de despliegue](/es/guides/deploy/) y sigue las instrucciones de tu proveedor de hosting preferido.

## Recursos de la comunidad

- Puedes empezar con esta [plantilla de Astro Ghost](https://github.com/PhilDL/astro-starter-ghost).
- Andre Carrera escribi칩 [un post de blog](https://andr.ec/posts/astro-ghost-blog/) que muestra c칩mo usar el SDK de Ghost para incrustar publicaciones y vistas previas en tu proyecto de Astro.


