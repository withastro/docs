---
type: integration
title: '@astrojs/vercel'
description: Aprende como usar el adaptador SSR @astrojs/vercel para desplegar tu proyecto de Astro.
githubURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/vercel/'
hasREADME: true
category: adapter
i18nReady: true
---

import Video from '~/components/Video.astro';

Este adaptador permite que Astro despliegue tu proyecto usando redenrizado en el servidor (SSR) en [Vercel](https://www.vercel.com/).

Aprende como desplegar tu proyecto de Astro consultando nuestra [gu칤a de despliegue en Vercel](/es/guides/deploy/vercel/).

## 쯇or qu칠 Astro Vercel?

Si est치s usando Astro como un generador de sitios est치ticos no necesitas un adaptador.

Si deseas [usar renderizado del lado del servidor (SSR)](/es/guides/server-side-rendering/), Astro requiere un adaptador que coincida con el runtime de tu despliegue.

[Vercel](https://www.vercel.com/) es una plataforma de despliegue que te permite alojar tu proyecto conect치ndote directamente a tu repositorio de GitHub. Este adaptador ajusta el proceso de compilaci칩n de Astro para preparar tu proyecto para el despliegue a trav칠s de Vercel.

## Instalaci칩n

Agrega el adaptador Vercel para habilitar SSR en tu proyecto de Astro con el comando `astro add`. Esto instalar치 el adaptador y realizar치 los cambios apropiados en tu archivo `astro.config.mjs` en un solo paso.

```sh
# Usando NPM
npx astro add vercel
# Usando Yarn
yarn astro add vercel
# Usando PNPM
pnpm astro add vercel
```

Si prefieres instalar el adaptador manualmente, completa los siguientes dos pasos:

1. Instala el adaptador Vercel en las dependencias de tu proyecto usando tu administrador de paquetes preferido. Si est치s usando npm o no est치s seguro, ejecuta esto en la terminal:

    ```bash
      npm install @astrojs/vercel
    ```

2.  Agrega dos nuevas l칤neas a tu archivo de configuraci칩n de proyecto `astro.config.mjs`.

    ```js ins={3, 6-7}
    // astro.config.mjs
    import { defineConfig } from 'astro/config';
    import vercel from '@astrojs/vercel/serverless';

    export default defineConfig({
      output: 'server',
      adapter: vercel(),
    });
    ```

### Objetivos

Puedes desplegar en diferentes objetivos:

*   `edge`: SSR dentro de una [funci칩n Edge](https://vercel.com/docs/concepts/functions/edge-functions).
*   `serverless`: SSR dentro de una [funci칩n Node.js](https://vercel.com/docs/concepts/functions/serverless-functions).
*   `static`: genera un sitio est치tico siguiendo los formatos de salida, redirecciones, etc. de Vercel.

:::note
Desplegar en el Edge tiene [sus limitaciones](https://vercel.com/docs/concepts/functions/edge-functions#known-limitations). Una funci칩n edge no puede ser m치s grande de 1 MB y no admite API nativas de Node.js, entre otras.
:::

Puedes cambiar el destino modificando la importaci칩n:


```js
import vercel from '@astrojs/vercel/edge';
import vercel from '@astrojs/vercel/serverless';
import vercel from '@astrojs/vercel/static';
```

## Uso

游닄 **[Lee la gu칤a completa para despliegue aqu칤.](/es/guides/deploy/vercel/)**

Puedes desplegar por CLI (`vercel deploy`) o conectando tu nuevo repositorio en el [Panel de Vercel](https://vercel.com/). Alternativamente, puedes crear un build de producci칩n localmente:

```sh
astro build
vercel deploy --prebuilt
```

## Configuraci칩n

Para configurar este adaptador, pasa un objeto a la invocaci칩n de funci칩n `vercel()` en `astro.config.mjs`:

### analytics

**Tipo:** `boolean`<br/>
**Disponible para:** Serverless, Edge y Est치tico<br/>
**Agregado en:** `@astrojs/vercel@3.1.0`

Puedes habilitar [Vercel Analytics](https://vercel.com/analytics) (incluyendo Web Vitals y Audiences) configurando `analytics: true`. Esto inyectar치 los scripts de seguimiento de Vercel en todas tus p치ginas.

```js
// astro.config.mjs
import { defineConfig } from 'astro/config';
import vercel from '@astrojs/vercel/serverless';

export default defineConfig({
  output: 'server',
  adapter: vercel({
    analytics: true
  })
});
```

### imagesConfig

**Tipo:** `VercelImageConfig`<br/>
**Disponible para:** Edge, Serverless, Static
**Agregado en:** `@astrojs/vercel@3.3.0`

Opciones de configuraci칩n para la [API de Optimizaci칩n de Im치genes de Vercel](https://vercel.com/docs/concepts/image-optimization). Consulta la [documentaci칩n de configuraci칩n de im치genes de Vercel](https://vercel.com/docs/build-output-api/v3/configuration#images) para obtener una lista completa de los par치metros admitidos.

```js
// astro.config.mjs
import { defineConfig } from 'astro/config';
import vercel from '@astrojs/vercel/static';
export default defineConfig({
  output: 'server',
  adapter: vercel({
    imagesConfig: {
      sizes: [320, 640, 1280]
    }
  })
});
```

### imageService

**Tipo:** `boolean`<br/>
**Disponible para:** Edge, Serverless, Static
**Agregado en:** `@astrojs/vercel@3.3.0`

Cuando est치 habilitado, se configurar치 y utilizar치 autom치ticamente un [Servicio de Im치genes](/es/reference/image-service-reference/) impulsado por la API de Optimizaci칩n de Im치genes de Vercel en producci칩n. En desarrollo, se utilizar치 en su lugar un servicio incorporado basado en Squoosh.

```js
// astro.config.mjs
import { defineConfig } from 'astro/config';
import vercel from '@astrojs/vercel/static';
export default defineConfig({
  output: 'server',
  adapter: vercel({
    imageService: true
  })
});
```

```astro
---
import { Image } from "astro:assets";
import astroLogo from "../assets/logo.png";
---
<!-- Este componente -->
<Image src={astroLogo} alt="My super logo!" />
<!-- se convertir치 en el siguiente elemento de HTML -->
<img src="/_vercel/image?url=_astro/logo.hash.png&w=...&q=..." alt="My super logo!" loading="lazy" decoding="async" width="..." height="..." />
```

### includeFiles

**Tipo:** `string[]`<br/>
**Disponible para:** Edge, Serverless

Usa esta propiedad para forzar a que los archivos se incluyan en el empaquetado de tu funci칩n. Esto es 칰til cuando notas que faltan archivos.

```js
// astro.config.mjs
import { defineConfig } from 'astro/config';
import vercel from '@astrojs/vercel/serverless';

export default defineConfig({
  output: 'server',
  adapter: vercel({
    includeFiles: ['./my-data.json']
  })
});
```

:::note
Cuando se construye para el Edge, todas las dependencias se empaquetan en un solo archivo para ahorrar espacio. **No se empaquetar치 ning칰n archivo adicional**. Por lo tanto, si *necesitas* alg칰n archivo dentro de la funci칩n, debes especificarlo en `includeFiles`.
:::

### excludeFiles

**Tipo:** `string[]`<br/>
**Disponible para:** Serverless

Utiliza esta propiedad para excluir cualquier archivo del proceso de empaquetado que de otra manera se incluir칤a.

```js
// astro.config.mjs
import { defineConfig } from 'astro/config';
import vercel from '@astrojs/vercel/serverless';

export default defineConfig({
  output: 'server',
  adapter: vercel({
    excludeFiles: ['./src/some_big_file.jpg']
  })
});
```

### Middleware de Vercel

Puedes usar el middleware de Vercel para interceptar una solicitud y redirigirla antes de enviar una respuesta. El middleware de Vercel puede ejecutarse en implementaciones de Edge, SSR y est치ticas. No necesitas instalar `@vercel/edge` para escribir middleware, pero s칤 necesitas instalarlo para usar caracter칤sticas como la geolocalizaci칩n. Para obtener m치s informaci칩n, consulta la [documentaci칩n de middleware de Vercel](https://vercel.com/docs/concepts/functions/edge-middleware).

1.  Agrega un archivo `middleware.js` en la ra칤z de tu proyecto:

    ```js
    // middleware.js
    export const config = {
      // Solo ejecuta el middleware en la ruta admin
      matcher: '/admin',
    };

    export default function middleware(request) {
      const url = new URL(request.url);
      // Puedes recuperar la ubicaci칩n IP o las cookies aqu칤.
      if (url.pathname === "/admin") {
        url.pathname = "/"
      }
      return Response.redirect(url);
    }
    ```
2.  Mientras desarrollas localmente, puedes ejecutar `vercel dev` para ejecutar el middleware. En producci칩n, Vercel lo manejar치 por ti.

:::caution
**쯀ntentando reescribir?** Actualmente, reescribir una solicitud con middleware solo funciona para archivos est치ticos.
:::

## Soluci칩n de problemas

**Un par de paquetes conocidos por ser complejos (por ejemplo: [puppeteer](https://github.com/puppeteer/puppeteer)) no admiten el empaquetado y, por lo tanto, no funcionar치n correctamente con este adaptador.** Por defecto, Vercel no incluye los archivos y paquetes instalados de npm de la carpeta `./node_modules` de tu proyecto. Para solucionar esto, el adaptador `@astrojs/vercel` empaqueta autom치ticamente la salida final de la compilaci칩n usando `esbuild`.

Para obtener ayuda, consulta el canal `#support` en [Discord](https://astro.build/chat). 춰Nuestros amables miembros del equipo de soporte est치n aqu칤 para ayudarte!

## Contribuyendo

Este paquete es mantenido por el equipo de Astro. 춰Est치s invitado a enviar un problema o PR!

## Changelog

Consulta el [CHANGELOG.md](https://github.com/withastro/astro/tree/main/packages/integrations/vercel/CHANGELOG.md) para ver el historial de cambios en esta integraci칩n.

[astro-integration]: /es/guides/integrations-guide/
