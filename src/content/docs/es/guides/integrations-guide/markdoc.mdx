---
type: integration
title: '@astrojs/markdoc'
description: Aprende a usar la integraci贸n @astrojs/markdoc en tu proyecto Astro.
githubURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/markdoc/'
hasREADME: true
category: other
i18nReady: true
---

import Video from '~/components/Video.astro';


Esta **[integraci贸n de Astro][astro-integration]** permite el uso de [Markdoc](https://markdoc.dev/) para crear componentes, p谩ginas y entradas de colecciones de contenido.

## 驴Por qu茅 Markdoc?

Markdoc te permite mejorar tu Markdown con [componentes Astro][astro-components]. Si tienes contenido existente escrito en Markdoc, esta integraci贸n te permite traer esos archivos a tu proyecto Astro usando colecciones de contenido.

## Instalaci贸n

### Instalaci贸n r谩pida

La herramienta de l铆nea de comandos `astro add` automatiza la instalaci贸n por ti. Ejecuta uno de los siguientes comandos en una nueva ventana de terminal. (Si no est谩s seguro de qu茅 gestor de paquetes est谩s usando, ejecuta el primer comando.) Luego, sigue las indicaciones y escribe "y" en la terminal (que significa "s铆") para cada una.

```sh
# Usando NPM
npx astro add markdoc
# Usando Yarn
yarn astro add markdoc
# Usando PNPM
pnpm astro add markdoc
```

Si tienes alg煤n problema, [no dudes en reportarlo en GitHub](https://github.com/withastro/astro/issues) e intenta los pasos de instalaci贸n manual a continuaci贸n.

### Instalaci贸n manual

Primero, instala el paquete `@astrojs/markdoc` usando tu gestor de paquetes. Si est谩s usando npm o no est谩s seguro, ejecuta esto en la terminal:

```sh
npm install @astrojs/markdoc
```

Luego, aplica esta integraci贸n a tu archivo `astro.config.*` usando la propiedad `integrations`:

**`astro.config.mjs`**

```js ins={2} "markdoc()"
import { defineConfig } from 'astro/config';
import markdoc from '@astrojs/markdoc';

export default defineConfig({
  // ...
  integrations: [markdoc()],
});
```

### Integraci贸n del editor

[VS Code](https://code.visualstudio.com/) admite Markdown de forma predeterminada. Sin embargo, para el soporte del editor Markdoc, es posible que desees agregar la siguiente configuraci贸n en tu configuraci贸n de VSCode. Esto garantiza que la creaci贸n de archivos Markdoc proporcione una experiencia de edici贸n similar a Markdown.

```json title=".vscode/settings.json"
{
  "files.associations": {
    "*.mdoc": "markdown"
  }
}
```

## Uso

Los archivos Markdoc solo se pueden usar dentro de las colecciones de contenido. Agrega entradas a cualquier colecci贸n de contenido usando la extensi贸n `.mdoc`:

```sh

```sh
src/content/docs/
  why-markdoc.mdoc
  quick-start.mdoc
```

Luego, consulta tu colecci贸n usando las [APIs de colecciones de contenido](/es/guides/content-collections/#querying-collections):

```astro
---
import { getEntryBySlug } from 'astro:content';

const entry = await getEntryBySlug('docs', 'why-markdoc');
const { Content } = await entry.render();
---

<!--Accede a las propiedades del frontmatter con `data`-->
<h1>{entry.data.title}</h1>
<!--Renderiza el contenido Markdoc con el componente de contenido-->
<Content />
```

 Ve la [documentaci贸n de Astro sobre Colecciones de Contenido][astro-content-collections] para m谩s informaci贸n.

## Configuraci贸n

`@astrojs/markdoc` offers configuration options to use all of Markdoc's features and connect UI components to your content.

### Usa componentes Astro como etiquetas Markdoc

Puedes configurar [etiquetas Markdoc][markdoc-tags] que se mapean a componentes `.astro`. Puedes agregar una nueva etiqueta creando un archivo `markdoc.config.mjs|ts` en la ra铆z de tu proyecto y configurando el atributo `tag`.

Este ejemplo renderiza un componente `Aside`, y permite que se pase una prop `type` como una cadena:

```js
// markdoc.config.mjs
import { defineMarkdocConfig } from '@astrojs/markdoc/config';
import Aside from './src/components/Aside.astro';

export default defineMarkdocConfig({
  tags: {
    aside: {
      render: Aside,
      attributes: {
        // Markdoc requires type defs for each attribute.
        // These should mirror the `Props` type of the component
        // you are rendering.
        // See Markdoc's documentation on defining attributes
        // https://markdoc.dev/docs/attributes#defining-attributes
        type: { type: String },
      },
    },
  },
});
```

Este componente ahora se puede usar en tus archivos Markdoc con la etiqueta `{% aside %}`. Los hijos se pasar谩n a la ranura predeterminada de tu componente:

```md
# Welcome to Markdoc 

{% aside type="tip" %}

Usa etiquetas como esta elegante "aside" para agregar un poco de _flair_ a tus documentos.

{% /aside %}
```

### Encabezados personalizados

`@astrojs/markdoc` automaticamente agrega enlaces a tus encabezados, y [genera una lista de `headings` a trav茅s de la API de colecciones de contenido](/es/guides/content-collections/#rendering-content-to-html). Para personalizar a煤n m谩s c贸mo se renderizan los encabezados, puedes aplicar un componente Astro [como un nodo Markdoc][markdoc-nodes].

Este ejemplo renderiza un componente `Heading.astro` usando la propiedad `render`:

```js
// markdoc.config.mjs
import { defineMarkdocConfig, nodes } from '@astrojs/markdoc/config';
import Heading from './src/components/Heading.astro';

export default defineMarkdocConfig({
  nodes: {
    heading: {
      ...nodes.heading, // Preserva la generaci贸n predeterminada de enlaces
      render: Heading,
    },
  },
});
```

Todos los encabezados Markdown renderizar谩n el componente `Heading.astro` y pasar谩n los siguientes `attributes` como props del componente:

*   `level: number` El nivel de encabezado 1 - 6
*   `id: string` Un `id` generado a partir del contenido de texto del encabezado. Esto corresponde al `slug` generado por la [funci贸n `render()` de contenido](/es/guides/content-collections/#rendering-content-to-html).

Por ejemplo, el encabezado `### Level 3 heading!` pasar谩 `level: 3` e `id: 'level-3-heading'` como props del componente.

### Resaltado de sintaxis

`@astrojs/markdoc` proporciona extensiones de [Shiki](https://github.com/shikijs/shiki) y [Prism](https://github.com/PrismJS) para resaltar tus bloques de c贸digo.

#### Shiki

Aplica la extensi贸n `shiki()` a tu configuraci贸n Markdoc usando la propiedad `extends`. Opcionalmente puedes pasar un objeto de configuraci贸n de shiki:

```js
// markdoc.config.mjs
import { defineMarkdocConfig } from '@astrojs/markdoc/config';
import shiki from '@astrojs/markdoc/shiki';

export default defineMarkdocConfig({
  extends: [
    shiki({
      // Escoge de los temas integrados de Shiki (o agrega el tuyo)
      // Por defecto: 'github-dark'
      // https://github.com/shikijs/shiki/blob/main/docs/themes.md
      theme: 'dracula',
      // Habilita el ajuste de palabras para evitar el desplazamiento horizontal
      // Por defecto: false
      wrap: true,
      // Pasa lenguajes personalizados
      // Nota: Shiki tiene innumerables lenguajes integrados, 隆incluyendo `.astro`!
      // https://github.com/shikijs/shiki/blob/main/docs/languages.md
      langs: [],
    }),
  ],
});
```

#### Prism

Aplica la extensi贸n `prism()` a tu configuraci贸n Markdoc usando la propiedad `extends`.

```js
// markdoc.config.mjs
import { defineMarkdocConfig } from '@astrojs/markdoc/config';
import prism from '@astrojs/markdoc/prism';

export default defineMarkdocConfig({
  extends: [prism()],
});
```

 Para aprender acerca de como configurar las hojas de estilo de Prism, [ve nuestra gu铆a de resaltado de sintaxis](/es/guides/markdown-content/#prism-configuration).

### Configura el elemento HTML ra铆z

Markdoc envuelve los documentos con una etiqueta `<article>` de forma predeterminada. Esto se puede cambiar desde el nodo `document` de Markdoc. Esto acepta un nombre de elemento HTML o `null` si prefieres eliminar el elemento de envoltura:

```js
// markdoc.config.mjs
import { defineMarkdocConfig, nodes } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  nodes: {
    document: {
      ...nodes.document, // Aplica los valores predeterminados para otras opciones
      render: null, // por defecto 'article'
    },
  },
});
```

### Nodos personalizados de Markdoc / elementos

Es posible que desees renderizar elementos Markdown est谩ndar, como p谩rrafos y texto en negrita, como componentes Astro. Para esto, puedes configurar un [nodo Markdoc][markdoc-nodes]. Si un nodo determinado recibe atributos, estar谩n disponibles como props del componente.

Este ejemplo renderiza bloques de citas con un componente `Quote.astro` personalizado:

```js
// markdoc.config.mjs
import { defineMarkdocConfig, nodes } from '@astrojs/markdoc/config';
import Quote from './src/components/Quote.astro';

export default defineMarkdocConfig({
  nodes: {
    blockquote: {
      ...nodes.blockquote, // Aplica los valores predeterminados de Markdoc para otras opciones
      render: Quote,
    },
  },
});
```

 [Encuentra todos los nodos integrados de Markdoc y los atributos de nodo en su documentaci贸n.](https://markdoc.dev/docs/nodes#built-in-nodes)

### Usa componentes de UI del lado del cliente

Tags and nodes are restricted to `.astro` files. To embed client-side UI components in Markdoc, [use a wrapper `.astro` component that renders a framework component](https://github.com/withastro/astro/tree/main/packages/integrations/markdoc/en/core-concepts/framework-components/#nesting-framework-components) with your desired `client:` directive.

This example wraps a React `Aside.tsx` component with a `ClientAside.astro` component:

```astro
---
// src/components/ClientAside.astro
import Aside from './Aside';
---

<Aside {...Astro.props} client:load />
```

This Astro component can now be passed to the `render` prop for any [tag][markdoc-tags] or [node][markdoc-nodes] in your config:

```js
// markdoc.config.mjs
import { defineMarkdocConfig } from '@astrojs/markdoc/config';
import ClientAside from './src/components/ClientAside.astro';

export default defineMarkdocConfig({
  tags: {
    aside: {
      render: ClientAside,
      attributes: {
        type: { type: String },
      },
    },
  },
});
```

### Markdoc config

El archivo `markdoc.config.mjs|ts` acepta [todas las opciones de configuraci贸n de Markdoc](https://markdoc.dev/docs/config), incluyendo [tags](https://markdoc.dev/docs/tags) y [functions](https://markdoc.dev/docs/functions).

Puedes pasar estas opciones desde la exportaci贸n predeterminada en tu archivo `markdoc.config.mjs|ts`:

```js
// markdoc.config.mjs
import { defineMarkdocConfig } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  functions: {
    getCountryEmoji: {
      transform(parameters) {
        const [country] = Object.values(parameters);
        const countryToEmojiMap = {
          japan: '',
          spain: '',
          france: '',
        };
        return countryToEmojiMap[country] ?? '';
      },
    },
  },
});
```

Ahora, puedes llamar a esta funci贸n desde cualquier entrada de contenido de Markdoc:

```md
隆Hola {% getCountryEmoji("spain") %}!
```

 [Ve la documentaci贸n de Markdoc](https://markdoc.dev/docs/functions#creating-a-custom-function) para m谩s informaci贸n sobre el uso de variables o funciones en tu contenido.

### Pasa variables de Markdoc

Es posible que necesites pasar [variables][markdoc-variables] a tu contenido. Esto es 煤til cuando pasas par谩metros SSR como pruebas A/B.

Las variables pueden pasarse como props a trav茅s del componente `Content`:

```astro
---
import { getEntryBySlug } from 'astro:content';

const entry = await getEntryBySlug('docs', 'why-markdoc');
const { Content } = await entry.render();
---

<!--Pass the `abTest` param as a variable-->
<Content abTestGroup={Astro.params.abTestGroup} />
```

Ahora, `abTestGroup` esta disponible como una variable en `docs/why-markdoc.mdoc`:

```md
{% if $abTestGroup === 'image-optimization-lover' %}

D茅jame contarte sobre la optimizaci贸n de im谩genes...

{% /if %}
```

Para hacer una variable global para todos los archivos Markdoc, puedes usar el atributo `variables` de tu `markdoc.config.mjs|ts`:

```js
import { defineMarkdocConfig } from '@astrojs/markdoc/config';

export default defineMarkdocConfig({
  variables: {
    environment: process.env.IS_PROD ? 'prod' : 'dev',
  },
});
```

### Accede al frontmatter desde tu contenido Markdoc

Para acceder al frontmatter, puedes pasar la propiedad de entrada `data` [como una variable](#pasa-variables-de-markdoc) donde renderizas tu contenido:

```astro
---
import { getEntry } from 'astro:content';

const entry = await getEntry('docs', 'why-markdoc');
const { Content } = await entry.render();
---

<Content frontmatter={entry.data} />
```

Esto ahora puede ser accedido como `$frontmatter` en tu Markdoc.

## Ejemplos

*   La [plantilla de inicio Astro Markdoc](https://github.com/withastro/astro/tree/latest/examples/with-markdoc) muestra como usar archivos Markdoc en tu proyecto Astro.

## Soluci贸n de problemas

Para obtener ayuda, revisa el canal `#support` en [Discord](https://astro.build/chat). 隆Los miembros de nuestro amigable equipo de soporte est谩n aqu铆 para ayudarte!

Tambi茅n puedes revisar nuestra [Documentaci贸n de integraci贸n de Astro][astro-integration] para m谩s informaci贸n sobre integraciones.

## Contribuyendo

Este paquete es mantenido por el equipo central de Astro. 隆Eres bienvenido a enviar un issue o PR!

## Changelog

Ve el [CHANGELOG.md](https://github.com/withastro/astro/tree/main/packages/integrations/markdoc/CHANGELOG.md) para ver el historial de cambios de esta integraci贸n.

[astro-integration]: /es/guides/integrations-guide/

[astro-components]: /es/core-concepts/astro-components/

[astro-content-collections]: /es/guides/content-collections/

[markdoc-tags]: https://markdoc.dev/docs/tags

[markdoc-nodes]: https://markdoc.dev/docs/nodes

[markdoc-variables]: https://markdoc.dev/docs/variables
