---
type: integration
title: '@astrojs/preact'
description: Aprende como usar la integraci贸n @astrojs/preact para ampliar la compatibilidad de Alpinejs en tu proyecto de Astro.
githubIntegrationURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/preact/'
category: renderer
i18nReady: true
---

import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'
import Since from '~/components/Since.astro';

Esta **[integraci贸n de Astro][astro-integration]** habilita el renderizado del lado del servidor y la hidrataci贸n del lado del cliente para tus componentes de [Preact](https://preactjs.com/).

## 驴Por qu茅 Preact?

Preact es una biblioteca que te permite construir componentes UI interactivos para la web. Si deseas crear caracter铆sticas interactivas en tu sitio web utilizando JavaScript, es posible que prefieras usar su formato de componentes en lugar de usar directamente las API del navegador.

Preact tambi茅n es una gran opci贸n si has utilizado anteriormente React. Preact proporciona la misma API que React, pero en un paquete mucho m谩s peque帽o de 3kB. Incluso admite la representaci贸n de muchos componentes de React mediante la opci贸n de configuraci贸n `compat` (consulta a continuaci贸n).

**驴Quieres aprender m谩s sobre Preact antes de usar esta integraci贸n?**\
Revisa [Aprende Preact](https://preactjs.com/tutorial), un tutorial interactivo en su sitio web.

## Instalaci贸n

Astro incluye un comando `astro add` para automatizar la configuraci贸n de las integraciones oficiales. Si lo prefieres, puedes [instalar las integraciones manualmente](#instalaci贸n-manual) en su lugar.

Para instalar `@astrojs/preact`, ejecuta lo siguiente desde el directorio de tu proyecto y sigue las indicaciones:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npx astro add preact
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm astro add preact
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn astro add preact
  ```
  </Fragment>
</PackageManagerTabs>

Si tienes alg煤n problema, [no dudes en informarnos en GitHub](https://github.com/withastro/astro/issues) y prueba los pasos de instalaci贸n manual a continuaci贸n.

### Instalaci贸n manual

Primero, instala el paquete `@astrojs/preact`:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npm install @astrojs/preact
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm add @astrojs/preact
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn add @astrojs/preact
  ```
  </Fragment>
</PackageManagerTabs>

La mayor铆a de los gestores de paquetes instalar谩n las dependencias asociadas tambi茅n. Si ves un mensaje de advertencia "Cannot find package 'preact'" (o similar) cuando inicias Astro, deber谩s instalar Preact:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npm install preact
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm add preact
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn add preact
  ```
  </Fragment>
</PackageManagerTabs>

Luego, aplica la integraci贸n a tu archivo `astro.config.*` utilizando la propiedad `integrations`:

```js title="astro.config.mjs" ins={2} ins="preact()"
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';

export default defineConfig({
  // ...
  integrations: [preact()],
});
```

Y a帽ade el siguiente c贸digo al archivo `tsconfig.json`.

```json title="tsconfig.json" ins={5-8}
{
  "extends": "astro/tsconfigs/strict",
  "include": [".astro/types.d.ts", "**/*"],
  "exclude": ["dist"],
  "compilerOptions": {
    "jsx": "react-jsx",
    "jsxImportSource": "preact"
  }
}
```

## Uso

Para usar tu primer componente de Preact en Astro, dir铆gete a nuestra [documentaci贸n de frameworks UI][astro-ui-frameworks]. All铆 explorar谩s:

*  c贸mo se cargan los componentes del framework,
*  opciones de hidrataci贸n en el lado del cliente, y
*  oportunidades para mezclar y anidar diferentes frameworks juntos.

Tambi茅n puedes revisar nuestra [Documentaci贸n de Integraci贸n de Astro][astro-integration] para obtener m谩s informaci贸n sobre las integraciones.

## Configuraci贸n

La integraci贸n de Astro con Preact se encarga de c贸mo se renderizan los componentes de Preact y tiene sus propias opciones. Puedes cambiar estas opciones en el archivo `astro.config.mjs` donde se encuentran las configuraciones de integraci贸n de tu proyecto.

Para el uso b谩sico, no es necesario configurar la integraci贸n de Preact en Astro.

### compat

Puedes habilitar `preact/compat`, la capa de compatibilidad de Preact para renderizar componentes de React sin necesidad de instalar o enviar las bibliotecas m谩s grandes de React a los navegadores web de tus usuarios.

Para hacerlo, pasa un objeto a la integraci贸n de Preact y establece `compat: true`.

```js title="astro.config.mjs" "compat: true"
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';

export default defineConfig({
  integrations: [preact({ compat: true })],
});
```

Con la opci贸n `compat` habilitada, la integraci贸n de Preact renderizar谩 tanto los componentes de React como los componentes de Preact en tu proyecto y tambi茅n te permitir谩 importar componentes de React dentro de componentes de Preact. Lee m谩s en [Cambiando a Preact (de React)](https://preactjs.com/guide/v10/switching-to-preact) en el sitio web de Preact.

Cuando se importan librer铆as de componentes de React, para reemplazar las dependencias `react` y `react-dom` como `preact/compat`, puedes utilizar [`overrides`](https://docs.npmjs.com/cli/v8/configuring-npm/package-json#overrides) para hacerlo.

```json
// package.json
{
  "overrides": {
    "react": "npm:@preact/compat@latest",
    "react-dom": "npm:@preact/compat@latest"
  }
}
```

Consulta las documentaci贸nes de [`pnpm` overrides](https://pnpm.io/package_json#pnpmoverrides) y [`yarn` resolutions](https://yarnpkg.com/configuration/manifest#resolutions) para conocer sus respectivas caracter铆sticas de anulaci贸n de dependencias.

:::note
Actualmente, la opci贸n `compat` solo funciona para las bibliotecas de React que exportan c贸digo como ESM. Si ocurre un error durante la compilaci贸n, intenta agregar la biblioteca a `vite.ssr.noExternal: ['the-react-library']` en tu archivo `astro.config.mjs`.
:::

### devtools

<p><Since pkg="@astrojs/preact" v="3.3.0" /></p>

Puedes habilitar las [herramientas de desarrollo de Preact](https://preactjs.github.io/preact-devtools/) en desarrollo pasando un objeto con `devtools: true` a la configuraci贸n de tu integraci贸n `preact()`:

```js title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';

export default defineConfig({
  // ...
  integrations: [preact({ devtools: true })],
});
```

## Opciones

### Combinando m煤ltiples frameworks JSX

Cuando est谩s utilizando m煤ltiples frameworks JSX (React, Preact, Solid) en el mismo proyecto, Astro necesita determinar qu茅 transformaciones espec铆ficas del framework JSX deben usarse para cada uno de tus componentes. Si solo has agregado una integraci贸n de framework JSX a tu proyecto, no se necesita configuraci贸n adicional.

Utiliza las opciones de configuraci贸n `include` (obligatoria) y `exclude` (opcional) para especificar qu茅 archivos pertenecen a qu茅 framework. Proporciona un array de archivos y/o carpetas en `include` para cada framework que est茅s utilizando. Puedes utilizar comodines para incluir m煤ltiples rutas de archivo.

Recomendamos colocar los componentes comunes de los frameworks en la misma carpeta (p. ej. `/components/react/` y `/components/solid/`) para facilitar la especificaci贸n de tus inclusiones, pero esto no es obligatorio:

```js title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';
import react from '@astrojs/react';
import svelte from '@astrojs/svelte';
import vue from '@astrojs/vue';
import solid from '@astrojs/solid-js';

export default defineConfig({
  // Habilita varios frameworks para admitir todo tipo de componentes diferentes.
  // 隆No se necesita `include` si solo est谩s utilizando un solo framework JSX!
  integrations: [
    preact({
      include: ['**/preact/*'],
    }),
    react({
      include: ['**/react/*'],
    }),
    solid({
      include: ['**/solid/*'],
    }),
  ],
});
```

## Ejemplos

* El [ejemplo Astro Preact](https://github.com/withastro/astro/tree/latest/examples/framework-preact) muestra c贸mo utilizar un componente interactivo de Preact en un proyecto de Astro.
* El [ejemplo de Astro Nanostores](https://github.com/withastro/astro/tree/latest/examples/with-nanostores) muestra c贸mo compartir el estado entre diferentes componentes, e incluso diferentes frameworks, en un proyecto de Astro.

[astro-integration]: /es/guides/integrations-guide/

[astro-ui-frameworks]: /es/guides/framework-components/#usando-componente-de-framework
