---
type: integration
title: '@astrojs/lit'
description: Aprende c贸mo utilizar la integraci贸n del framework @astrojs/lit para extender el soporte de componentes en tu proyecto Astro.
githubIntegrationURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/lit/'
category: renderer
i18nReady: true
---
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'


Esta **[integraci贸n de Astro][astro-integration]** permite renderizaci贸n en el servidor e hidrataci贸n en el cliente para tus elementos personalizados de [Lit](https://lit.dev/).

## Instalaci贸n

Astro incluye un comando `astro add` para automatizar la configuraci贸n de las integraciones oficiales. Si lo prefieres, puedes [instalar las integraciones manualmente](#instalaci贸n-manual) en su lugar.

Para instalar `@astrojs/lit`,  ejecuta lo siguiente desde el directorio de tu proyecto y sigue las indicaciones:

<PackageManagerTabs>
  <Fragment slot="npm">
    ```sh
    npx astro add lit
    ```
  </Fragment>
  <Fragment slot="pnpm">
    ```sh
    pnpm astro add lit
    ```
  </Fragment>
  <Fragment slot="yarn">
    ```sh
    yarn astro add lit
    ```
  </Fragment>
</PackageManagerTabs>

Si tienes alg煤n problema, [no dudes en inform谩rnoslo en GitHub](https://github.com/withastro/astro/issues) y prueba los pasos de instalaci贸n manual a continuaci贸n.

### Instalaci贸n manual

Primero, instala el paquete `@astrojs/lit`:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npm install @astrojs/lit
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm add @astrojs/lit
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn add @astrojs/lit
  ```
  </Fragment>
</PackageManagerTabs>

La mayor铆a de los gestores de paquetes tambi茅n instalar谩n las dependencias asociadas.  Sin embargo, si ves un aviso "No se puede encontrar el paquete 'lit'" (o similar) al iniciar Astro, tendr谩s que instalar `lit` y `@webcomponents/template-shadowroot`:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npm install lit @webcomponents/template-shadowroot
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm add lit @webcomponents/template-shadowroot
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn add lit @webcomponents/template-shadowroot
  ```
  </Fragment>
</PackageManagerTabs>

Luego, aplica la integraci贸n a tu archivo `astro.config.*` usando la propiedad `integrations`:

```js ins={2} ins="lit()" title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import lit from '@astrojs/lit';

export default defineConfig({
  // ...
  integrations: [lit()],
});
```

## Empezando

Para usar tu primer componente React en Astro, dir铆gete a nuestra [documentaci贸n de frameworks UI][astro-ui-frameworks]. Explorar谩s:

*  como se cargan los componentes de framework,
*  opciones de hidrataci贸n del lado del cliente, y
*  oportunidades para mezclar y anidar frameworks juntos

Escribir e importar un componente de Lit en Astro se ve as铆:

```js title="src/components/my-element.js"
import { LitElement, html } from 'lit';

export class MyElement extends LitElement {
  render() {
    return html`<p>Hello world! From my-element</p>`;
  }
}

customElements.define('my-element', MyElement);
```

Ahora, el componente est谩 listo para ser importado a trav茅s del frontmatter de Astro:

```astro title="src/pages/index.astro"
---
import { MyElement } from '../components/my-element.js';
---

<MyElement />
```

:::note
Lit requiere que los globales del navegador, como `HTMLElement` y `customElements`, est茅n presentes. Por esta raz贸n, el renderizador de Lit simula estos globales en el servidor para que Lit pueda funcionar. Es *posible* que te encuentres con bibliotecas que funcionen incorrectamente debido a esto.
:::

### Decoradores Experimentales

Para utilizar los [decoradores experimentales en Lit](https://lit.dev/docs/components/decorators/), agrega las siguientes lineas en tu archivo `tsconfig.json`:

```json title="tsconfig.json" add={3}
{
  "compilerOptions": {
    "experimentalDecorators": true,
  }
}
```

Esto te permite utilizar los decoradores experimentales como `@customElement` y `@state` para registrar un elemento personalizado y definir una propiedad de estado en tu componente Lit:

```ts title="src/components/my-element.ts"
import { LitElement, html } from "lit";
import { customElement, state } from "lit/decorators.js";

@customElement("my-element")
export class MyElement extends LitElement {
    @state() name = "my-element";

    override render() {
        return html`<p>隆Hola Mundo! Desde ${this.name}</p>`;
    }
}
```

### Polyfills y Hidrataci贸n

El renderizador maneja autom谩ticamente la adici贸n de los polifills adecuados para brindar soporte en navegadores que no tienen Declarative Shadow DOM. El polifill tiene un tama帽o aproximado de *1.5kB*. Si el navegador admite Declarative Shadow DOM, se cargan menos de 250 bytes (para detectar la compatibilidad con la funci贸n).

La hidrataci贸n tambi茅n se maneja autom谩ticamente. Puedes usar las mismas directivas de hidrataci贸n, como `client:load`, `client:idle` y `client:visible`, como lo har铆as con otras bibliotecas compatibles con Astro.

```astro
---
import { MyElement } from '../components/my-element.js';
---

<MyElement client:visible />
```

Lo anterior solo cargar谩 el JavaScript del elemento cuando el usuario lo haya desplazado a la vista. Dado que se renderiza en el servidor, el usuario no ver谩 ning煤n parpadeo; se cargar谩 y se hidratar谩 de manera transparente.

## Soluci贸n de problemas

Para obtener ayuda, consulta el canal `#support` en [Discord](https://astro.build/chat). 隆Nuestros amables miembros del Equipo de Soporte est谩n aqu铆 para ayudar!

Tambi茅n puedes consultar nuestra [documentaci贸n de integraci贸n de Astro][astro-integration] para obtener m谩s informaci贸n sobre las integraciones.

A continuaci贸n se enumeran algunos problemas comunes:

### Globales del navegador

La renderizaci贸n del lado del servidor (SSR) de la integraci贸n de Lit funciona mediante la adici贸n de algunas propiedades globales del navegador al entorno global. Algunas de las propiedades que se agregan incluyen `window`, `document` y `location`.

Estos globales *pueden* interferir con otras bibliotecas que utilizan la existencia de estas variables para detectar que se est谩n ejecutando en el navegador, cuando en realidad se est谩n ejecutando en el servidor. Esto puede provocar errores en estas bibliotecas.

Debido a esto, la integraci贸n de Lit puede no ser compatible con este tipo de bibliotecas. Una cosa que puede ayudar es cambiar el orden de las integraciones cuando Lit interfiere con otras integraciones:

```js lang="js" title="astro.config.mjs" ins={7} del={6}
  import { defineConfig } from 'astro/config';
  import vue from '@astrojs/vue';
  import lit from '@astrojs/lit';

  export default defineConfig({
    integrations: [vue(), lit()]
    integrations: [lit(), vue()]
  });
```

El orden correcto puede variar seg煤n la causa subyacente del problema. Sin embargo, no se garantiza que esto solucione todos los problemas, y algunas bibliotecas no se pueden utilizar si est谩s utilizando la integraci贸n de Lit debido a esto.

### Gestores de paquetes estrictos

Cuando utilizas un [gestor de paquetes estricto](https://pnpm.io/pnpm-vs-npm#npms-flat-tree) como `pnpm`, es posible que obtengas un error como `ReferenceError: module is not defined` al ejecutar tu sitio. Para solucionar esto, debes elevar las dependencias de Lit con un archivo `.npmrc`:

```ini title=".npmrc"
public-hoist-pattern[]=*lit*
```

### Limitaciones

- La integraci贸n de Lit est谩 impulsada por `@lit-labs/ssr`que tiene algunas limitaciones. Consulta su [documentaci贸n de limitaciones](https://www.npmjs.com/package/@lit-labs/ssr#notes-and-limitations) para obtener m谩s informaci贸n al respecto.

- Astro no admite componentes IntelliSense para Lit.

[astro-integration]: /es/guides/integrations-guide/

[astro-ui-frameworks]: /es/guides/framework-components/#usando-componente-de-framework
