---
type: integration
title: '@astrojs/lit'
description: Aprende c贸mo utilizar la integraci贸n del framework @astrojs/lit para extender el soporte de componentes en tu proyecto Astro.
githubURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/lit/'
hasREADME: true
category: renderer
i18nReady: true
---

import Video from '~/components/Video.astro';

Esta **[integraci贸n de Astro][astro-integration]** permite renderizaci贸n en el servidor e hidrataci贸n en el cliente para tus elementos personalizados de [Lit](https://lit.dev/).

## Instalaci贸n

Hay dos formas de agregar integraciones a tu proyecto. 隆Intentemos primero la opci贸n m谩s conveniente!

### Comando `astro add`

Astro incluye una herramienta CLI para agregar integraciones: `astro add`. Este comando har谩:

1.  (Opcionalmente) Instalar todas las dependencias necesarias y dependencias pares asociadas
2.  (Tambi茅n opcionalmente) Actualizar tu archivo `astro.config.*` para aplicar esta integraci贸n

Para instalar `@astrojs/lit`,  ejecuta lo siguiente desde el directorio de tu proyecto y sigue las indicaciones:

```sh
# Usando NPM
npx astro add lit
# Usando Yarn
yarn astro add lit
# Usando PNPM
pnpm astro add lit
```

Si tienes alg煤n problema, [no dudes en inform谩rnoslo en GitHub](https://github.com/withastro/astro/issues) y prueba los pasos de instalaci贸n manual a continuaci贸n.

### Instalar dependencias manualmente

Primero, instala la integraci贸n `@astrojs/lit` de la siguiente manera:

```sh
npm install @astrojs/lit
```

La mayor铆a de los gestores de paquetes tambi茅n instalar谩n las dependencias de pares asociadas. Sin embargo, si ves una advertencia de "No se puede encontrar el paquete 'lit'" (o similar) cuando inicias Astro, necesitar谩s instalar `lit` y `@webcomponents/template-shadowroot` de la siguiente manera:

```sh
npm install lit @webcomponents/template-shadowroot
```

Ahora, aplica esta integraci贸n a tu archivo `astro.config.*` utilizando la propiedad `integrations`:

**`astro.config.mjs`**

```js ins={2} "lit()"
import { defineConfig } from 'astro/config';
import lit from '@astrojs/lit';

export default defineConfig({
  // ...
  integrations: [lit()],
});
```

## Empezando

Para usar tu primer componente React en Astro, dir铆gete a nuestra [documentaci贸n de framework UI][astro-ui-frameworks]. Explorar谩s:

*    como se cargan los componentes de framework,
*    opciones de hidrataci贸n del lado del cliente, y
*    oportunidades para mezclar y anidar frameworks juntos

Sin embargo, hay una diferencia clave con los *elementos personalizados* de Lit en comparaci贸n con los *componentes convencionales*:  puedes utilizar directamente el nombre de la etiqueta del elemento.

Astro necesita saber qu茅 etiqueta est谩 asociada con qu茅 script de componente. Exponemos esto mediante la exportaci贸n de una variable `tagName` desde el script del componente. Se ve as铆:

**`src/components/my-element.js`**

```js
import { LitElement, html } from 'lit';

const tagName = 'my-element';

export class MyElement extends LitElement {
  render() {
    return html` <p>Hello world! From my-element</p> `;
  }
}

customElements.define(tagName, MyElement);
```

> Ten en cuenta que exportar  `tagName` es **obligatorio** si deseas utilizar el nombre de la etiqueta en tus plantillas. De lo contrario, puedes exportar y utilizar el constructor, como con otros frameworks que no sean de elementos personalizados.

En tu plantilla de Astro, importa este componente como un efecto secundario y utiliza el elemento de la siguiente manera:

**`src/pages/index.astro`**

```astro
---
import {MyElement} from '../components/my-element.js';
---

<MyElement />
```

> Ten en cuenta que Lit requiere que los globales del navegador, como `HTMLElement` y `customElements`, est茅n presentes. Por esta raz贸n, el renderizador de Lit simula estos globales en el servidor para que Lit pueda funcionar. Es posible que te encuentres con bibliotecas que funcionen incorrectamente debido a esto.

### Polyfills y Hidrataci贸n

El renderizador maneja autom谩ticamente la adici贸n de los polifills adecuados para brindar soporte en navegadores que no tienen Declarative Shadow DOM. El polifill tiene un tama帽o aproximado de *1.5kB*. Si el navegador admite Declarative Shadow DOM, se cargan menos de 250 bytes (para detectar la compatibilidad con la funci贸n).

La hidrataci贸n tambi茅n se maneja autom谩ticamente. Puedes usar las mismas directivas de hidrataci贸n, como `client:load`, `client:idle` y `client:visible`, como lo har铆as con otras bibliotecas compatibles con Astro.

```astro
---
import {MyElement} from '../components/my-element.js';
---

<MyElement client:visible />
```

Lo anterior solo cargar谩 el JavaScript del elemento cuando el usuario lo haya desplazado a la vista. Dado que se renderiza en el servidor, el usuario no ver谩 ning煤n parpadeo; se cargar谩 y se hidratar谩 de manera transparente.

## Soluci贸n de problemas

Para obtener ayuda, consulta el canal `#support` en [Discord](https://astro.build/chat). 隆Nuestros amables miembros del Equipo de Soporte est谩n aqu铆 para ayudar!

Tambi茅n puedes consultar nuestra [documentaci贸n de integraci贸n de Astro][astro-integration] para obtener m谩s informaci贸n sobre las integraciones.

A continuaci贸n se enumeran algunos problemas comunes:

### Globales del navegador

La renderizaci贸n del lado del servidor (SSR) de la integraci贸n de Lit funciona mediante la adici贸n de algunas propiedades globales del navegador al entorno global. Algunas de las propiedades que se agregan incluyen `window`, `document` y `location`.

Estos globales *pueden* interferir con otras bibliotecas que utilizan la existencia de estas variables para detectar que se est谩n ejecutando en el navegador, cuando en realidad se est谩n ejecutando en el servidor. Esto puede provocar errores en estas bibliotecas.

Debido a esto, la integraci贸n de Lit puede no ser compatible con este tipo de bibliotecas. Una cosa que puede ayudar es cambiar el orden de las integraciones cuando Lit interfiere con otras integraciones:

```diff
import { defineConfig } from 'astro/config';
import vue from '@astrojs/vue';
import lit from '@astrojs/lit';

export default defineConfig({
-  integrations: [vue(), lit()]
+  integrations: [lit(), vue()]
});
```

El orden correcto puede variar seg煤n la causa subyacente del problema. Sin embargo, no se garantiza que esto solucione todos los problemas, y algunas bibliotecas no se pueden utilizar si est谩s utilizando la integraci贸n de Lit debido a esto.

### Gestores de paquetes estrictos

Cuando utilizas un [gestor de paquetes estricto](https://pnpm.io/pnpm-vs-npm#npms-flat-tree) como `pnpm`, es posible que obtengas un error como `ReferenceError: module is not defined` al ejecutar tu sitio. Para solucionar esto, debes elevar las dependencias de Lit con un archivo `.npmrc`:

```ini title=".npmrc"
public-hoist-pattern[]=*lit* 
```

### Limitaciones

La integraci贸n de Lit est谩 impulsada por `@lit-labs/ssr`que tiene algunas limitaciones. Consulta su [documentaci贸n de limitaciones](https://www.npmjs.com/package/@lit-labs/ssr#user-content-notes-and-limitations) para obtener m谩s informaci贸n al respecto.

## Contribuyendo

Este paquete es mantenido por el equipo central de Astro. 隆Est谩s invitado a enviar un problema o PR!

[astro-integration]: /es/guides/integrations-guide/

[astro-ui-frameworks]: /es/core-concepts/framework-components/#usando-componente-de-framework