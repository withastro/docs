---
title: Referencia de la API
i18nReady: true
---

import Since from '~/components/Since.astro';
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';

## `Astro` global

El objeto global `Astro` est치 disponible en todos los contextos en los archivos `.astro`. Tiene las siguientes funciones:

### `Astro.glob()`

`Astro.glob()` es una forma de cargar archivos locales en la configuraci칩n de su p치gina est치tica.

```astro
---
// ./src/components/my-component.astro
const posts = await Astro.glob('../pages/post/*.md'); // devuelve un array de art칤culos encontrados en ./src/pages/post/*.md
---

<div>
{posts.slice(0, 3).map((post) => (
  <article>
    <h2>{post.frontmatter.title}</h2>
    <p>{post.frontmatter.description}</p>
    <a href={post.url}>Read more</a>
  </article>
))}
</div>
```

`.glob()` solo toma un par치metro: la URL relativa de los archivos locales que te gustar칤a importar. Es as칤ncrono y devuelve un array con las exportaciones de los archivos coincidentes.

`.glob()` no puede tomar variables o strings que las interpolen, ya que no son analizables de manera est치tica. (Consulta la [gu칤a de soluci칩n de problemas](/es/guides/troubleshooting/#valores-compatibles) para una soluci칩n alternativa.) Esto se debe a que `Astro.glob()` es un wrapper de la funci칩n [`import.meta.glob()`](https://vitejs.dev/guide/features.html#glob-import) de Vite.

:::note
Tambi칠n puedes utilizar `import.meta.glob()` directamente en tu proyecto de Astro. Es posible que quieras hacer esto cuando:

- Necesitas esta caracter칤stica en un archivo que no sea `.astro`, como una ruta API. `Astro.glob()` solamente est치 disponible en archivos `.astro`, mientras que `import.meta.glob()` es accesible en todo el proyecto.
- No necesitas cargar cada archivo de inmediato. `import.meta.glob()` puede devolver funciones que importan el contenido del archivo, en vez de devolver el contenido en s칤. Ten en cuenta que esta importaci칩n incluye todos los estilos y scripts de cualquier archivo importado. Estos ser치n agrupados y agregados a la p치gina, ya sea que un archivo sea utilizado realmente o no. Esta decisi칩n se toma mediante an치lisis est치tico, no en tiempo de ejecuci칩n.
- Quieres acceder a la ruta de cada archivo. `import.meta.glob()` devuelve un map de la ruta del archivo a su contenido, mientras que `Astro.glob()` devuelve una lista de contenido.
- Quieres pasar m칰ltiples patrones; por ejemplo, quieres a침adir un "patr칩n negativo" que filtra ciertos archivos. `import.meta.glob()` opcionalmente puede tomar un array de strings globales en vez de un solo string.

Lee m치s en la [documentaci칩n de Vite](https://vitejs.dev/guide/features.html#glob-import).
:::

#### Archivos Markdown

Los archivos Markdown tienen la siguiente interfaz:

```ts
export interface MarkdownInstance<T extends Record<string, any>> {
  /* Cualquier dato especificado en el frontmatter de YAML del archivo */
  frontmatter: T;
  /* La ruta del archivo */
  file: string;
  /* La ruta en donde se renderizar치 este archivo */
  url: string | undefined;
  /* Componente de Astro que renderizar치 el contenido del archivo */
  Content: AstroComponent;
  /* Funci칩n que devuelve un array de elementos h1...h6 del archivo */
  getHeadings(): Promise<{ depth: number; slug: string; text: string }[]>;
}
```

Opcionalmente, puedes proporcionar un tipo para la variable de `frontmatter` usando un tipo gen칠rico de TypeScript.

```astro
---
interface Frontmatter {
  title: string;
  description?: string;
}
const posts = await Astro.glob<Frontmatter>('../pages/post/*.md');
---

<ul>
  {posts.map(post => <li>{post.frontmatter.title}</li>)}
</ul>
```

#### Archivos Astro

Los archivos Astro tienen la siguiente interfaz:

```ts
export interface AstroInstance {
  default: AstroComponent;
}
```

#### Otros archivos

Otros archivos pueden tener varias interfaces diferentes, pero `Astro.glob()` acepta un gen칠rico de TypeScript si sabes exactamente qu칠 tipo contiene un archivo no reconocido.

```ts
---
interface CustomDataFile {
  default: Record<string, any>;
}
const data = await Astro.glob<CustomDataFile>('../data/**/*.js');
---
```

### `Astro.props`

`Astro.props` es un objeto que contiene cualquier valor que haya sido pasado como [atributo de componente](/es/core-concepts/astro-components/#props-de-componentes). Los componentes de plantilla para archivos `.md` y `.mdx` reciben valores de frontmatter como props.

```astro {3}
---
// ./src/components/Heading.astro
const { title, date } = Astro.props;
---
<div>
  <h1>{title}</h1>
  <p>{date}</p>
</div>
```

```astro /title=".+"/ /date=".+"/
---
// ./src/pages/index.astro
import Heading from '../components/Heading.astro';
---
<Heading title="Mi Primer Art칤culo" date="09 Ago 2022" />
```

游닄 Aprende acerca de c칩mo se manejan las props en las [Plantillas de Markdown y MDX](/es/guides/markdown-content/#layout-en-el-frontmatter).

游닄 Aprende c칩mo a침adir [definiciones de tipos de TypeScript para tus props](/es/guides/typescript/#props-de-componentes).

### `Astro.params`

`Astro.params` es un objeto que contiene los valores de segmentos de ruta din치mica que coincidan con esta petici칩n.

En builds est치ticos, esto ser치n los `params` devueltos por `getStaticPaths()` usados para prerrenderizar [rutas din치micas](/es/core-concepts/routing/#rutas-din치micas).

En builds SSR, esto puede ser cualquier valor que coincida con los segmentos de la ruta en el patr칩n de la ruta din치mica.

```astro title="src/pages/posts/[id].astro"
---
export function getStaticPaths() {
  return [
    { params: { id: '1' } },
    { params: { id: '2' } },
    { params: { id: '3' } }
  ];
}

const { id } = Astro.params;
---
<h1>{id}</h1>
```

Ver tambi칠n: [`params`](#params)

### `Astro.request`

`Astro.request` es un objeto [Request](https://developer.mozilla.org/es/docs/Web/API/Request) est치ndar. Se puede utilizar para obtener la `url`, `headers`, `method` e incluso el cuerpo de la solicitud.

```astro
<p>Recib칤 una solicitud {Astro.request.method} en "{Astro.request.url}".</p>
<p>Encabezados de solicitud recibidos:<code>{JSON.stringify(Object.fromEntries(Astro.request.headers))}</code>
```

Ver tambi칠n: [`Astro.url`](#astrourl)

:::note
Con la opci칩n por defecto `output: 'static'`, El objeto `Astro.request.url` no contiene par치metros de b칰squeda, tales como `?foo=bar`, ya que no es posible determinarlos por adelantado durante la compilaci칩n final de los archivos en builds est치ticos. Sin embargo, en el modo `output: 'server'`, el objeto `Astro.request.url` contiene los par치metros de b칰squeda debido a que pueden ser determinados desde una petici칩n al servidor.
:::

### `Astro.response`

`Astro.response`  es un objeto est치ndar `ResponseInit`. Tiene la siguiente estructura.

 - `status`: El c칩digo num칠rico de estado de la respuesta, p. ej. `200`.
 - `statusText`: El mensaje de estado asociado con el c칩digo de estado, p. ej. `'OK'`.
 - `headers`: Una instancia de [`Headers`](https://developer.mozilla.org/en-US/docs/Web/API/Headers) que puedes usar para establecer las cabeceras HTTP de la respuesta.

`Astro.response` se utiliza para establecer el `status`, `statusText` y `headers` de la respuesta de una p치gina.

```astro
---
if(condition) {
  Astro.response.status = 404;
  Astro.response.statusText = 'Not found';
}
---
```

O para establecer un header:

```astro
---
Astro.response.headers.set('Set-Cookie', 'a=b; Path=/;');
---
```

### `Astro.cookies`

<Since v="1.4.0" />

`Astro.cookies` contiene utilidades para leer y manipular cookies.

| Nombre    | Tipo                                                                                           | Descripci칩n                                                                                                                                                                                                                                                                           |
| :-------- | :--------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `get`     | `(key: string) => AstroCookie`                                                                 | Obtiene la cookie como un objeto [`AstroCookie`](#astrocookie), el cual contiene el `value` y funciones utilitarias para convertir la cookie en tipos no-string.                                                                                                                      |
| `has`     | `(key: string) => boolean`                                                                     | Indica si esta cookie existe. Si la cookie se ha establecido a trav칠s de `Astro.cookies.set()` esto retornar치 _true_, de lo contrario, comprobar치 las cookies en `Astro.request`.                                                                                                     |
| `set`     | `(key: string, value: string \| number \| boolean \| object, options?: CookieOptions) => void` | Establece el `key` de la cookie al valor dado. Esto intentar치 convertir el valor de la cookie en un _string_. _Options_ provee formas de establecer [caracter칤sticas de la cookie](https://www.npmjs.com/package/cookie#options-1), como el `maxAge` o `httpOnly`.                    |
| `delete`  | `(key: string, options?: CookieDeleteOptions) => void`                                         | Marca la cookie como eliminada. Una vez que se elimina una cookie `Astro.cookies.has()` retornar치 `false` y `Astro.cookies.get()` retornar치 [`AstroCookie`](#astrocookie) con un `value` de `undefined`. Options permite configurar el `domain` y el `path` de la cookie para borrar. |
| `headers` | `() => Iterator<string>`                                                                       | Obtiene los valores de _headers_ para `Set-Cookie` que se enviar치n con la respuesta.                                                                                                                                                                                                  |

#### `AstroCookie`

Obtener una cookie mediante `Astro.cookies.get()` retorna un tipo `AstroCookie`. Posee la siguiente estructura.

| Nombre    | Tipo                        | Descripci칩n                                                                                                                                 |
| :-------- | :-------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------ |
| `value`   | `string \| undefined`        | El valor de la cookie en formato string puro.                                                                                               |
| `json`    | `() => Record<string, any>` | Analiza el valor de la cookie a trav칠s de `JSON.parse()`, retornando un objeto. Arroja error si el valor de la cookie no es un JSON v치lido. |
| `number`  | `() => number`              | Analiza el valor de la cookie como un _Number_. Retorna NaN si no es un n칰mero v치lido.                                                      |
| `boolean` | `() => boolean`             | Convierte el valor de la cookie en un booleano.                                                                                             |

### `Astro.redirect()`
`Astro.redirect()` te permite redireccionar a otra p치gina.
Una p치gina (no un componente hijo) debe `return` (devolver) el resultado de `Astro.redirect()` para que la redirecci칩n ocurra.

```astro title="src/pages/account.astro" {8}
---
import { isLoggedIn } from '../utils';
const cookie = Astro.request.headers.get('cookie');
// Si el usuario no est치 logueado, redir칤gelo a la p치gina de login
if (!isLoggedIn(cookie)) {
  return Astro.redirect('/login');
}
---
```

### `Astro.canonicalURL`

:::caution[Obsoleto]
Utiliza [`Astro.url`](#astrourl) para construir tu propia URL can칩nica.
:::

La [URL can칩nica][canonical] de la p치gina actual.

### `Astro.url`

<Since v="1.0.0-rc" />

Un objeto [URL](https://developer.mozilla.org/es/docs/Web/API/URL) construido a partir del valor actual de la string URL `Astro.request.url`. 칔til para interactuar con propiedades individuales de la URL de la solicitud, como la ruta o el origen.

Equivalente a hacer `new URL (Astro.request.url)`.

```astro
<h1>La URL actual es: {Astro.url}</h1>
<h1>El nombre de la ruta URL actual es: {Astro.url.pathname}</h1>
<h1>El origen de la URL actual es: {Astro.url.origin}</h1>
```

Tambi칠n puedes usar `Astro.url` para crear nuevas URL pas치ndola como argumento a [`new URL()`](https://developer.mozilla.org/es/docs/Web/API/URL/URL).

```astro
---
// Ejemplo: construye una URL can칩nica usando tu dominio de producci칩n
const canonicalURL = new URL(Astro.url.pathname, Astro.site);
// Ejemplo: construye una URL para metaetiquetas SEO usando tu dominio actual
const socialImageURL = new URL('/images/preview.png', Astro.url);
---
<link rel="canonical" href={canonicalURL} />
<meta property="og:image" content={socialImageURL} />
```

### `Astro.clientAddress`

<Since v="1.0.0-rc" />

Especifica la [direcci칩n IP](https://es.wikipedia.org/wiki/Direcci%C3%B3n_IP) de la solicitud. Esta propiedad solo est치 disponible cuando se compila para SSR (renderizado en el servidor) y no debe usarse para sitios est치ticos.

```astro
---
const ip = Astro.clientAddress;
---

<div>Tu direcci칩n IP es: <span class="address">{ ip }</span></div>
```

### `Astro.site`

`Astro.site` devuelve una `URL` generada desde `site` en su configuraci칩n de Astro. Si `site`no esta definido en tu configuraci칩n Astro, `Astro.site` no estar치 definido.

### `Astro.generator`

<Since v="1.0.0" />

`Astro.generator` es una manera conveniente de agregar una etiqueta [`<meta name="generator">`](https://html.spec.whatwg.org/multipage/semantics.html#meta-generator) con tu versi칩n actual de Astro. Responde al formato `"Astro v1.x.x"`.

```astro mark="Astro.generator"
<html>
  <head>
    <meta name="generator" content={Astro.generator} />
  </head>
  <body>
    <footer>
      <p>Built with <a href="https://astro.build">{Astro.generator}</a></p>
    </footer>
  </body>
</html>
```

### `Astro.slots`

`Astro.slots` contiene funciones de utilidad para modificar los hijos en slots de un componente Astro.

#### `Astro.slots.has()`

**Tipo:** `(slotName: string) => boolean`

Puedes verificar si el contenido para un slot espec칤fico existe usando `Astro.slots.has()`. Esto puede ser 칰til cuando quieres envolver el contenido del slot, pero solo quieres renderizar los elementos envueltos cuando se est칠 usando el slot.

```astro
---
---
<slot />

{Astro.slots.has('more') && (
  <aside>
    <h2>More</h2>
    <slot name="more" />
  </aside>
)}
```

#### `Astro.slots.render()`

**Tipo:** `(slotName: string, args?: any[]) => Promise<string>`

Puedes renderizar de forma as칤ncrona el contenido de un slot a un string de HTML usando `Astro.slots.render()`.

```astro
---
const html = await Astro.slots.render('default');
---
<Fragment set:html={html} />
```

:::note
춰Esta nota es para casos de uso avanzados! En la mayor칤a de los casos, es m치s simple renderizar el contenido del slot con [el elemento `<slot />`](/es/core-concepts/astro-components/#slots).
:::

`Astro.slots.render()` opcionalmente acepta un segundo argumento: un array de par치metros que se enviar치n a cualquier funci칩n hija. Esto puede ser 칰til para componentes de utilidad personalizados.

Por ejemplo, este componente `<Shout />` convierte su prop `message` en may칰sculas y la pasa al slot predeterminado:

```astro title="src/components/Shout.astro" "await Astro.slots.render('default', [message])"
---
const message = Astro.props.message.toUpperCase();
let html = '';
if (Astro.slots.has('default')) {
  html = await Astro.slots.render('default', [message]);
}
---
<Fragment set:html={html} />
```

Una funci칩n callback pasada como hijo de `<Shout />` recibir치 el par치metro `message` en may칰sculas:

```astro title="src/pages/index.astro"
---
import Shout from "../components/Shout.astro";
---
<Shout message="slots!">
  {(message) => <div>{message}</div>}
</Shout>

<!-- renderiza como <div>SLOTS!</div> -->
```

### `Astro.self`

`Astro.self` permite llamar recursivamente a los componentes de Astro. Este comportamiento te permite renderizar un componente de Astro desde dentro de s칤 mismo utilizando `<Astro.self>` en la plantilla del componente. Esto puede ser 칰til para iterar sobre grandes data stores y estructuras de datos anidadas.

```astro
---
// NestedList.astro
const { items } = Astro.props;
---
<ul class="nested-list">
  {items.map((item) => (
    <li>
      <!-- Si hay una estructura de datos anidada renderizamos `<Astro.self>` -->
      <!-- y podemos pasar props a trav칠s de la llamada recursiva -->
      {Array.isArray(item) ? (
        <Astro.self items={item} />
      ) : (
        item
      )}
    </li>
  ))}
</ul>
```

Este componente podr칤a usarse as칤:

```astro
---
import NestedList from './NestedList.astro';
---
<NestedList items={['A', ['B', 'C'], 'D']} />
```

Y renderizar칤a este HTML:

```html
<ul class="nested-list">
  <li>A</li>
  <li>
    <ul class="nested-list">
      <li>B</li>
      <li>C</li>
    </ul>
  </li>
  <li>D</li>
</ul>
```

### `Astro.locals`

`Astro.locals` es un objeto que contiene cualquier valor del objeto [`context.locals`](#contextlocals) de un middleware. Utiliza esto para acceder a los datos devueltos por el middleware en tus archivos `.astro`.

```astro title="src/pages/Orders.astro"
---
const title = Astro.locals.welcomeTitle();
const orders = Array.from(Astro.locals.orders.entries());
---
<h1>{title}</h1>
<ul>
    {orders.map(order => {
        return <li>{/* hacer algo con cada pedido */}</li>
    })}
</ul>
```

## Contexto del Endpoint

[Las funciones de Endpoint](/es/core-concepts/endpoints/) reciben un objeto de contexto como primer par치metro. Posee muchas de las propiedades del objeto global `Astro`.

```ts title="endpoint.json.ts"
import type { APIContext } from 'astro';

export function GET(context: APIContext) {
  // ...
}
```

### `context.locals`

`context.locals` es un objeto utilizado para almacenar y acceder a informaci칩n arbitraria durante el ciclo de vida de una petici칩n.

Las funciones de middleware pueden leer y escribir los valores de `context.locals`:

```ts title="src/middleware.ts"
import type { MiddlewareResponseHandler } from 'astro';
export const onRequest: MiddlewareResponseHandler = ({ locals }, next) => {
  if (!locals.title) {
    locals.title = "T칤tulo por defecto";
  }
  return next();
}
```

Los endpoints de la API s칩lo pueden leer informaci칩n de `context.locals`.:

```ts title="src/pages/hello.ts"
import type { APIContext } from 'astro';

export function GET({ locals }: APIContext) {
  return {
    body: locals.title // "T칤tulo por defecto"
  }
}
```

Ver tambi칠n: [`Astro.locals`](#astrolocals)

### `context.params`

`context.params` es un objeto que contiene los valores de los segmentos de la ruta din치mica que coincidan con esta petici칩n.

En builds est치ticos, esto ser치n los `params` devueltos por `getStaticPaths()` usados para prerrenderizar [rutas din치micas](/es/core-concepts/routing/#rutas-din치micas).

En builds SSR, esto puede ser cualquier valor que coincida con los segmentos de la ruta en el patr칩n de la ruta din치mica.

```ts title="src/pages/posts/[id].json.ts"
import type { APIContext } from 'astro';

export function getStaticPaths() {
  return [
    { params: { id: '1' } },
    { params: { id: '2' } },
    { params: { id: '3' } }
  ];
}

export function GET({ params }: APIContext) {
  return {
    body: JSON.stringify({ id: params.id }),
  };
}
```

Ver tambi칠n: [`params`](#params)

### `context.props`

`context.props` es un objeto que contiene las `props` pasadas desde `getStaticPaths()`. Como `getStaticPaths()` no se utiliza durante la generaci칩n en SSR (server-side rendering), `context.props` solamente est치 disponible en builds est치ticos.

```ts title="src/pages/posts/[id].json.ts"
import type { APIContext } from 'astro';

export function getStaticPaths() {
  return [
    { params: { id: '1' }, props: { author: 'Blu' } },
    { params: { id: '2' }, props: { author: 'Erika' } },
    { params: { id: '3' }, props: { author: 'Matthew' } },
  ];
}

export function GET({ props }: APIContext) {
  return {
    body: JSON.stringify({ author: props.author }),
  };
}
```

Ver tambi칠n: [Transferencia de datos con `props`](#transferencia-de-datos-con-props)

### `context.request`

Un objeto [Request](https://developer.mozilla.org/es/docs/Web/API/Request) est치ndar. Puede ser usado para obtener la `url`, `headers`, `method` y tambi칠n el body de la petici칩n.

```ts
import type { APIContext } from 'astro';

export function GET({ request }: APIContext) {
  return {
    body: `Hola ${request.url}`,
  };
}
```

Ver tambi칠n: [Astro.request](#astrorequest)

### `context.cookies`

`context.cookies` contiene utilidades para leer y manipular cookies.

Ver tambi칠n: [Astro.cookies](#astrocookies)

### `context.url`

Un objeto [URL](https://developer.mozilla.org/es/docs/Web/API/URL) generado desde el valor actual de la string URL `context.request.url`.

Ver tambi칠n: [Astro.url](#astrourl)

### `context.clientAddress`

Especifica la [direcci칩n IP](https://es.wikipedia.org/wiki/Direcci칩n_IP) de la petici칩n. Esta propiedad solamente est치 disponible durante la generaci칩n en SSR (server-side rendering) y no debe ser utilizado en sitios est치ticos.

```ts
import type { APIContext } from 'astro';

export function GET({ clientAddress }: APIContext) {
  return {
    body: `Tu direcci칩n IP es: ${clientAddress}`,
  };
}
```

Ver tambi칠n: [Astro.clientAddress](#astroclientaddress)

### `context.site`

`context.site` devuelve una `URL` generada desde el `site` en tu configuraci칩n de Astro. Si no est치 definido, devolver치 una URL generada desde `localhost`.

Ver tambi칠n: [Astro.site](#astrosite)

### `context.generator`

`context.generator` es una manera conveniente de indicar la versi칩n de Astro que est칠 corriendo tu proyecto. Posee el formato `"Astro v1.x.x"`.

```ts title="src/pages/site-info.json.ts"
import type { APIContext } from 'astro';

export function GET({ generator, site }: APIContext) {
  const body = JSON.stringify({ generator, site });
  return new Response(body);
}
```

Ver tambi칠n: [Astro.generator](#astrogenerator)

### `context.redirect()`

`context.redirect()` devuelve un objeto [Response](https://developer.mozilla.org/es/docs/Web/API/Response) que te permite redirigir al usuario a otra p치gina. Esta funci칩n solamente est치 disponible durante la generaci칩n en SSR (server-side rendering) y no debe ser utilizado en sitios est치ticos.

```ts
import type { APIContext } from 'astro';

export function GET({ redirect }: APIContext) {
  return redirect('/login', 302);
}
```

Ver tambi칠n: [`Astro.redirect()`](#astroredirect)

## `getStaticPaths()`

Si una p치gina usa par치metros din치micos en el nombre del archivo, ese componente necesitar치 exportar una funci칩n `getStaticPaths()`.

Esta funci칩n es necesaria porque Astro es un creador de sitios est치ticos. Eso significa que todo su sitio se construye con anticipaci칩n. Si Astro no sabe generar una p치gina en el momento de la creaci칩n, sus usuarios no la ver치n cuando visiten tu sitio.

```astro
---
export async function getStaticPaths() {
  return [
    { params: { /* requerido */ }, props: { /* opcional */ } },
    { params: { ... } },
    { params: { ... } },
    // ...
  ];
}
---
<!-- Tu maquetado HTML aqu칤. -->
```

La funci칩n `getStaticPaths()` debe devolver un array de objetos para determinar qu칠 rutas ser치n prerenderizadas por Astro.

Tambi칠n puede ser usado en endpoints de archivo est치ticos para [enrutamiento din치mico](/es/core-concepts/endpoints/#params-y-enrutamiento-din치mico).

:::caution
La funci칩n `getStaticPaths()` se ejecuta en su propio 치mbito aislado una vez, antes de que se cargue cualquier p치gina. Por lo tanto, no puede hacer referencia a nada desde el 치mbito principal, aparte de las importaciones de archivos. El compilador le advertir치 si incumple este requisito.
:::

### `params`

La key `params` de cada objeto devuelto le dice a Astro qu칠 rutas construir. Los par치metros devueltos deben corresponder con los par치metros din치micos y los par치metros comod칤n definidos en la ruta de archivo de su componente.

Los `params` est치n codificados en la URL, por lo que solo se admiten strings como valores. El valor de cada objeto `params` debe coincidir con los par치metros utilizados en el nombre de la p치gina.

Por ejemplo, supongamos que tienes una p치gina en `src/pages/posts/[id].astro`. Si exportas `getStaticPaths` desde esta p치gina y devuelves lo siguiente para las rutas:

```astro
---
export async function getStaticPaths() {
  return [
    { params: { id: '1' } },
    { params: { id: '2' } },
    { params: { id: '3' } }
  ];
}

const { id } = Astro.params;
---
<h1>{id}</h1>
```

Luego, Astro generar치 est치ticamente `posts/1`, `posts/2` y `posts/3` en el momento de la compilaci칩n.

### Transferencia de datos con `props`

Para pasar datos adicionales a cada p치gina generada, tambi칠n puedes establecer un valor `props` en cada objeto de ruta devuelto. A diferencia de `params`, `props` no est치n codificados en la URL y, por lo tanto, no est치n limitados a solamente strings.

Por ejemplo, suponiendo que generas p치ginas basadas en datos obtenidos de una API remota. Puedes pasar el objeto de datos completo al componente de p치gina dentro de `getStaticPaths`:

```astro
---
export async function getStaticPaths() {
  const data = await fetch('...').then(response => response.json());

  return data.map((post) => {
    return {
      params: { id: post.id },
      props: { post },
    };
  });
}

const { id } = Astro.params;
const { post } = Astro.props;
---
<h1>{id}: {post.name}</h1>
```

Tambi칠n puedes pasar un array regular, que puede ser 칰til al generar o agregar una lista conocida de rutas.

```astro
---
export async function getStaticPaths() {
  const posts = [
    {id: '1', category: "astro", title: "API Reference"},
    {id: '2', category: "react", title: "Creating a React Counter!"}
  ];
  return posts.map((post) => {
    return {
      params: { id: post.id },
      props: { post }
    };
  });
}
const {id} = Astro.params;
const {post} = Astro.props;
---
<body>
  <h1>{id}: {post.title}</h1>
  <h2>Categor칤a: {post.category}</h2>
</body>
```

Luego, Astro generar치 est치ticamente `posts/1` y `posts/2` en el momento de la compilaci칩n usando el componente de p치gina en `pages/posts/[id].astro`. La p치gina puede hacer referencia a estos datos usando `Astro.props`:

### `paginate()`

La paginaci칩n es un caso de uso com칰n para los sitios web que Astro admite de forma nativa a trav칠s de la funci칩n `paginate()`. `paginate()` generar치 autom치ticamente un array para devolver desde `getStaticPaths()` que crear치 una URL para cada p치gina de la colecci칩n paginada. El n칰mero de p치gina se pasar치 como un par치metro, y los datos de la p치gina se pasar치n como una prop `page`.

```js
export async function getStaticPaths({ paginate }) {
  // Carga tus datos con fetch(), Astro.glob(), etc.
  const response = await fetch(`https://pokeapi.co/api/v2/pokemon?limit=150`);
  const result = await response.json();
  const allPokemon = result.results;

  // Devuelve una colecci칩n paginada de rutas para todos los art칤culos.
  return paginate(allPokemon, { pageSize: 10 });
}

// Si se configur칩 correctamente, La prop de la p치gina마hora tiene todo lo que
// necesita para renderizar una p치gina (mira la siguiente secci칩n).
const { page } = Astro.props;
```

`paginate()` asume un nombre de archivo `[page].astro` o `[...page].astro`. El par치metro `page` se convierte en el n칰mero de p치gina en la URL:

- `/posts/[page].astro` generar칤a las URL `/posts/1`, `/posts/2`, `/posts/3`, etc.
- `/posts/[...page].astro` generar칤a las URL `/posts`, `/posts/2`, `/posts/3`, etc.

#### La prop de paginaci칩n `page`

La paginaci칩n pasar치 una prop `page` a cada p치gina renderizada que represente una sola p치gina de datos en la colecci칩n paginada. Esto incluye los datos que ha paginado (`page.data`), as칤 como los metadatos de la p치gina (`page.url`, `page.start`, `page.end`, `page.total`, etc.). Estos metadatos son 칰tiles para cosas como un bot칩n "P치gina siguiente" o un mensaje "Mostrando 1-10 de 100".

| Nombre             |         Tipo          | Descripci칩n                                                                                                                                              |
| :----------------- | :-------------------: | :------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `page.data`        |        `Array`        | Array de datos devueltos desde `data()` para la p치gina actual.                                                                                           |
| `page.start`       |       `number`        | 칈ndice del primer elemento en la p치gina actual, comenzando en `0` (por ejemplo, si `pageSize: 25`, ser칤a `0` en la p치gina 1, `25` en la p치gina 2, etc.). |
| `page.end`         |       `number`        | 칈ndice del 칰ltimo elemento de la p치gina actual.                                                                                                          |
| `page.size`        |       `number`        | Cantidad de art칤culos por p치gina.                                                                                                                        |
| `page.total`       |       `number`        | El n칰mero total de elementos en todas las p치ginas.                                                                                                       |
| `page.currentPage` |       `number`        | El n칰mero de p치gina actual, comenzando con `1`.                                                                                                          |
| `page.lastPage`    |       `number`        | El n칰mero total de p치ginas.                                                                                                                              |
| `page.url.current` |       `string`        | La URL de la p치gina actual (칰til para URL can칩nicas)                                                                                                     |
| `page.url.prev`    | `string \| undefined` | La URL de la p치gina anterior (ser치 `undefined` si est치 en la p치gina 1).                                                                                  |
| `page.url.next`    | `string \| undefined` | La URL de la siguiente p치gina (ser치 `undefined` si no hay m치s p치ginas).                                                                                  |

## Colecciones de Contenido

<p>
  <Since v="2.0.0" />
</p>

Las colecciones de contenido ofrecen APIs para configurar y consultar tus documentos Markdown o MDX en `src/content/`. Para obtener caracter칤sticas y ejemplos de uso, [consulta nuestra gu칤a de colecciones de contenido](/es/guides/content-collections/).

### `defineCollection()`

`defineCollection()` es una utilidad para configurar una colecci칩n en un archivo `src/content/config.*`.

```ts
// src/content/config.ts
import { z, defineCollection } from 'astro:content';
const blog = defineCollection({
  type: 'content',
  schema: z.object({
    title: z.string(),
    permalink: z.string().optional(),
  }),
});
// Expone tu colecci칩n definida a Astro
// con el export `collections`
export const collections = { blog };
```

Esta funci칩n acepta las siguientes propiedades:

#### `type`

<Since v="2.5" />

**Tipo:** `'content' | 'data'`  
**Por defecto:** `'content'`

`type` es un string que define el tipo de entradas almacenadas dentro de una colecci칩n:

- `'content'` - para formatos de creaci칩n de contenido como Markdown (`.md`), MDX (`.mdx`) o Markdoc (`.mdoc`)
- `'data'` - para formatos de datos 칰nicamente como JSON (`.json`) o YAML (`.yaml`)

:::tip
Esto significa que las colecciones **no pueden** almacenar una mezcla de formatos de contenido y datos. Debes dividir estas entradas en colecciones separadas por tipo.
:::

#### `schema`

**Type:** `TSchema extends ZodType`

El `schema` es un objeto de Zod opcional para configurar el tipo y la forma del frontmatter del documento para una colecci칩n. Cada valor debe usar [un validador de Zod](https://github.com/colinhacks/zod).

[Consulta la gu칤a de `Colecci칩n de Contenido`](/es/guides/content-collections/#definiendo-un-esquema-de-colecci칩n) para ejemplos de uso.

### `reference()`

**Tipo:** `(collection: string) => ZodEffects<ZodString, { collection, id: string } | { collection, slug: string }>`

La funci칩n `reference()` se utiliza en la configuraci칩n del contenido para definir una relaci칩n, o "referencia" de una colecci칩n a otra. Esta funci칩n acepta el nombre de la colecci칩n y valida el identificador/es de entrada especificados en el frontmatter o archivo de datos del contenido.

Este ejemplo define referencias desde un autor de blog a la colecci칩n `authors` y a un arreglo de publicaciones relacionadas en la misma colecci칩n `blog`:

```ts
import { defineCollection, reference, z } from 'astro:content';
const blog = defineCollection({
  type: 'content',
  schema: z.object({
    // Hace referencia a un 칰nico autor de la colecci칩n `authors` mediante el campo `id`.
    author: reference('authors'),
    // Hace referencia a un arreglo de publicaciones relacionadas de la colecci칩n `blog` mediante el campo `slug`.
    relatedPosts: z.array(reference('blog')),
  })
});
const authors = defineCollection({
  type: 'data',
  schema: z.object({ /* ... */ })
});
export const collections = { blog, authors };
```

[Consulta la gu칤a de `Content Collection`](/es/guides/content-collections/#definiendo-referencias-de-colecci칩n) para ver un ejemplo de uso.

### `getCollection()`

**Type:** `(collection: string, filter?: (entry: CollectionEntry<collection>) => boolean) => CollectionEntry<collection>[]`

`getCollections()` es una funci칩n que recupera una lista de entradas de colecci칩n de contenido por nombre de colecci칩n.

Regresa todos los elementos en la colecci칩n por defecto, y acepta una funci칩n opcional `filter` para reducir por propiedades de entrada. Esto te permite consultar solo algunos elementos en una colecci칩n bas치ndose en `id`, `slug`, o valores de frontmatter a trav칠s del objeto `data`.

```astro
---
import { getCollection } from 'astro:content';
// Obtiene todas las entradas de `src/content/blog/`
const allBlogPosts = await getCollection('blog');
// Solo regresa art캶culos con `draft: true` en el frontmatter
const draftBlogPosts = await getCollection('blog', ({ data }) => {
  return data.draft === true;
});
---
```

[Consulta la secci칩n de gu칤a de `getCollection()`](/es/guides/content-collections/#consultando-colecciones) para ejemplos de uso completo.

### `getEntry()`

<p>
  <Since v="2.5.0" />
</p>

**Tipos:**

- `(collection: string, contentSlugOrDataId: string) => CollectionEntry<collection>`
- `({ collection: string, id: string }) => CollectionEntry<collection>`
- `({ collection: string, slug: string }) => CollectionEntry<collection>`

`getEntry()` es una funci칩n que recupera una 칰nica entrada de una colecci칩n mediante el nombre de la colecci칩n y ya sea el `id` de la entrada (para colecciones `type: 'data'`) o el `slug` de la entrada (para colecciones `type: 'content'`). `getEntry()` tambi칠n se puede utilizar para obtener las entradas referenciadas y acceder a las propiedades `data`, `body` o `render()`:

```astro
---
import { getEntry } from 'astro:content';
// Obtiene `src/content/blog/enterprise.md`
const enterprisePost = await getEntry('blog', 'enterprise');
// Obtiene `src/content/captains/picard.yaml`
const picardProfile = await getEntry('captains', 'picard');
// Obtener el perfil referenciado por `data.captain`
const enterpriseCaptainProfile = await getEntry(enterprise.data.captain);
---
```

Consulta la gu칤a de "Colecciones de Contenido" para ver ejemplos de [consulta de entradas de colecciones](/es/guides/content-collections/#consultando-colecciones).

### `getEntries()`

<p>
  <Since v="2.5" />
</p>

**Tipos:**

- `(Array<{ collection: string, id: string }>) => CollectionEntry<collection>`
- `(Array<{ collection: string, slug: string }>) => CollectionEntry<collection>`

`getEntries()` es una funci칩n que recupera m칰ltiples entradas de una misma colecci칩n. Esto es 칰til para [devolver un arreglo de entradas referenciadas](/es/guides/content-collections/#definiendo-referencias-de-colecci칩n) para acceder a sus propiedades asociadas `data`, `body` y `render()`.

```astro
---
import { getEntries } from 'astro:content';
const enterprisePost = await getEntry('blog', 'enterprise');
// Obtener las publicaciones relacionadas referenciadas por `data.relatedPosts`
const enterpriseRelatedPosts = await getEntries(enterprisePost.data.relatedPosts);
---
```

### `getEntryBySlug()`

**Tipo:** `(collection: string, slug: string) => CollectionEntry<collection>`

:::caution[Obsoleto]
Utiliza la [funci칩n `getEntry()`](#getentry) para consultar las entradas de contenido. Esta funci칩n acepta los mismos argumentos que `getEntryBySlug()`, y admite la consulta por `id` para colecciones JSON o YAML.
:::

`getEntryBySlug()` is a function that retrieves a single collection entry by collection name and entry `slug`.


```astro
---
import { getEntryBySlug } from 'astro:content';
const enterprise = await getEntryBySlug('blog', 'enterprise');
---
```
[Consulta la gu칤a `Content Collection`](/es/guides/content-collections/#consultando-colecciones) para ver un ejemplo de uso.

### Tipo de Entrada de la Colecci칩n

Las funciones de consulta, incluyendo [`getCollection()`](#getcollection), [`getEntry()`](#getentry) y [`getEntries()`](#getentries), devuelven entradas con el tipo `CollectionEntry`. Este tipo est치 disponible como una utilidad desde `astro:content`:

```ts
import type { CollectionEntry } from 'astro:content';

// Ejemplo: Recibe una entrada de `src/content/blog/` como props
type Props = CollectionEntry<'blog'>;
```

Una `CollectionEntry<TCollectionName>` es un objeto con los siguientes valores:

#### `id`

**Disponible para:** `type: 'content'` and `type: 'data'` collections  
**Tipos de ejemplo:**
  - colecciones de contenido: `'entry-1.md' | 'entry-2.md' | ...`
  - colecciones de datos: `'author-1' | 'author-2' | ...`

Un identificador 칰nico que usa la ruta de archivo relativa a `src/content/[collection]`. Enumera todos los posibles valores de cadena basados en las rutas de archivo de entrada de colecci칩n. Ten en cuenta que las colecciones [definidas como `type: 'content'`](#type) incluyen la extensi칩n de archivo en su ID, mientras que las colecciones definidas como `type: 'data'` no lo hacen.

#### `collection`

**Disponible para:** `type: 'content'` and `type: 'data'` collections  
**Tipo de ejemplo:** `'blog' | 'authors' | ...`

El nombre de una carpeta de nivel superior en `src/content/` en la cual se encuentran las entradas. Este es el nombre utilizado para hacer referencia a la colecci칩n en tu esquema y en las funciones de consulta.

#### `data`

**Disponible para:** `tipo: 'content'` y `tipo: collecciones 'data'`  
**Tipo:** `CollectionSchema<TCollectionName>`

Un objeto de propiedades de frontmatter inferidas de su esquema de colecci칩n ([ver referencia de `defineCollection()`](#definecollection)). Por defecto es `any` si no es configurado un esquema.

#### `slug`

**Disponible para:** `type: 'content'` collections only  
**Tipo de ejemplo:** `'entry-1' | 'entry-2' | ...`

Un slug listo para ser utilizado en una URL para documentos Markdown o MDX. Por defecto, se genera a partir del `id` sin la extensi칩n de archivo, pero se puede modificar estableciendo [la propiedad `slug`](/es/guides/content-collections/#definiendo-slugs-personalizados) en el frontmatter del archivo.

#### `body`

**Disponible para:** `tipo: 'content'` solo colecciones
**Tipo:** `string`

Un string que contiene el cuerpo sin compilar del documento Markdown o MDX.

#### `render()`

**Disponible para:** `type: 'content'` solo colecciones
**Tipo:** `() => Promise<RenderedEntry>`

Una funci칩n para compilar un documento Markdown o MDX dado para su renderizado. Regresa las siguientes propiedades:

- `<Content />` - Un componente usado para renderizar el contenido del documento en un archivo Astro.
- `headings` - Una lista generada de encabezados, [que refleja la utilidad `getHeadings()` de Astro](/es/guides/markdown-content/#propiedades-exportadas) en las importaciones de Markdown y MDX.
- `remarkPluginFrontmatter` - El objeto frontmatter es moficado despu칠s de aplicar los [plugins de remark o rehype ha sido aplicado](/es/guides/markdown-content/#modificaci칩n-program치tica-del-frontmatter). Configurado para el tipo `any`.

```astro
---
import { getEntry } from 'astro:content';
const entry = await getEntry('blog', 'entry-1.md');
const {Content, headings, remarkPluginFrontmatter} = await entry.render();
---
```

Ver [la gu칤a de renderizado de contenido de entrada](/es/guides/content-collections/) para ejemplos de uso completo.

### Otros tipos de colecciones de contenido

El m칩dulo `astro:content` tambi칠n exporta los siguientes tipos para su uso en tu proyecto Astro:

#### `CollectionKey`

Una uni칩n de strings de todos los nombres de colecciones definidos en tu archivo `src/content/config.*`. Este tipo puede ser 칰til al definir una funci칩n gen칠rica que acepta cualquier nombre de colecci칩n.

```ts
import type { CollectionKey, getCollection } from 'astro:content';

async function getCollection(collection: CollectionKey) {
  return getCollection(collection);
}
```

#### `ContentCollectionKey`

Una uni칩n de strings de todos los nombres de colecciones con `type: 'content'` definidos en tu archivo `src/content/config.*`.

#### `DataCollectionKey`

Una uni칩n de strings de todos los nombres de colecciones con `type: 'data'` definidos en tu archivo `src/content/config.*`.

#### `SchemaContext`

El objeto `context` que `defineCollection` utiliza para dar forma a la funci칩n de `schema`. Este tipo puede ser 칰til al construir esquemas reutilizables para m칰ltiples colecciones.

Incluye la siguiente propiedad:

- `image` - El helper de esquema `image()` que te permite [utilizar im치genes locales en colecciones de contenido](/es/guides/images/#im치genes-en-colecciones-de-contenido).

```ts
import type { SchemaContext } from 'astro:content';

export const imageSchema = ({ image }: SchemaContext) =>
    z.object({
        image: image(),
        description: z.string().optional(),
    });

const blog = defineCollection({
  type: 'content',
  schema: ({ image }) => z.object({
    title: z.string(),
    permalink: z.string().optional(),
    image: imageSchema({ image })
  }),
});
```

## `import.meta`

Todos los m칩dulos ESM incluyen una propiedad `import.meta`. Astro agrega `import.meta.env` a trav칠s de [Vite](https://vitejs.dev/guide/env-and-mode.html).

**`import.meta.env.SSR`** se puede usar para saber cu치ndo se renderiza en el servidor. A veces, es posible que desees una l칩gica diferente, por ejemplo, un componente que solo debe representarse en el cliente:

```jsx
export default function () {
  return import.meta.env.SSR ? <div class="spinner"></div> : <FancyComponent />;
}
```

## Componentes incorporados

Astro incluye varios componentes integrados que puedes usar en tus proyectos. Todos los componentes integrados est치n disponibles en archivos `.astro` a trav칠s de `import {} from 'astro:components';`.

### `<Code />`

```astro 'theme="dark-plus"' /wrap\b/ /(inline) \/>/
---
import { Code } from 'astro:components';
---
<!-- Resaltado de sintaxis de alg칰n c칩digo JavaScript. -->
<Code code={`const foo = 'bar';`} lang="js" />
<!-- Opcional: personaliza tu tema. -->
<Code code={`const foo = 'bar';`} lang="js" theme="dark-plus" />
<!-- Opcional: habilita css wrap -->
<Code code={`const foo = 'bar';`} lang="js" wrap />
<!-- Opcional: salida de c칩digo en l칤nea -->
<p>
  <Code code={`const foo = 'bar';`} lang="js" inline />
  will be rendered inline.
</p>
```

Este componente proporciona resaltado de sintaxis para bloques de c칩digo en el momento de la compilaci칩n (no incluye JavaScript del lado del cliente). El componente funciona internamente con Shiki y es compatible con todos los [temas populares](https://github.com/shikijs/shiki/blob/main/docs/themes.md) y [lenguajes de programaci칩n](https://github.com/shikijs/shiki/blob/main/docs/languages.md). Adem치s, puedes agregar temas y lenguajes de programaci칩n personalizados modificando `theme` y `lang` respectivamente.

### `<Prism />`

Para usar el componente resaltador `Prism`, primero **instala** el paquete `@astrojs/prism`:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm install @astrojs/prism
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm install @astrojs/prism
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn add @astrojs/prism
  ```
  </Fragment>
</PackageManagerTabs>

```astro
---
import { Prism } from '@astrojs/prism';
---
<Prism lang="js" code={`const foo = 'bar';`} />
```

Este componente proporciona resaltado de sintaxis espec칤fico con el lenguaje de programaci칩n para bloques de c칩digo al aplicar las clases CSS de Prism. Ten en cuenta que **debes proporcionar una hoja de estilo Prism CSS** (o traer la tuya propia) para que aparezca el resaltado de sintaxis. Consulta la [secci칩n de configuraci칩n de Prism](/es/guides/markdown-content/#configuraci칩n-de-prism) para obtener m치s detalles.

Consulta la [lista de idiomas admitidos por Prism](https://prismjs.com/#supported-languages) donde puedes encontrar el alias correspondiente de un idioma. 춰Y tambi칠n puedes mostrar tus bloques de c칩digo Astro con `lang="astro"`!

### `<Debug />`

```astro
---
import { Debug } from 'astro:components';
const serverObject = {
  a: 0,
  b: "string",
  c: {
    nested: "object"
  }
}
---
<Debug {serverObject} />
```

Este componente proporciona una forma de inspeccionar valores en el lado del cliente, sin JavaScript.

[canonical]: https://en.wikipedia.org/wiki/Canonical_link_element
